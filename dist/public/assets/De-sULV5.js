var t,e,n,r,i,s,o,a,c,l,u,d,h,f,m,p,g,w,y,v,b,x,N,k,M,A,E,S,C,T,I,O,P,j,D,z,_,R,B,$,U,F,L,W,V,q,K,H,Y,Z,G,Q,X,J,tt,et,nt,rt,it,st,ot,at,ct,lt,ut,dt,ht,ft,mt,pt,gt,wt,yt,vt=Object.defineProperty,bt=t=>{throw TypeError(t)},xt=(t,e,n)=>((t,e,n)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n),Nt=(t,e,n)=>e.has(t)||bt("Cannot "+n),kt=(t,e,n)=>(Nt(t,e,"read from private field"),n?n.call(t):e.get(t)),Mt=(t,e,n)=>e.has(t)?bt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),At=(t,e,n,r)=>(Nt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Et=(t,e,n)=>(Nt(t,e,"access private method"),n),St=(t,e,n,r)=>({set t(r){At(t,e,r,n)},get t(){return kt(t,e,r)}});import{r as Ct,a as Tt,R as It,b as Ot,d as Pt,c as jt,e as Dt,g as zt}from"./B54hodkj.js";import{r as _t,_ as Rt,a as Bt,b as $t}from"./Dv1NZsrr.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)}).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var Ut={exports:{}},Ft={},Lt=Ct,Wt=Symbol.for("react.element"),Vt=Symbol.for("react.fragment"),qt=Object.prototype.hasOwnProperty,Kt=Lt.i.ReactCurrentOwner,Ht={key:!0,ref:!0,o:!0,u:!0};function Yt(t,e,n){var r,i={},s=null,o=null;for(r in void 0!==n&&(s=""+n),void 0!==e.key&&(s=""+e.key),void 0!==e.ref&&(o=e.ref),e)qt.call(e,r)&&!Ht.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:Wt,type:t,key:s,ref:o,props:i,N:Kt.current}}Ft.Fragment=Vt,Ft.jsx=Yt,Ft.jsxs=Yt,Ut.exports=Ft;var Zt,Gt=Ut.exports,Qt=Tt;Zt=Qt.createRoot,Qt.hydrateRoot;var Xt={exports:{}},Jt={},te=Ct,ee="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},ne=te.useState,re=te.useEffect,ie=te.useLayoutEffect,se=te.useDebugValue;function oe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ee(t,n)}catch(r){return!0}}var ae="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=ne({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return ie(function(){i.value=n,i.getSnapshot=e,oe(i)&&s({inst:i})},[t,n,e]),re(function(){return oe(i)&&s({inst:i}),t(function(){oe(i)&&s({inst:i})})},[t]),se(n),n};Jt.useSyncExternalStore=void 0!==te.useSyncExternalStore?te.useSyncExternalStore:ae,Xt.exports=Jt;var ce=Xt.exports;const le=It.useInsertionEffect,ue="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Ct.useLayoutEffect:Ct.useEffect,de=le||ue,he=t=>{const e=Ct.useRef([t,(...t)=>e[0](...t)]).current;return de(()=>{e[0]=t}),e[1]},fe="pushState",me="replaceState",pe=["popstate",fe,me,"hashchange"],ge=t=>{for(const e of pe)addEventListener(e,t);return()=>{for(const e of pe)removeEventListener(e,t)}},we=(t,e)=>ce.useSyncExternalStore(ge,t,e),ye=()=>location.search,ve=()=>location.pathname,be=({ssrPath:t}={})=>we(ve,t?()=>t:ve),xe=(t,{replace:e=!1,state:n=null}={})=>history[e?me:fe](n,"",t),Ne=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[Ne]){for(const t of[fe,me]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Ne,{value:!0})}const ke=(t="")=>"/"===t?"":t,Me=(t="",e)=>((t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/")(Ae(ke(t)),Ae(e)),Ae=t=>{try{return decodeURI(t)}catch(e){return t}},Ee={hook:(t={})=>[be(t),xe],searchHook:({ssrSearch:t=""}={})=>we(ye,()=>t),parser:function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,s,o=[],a="",c=t.split("/");for(c[0]||c.shift();i=c.shift();)"*"===(n=i[0])?(o.push(n),a+="?"===i[1]?"(?:/(.*))?":"/(.*)"):":"===n?(r=i.indexOf("?",1),s=i.indexOf(".",1),o.push(i.substring(1,~r?r:~s?s:i.length)),a+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(a+=(~r?"?":"")+"\\"+i.substring(s))):a+="/"+i;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}},base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},Se=Ct.createContext(Ee),Ce=()=>Ct.useContext(Se),Te={},Ie=Ct.createContext(Te),Oe=()=>Ct.useContext(Ie),Pe=t=>{const[e,n]=t.hook(t);return[Me(t.base,e),he((e,r)=>n(((t,e)=>"~"===t[0]?t.slice(1):ke(e)+t)(e,t.base),r))]},je=()=>Pe(Ce()),De=(t,e,n,r)=>{const{pattern:i,keys:s}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=i.exec(n)||[],[a,...c]=o;return void 0!==a?[!0,(()=>{const t=!1!==s?Object.fromEntries(s.map((t,e)=>[t,c[e]])):o.groups;let e={...c};return t&&Object.assign(e,t),e})(),...r?[a]:[]]:[!1,null]},ze=({children:t,...e})=>{var n,r;const i=Ce(),s=e.hook?Ee:i;let o=s;const[a,c]=(null==(n=e.ssrPath)?void 0:n.split("?"))??[];c&&(e.ssrSearch=c,e.ssrPath=a),e.hrefs=e.hrefs??(null==(r=e.hook)?void 0:r.hrefs);let l=Ct.useRef({}),u=l.current,d=u;for(let h in s){const t="base"===h?s[h]+(e[h]||""):e[h]||s[h];u===d&&t!==d[h]&&(l.current=d={...d}),d[h]=t,t===s[h]&&t===o[h]||(o=d)}return Ct.createElement(Se.Provider,{value:o,children:t})},_e=({children:t,component:e},n)=>e?Ct.createElement(e,{params:n}):"function"==typeof t?t(n):t,Re=({path:t,nest:e,match:n,...r})=>{const i=Ce(),[s]=Pe(i),[o,a,c]=n??De(i.parser,t,s,e),l=(t=>{let e=Ct.useRef(Te);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([t,e])=>e!==n[t])?t:n})({...Oe(),...a});if(!o)return null;const u=c?Ct.createElement(ze,{base:c},_e(r,l)):_e(r,l);return Ct.createElement(Ie.Provider,{value:l,children:u})},Be=Ct.forwardRef((t,e)=>{const n=Ce(),[r,i]=Pe(n),{to:s="",href:o=s,onClick:a,asChild:c,children:l,className:u,replace:d,state:h,...f}=t,m=he(e=>{e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||0!==e.button||(null==a||a(e),e.defaultPrevented||(e.preventDefault(),i(o,t)))}),p=n.hrefs("~"===o[0]?o.slice(1):n.base+o,n);return c&&Ct.isValidElement(l)?Ct.cloneElement(l,{onClick:m,href:p}):Ct.createElement("a",{...f,onClick:m,href:p,className:(null==u?void 0:u.call)?u(r===o):u,children:l,ref:e})}),$e=t=>Array.isArray(t)?t.flatMap(t=>$e(t&&t.type===Ct.Fragment?t.props.children:t)):[t],Ue=({children:t,location:e})=>{const n=Ce(),[r]=Pe(n);for(const i of $e(t)){let t=0;if(Ct.isValidElement(i)&&(t=De(n.parser,i.props.path,e||r,i.props.nest))[0])return Ct.cloneElement(i,{match:t})}return null};var Fe=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Le="undefined"==typeof window||"Deno"in globalThis;function We(){}function Ve(t){return"number"==typeof t&&t>=0&&t!==1/0}function qe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ke(t,e){return"function"==typeof t?t(e):t}function He(t,e){return"function"==typeof t?t(e):t}function Ye(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o)if(r){if(e.queryHash!==Ge(o,e.options))return!1}else if(!Xe(e.queryKey,o))return!1;if("all"!==n){const t=e.isActive();if("active"===n&&!t)return!1;if("inactive"===n&&t)return!1}return!("boolean"==typeof a&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function Ze(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Qe(e.options.mutationKey)!==Qe(s))return!1}else if(!Xe(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Ge(t,e){return((null==e?void 0:e.queryKeyHashFn)||Qe)(t)}function Qe(t){return JSON.stringify(t,(t,e)=>nn(e)?Object.keys(e).sort().reduce((t,n)=>(t[n]=e[n],t),{}):e)}function Xe(t,e){return t===e||typeof t==typeof e&&!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some(n=>!Xe(t[n],e[n]))}function Je(t,e){if(t===e)return t;const n=en(t)&&en(e);if(n||nn(t)&&nn(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{};let c=0;for(let l=0;l<o;l++){const i=n?l:s[l];(!n&&r.includes(i)||n)&&void 0===t[i]&&void 0===e[i]?(a[i]=void 0,c++):(a[i]=Je(t[i],e[i]),a[i]===t[i]&&void 0!==t[i]&&c++)}return i===o&&c===i?t:a}return e}function tn(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function en(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function nn(t){if(!rn(t))return!1;const e=t.constructor;if(void 0===e)return!0;const n=e.prototype;return!!rn(n)&&!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype}function rn(t){return"[object Object]"===Object.prototype.toString.call(t)}function sn(t,e,n){return"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?Je(t,e):e}function on(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function an(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var cn=Symbol();function ln(t,e){return!t.queryFn&&(null==e?void 0:e.initialPromise)?()=>e.initialPromise:t.queryFn&&t.queryFn!==cn?t.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`))}var un=new(r=class extends Fe{constructor(){super(),Mt(this,t),Mt(this,e),Mt(this,n),At(this,n,t=>{if(!Le&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){kt(this,e)||this.setEventListener(kt(this,n))}onUnsubscribe(){var t;this.hasListeners()||(null==(t=kt(this,e))||t.call(this),At(this,e,void 0))}setEventListener(t){var r;At(this,n,t),null==(r=kt(this,e))||r.call(this),At(this,e,t(t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(e){kt(this,t)!==e&&(At(this,t,e),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var e;return"boolean"==typeof kt(this,t)?kt(this,t):"hidden"!==(null==(e=globalThis.document)?void 0:e.visibilityState)}},t=new WeakMap,e=new WeakMap,n=new WeakMap,r),dn=new(a=class extends Fe{constructor(){super(),Mt(this,i,!0),Mt(this,s),Mt(this,o),At(this,o,t=>{if(!Le&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){kt(this,s)||this.setEventListener(kt(this,o))}onUnsubscribe(){var t;this.hasListeners()||(null==(t=kt(this,s))||t.call(this),At(this,s,void 0))}setEventListener(t){var e;At(this,o,t),null==(e=kt(this,s))||e.call(this),At(this,s,t(this.setOnline.bind(this)))}setOnline(t){kt(this,i)!==t&&(At(this,i,t),this.listeners.forEach(e=>{e(t)}))}isOnline(){return kt(this,i)}},i=new WeakMap,s=new WeakMap,o=new WeakMap,a);function hn(){let t,e;const n=new Promise((n,r)=>{t=n,e=r});function r(t){Object.assign(n,t),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=e=>{r({status:"fulfilled",value:e}),t(e)},n.reject=t=>{r({status:"rejected",reason:t}),e(t)},n}function fn(t){return Math.min(1e3*2**t,3e4)}function mn(t){return"online"!==(t??"online")||dn.isOnline()}var pn=class extends Error{constructor(t){super("CancelledError"),this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}};function gn(t){return t instanceof pn}function wn(t){let e,n=!1,r=0,i=!1;const s=hn(),o=()=>un.isFocused()&&("always"===t.networkMode||dn.isOnline())&&t.canRun(),a=()=>mn(t.networkMode)&&t.canRun(),c=n=>{var r;i||(i=!0,null==(r=t.onSuccess)||r.call(t,n),null==e||e(),s.resolve(n))},l=n=>{var r;i||(i=!0,null==(r=t.onError)||r.call(t,n),null==e||e(),s.reject(n))},u=()=>new Promise(n=>{var r;e=t=>{(i||o())&&n(t)},null==(r=t.onPause)||r.call(t)}).then(()=>{var n;e=void 0,i||null==(n=t.onContinue)||n.call(t)}),d=()=>{if(i)return;let e;const s=0===r?t.initialPromise:void 0;try{e=s??t.fn()}catch(a){e=Promise.reject(a)}Promise.resolve(e).then(c).catch(e=>{var s;if(i)return;const a=t.retry??(Le?0:3),c=t.retryDelay??fn,h="function"==typeof c?c(r,e):c,f=!0===a||"number"==typeof a&&r<a||"function"==typeof a&&a(r,e);var m;!n&&f?(r++,null==(s=t.onFail)||s.call(t,r,e),(m=h,new Promise(t=>{setTimeout(t,m)})).then(()=>o()?void 0:u()).then(()=>{n?l(e):d()})):l(e)})};return{promise:s,cancel:e=>{var n;i||(l(new pn(e)),null==(n=t.abort)||n.call(t))},continue:()=>(null==e||e(),s),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:a,start:()=>(a()?d():u().then(d),s)}}var yn=function(){let t=[],e=0,n=t=>{t()},r=t=>{t()},i=t=>setTimeout(t,0);const s=r=>{e?t.push(r):i(()=>{n(r)})};return{batch:s=>{let o;e++;try{o=s()}finally{e--,e||(()=>{const e=t;t=[],e.length&&i(()=>{r(()=>{e.forEach(t=>{n(t)})})})})()}return o},batchCalls:t=>(...e)=>{s(()=>{t(...e)})},schedule:s,setNotifyFunction:t=>{n=t},setBatchNotifyFunction:t=>{r=t},setScheduler:t=>{i=t}}}(),vn=(l=class{constructor(){Mt(this,c)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ve(this.gcTime)&&At(this,c,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Le?1/0:3e5))}clearGcTimeout(){kt(this,c)&&(clearTimeout(kt(this,c)),At(this,c,void 0))}},c=new WeakMap,l),bn=(y=class extends vn{constructor(t){super(),Mt(this,g),Mt(this,u),Mt(this,d),Mt(this,h),Mt(this,f),Mt(this,m),Mt(this,p),At(this,p,!1),At(this,m,t.defaultOptions),this.setOptions(t.options),this.observers=[],At(this,h,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,At(this,u,function(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==e,r=n?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=t.state??kt(this,u),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return null==(t=kt(this,f))?void 0:t.promise}setOptions(t){this.options={...kt(this,m),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||kt(this,h).remove(this)}setData(t,e){const n=sn(this.state.data,t,this.options);return Et(this,g,w).call(this,{data:n,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),n}setState(t,e){Et(this,g,w).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var e,n;const r=null==(e=kt(this,f))?void 0:e.promise;return null==(n=kt(this,f))||n.cancel(t),r?r.then(We).catch(We):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(kt(this,u))}isActive(){return this.observers.some(t=>!1!==He(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===cn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(t=0){return this.state.isInvalidated||void 0===this.state.data||!qe(this.state.dataUpdatedAt,t)}onFocus(){var t;const e=this.observers.find(t=>t.shouldFetchOnWindowFocus());null==e||e.refetch({cancelRefetch:!1}),null==(t=kt(this,f))||t.continue()}onOnline(){var t;const e=this.observers.find(t=>t.shouldFetchOnReconnect());null==e||e.refetch({cancelRefetch:!1}),null==(t=kt(this,f))||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),kt(this,h).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(kt(this,f)&&(kt(this,p)?kt(this,f).cancel({revert:!0}):kt(this,f).cancelRetry()),this.scheduleGc()),kt(this,h).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Et(this,g,w).call(this,{type:"invalidate"})}fetch(t,e){var n,r,i;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==e?void 0:e.cancelRefetch))this.cancel({silent:!0});else if(kt(this,f))return kt(this,f).continueRetry(),kt(this,f).promise;if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}const s=new AbortController,o=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(At(this,p,!0),s.signal)})},a={fetchOptions:e,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const t=ln(this.options,e),n={queryKey:this.queryKey,meta:this.meta};return o(n),At(this,p,!1),this.options.persister?this.options.persister(t,n,this):t(n)}};o(a),null==(n=this.options.behavior)||n.onFetch(a,this),At(this,d,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=a.fetchOptions)?void 0:r.meta)||Et(this,g,w).call(this,{type:"fetch",meta:null==(i=a.fetchOptions)?void 0:i.meta});const c=t=>{var e,n,r,i;gn(t)&&t.silent||Et(this,g,w).call(this,{type:"error",error:t}),gn(t)||(null==(n=(e=kt(this,h).config).onError)||n.call(e,t,this),null==(i=(r=kt(this,h).config).onSettled)||i.call(r,this.state.data,t,this)),this.scheduleGc()};return At(this,f,wn({initialPromise:null==e?void 0:e.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:t=>{var e,n,r,i;if(void 0!==t){try{this.setData(t)}catch(s){return void c(s)}null==(n=(e=kt(this,h).config).onSuccess)||n.call(e,t,this),null==(i=(r=kt(this,h).config).onSettled)||i.call(r,t,this.state.error,this),this.scheduleGc()}else c(new Error(`${this.queryHash} data is undefined`))},onError:c,onFail:(t,e)=>{Et(this,g,w).call(this,{type:"failed",failureCount:t,error:e})},onPause:()=>{Et(this,g,w).call(this,{type:"pause"})},onContinue:()=>{Et(this,g,w).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),kt(this,f).start()}},u=new WeakMap,d=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakMap,g=new WeakSet,w=function(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...xn(e.data,this.options),fetchMeta:t.meta??null};case"success":return{...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return gn(n)&&n.revert&&kt(this,d)?{...kt(this,d),fetchStatus:"idle"}:{...e,error:n,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),yn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),kt(this,h).notify({query:this,type:"updated",action:t})})},y);function xn(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mn(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}var Nn=(b=class extends Fe{constructor(t={}){super(),Mt(this,v),this.config=t,At(this,v,new Map)}build(t,e,n){const r=e.queryKey,i=e.queryHash??Ge(r,e);let s=this.get(i);return s||(s=new bn({cache:this,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){kt(this,v).has(t.queryHash)||(kt(this,v).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=kt(this,v).get(t.queryHash);e&&(t.destroy(),e===t&&kt(this,v).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return kt(this,v).get(t)}getAll(){return[...kt(this,v).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(t=>Ye(e,t))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(e=>Ye(t,e)):e}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){yn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},v=new WeakMap,b),kn=(E=class extends vn{constructor(t){super(),Mt(this,M),Mt(this,x),Mt(this,N),Mt(this,k),this.mutationId=t.mutationId,At(this,N,t.mutationCache),At(this,x,[]),this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){kt(this,x).includes(t)||(kt(this,x).push(t),this.clearGcTimeout(),kt(this,N).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){At(this,x,kt(this,x).filter(e=>e!==t)),this.scheduleGc(),kt(this,N).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){kt(this,x).length||("pending"===this.state.status?this.scheduleGc():kt(this,N).remove(this))}continue(){var t;return(null==(t=kt(this,k))?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var e,n,r,i,s,o,a,c,l,u,d,h,f,m,p,g,w,y,v,b;At(this,k,wn({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(t,e)=>{Et(this,M,A).call(this,{type:"failed",failureCount:t,error:e})},onPause:()=>{Et(this,M,A).call(this,{type:"pause"})},onContinue:()=>{Et(this,M,A).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>kt(this,N).canRun(this)}));const x="pending"===this.state.status,E=!kt(this,k).canStart();try{if(!x){Et(this,M,A).call(this,{type:"pending",variables:t,isPaused:E}),await(null==(n=(e=kt(this,N).config).onMutate)?void 0:n.call(e,t,this));const s=await(null==(i=(r=this.options).onMutate)?void 0:i.call(r,t));s!==this.state.context&&Et(this,M,A).call(this,{type:"pending",context:s,variables:t,isPaused:E})}const f=await kt(this,k).start();return await(null==(o=(s=kt(this,N).config).onSuccess)?void 0:o.call(s,f,t,this.state.context,this)),await(null==(c=(a=this.options).onSuccess)?void 0:c.call(a,f,t,this.state.context)),await(null==(u=(l=kt(this,N).config).onSettled)?void 0:u.call(l,f,null,this.state.variables,this.state.context,this)),await(null==(h=(d=this.options).onSettled)?void 0:h.call(d,f,null,t,this.state.context)),Et(this,M,A).call(this,{type:"success",data:f}),f}catch(S){try{throw await(null==(m=(f=kt(this,N).config).onError)?void 0:m.call(f,S,t,this.state.context,this)),await(null==(g=(p=this.options).onError)?void 0:g.call(p,S,t,this.state.context)),await(null==(y=(w=kt(this,N).config).onSettled)?void 0:y.call(w,void 0,S,this.state.variables,this.state.context,this)),await(null==(b=(v=this.options).onSettled)?void 0:b.call(v,void 0,S,t,this.state.context)),S}finally{Et(this,M,A).call(this,{type:"error",error:S})}}finally{kt(this,N).runNext(this)}}},x=new WeakMap,N=new WeakMap,k=new WeakMap,M=new WeakSet,A=function(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),yn.batch(()=>{kt(this,x).forEach(e=>{e.onMutationUpdate(t)}),kt(this,N).notify({mutation:this,type:"updated",action:t})})},E),Mn=(T=class extends Fe{constructor(t={}){super(),Mt(this,S),Mt(this,C),this.config=t,At(this,S,new Map),At(this,C,Date.now())}build(t,e,n){const r=new kn({mutationCache:this,mutationId:++St(this,C).t,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){const e=An(t),n=kt(this,S).get(e)??[];n.push(t),kt(this,S).set(e,n),this.notify({type:"added",mutation:t})}remove(t){var e;const n=An(t);if(kt(this,S).has(n)){const r=null==(e=kt(this,S).get(n))?void 0:e.filter(e=>e!==t);r&&(0===r.length?kt(this,S).delete(n):kt(this,S).set(n,r))}this.notify({type:"removed",mutation:t})}canRun(t){var e;const n=null==(e=kt(this,S).get(An(t)))?void 0:e.find(t=>"pending"===t.state.status);return!n||n===t}runNext(t){var e;const n=null==(e=kt(this,S).get(An(t)))?void 0:e.find(e=>e!==t&&e.state.isPaused);return(null==n?void 0:n.continue())??Promise.resolve()}clear(){yn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...kt(this,S).values()].flat()}find(t){const e={exact:!0,...t};return this.getAll().find(t=>Ze(e,t))}findAll(t={}){return this.getAll().filter(e=>Ze(t,e))}notify(t){yn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(t=>t.state.isPaused);return yn.batch(()=>Promise.all(t.map(t=>t.continue().catch(We))))}},S=new WeakMap,C=new WeakMap,T);function An(t){var e;return(null==(e=t.options.scope)?void 0:e.id)??String(t.mutationId)}function En(t){return{onFetch:(e,n)=>{var r,i,s,o,a;const c=e.options,l=null==(s=null==(i=null==(r=e.fetchOptions)?void 0:r.meta)?void 0:i.fetchMore)?void 0:s.direction,u=(null==(o=e.state.data)?void 0:o.pages)||[],d=(null==(a=e.state.data)?void 0:a.pageParams)||[];let h={pages:[],pageParams:[]},f=0;const m=async()=>{let n=!1;const r=ln(e.options,e.fetchOptions),i=async(t,i,s)=>{if(n)return Promise.reject();if(null==i&&t.pages.length)return Promise.resolve(t);const o={queryKey:e.queryKey,pageParam:i,direction:s?"backward":"forward",meta:e.options.meta};var a;a=o,Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(e.signal.aborted?n=!0:e.signal.addEventListener("abort",()=>{n=!0}),e.signal)});const c=await r(o),{maxPages:l}=e.options,u=s?an:on;return{pages:u(t.pages,c,l),pageParams:u(t.pageParams,i,l)}};if(l&&u.length){const t="backward"===l,e={pages:u,pageParams:d},n=(t?Cn:Sn)(c,e);h=await i(e,n,t)}else{const e=t??u.length;do{const t=0===f?d[0]??c.initialPageParam:Sn(c,h);if(f>0&&null==t)break;h=await i(h,t),f++}while(f<e)}return h};e.options.persister?e.fetchFn=()=>{var t,r;return null==(r=(t=e.options).persister)?void 0:r.call(t,m,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=m}}}function Sn(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Cn(t,{pages:e,pageParams:n}){var r;return e.length>0?null==(r=t.getPreviousPageParam)?void 0:r.call(t,e[0],e,n[0],n):void 0}var Tn=(B=class{constructor(t={}){Mt(this,I),Mt(this,O),Mt(this,P),Mt(this,j),Mt(this,D),Mt(this,z),Mt(this,_),Mt(this,R),At(this,I,t.queryCache||new Nn),At(this,O,t.mutationCache||new Mn),At(this,P,t.defaultOptions||{}),At(this,j,new Map),At(this,D,new Map),At(this,z,0)}mount(){St(this,z).t++,1===kt(this,z)&&(At(this,_,un.subscribe(async t=>{t&&(await this.resumePausedMutations(),kt(this,I).onFocus())})),At(this,R,dn.subscribe(async t=>{t&&(await this.resumePausedMutations(),kt(this,I).onOnline())})))}unmount(){var t,e;St(this,z).t--,0===kt(this,z)&&(null==(t=kt(this,_))||t.call(this),At(this,_,void 0),null==(e=kt(this,R))||e.call(this),At(this,R,void 0))}isFetching(t){return kt(this,I).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return kt(this,O).findAll({...t,status:"pending"}).length}getQueryData(t){var e;const n=this.defaultQueryOptions({queryKey:t});return null==(e=kt(this,I).get(n.queryHash))?void 0:e.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(void 0===e)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=kt(this,I).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Ke(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return kt(this,I).findAll(t).map(({queryKey:t,state:e})=>[t,e.data])}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=kt(this,I).get(r.queryHash),s=function(t,e){return"function"==typeof t?t(e):t}(e,null==i?void 0:i.state.data);if(void 0!==s)return kt(this,I).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return yn.batch(()=>kt(this,I).findAll(t).map(({queryKey:t})=>[t,this.setQueryData(t,e,n)]))}getQueryState(t){var e;const n=this.defaultQueryOptions({queryKey:t});return null==(e=kt(this,I).get(n.queryHash))?void 0:e.state}removeQueries(t){const e=kt(this,I);yn.batch(()=>{e.findAll(t).forEach(t=>{e.remove(t)})})}resetQueries(t,e){const n=kt(this,I),r={type:"active",...t};return yn.batch(()=>(n.findAll(t).forEach(t=>{t.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=yn.batch(()=>kt(this,I).findAll(t).map(t=>t.cancel(n)));return Promise.all(r).then(We).catch(We)}invalidateQueries(t={},e={}){return yn.batch(()=>{if(kt(this,I).findAll(t).forEach(t=>{t.invalidate()}),"none"===t.refetchType)return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(null==e?void 0:e.cancelRefetch)??!0},r=yn.batch(()=>kt(this,I).findAll(t).filter(t=>!t.isDisabled()).map(t=>{let e=t.fetch(void 0,n);return n.throwOnError||(e=e.catch(We)),"paused"===t.state.fetchStatus?Promise.resolve():e}));return Promise.all(r).then(We)}fetchQuery(t){const e=this.defaultQueryOptions(t);void 0===e.retry&&(e.retry=!1);const n=kt(this,I).build(this,e);return n.isStaleByTime(Ke(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(We).catch(We)}fetchInfiniteQuery(t){return t.behavior=En(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(We).catch(We)}ensureInfiniteQueryData(t){return t.behavior=En(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return dn.isOnline()?kt(this,O).resumePausedMutations():Promise.resolve()}getQueryCache(){return kt(this,I)}getMutationCache(){return kt(this,O)}getDefaultOptions(){return kt(this,P)}setDefaultOptions(t){At(this,P,t)}setQueryDefaults(t,e){kt(this,j).set(Qe(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...kt(this,j).values()];let n={};return e.forEach(e=>{Xe(t,e.queryKey)&&(n={...n,...e.defaultOptions})}),n}setMutationDefaults(t,e){kt(this,D).set(Qe(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...kt(this,D).values()];let n={};return e.forEach(e=>{Xe(t,e.mutationKey)&&(n={...n,...e.defaultOptions})}),n}defaultQueryOptions(t){if(t.S)return t;const e={...kt(this,P).queries,...this.getQueryDefaults(t.queryKey),...t,S:!0};return e.queryHash||(e.queryHash=Ge(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.throwOnError&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),!0!==e.enabled&&e.queryFn===cn&&(e.enabled=!1),e}defaultMutationOptions(t){return(null==t?void 0:t.S)?t:{...kt(this,P).mutations,...(null==t?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,S:!0}}clear(){kt(this,I).clear(),kt(this,O).clear()}},I=new WeakMap,O=new WeakMap,P=new WeakMap,j=new WeakMap,D=new WeakMap,z=new WeakMap,_=new WeakMap,R=new WeakMap,B),In=(ut=class extends Fe{constructor(t,e){super(),Mt(this,tt),Mt(this,$),Mt(this,U),Mt(this,F),Mt(this,L),Mt(this,W),Mt(this,V),Mt(this,q),Mt(this,K),Mt(this,H),Mt(this,Y),Mt(this,Z),Mt(this,G),Mt(this,Q),Mt(this,X),Mt(this,J,new Set),this.options=e,At(this,$,t),At(this,K,null),At(this,q,hn()),this.options.experimental_prefetchInRender||kt(this,q).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(kt(this,U).addObserver(this),On(kt(this,U),this.options)?Et(this,tt,et).call(this):this.updateResult(),Et(this,tt,st).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Pn(kt(this,U),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Pn(kt(this,U),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Et(this,tt,ot).call(this),Et(this,tt,at).call(this),kt(this,U).removeObserver(this)}setOptions(t,e){const n=this.options,r=kt(this,U);if(this.options=kt(this,$).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof He(this.options.enabled,kt(this,U)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Et(this,tt,ct).call(this),kt(this,U).setOptions(this.options),n.S&&!tn(this.options,n)&&kt(this,$).getQueryCache().notify({type:"observerOptionsUpdated",query:kt(this,U),observer:this});const i=this.hasListeners();i&&jn(kt(this,U),r,this.options,n)&&Et(this,tt,et).call(this),this.updateResult(e),!i||kt(this,U)===r&&He(this.options.enabled,kt(this,U))===He(n.enabled,kt(this,U))&&Ke(this.options.staleTime,kt(this,U))===Ke(n.staleTime,kt(this,U))||Et(this,tt,nt).call(this);const s=Et(this,tt,rt).call(this);!i||kt(this,U)===r&&He(this.options.enabled,kt(this,U))===He(n.enabled,kt(this,U))&&s===kt(this,X)||Et(this,tt,it).call(this,s)}getOptimisticResult(t){const e=kt(this,$).getQueryCache().build(kt(this,$),t),n=this.createResult(e,t);return r=n,!tn(this.getCurrentResult(),r)&&(At(this,L,n),At(this,V,this.options),At(this,W,kt(this,U).state)),n;var r}getCurrentResult(){return kt(this,L)}trackResult(t,e){const n={};return Object.keys(t).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),null==e||e(r),t[r])})}),n}trackProp(t){kt(this,J).add(t)}getCurrentQuery(){return kt(this,U)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=kt(this,$).defaultQueryOptions(t),n=kt(this,$).getQueryCache().build(kt(this,$),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return Et(this,tt,et).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),kt(this,L)))}createResult(t,e){var n;const r=kt(this,U),i=this.options,s=kt(this,L),o=kt(this,W),a=kt(this,V),c=t!==r?t.state:kt(this,F),{state:l}=t;let u,d={...l},h=!1;if(e.I){const n=this.hasListeners(),s=!n&&On(t,e),o=n&&jn(t,r,e,i);(s||o)&&(d={...d,...xn(l.data,t.options)}),"isRestoring"===e.I&&(d.fetchStatus="idle")}let{error:f,errorUpdatedAt:m,status:p}=d;if(e.select&&void 0!==d.data)if(s&&d.data===(null==o?void 0:o.data)&&e.select===kt(this,H))u=kt(this,Y);else try{At(this,H,e.select),u=e.select(d.data),u=sn(null==s?void 0:s.data,u,e),At(this,Y,u),At(this,K,null)}catch(N){At(this,K,N)}else u=d.data;if(void 0!==e.placeholderData&&void 0===u&&"pending"===p){let t;if((null==s?void 0:s.isPlaceholderData)&&e.placeholderData===(null==a?void 0:a.placeholderData))t=s.data;else if(t="function"==typeof e.placeholderData?e.placeholderData(null==(n=kt(this,Z))?void 0:n.state.data,kt(this,Z)):e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),At(this,K,null)}catch(N){At(this,K,N)}void 0!==t&&(p="success",u=sn(null==s?void 0:s.data,t,e),h=!0)}kt(this,K)&&(f=kt(this,K),u=kt(this,Y),m=Date.now(),p="error");const g="fetching"===d.fetchStatus,w="pending"===p,y="error"===p,v=w&&g,b=void 0!==u,x={status:p,fetchStatus:d.fetchStatus,isPending:w,isSuccess:"success"===p,isError:y,isInitialLoading:v,isLoading:v,data:u,dataUpdatedAt:d.dataUpdatedAt,error:f,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:g,isRefetching:g&&!w,isLoadingError:y&&!b,isPaused:"paused"===d.fetchStatus,isPlaceholderData:h,isRefetchError:y&&b,isStale:Dn(t,e),refetch:this.refetch,promise:kt(this,q)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===x.status?t.reject(x.error):void 0!==x.data&&t.resolve(x.data)},n=()=>{const t=At(this,q,x.promise=hn());e(t)},i=kt(this,q);switch(i.status){case"pending":t.queryHash===r.queryHash&&e(i);break;case"fulfilled":"error"!==x.status&&x.data===i.value||n();break;case"rejected":"error"===x.status&&x.error===i.reason||n()}}return x}updateResult(t){const e=kt(this,L),n=this.createResult(kt(this,U),this.options);if(At(this,W,kt(this,U).state),At(this,V,this.options),void 0!==kt(this,W).data&&At(this,Z,kt(this,U)),tn(n,e))return;At(this,L,n);const r={};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!kt(this,J).size)return!0;const r=new Set(n??kt(this,J));return this.options.throwOnError&&r.add("error"),Object.keys(kt(this,L)).some(t=>{const n=t;return kt(this,L)[n]!==e[n]&&r.has(n)})})()&&(r.listeners=!0),Et(this,tt,lt).call(this,{...r,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Et(this,tt,st).call(this)}},$=new WeakMap,U=new WeakMap,F=new WeakMap,L=new WeakMap,W=new WeakMap,V=new WeakMap,q=new WeakMap,K=new WeakMap,H=new WeakMap,Y=new WeakMap,Z=new WeakMap,G=new WeakMap,Q=new WeakMap,X=new WeakMap,J=new WeakMap,tt=new WeakSet,et=function(t){Et(this,tt,ct).call(this);let e=kt(this,U).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(We)),e},nt=function(){Et(this,tt,ot).call(this);const t=Ke(this.options.staleTime,kt(this,U));if(Le||kt(this,L).isStale||!Ve(t))return;const e=qe(kt(this,L).dataUpdatedAt,t);At(this,G,setTimeout(()=>{kt(this,L).isStale||this.updateResult()},e+1))},rt=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(kt(this,U)):this.options.refetchInterval)??!1},it=function(t){Et(this,tt,at).call(this),At(this,X,t),!Le&&!1!==He(this.options.enabled,kt(this,U))&&Ve(kt(this,X))&&0!==kt(this,X)&&At(this,Q,setInterval(()=>{(this.options.refetchIntervalInBackground||un.isFocused())&&Et(this,tt,et).call(this)},kt(this,X)))},st=function(){Et(this,tt,nt).call(this),Et(this,tt,it).call(this,Et(this,tt,rt).call(this))},ot=function(){kt(this,G)&&(clearTimeout(kt(this,G)),At(this,G,void 0))},at=function(){kt(this,Q)&&(clearInterval(kt(this,Q)),At(this,Q,void 0))},ct=function(){const t=kt(this,$).getQueryCache().build(kt(this,$),this.options);if(t===kt(this,U))return;const e=kt(this,U);At(this,U,t),At(this,F,t.state),this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))},lt=function(t){yn.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(kt(this,L))}),kt(this,$).getQueryCache().notify({query:kt(this,U),type:"observerResultsUpdated"})})},ut);function On(t,e){return function(t,e){return!1!==He(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&Pn(t,e,e.refetchOnMount)}function Pn(t,e,n){if(!1!==He(e.enabled,t)){const r="function"==typeof n?n(t):n;return"always"===r||!1!==r&&Dn(t,e)}return!1}function jn(t,e,n,r){return(t!==e||!1===He(r.enabled,t))&&(!n.suspense||"error"!==t.state.status)&&Dn(t,n)}function Dn(t,e){return!1!==He(e.enabled,t)&&t.isStaleByTime(Ke(e.staleTime,t))}var zn=(yt=class extends Fe{constructor(t,e){super(),Mt(this,pt),Mt(this,dt),Mt(this,ht),Mt(this,ft),Mt(this,mt),At(this,dt,t),this.setOptions(e),this.bindMethods(),Et(this,pt,gt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const n=this.options;this.options=kt(this,dt).defaultMutationOptions(t),tn(this.options,n)||kt(this,dt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:kt(this,ft),observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&Qe(n.mutationKey)!==Qe(this.options.mutationKey)?this.reset():"pending"===(null==(e=kt(this,ft))?void 0:e.state.status)&&kt(this,ft).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||null==(t=kt(this,ft))||t.removeObserver(this)}onMutationUpdate(t){Et(this,pt,gt).call(this),Et(this,pt,wt).call(this,t)}getCurrentResult(){return kt(this,ht)}reset(){var t;null==(t=kt(this,ft))||t.removeObserver(this),At(this,ft,void 0),Et(this,pt,gt).call(this),Et(this,pt,wt).call(this)}mutate(t,e){var n;return At(this,mt,e),null==(n=kt(this,ft))||n.removeObserver(this),At(this,ft,kt(this,dt).getMutationCache().build(kt(this,dt),this.options)),kt(this,ft).addObserver(this),kt(this,ft).execute(t)}},dt=new WeakMap,ht=new WeakMap,ft=new WeakMap,mt=new WeakMap,pt=new WeakSet,gt=function(){var t;const e=(null==(t=kt(this,ft))?void 0:t.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};At(this,ht,{...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},wt=function(t){yn.batch(()=>{var e,n,r,i,s,o,a,c;if(kt(this,mt)&&this.hasListeners()){const l=kt(this,ht).variables,u=kt(this,ht).context;"success"===(null==t?void 0:t.type)?(null==(n=(e=kt(this,mt)).onSuccess)||n.call(e,t.data,l,u),null==(i=(r=kt(this,mt)).onSettled)||i.call(r,t.data,null,l,u)):"error"===(null==t?void 0:t.type)&&(null==(o=(s=kt(this,mt)).onError)||o.call(s,t.error,l,u),null==(c=(a=kt(this,mt)).onSettled)||c.call(a,void 0,t.error,l,u))}this.listeners.forEach(t=>{t(kt(this,ht))})})},yt),_n=Ct.createContext(void 0),Rn=t=>{const e=Ct.useContext(_n);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Bn=({client:t,children:e})=>(Ct.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),Gt.jsx(_n.Provider,{value:t,children:e})),$n=Ct.createContext(!1);$n.Provider;var Un=Ct.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}());function Fn(t,e){return"function"==typeof t?t(...e):!!t}function Ln(){}var Wn=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Vn(t,e){return function(t,e){var n,r,i,s,o;const a=Rn(),c=Ct.useContext($n),l=Ct.useContext(Un),u=a.defaultQueryOptions(t);null==(r=null==(n=a.getDefaultOptions().queries)?void 0:n.O)||r.call(n,u),u.I=c?"isRestoring":"optimistic",(t=>{t.suspense&&(void 0===t.staleTime&&(t.staleTime=1e3),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3)))})(u),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(u,l),(t=>{Ct.useEffect(()=>{t.clearReset()},[t])})(l);const d=!a.getQueryCache().get(u.queryHash),[h]=Ct.useState(()=>new e(a,u)),f=h.getOptimisticResult(u);if(Ct.useSyncExternalStore(Ct.useCallback(t=>{const e=c?Ln:h.subscribe(yn.batchCalls(t));return h.updateResult(),e},[h,c]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),Ct.useEffect(()=>{h.setOptions(u,{listeners:!1})},[u,h]),((t,e)=>(null==t?void 0:t.suspense)&&e.isPending)(u,f))throw Wn(u,h,l);if((({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&Fn(n,[t.error,r]))({result:f,errorResetBoundary:l,throwOnError:u.throwOnError,query:a.getQueryCache().get(u.queryHash)}))throw f.error;if(null==(s=null==(i=a.getDefaultOptions().queries)?void 0:i.P)||s.call(i,u,f),u.experimental_prefetchInRender&&!Le&&((t,e)=>t.isLoading&&t.isFetching&&!e)(f,c)){const t=d?Wn(u,h,l):null==(o=a.getQueryCache().get(u.queryHash))?void 0:o.promise;null==t||t.catch(Ln).finally(()=>{h.updateResult()})}return u.notifyOnChangeProps?f:h.trackResult(f)}(t,In)}function qn(t,e){const n=Rn(),[r]=Ct.useState(()=>new zn(n,t));Ct.useEffect(()=>{r.setOptions(t)},[r,t]);const i=Ct.useSyncExternalStore(Ct.useCallback(t=>r.subscribe(yn.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=Ct.useCallback((t,e)=>{r.mutate(t,e).catch(Ln)},[r]);if(i.error&&Fn(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:s,mutateAsync:i.mutate}}async function Kn(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Hn(t,e,n){let r=null;if("undefined"!=typeof window&&window.__getDynamicToken)try{r=await window.__getDynamicToken()}catch(s){}if(!r&&"undefined"!=typeof window&&window.getAuthToken)try{r=window.getAuthToken()}catch(s){}const i=await fetch(e,{method:t,headers:{...n?{"Content-Type":"application/json"}:{},...r?{Authorization:`Bearer ${r}`}:{}},body:n?JSON.stringify(n):void 0,credentials:"include"});return await Kn(i),i}const Yn=new Tn({defaultOptions:{queries:{queryFn:(({on401:t})=>async({queryKey:e})=>{const n="undefined"!=typeof window&&window.__getDynamicToken?await window.__getDynamicToken():null,r=await fetch(e.join("/"),{credentials:"include",headers:{...n?{Authorization:`Bearer ${n}`}:{}}});return"returnNull"===t&&401===r.status?null:(await Kn(r),await r.json())})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});let Zn=0;const Gn=new Map,Qn=t=>{if(Gn.has(t))return;const e=setTimeout(()=>{Gn.delete(t),er({type:"REMOVE_TOAST",toastId:t})},1e6);Gn.set(t,e)},Xn=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Qn(n):t.toasts.forEach(t=>{Qn(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===n||void 0===n?{...t,open:!1}:t)}}case"REMOVE_TOAST":return void 0===e.toastId?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},Jn=[];let tr={toasts:[]};function er(t){tr=Xn(tr,t),Jn.forEach(t=>{t(tr)})}function nr({...t}){const e=(Zn=(Zn+1)%Number.MAX_SAFE_INTEGER,Zn.toString()),n=()=>er({type:"DISMISS_TOAST",toastId:e});return er({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:t=>{t||n()}}}),{id:e,dismiss:n,update:t=>er({type:"UPDATE_TOAST",toast:{...t,id:e}})}}function rr(){const[t,e]=Ct.useState(tr);return Ct.useEffect(()=>(Jn.push(e),()=>{const t=Jn.indexOf(e);t>-1&&Jn.splice(t,1)}),[t]),{...t,toast:nr,dismiss:t=>er({type:"DISMISS_TOAST",toastId:t})}}function ir(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==t||t(r),!1===n||!r.defaultPrevented)return null==e?void 0:e(r)}}function sr(t,e){if("function"==typeof t)return t(e);null!=t&&(t.current=e)}function or(...t){return e=>{let n=!1;const r=t.map(t=>{const r=sr(t,e);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let e=0;e<r.length;e++){const n=r[e];"function"==typeof n?n():sr(t[e],null)}}}}function ar(...t){return Ct.useCallback(or(...t),t)}function cr(t,e=[]){let n=[];const r=()=>{const e=n.map(t=>Ct.createContext(t));return function(n){const r=(null==n?void 0:n[t])||e;return Ct.useMemo(()=>({[`__scope${t}`]:{...n,[t]:r}}),[n,r])}};return r.scopeName=t,[function(e,r){const i=Ct.createContext(r),s=n.length;n=[...n,r];const o=e=>{var n;const{scope:r,children:o,...a}=e,c=(null==(n=null==r?void 0:r[t])?void 0:n[s])||i,l=Ct.useMemo(()=>a,Object.values(a));return Gt.jsx(c.Provider,{value:l,children:o})};return o.displayName=e+"Provider",[o,function(n,o){var a;const c=(null==(a=null==o?void 0:o[t])?void 0:a[s])||i,l=Ct.useContext(c);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${e}\``)}]},lr(r,...e)]}function lr(...t){const e=t[0];if(1===t.length)return e;const n=()=>{const n=t.map(t=>({useScope:t(),scopeName:t.scopeName}));return function(t){const r=n.reduce((e,{useScope:n,scopeName:r})=>({...e,...n(t)[`__scope${r}`]}),{});return Ct.useMemo(()=>({[`__scope${e.scopeName}`]:r}),[r])}};return n.scopeName=e.scopeName,n}function ur(t){const e=hr(t),n=Ct.forwardRef((t,n)=>{const{children:r,...i}=t,s=Ct.Children.toArray(r),o=s.find(pr);if(o){const t=o.props.children,r=s.map(e=>e===o?Ct.Children.count(t)>1?Ct.Children.only(null):Ct.isValidElement(t)?t.props.children:null:e);return Gt.jsx(e,{...i,ref:n,children:Ct.isValidElement(t)?Ct.cloneElement(t,void 0,r):null})}return Gt.jsx(e,{...i,ref:n,children:r})});return n.displayName=`${t}.Slot`,n}var dr=ur("Slot");function hr(t){const e=Ct.forwardRef((t,e)=>{const{children:n,...r}=t;if(Ct.isValidElement(n)){const t=function(t){var e,n;let r=null==(e=Object.getOwnPropertyDescriptor(t.props,"ref"))?void 0:e.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?t.ref:(r=null==(n=Object.getOwnPropertyDescriptor(t,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}(n),i=function(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...t)=>{s(...t),i(...t)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}(r,n.props);return n.type!==Ct.Fragment&&(i.ref=e?or(e,t):t),Ct.cloneElement(n,i)}return Ct.Children.count(n)>1?Ct.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fr=Symbol("radix.slottable");function mr(t){const e=({children:t})=>Gt.jsx(Gt.Fragment,{children:t});return e.displayName=`${t}.Slottable`,e.j=fr,e}function pr(t){return Ct.isValidElement(t)&&"function"==typeof t.type&&"j"in t.type&&t.type.j===fr}function gr(t){const e=t+"CollectionProvider",[n,r]=cr(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=t=>{const{scope:e,children:n}=t,r=Ot.useRef(null),s=Ot.useRef(new Map).current;return Gt.jsx(i,{scope:e,itemMap:s,collectionRef:r,children:n})};o.displayName=e;const a=t+"CollectionSlot",c=ur(a),l=Ot.forwardRef((t,e)=>{const{scope:n,children:r}=t,i=ar(e,s(a,n).collectionRef);return Gt.jsx(c,{ref:i,children:r})});l.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=ur(u),f=Ot.forwardRef((t,e)=>{const{scope:n,children:r,...i}=t,o=Ot.useRef(null),a=ar(e,o),c=s(u,n);return Ot.useEffect(()=>(c.itemMap.set(o,{ref:o,...i}),()=>{c.itemMap.delete(o)})),Gt.jsx(h,{[d]:"",ref:a,children:r})});return f.displayName=u,[{Provider:o,Slot:l,ItemSlot:f},function(e){const n=s(t+"CollectionConsumer",e);return Ot.useCallback(()=>{const t=n.collectionRef.current;if(!t)return[];const e=Array.from(t.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort((t,n)=>e.indexOf(t.ref.current)-e.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},r]}var wr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((t,e)=>{const n=ur(`Primitive.${e}`),r=Ct.forwardRef((t,r)=>{const{asChild:i,...s}=t,o=i?n:e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),Gt.jsx(o,{...s,ref:r})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function yr(t,e){t&&Tt.flushSync(()=>t.dispatchEvent(e))}function vr(t){const e=Ct.useRef(t);return Ct.useEffect(()=>{e.current=t}),Ct.useMemo(()=>(...t)=>{var n;return null==(n=e.current)?void 0:n.call(e,...t)},[])}var br,xr="dismissableLayer.update",Nr=Ct.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kr=Ct.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...c}=t,l=Ct.useContext(Nr),[u,d]=Ct.useState(null),h=(null==u?void 0:u.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,f]=Ct.useState({}),m=ar(e,t=>d(t)),p=Array.from(l.layers),[g]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),w=p.indexOf(g),y=u?p.indexOf(u):-1,v=l.layersWithOutsidePointerEventsDisabled.size>0,b=y>=w,x=function(t,e=(null==globalThis?void 0:globalThis.document)){const n=vr(t),r=Ct.useRef(!1),i=Ct.useRef(()=>{});return Ct.useEffect(()=>{const t=t=>{if(t.target&&!r.current){let r=function(){Er("dismissableLayer.pointerDownOutside",n,s,{discrete:!0})};const s={originalEvent:t};"touch"===t.pointerType?(e.removeEventListener("click",i.current),i.current=r,e.addEventListener("click",i.current,{once:!0})):r()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",t)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",t),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}(t=>{const e=t.target,n=[...l.branches].some(t=>t.contains(e));b&&!n&&(null==i||i(t),null==o||o(t),t.defaultPrevented||null==a||a())},h),N=function(t,e=(null==globalThis?void 0:globalThis.document)){const n=vr(t),r=Ct.useRef(!1);return Ct.useEffect(()=>{const t=t=>{t.target&&!r.current&&Er("dismissableLayer.focusOutside",n,{originalEvent:t},{discrete:!1})};return e.addEventListener("focusin",t),()=>e.removeEventListener("focusin",t)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(t=>{const e=t.target;[...l.branches].some(t=>t.contains(e))||(null==s||s(t),null==o||o(t),t.defaultPrevented||null==a||a())},h);return function(t,e=(null==globalThis?void 0:globalThis.document)){const n=vr(t);Ct.useEffect(()=>{const t=t=>{"Escape"===t.key&&n(t)};return e.addEventListener("keydown",t,{capture:!0}),()=>e.removeEventListener("keydown",t,{capture:!0})},[n,e])}(t=>{y===l.layers.size-1&&(null==r||r(t),!t.defaultPrevented&&a&&(t.preventDefault(),a()))},h),Ct.useEffect(()=>{if(u)return n&&(0===l.layersWithOutsidePointerEventsDisabled.size&&(br=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Ar(),()=>{n&&1===l.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=br)}},[u,h,n,l]),Ct.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Ar())},[u,l]),Ct.useEffect(()=>{const t=()=>f({});return document.addEventListener(xr,t),()=>document.removeEventListener(xr,t)},[]),Gt.jsx(wr.div,{...c,ref:m,style:{pointerEvents:v?b?"auto":"none":void 0,...t.style},onFocusCapture:ir(t.onFocusCapture,N.onFocusCapture),onBlurCapture:ir(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ir(t.onPointerDownCapture,x.onPointerDownCapture)})});kr.displayName="DismissableLayer";var Mr=Ct.forwardRef((t,e)=>{const n=Ct.useContext(Nr),r=Ct.useRef(null),i=ar(e,r);return Ct.useEffect(()=>{const t=r.current;if(t)return n.branches.add(t),()=>{n.branches.delete(t)}},[n.branches]),Gt.jsx(wr.div,{...t,ref:i})});function Ar(){const t=new CustomEvent(xr);document.dispatchEvent(t)}function Er(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?yr(i,s):i.dispatchEvent(s)}Mr.displayName="DismissableLayerBranch";var Sr=kr,Cr=Mr,Tr=(null==globalThis?void 0:globalThis.document)?Ct.useLayoutEffect:()=>{},Ir=Ct.forwardRef((t,e)=>{var n;const{container:r,...i}=t,[s,o]=Ct.useState(!1);Tr(()=>o(!0),[]);const a=r||s&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return a?Pt.createPortal(Gt.jsx(wr.div,{...i,ref:e}),a):null});Ir.displayName="Portal";var Or=t=>{const{present:e,children:n}=t,r=function(t){const[e,n]=Ct.useState(),r=Ct.useRef({}),i=Ct.useRef(t),s=Ct.useRef("none"),o=t?"mounted":"unmounted",[a,c]=function(t,e){return Ct.useReducer((t,n)=>e[t][n]??t,t)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return Ct.useEffect(()=>{const t=Pr(r.current);s.current="mounted"===a?t:"none"},[a]),Tr(()=>{const e=r.current,n=i.current;if(n!==t){const r=s.current,o=Pr(e);t?c("MOUNT"):"none"===o||"none"===(null==e?void 0:e.display)?c("UNMOUNT"):c(n&&r!==o?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),Tr(()=>{if(e){let t;const n=e.ownerDocument.defaultView??window,o=s=>{const o=Pr(r.current).includes(s.animationName);if(s.target===e&&o&&(c("ANIMATION_END"),!i.current)){const r=e.style.animationFillMode;e.style.animationFillMode="forwards",t=n.setTimeout(()=>{"forwards"===e.style.animationFillMode&&(e.style.animationFillMode=r)})}},a=t=>{t.target===e&&(s.current=Pr(r.current))};return e.addEventListener("animationstart",a),e.addEventListener("animationcancel",o),e.addEventListener("animationend",o),()=>{n.clearTimeout(t),e.removeEventListener("animationstart",a),e.removeEventListener("animationcancel",o),e.removeEventListener("animationend",o)}}c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:Ct.useCallback(t=>{t&&(r.current=getComputedStyle(t)),n(t)},[])}}(e),i="function"==typeof n?n({present:r.isPresent}):Ct.Children.only(n),s=ar(r.ref,function(t){var e,n;let r=null==(e=Object.getOwnPropertyDescriptor(t.props,"ref"))?void 0:e.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?t.ref:(r=null==(n=Object.getOwnPropertyDescriptor(t,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?t.props.ref:t.props.ref||t.ref)}(i));return"function"==typeof n||r.isPresent?Ct.cloneElement(i,{ref:s}):null};function Pr(t){return(null==t?void 0:t.animationName)||"none"}function jr({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=function({defaultProp:t,onChange:e}){const n=Ct.useState(t),[r]=n,i=Ct.useRef(r),s=vr(e);return Ct.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}({defaultProp:e,onChange:n}),s=void 0!==t,o=s?t:r,a=vr(n);return[o,Ct.useCallback(e=>{if(s){const n="function"==typeof e?e(t):e;n!==t&&a(n)}else i(e)},[s,t,i,a])]}Or.displayName="Presence";var Dr=Ct.forwardRef((t,e)=>Gt.jsx(wr.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Dr.displayName="VisuallyHidden";var zr=Dr,_r="ToastProvider",[Rr,Br,$r]=gr("Toast"),[Ur,Fr]=cr("Toast",[$r]),[Lr,Wr]=Ur(_r),Vr=t=>{const{_:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,c]=Ct.useState(null),[l,u]=Ct.useState(0),d=Ct.useRef(!1),h=Ct.useRef(!1);return n.trim(),Gt.jsx(Rr.Provider,{scope:e,children:Gt.jsx(Lr,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:Ct.useCallback(()=>u(t=>t+1),[]),onToastRemove:Ct.useCallback(()=>u(t=>t-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};Vr.displayName=_r;var qr="ToastViewport",Kr=["F8"],Hr="toast.viewportPause",Yr="toast.viewportResume",Zr=Ct.forwardRef((t,e)=>{const{_:n,hotkey:r=Kr,label:i="Notifications ({hotkey})",...s}=t,o=Wr(qr,n),a=Br(n),c=Ct.useRef(null),l=Ct.useRef(null),u=Ct.useRef(null),d=Ct.useRef(null),h=ar(e,d,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;Ct.useEffect(()=>{const t=t=>{var e;0!==r.length&&r.every(e=>t[e]||t.code===e)&&(null==(e=d.current)||e.focus())};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[r]),Ct.useEffect(()=>{const t=c.current,e=d.current;if(m&&t&&e){const n=()=>{if(!o.isClosePausedRef.current){const t=new CustomEvent(Hr);e.dispatchEvent(t),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const t=new CustomEvent(Yr);e.dispatchEvent(t),o.isClosePausedRef.current=!1}},i=e=>{!t.contains(e.relatedTarget)&&r()},s=()=>{t.contains(document.activeElement)||r()};return t.addEventListener("focusin",n),t.addEventListener("focusout",i),t.addEventListener("pointermove",n),t.addEventListener("pointerleave",s),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{t.removeEventListener("focusin",n),t.removeEventListener("focusout",i),t.removeEventListener("pointermove",n),t.removeEventListener("pointerleave",s),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[m,o.isClosePausedRef]);const p=Ct.useCallback(({tabbingDirection:t})=>{const e=a().map(e=>{const n=e.ref.current,r=[n,...fi(n)];return"forwards"===t?r:r.reverse()});return("forwards"===t?e.reverse():e).flat()},[a]);return Ct.useEffect(()=>{const t=d.current;if(t){const e=e=>{var n,r,i;const s=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!s){const s=document.activeElement,o=e.shiftKey;if(e.target===t&&o)return void(null==(n=l.current)||n.focus());const a=p({tabbingDirection:o?"backwards":"forwards"}),c=a.findIndex(t=>t===s);mi(a.slice(c+1))?e.preventDefault():o?null==(r=l.current)||r.focus():null==(i=u.current)||i.focus()}};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)}},[a,p]),Gt.jsxs(Cr,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&Gt.jsx(Qr,{ref:l,onFocusFromOutsideViewport:()=>{mi(p({tabbingDirection:"forwards"}))}}),Gt.jsx(Rr.Slot,{scope:n,children:Gt.jsx(wr.ol,{tabIndex:-1,...s,ref:h})}),m&&Gt.jsx(Qr,{ref:u,onFocusFromOutsideViewport:()=>{mi(p({tabbingDirection:"backwards"}))}})]})});Zr.displayName=qr;var Gr="ToastFocusProxy",Qr=Ct.forwardRef((t,e)=>{const{_:n,onFocusFromOutsideViewport:r,...i}=t,s=Wr(Gr,n);return Gt.jsx(Dr,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:t=>{var e;const n=t.relatedTarget;!(null==(e=s.viewport)?void 0:e.contains(n))&&r()}})});Qr.displayName=Gr;var Xr="Toast",Jr=Ct.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a=!0,c]=jr({prop:r,defaultProp:i,onChange:s});return Gt.jsx(Or,{present:n||a,children:Gt.jsx(ni,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:vr(t.onPause),onResume:vr(t.onResume),onSwipeStart:ir(t.onSwipeStart,t=>{t.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ir(t.onSwipeMove,t=>{const{x:e,y:n}=t.detail.delta;t.currentTarget.setAttribute("data-swipe","move"),t.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${e}px`),t.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:ir(t.onSwipeCancel,t=>{t.currentTarget.setAttribute("data-swipe","cancel"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),t.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ir(t.onSwipeEnd,t=>{const{x:e,y:n}=t.detail.delta;t.currentTarget.setAttribute("data-swipe","end"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),t.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),t.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${e}px`),t.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),c(!1)})})})});Jr.displayName=Xr;var[ti,ei]=Ur(Xr,{onClose(){}}),ni=Ct.forwardRef((t,e)=>{const{_:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...m}=t,p=Wr(Xr,n),[g,w]=Ct.useState(null),y=ar(e,t=>w(t)),v=Ct.useRef(null),b=Ct.useRef(null),x=i||p.duration,N=Ct.useRef(0),k=Ct.useRef(x),M=Ct.useRef(0),{onToastAdd:A,onToastRemove:E}=p,S=vr(()=>{var t;(null==g?void 0:g.contains(document.activeElement))&&(null==(t=p.viewport)||t.focus()),o()}),C=Ct.useCallback(t=>{t&&t!==1/0&&(window.clearTimeout(M.current),N.current=(new Date).getTime(),M.current=window.setTimeout(S,t))},[S]);Ct.useEffect(()=>{const t=p.viewport;if(t){const e=()=>{C(k.current),null==l||l()},n=()=>{const t=(new Date).getTime()-N.current;k.current=k.current-t,window.clearTimeout(M.current),null==c||c()};return t.addEventListener(Hr,n),t.addEventListener(Yr,e),()=>{t.removeEventListener(Hr,n),t.removeEventListener(Yr,e)}}},[p.viewport,x,c,l,C]),Ct.useEffect(()=>{s&&!p.isClosePausedRef.current&&C(x)},[s,x,p.isClosePausedRef,C]),Ct.useEffect(()=>(A(),()=>E()),[A,E]);const T=Ct.useMemo(()=>g?ui(g):null,[g]);return p.viewport?Gt.jsxs(Gt.Fragment,{children:[T&&Gt.jsx(ri,{_:n,role:"status","aria-live":"foreground"===r?"assertive":"polite","aria-atomic":!0,children:T}),Gt.jsx(ti,{scope:n,onClose:S,children:Tt.createPortal(Gt.jsx(Rr.ItemSlot,{scope:n,children:Gt.jsx(Sr,{asChild:!0,onEscapeKeyDown:ir(a,()=>{p.isFocusedToastEscapeKeyDownRef.current||S(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:Gt.jsx(wr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":p.swipeDirection,...m,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ir(t.onKeyDown,t=>{"Escape"===t.key&&(null==a||a(t.nativeEvent),t.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,S()))}),onPointerDown:ir(t.onPointerDown,t=>{0===t.button&&(v.current={x:t.clientX,y:t.clientY})}),onPointerMove:ir(t.onPointerMove,t=>{if(!v.current)return;const e=t.clientX-v.current.x,n=t.clientY-v.current.y,r=Boolean(b.current),i=["left","right"].includes(p.swipeDirection),s=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,o=i?s(0,e):0,a=i?0:s(0,n),c="touch"===t.pointerType?10:2,l={x:o,y:a},h={originalEvent:t,delta:l};r?(b.current=l,di("toast.swipeMove",d,h,{discrete:!1})):hi(l,p.swipeDirection,c)?(b.current=l,di("toast.swipeStart",u,h,{discrete:!1}),t.target.setPointerCapture(t.pointerId)):(Math.abs(e)>c||Math.abs(n)>c)&&(v.current=null)}),onPointerUp:ir(t.onPointerUp,t=>{const e=b.current,n=t.target;if(n.hasPointerCapture(t.pointerId)&&n.releasePointerCapture(t.pointerId),b.current=null,v.current=null,e){const n=t.currentTarget,r={originalEvent:t,delta:e};hi(e,p.swipeDirection,p.swipeThreshold)?di("toast.swipeEnd",f,r,{discrete:!0}):di("toast.swipeCancel",h,r,{discrete:!0}),n.addEventListener("click",t=>t.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),ri=t=>{const{_:e,children:n,...r}=t,i=Wr(Xr,e),[s,o]=Ct.useState(!1),[a,c]=Ct.useState(!1);return function(t=()=>{}){const e=vr(t);Tr(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}(()=>o(!0)),Ct.useEffect(()=>{const t=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(t)},[]),a?null:Gt.jsx(Ir,{asChild:!0,children:Gt.jsx(Dr,{...r,children:s&&Gt.jsxs(Gt.Fragment,{children:[i.label," ",n]})})})},ii=Ct.forwardRef((t,e)=>{const{_:n,...r}=t;return Gt.jsx(wr.div,{...r,ref:e})});ii.displayName="ToastTitle";var si=Ct.forwardRef((t,e)=>{const{_:n,...r}=t;return Gt.jsx(wr.div,{...r,ref:e})});si.displayName="ToastDescription";var oi=Ct.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?Gt.jsx(li,{altText:n,asChild:!0,children:Gt.jsx(ci,{...r,ref:e})}):null});oi.displayName="ToastAction";var ai="ToastClose",ci=Ct.forwardRef((t,e)=>{const{_:n,...r}=t,i=ei(ai,n);return Gt.jsx(li,{asChild:!0,children:Gt.jsx(wr.button,{type:"button",...r,ref:e,onClick:ir(t.onClick,i.onClose)})})});ci.displayName=ai;var li=Ct.forwardRef((t,e)=>{const{_:n,altText:r,...i}=t;return Gt.jsx(wr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function ui(t){const e=[];return Array.from(t.childNodes).forEach(t=>{if(t.nodeType===t.TEXT_NODE&&t.textContent&&e.push(t.textContent),function(t){return t.nodeType===t.ELEMENT_NODE}(t)){const n=t.ariaHidden||t.hidden||"none"===t.style.display,r=""===t.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=t.dataset.radixToastAnnounceAlt;n&&e.push(n)}else e.push(...ui(t))}}),e}function di(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?yr(i,s):i.dispatchEvent(s)}var hi=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return"left"===e||"right"===e?s&&r>n:!s&&i>n};function fi(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const e="INPUT"===t.tagName&&"hidden"===t.type;return t.disabled||t.hidden||e?NodeFilter.FILTER_SKIP:t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function mi(t){const e=document.activeElement;return t.some(t=>t===e||(t.focus(),document.activeElement!==e))}var pi=Vr,gi=Zr,wi=Jr,yi=ii,vi=si,bi=oi,xi=ci;function Ni(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Ni(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ki(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Ni(t))&&(r&&(r+=" "),r+=e);return r}const Mi=t=>"boolean"==typeof t?`${t}`:0===t?"0":t,Ai=ki,Ei=(t,e)=>n=>{var r;if(null==(null==e?void 0:e.variants))return Ai(t,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(t=>{const e=null==n?void 0:n[t],r=null==s?void 0:s[t];if(null===e)return null;const o=Mi(e)||Mi(r);return i[t][o]}),a=n&&Object.entries(n).reduce((t,e)=>{let[n,r]=e;return void 0===r||(t[n]=r),t},{}),c=null==e||null===(r=e.compoundVariants)||void 0===r?void 0:r.reduce((t,e)=>{let{class:n,className:r,...i}=e;return Object.entries(i).every(t=>{let[e,n]=t;return Array.isArray(n)?n.includes({...s,...a}[e]):{...s,...a}[e]===n})?[...t,n,r]:t},[]);return Ai(t,o,c,null==n?void 0:n.class,null==n?void 0:n.className)},Si=(...t)=>t.filter((t,e,n)=>Boolean(t)&&n.indexOf(t)===e).join(" ");var Ci={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ti=Ct.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},c)=>Ct.createElement("svg",{ref:c,...Ci,width:e,height:e,stroke:t,strokeWidth:r?24*Number(n)/Number(e):n,className:Si("lucide",i),...a},[...o.map(([t,e])=>Ct.createElement(t,e)),...Array.isArray(s)?s:[s]])),Ii=(t,e)=>{const n=Ct.forwardRef(({className:n,...r},i)=>{return Ct.createElement(Ti,{ref:i,iconNode:e,className:Si(`lucide-${s=t,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var s});return n.displayName=`${t}`,n},Oi=Ii("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]),Pi=Ii("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]),ji=Ii("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]),Di=Ii("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),zi=Ii("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_i=Ii("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ri=Ii("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Bi=Ii("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]),$i=Ii("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Ui=Ii("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Fi=Ii("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),Li=Ii("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),Wi=Ii("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Vi=Ii("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),qi=Ii("ChartBarBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]]),Ki=Ii("ChartColumnBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]),Hi=Ii("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Yi=Ii("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),Zi=Ii("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Gi=Ii("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Qi=Ii("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Xi=Ii("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ji=Ii("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ts=Ii("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),es=Ii("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ns=Ii("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rs=Ii("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),is=Ii("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ss=Ii("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),os=Ii("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),as=Ii("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cs=Ii("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ls=Ii("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),us=Ii("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ds=Ii("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),hs=Ii("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),fs=Ii("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),ms=Ii("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ps=Ii("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]),gs=Ii("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),ws=Ii("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ys=Ii("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),vs=Ii("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),bs=Ii("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),xs=Ii("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ns=Ii("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),ks=Ii("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Ms=Ii("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),As=Ii("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Es=Ii("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ss=Ii("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),Cs=Ii("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ts=Ii("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Is=Ii("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Os=Ii("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ps=Ii("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),js=Ii("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),Ds=Ii("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),zs=Ii("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]),_s=Ii("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]),Rs=Ii("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Bs=Ii("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),$s=Ii("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),Us=Ii("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Fs=Ii("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]),Ls=Ii("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ws=Ii("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Vs=Ii("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),qs=Ii("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ks=Ii("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Hs=t=>{const e=Qs(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:t=>{const n=t.split("-");return""===n[0]&&1!==n.length&&n.shift(),Ys(n,e)||Gs(t)},getConflictingClassGroupIds:(t,e)=>{const i=n[t]||[];return e&&r[t]?[...i,...r[t]]:i}}},Ys=(t,e)=>{var n;if(0===t.length)return e.classGroupId;const r=t[0],i=e.nextPart.get(r),s=i?Ys(t.slice(1),i):void 0;if(s)return s;if(0===e.validators.length)return;const o=t.join("-");return null==(n=e.validators.find(({validator:t})=>t(o)))?void 0:n.classGroupId},Zs=/^\[(.+)\]$/,Gs=t=>{if(Zs.test(t)){const e=Zs.exec(t)[1],n=null==e?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Qs=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return eo(Object.entries(t.classGroups),n).forEach(([t,n])=>{Xs(n,r,t,e)}),r},Xs=(t,e,n,r)=>{t.forEach(t=>{if("string"!=typeof t)return"function"==typeof t?to(t)?void Xs(t(r),e,n,r):void e.validators.push({validator:t,classGroupId:n}):void Object.entries(t).forEach(([t,i])=>{Xs(i,Js(e,t),n,r)});(""===t?e:Js(e,t)).classGroupId=n})},Js=(t,e)=>{let n=t;return e.split("-").forEach(t=>{n.nextPart.has(t)||n.nextPart.set(t,{nextPart:new Map,validators:[]}),n=n.nextPart.get(t)}),n},to=t=>t.isThemeGetter,eo=(t,e)=>e?t.map(([t,n])=>[t,n.map(t=>"string"==typeof t?e+t:"object"==typeof t?Object.fromEntries(Object.entries(t).map(([t,n])=>[e+t,n])):t)]):t,no=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(t){let e=n.get(t);return void 0!==e?e:void 0!==(e=r.get(t))?(i(t,e),e):void 0},set(t,e){n.has(t)?n.set(t,e):i(t,e)}}},ro=t=>{const{separator:e,experimentalParseClassName:n}=t,r=1===e.length,i=e[0],s=e.length,o=t=>{const n=[];let o,a=0,c=0;for(let d=0;d<t.length;d++){let l=t[d];if(0===a){if(l===i&&(r||t.slice(d,d+s)===e)){n.push(t.slice(c,d)),c=d+s;continue}if("/"===l){o=d;continue}}"["===l?a++:"]"===l&&a--}const l=0===n.length?t:t.substring(c),u=l.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?l.substring(1):l,maybePostfixModifierPosition:o&&o>c?o-c:void 0}};return n?t=>n({className:t,parseClassName:o}):o},io=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(t=>{"["===t[0]?(e.push(...n.sort(),t),n=[]):n.push(t)}),e.push(...n.sort()),e},so=/\s+/;function oo(){let t,e,n=0,r="";for(;n<arguments.length;)(t=arguments[n++])&&(e=ao(t))&&(r&&(r+=" "),r+=e);return r}const ao=t=>{if("string"==typeof t)return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ao(t[r]))&&(n&&(n+=" "),n+=e);return n};function co(t,...e){let n,r,i,s=function(a){const c=e.reduce((t,e)=>e(t),t());return n=(t=>({cache:no(t.cacheSize),parseClassName:ro(t),...Hs(t)}))(c),r=n.cache.get,i=n.cache.set,s=o,o(a)};function o(t){const e=r(t);if(e)return e;const s=((t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(so);let a="";for(let c=o.length-1;c>=0;c-=1){const t=o[c],{modifiers:e,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:d}=n(t);let h=Boolean(d),f=r(h?u.substring(0,d):u);if(!f){if(!h){a=t+(a.length>0?" "+a:a);continue}if(f=r(u),!f){a=t+(a.length>0?" "+a:a);continue}h=!1}const m=io(e).join(":"),p=l?m+"!":m,g=p+f;if(s.includes(g))continue;s.push(g);const w=i(f,h);for(let n=0;n<w.length;++n){const t=w[n];s.push(p+t)}a=t+(a.length>0?" "+a:a)}return a})(t,n);return i(t,s),s}return function(){return s(oo.apply(null,arguments))}}const lo=t=>{const e=e=>e[t]||[];return e.isThemeGetter=!0,e},uo=/^\[(?:([a-z-]+):)?(.+)\]$/i,ho=/^\d+\/\d+$/,fo=new Set(["px","full","screen"]),mo=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,po=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,go=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wo=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,vo=t=>xo(t)||fo.has(t)||ho.test(t),bo=t=>Do(t,"length",zo),xo=t=>Boolean(t)&&!Number.isNaN(Number(t)),No=t=>Do(t,"number",xo),ko=t=>Boolean(t)&&Number.isInteger(Number(t)),Mo=t=>t.endsWith("%")&&xo(t.slice(0,-1)),Ao=t=>uo.test(t),Eo=t=>mo.test(t),So=new Set(["length","size","percentage"]),Co=t=>Do(t,So,_o),To=t=>Do(t,"position",_o),Io=new Set(["image","url"]),Oo=t=>Do(t,Io,Bo),Po=t=>Do(t,"",Ro),jo=()=>!0,Do=(t,e,n)=>{const r=uo.exec(t);return!!r&&(r[1]?"string"==typeof e?r[1]===e:e.has(r[1]):n(r[2]))},zo=t=>po.test(t)&&!go.test(t),_o=()=>!1,Ro=t=>wo.test(t),Bo=t=>yo.test(t),$o=co(()=>{const t=lo("colors"),e=lo("spacing"),n=lo("blur"),r=lo("brightness"),i=lo("borderColor"),s=lo("borderRadius"),o=lo("borderSpacing"),a=lo("borderWidth"),c=lo("contrast"),l=lo("grayscale"),u=lo("hueRotate"),d=lo("invert"),h=lo("gap"),f=lo("gradientColorStops"),m=lo("gradientColorStopPositions"),p=lo("inset"),g=lo("margin"),w=lo("opacity"),y=lo("padding"),v=lo("saturate"),b=lo("scale"),x=lo("sepia"),N=lo("skew"),k=lo("space"),M=lo("translate"),A=()=>["auto",Ao,e],E=()=>[Ao,e],S=()=>["",vo,bo],C=()=>["auto",xo,Ao],T=()=>["","0",Ao],I=()=>[xo,Ao];return{cacheSize:500,separator:":",theme:{colors:[jo],spacing:[vo,bo],blur:["none","",Eo,Ao],brightness:I(),borderColor:[t],borderRadius:["none","","full",Eo,Ao],borderSpacing:E(),borderWidth:S(),contrast:I(),grayscale:T(),hueRotate:I(),invert:T(),gap:E(),gradientColorStops:[t],gradientColorStopPositions:[Mo,bo],inset:A(),margin:A(),opacity:I(),padding:E(),saturate:I(),scale:I(),sepia:T(),skew:I(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",Ao]}],container:["container"],columns:[{columns:[Eo]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Ao]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ko,Ao]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ao]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",ko,Ao]}],"grid-cols":[{"grid-cols":[jo]}],"col-start-end":[{col:["auto",{span:["full",ko,Ao]},Ao]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[jo]}],"row-start-end":[{row:["auto",{span:[ko,Ao]},Ao]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ao]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ao]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ao,e]}],"min-w":[{"min-w":[Ao,e,"min","max","fit"]}],"max-w":[{"max-w":[Ao,e,"none","full","min","max","fit","prose",{screen:[Eo]},Eo]}],h:[{h:[Ao,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ao,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ao,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ao,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Eo,bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",No]}],"font-family":[{font:[jo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ao]}],"line-clamp":[{"line-clamp":["none",xo,No]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",vo,Ao]}],"list-image":[{"list-image":["none",Ao]}],"list-style-type":[{list:["none","disc","decimal",Ao]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",vo,bo]}],"underline-offset":[{"underline-offset":["auto",vo,Ao]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ao]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ao]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",To]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Co]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Oo]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[vo,Ao]}],"outline-w":[{outline:[vo,bo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[vo,bo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Eo,Po]}],"shadow-color":[{shadow:[jo]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Eo,Ao]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ao]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",Ao]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ao]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[ko,Ao]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ao]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ao]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ao]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[vo,bo,No]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Uo(t){const e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):"number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?new Date(t):new Date(NaN)}const Fo=43200;let Lo={};function Wo(t){const e=Uo(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Vo(t,e){const n=Uo(t),r=Uo(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}const qo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Ko(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Ho={date:Ko({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Ko({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Ko({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Yo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Zo(t){return(e,n)=>{let r;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&t.formattingValues){const e=t.defaultFormattingWidth||t.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e;r=t.formattingValues[i]||t.formattingValues[e]}else{const e=t.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t.defaultWidth;r=t.values[i]||t.values[e]}return r[t.argumentCallback?t.argumentCallback(e):e]}}const Go={ordinalNumber:(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Zo({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Zo({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:Zo({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Zo({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Zo({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Qo(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?function(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}(a,t=>t.test(o)):function(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}(a,t=>t.test(o));let l;return l=t.valueCallback?t.valueCallback(c):c,l=n.valueCallback?n.valueCallback(l):l,{value:l,rest:e.slice(o.length)}}}const Xo={ordinalNumber:(Jo={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)},(t,e={})=>{const n=t.match(Jo.matchPattern);if(!n)return null;const r=n[0],i=t.match(Jo.parsePattern);if(!i)return null;let s=Jo.valueCallback?Jo.valueCallback(i[0]):i[0];return s=e.valueCallback?e.valueCallback(s):s,{value:s,rest:t.slice(r.length)}}),era:Qo({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Qo({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:Qo({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Qo({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Qo({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Jo;const ta={code:"en-US",formatDistance:(t,e,n)=>{let r;const i=qo[t];return r="string"==typeof i?i:1===e?i.one:i.other.replace("{{count}}",e.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Ho,formatRelative:(t,e,n,r)=>Yo[t],localize:Go,match:Xo,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ea(t,e,n){const r=Lo,i=(null==n?void 0:n.locale)??r.locale??ta,s=Vo(t,e);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:null==n?void 0:n.addSuffix,comparison:s});let a,c;s>0?(a=Uo(e),c=Uo(t)):(a=Uo(t),c=Uo(e));const l=function(t,e){const n=function(t,e){return+Uo(t)-+Uo(e)}(t,e)/1e3;return(t=>{const e=(0,Math.trunc)(t);return 0===e?0:e})(n)}(c,a),u=(Wo(c)-Wo(a))/1e3,d=Math.round((l-u)/60);let h;if(d<2)return(null==n?void 0:n.includeSeconds)?l<5?i.formatDistance("lessThanXSeconds",5,o):l<10?i.formatDistance("lessThanXSeconds",10,o):l<20?i.formatDistance("lessThanXSeconds",20,o):l<40?i.formatDistance("halfAMinute",0,o):l<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):0===d?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",d,o);if(d<45)return i.formatDistance("xMinutes",d,o);if(d<90)return i.formatDistance("aboutXHours",1,o);if(d<1440){const t=Math.round(d/60);return i.formatDistance("aboutXHours",t,o)}if(d<2520)return i.formatDistance("xDays",1,o);if(d<Fo){const t=Math.round(d/1440);return i.formatDistance("xDays",t,o)}if(d<86400)return h=Math.round(d/Fo),i.formatDistance("aboutXMonths",h,o);if(h=function(t,e){const n=Uo(t),r=Uo(e),i=Vo(n,r),s=Math.abs(function(t,e){const n=Uo(t),r=Uo(e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}(n,r));let o;if(s<1)o=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let e=Vo(n,r)===-i;(function(t){const e=Uo(t);return+function(t){const e=Uo(t);return e.setHours(23,59,59,999),e}(e)===+function(t){const e=Uo(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}(e)})(Uo(t))&&1===s&&1===Vo(t,r)&&(e=!1),o=i*(s-Number(e))}return 0===o?0:o}(c,a),h<12){const t=Math.round(d/Fo);return i.formatDistance("xMonths",t,o)}{const t=h%12,e=Math.trunc(h/12);return t<3?i.formatDistance("aboutXYears",e,o):t<9?i.formatDistance("overXYears",e,o):i.formatDistance("almostXYears",e+1,o)}}function na(...t){return $o(ki(t))}function ra(t){try{return function(t){return ea(t,function(t){return function(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}(t,Date.now())}(t),{addSuffix:!0})}("string"==typeof t?new Date(t):t)}catch(e){return"recently"}}const ia=pi,sa=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(gi,{ref:n,className:na("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));sa.displayName=gi.displayName;const oa=Ei("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-xl transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border border-gray-200 bg-white text-gray-900 shadow-xl",destructive:"destructive group border-red-200 bg-red-50 text-red-900 shadow-xl"}},defaultVariants:{variant:"default"}}),aa=Ct.forwardRef(({className:t,variant:e,...n},r)=>Gt.jsx(wi,{ref:r,className:na(oa({variant:e}),t),...n}));aa.displayName=wi.displayName,Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(bi,{ref:n,className:na("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-white px-3 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-300 group-[.destructive]:hover:border-red-400 group-[.destructive]:hover:bg-red-100 group-[.destructive]:hover:text-red-800 group-[.destructive]:focus:ring-red-500",t),...e})).displayName=bi.displayName;const ca=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(xi,{ref:n,className:na("absolute right-2 top-2 rounded-md p-1 text-gray-500 opacity-0 transition-opacity hover:text-gray-700 hover:bg-gray-100 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 group-hover:opacity-100 group-[.destructive]:text-red-500 group-[.destructive]:hover:text-red-700 group-[.destructive]:hover:bg-red-100 group-[.destructive]:focus:ring-red-500",t),"toast-close":"",...e,children:Gt.jsx(Ks,{className:"h-4 w-4"})}));ca.displayName=xi.displayName;const la=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(yi,{ref:n,className:na("text-sm font-semibold",t),...e}));la.displayName=yi.displayName;const ua=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(vi,{ref:n,className:na("text-sm text-gray-700",t),...e}));function da(){const{toasts:t}=rr();return Gt.jsxs(ia,{children:[t.map(function({id:t,title:e,description:n,action:r,...i}){return Gt.jsxs(aa,{...i,children:[Gt.jsxs("div",{className:"grid gap-1",children:[e&&Gt.jsx(la,{children:e}),n&&Gt.jsx(ua,{children:n})]}),r,Gt.jsx(ca,{})]},t)}),Gt.jsx(sa,{})]})}ua.displayName=vi.displayName;var ha=It[" useId ".trim().toString()]||(()=>{}),fa=0;function ma(t){const[e,n]=Ct.useState(ha());return Tr(()=>{t||n(t=>t??String(fa++))},[t]),t||(e?`radix-${e}`:"")}const pa=["top","right","bottom","left"],ga=Math.min,wa=Math.max,ya=Math.round,va=Math.floor,ba=t=>({x:t,y:t}),xa={left:"right",right:"left",bottom:"top",top:"bottom"},Na={start:"end",end:"start"};function ka(t,e,n){return wa(t,ga(e,n))}function Ma(t,e){return"function"==typeof t?t(e):t}function Aa(t){return t.split("-")[0]}function Ea(t){return t.split("-")[1]}function Sa(t){return"x"===t?"y":"x"}function Ca(t){return"y"===t?"height":"width"}function Ta(t){return["top","bottom"].includes(Aa(t))?"y":"x"}function Ia(t){return Sa(Ta(t))}function Oa(t){return t.replace(/start|end/g,t=>Na[t])}function Pa(t){return t.replace(/left|right|bottom|top/g,t=>xa[t])}function ja(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function Da(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function za(t,e,n){let{reference:r,floating:i}=t;const s=Ta(e),o=Ia(e),a=Ca(o),c=Aa(e),l="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(c){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Ea(e)){case"start":f[o]-=h*(n&&l?-1:1);break;case"end":f[o]+=h*(n&&l?-1:1)}return f}async function _a(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Ma(e,t),m=ja(f),p=a[h?"floating"===d?"reference":"floating":d],g=Da(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(p)))||n?p:p.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),w="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),v=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},b=Da(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:y,strategy:c}):w);return{top:(g.top-b.top+m.top)/v.y,bottom:(b.bottom-g.bottom+m.bottom)/v.y,left:(g.left-b.left+m.left)/v.x,right:(b.right-g.right+m.right)/v.x}}function Ra(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ba(t){return pa.some(e=>t[e]>=0)}function $a(){return"undefined"!=typeof window}function Ua(t){return Wa(t)?(t.nodeName||"").toLowerCase():"#document"}function Fa(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function La(t){var e;return null==(e=(Wa(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function Wa(t){return!!$a()&&(t instanceof Node||t instanceof Fa(t).Node)}function Va(t){return!!$a()&&(t instanceof Element||t instanceof Fa(t).Element)}function qa(t){return!!$a()&&(t instanceof HTMLElement||t instanceof Fa(t).HTMLElement)}function Ka(t){return!(!$a()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof Fa(t).ShadowRoot)}function Ha(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ja(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Ya(t){return["table","td","th"].includes(Ua(t))}function Za(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch(n){return!1}})}function Ga(t){const e=Qa(),n=Va(t)?Ja(t):t;return["transform","translate","scale","rotate","perspective"].some(t=>!!n[t]&&"none"!==n[t])||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some(t=>(n.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(n.contain||"").includes(t))}function Qa(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Xa(t){return["html","body","#document"].includes(Ua(t))}function Ja(t){return Fa(t).getComputedStyle(t)}function tc(t){return Va(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ec(t){if("html"===Ua(t))return t;const e=t.assignedSlot||t.parentNode||Ka(t)&&t.host||La(t);return Ka(e)?e.host:e}function nc(t){const e=ec(t);return Xa(e)?t.ownerDocument?t.ownerDocument.body:t.body:qa(e)&&Ha(e)?e:nc(e)}function rc(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=nc(t),s=i===(null==(r=t.ownerDocument)?void 0:r.body),o=Fa(i);if(s){const t=ic(o);return e.concat(o,o.visualViewport||[],Ha(i)?i:[],t&&n?rc(t):[])}return e.concat(i,rc(i,[],n))}function ic(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sc(t){const e=Ja(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=qa(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=ya(n)!==s||ya(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function oc(t){return Va(t)?t:t.contextElement}function ac(t){const e=oc(t);if(!qa(e))return ba(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=sc(e);let o=(s?ya(n.width):n.width)/r,a=(s?ya(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const cc=ba(0);function lc(t){const e=Fa(t);return Qa()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:cc}function uc(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),s=oc(t);let o=ba(1);e&&(r?Va(r)&&(o=ac(r)):o=ac(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==Fa(t))&&e}(s,n,r)?lc(s):ba(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const t=Fa(s),e=r&&Va(r)?Fa(r):r;let n=t,i=ic(n);for(;i&&r&&e!==n;){const t=ac(i),e=i.getBoundingClientRect(),r=Ja(i),s=e.left+(i.clientLeft+parseFloat(r.paddingLeft))*t.x,o=e.top+(i.clientTop+parseFloat(r.paddingTop))*t.y;c*=t.x,l*=t.y,u*=t.x,d*=t.y,c+=s,l+=o,n=Fa(i),i=ic(n)}}return Da({width:u,height:d,x:c,y:l})}function dc(t,e){const n=tc(t).scrollLeft;return e?e.left+n:uc(La(t)).left+n}function hc(t,e,n){void 0===n&&(n=!1);const r=t.getBoundingClientRect();return{x:r.left+e.scrollLeft-(n?0:dc(t,r)),y:r.top+e.scrollTop}}function fc(t,e,n){let r;if("viewport"===e)r=function(t,e){const n=Fa(t),r=La(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const t=Qa();(!t||t&&"fixed"===e)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}(t,n);else if("document"===e)r=function(t){const e=La(t),n=tc(t),r=t.ownerDocument.body,i=wa(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=wa(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dc(t);const a=-n.scrollTop;return"rtl"===Ja(r).direction&&(o+=wa(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(La(t));else if(Va(e))r=function(t,e){const n=uc(t,!0,"fixed"===e),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=qa(t)?ac(t):ba(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:i*s.x,y:r*s.y}}(e,n);else{const n=lc(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Da(r)}function mc(t,e){const n=ec(t);return!(n===e||!Va(n)||Xa(n))&&("fixed"===Ja(n).position||mc(n,e))}function pc(t,e,n){const r=qa(e),i=La(e),s="fixed"===n,o=uc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const c=ba(0);if(r||!r&&!s)if(("body"!==Ua(e)||Ha(i))&&(a=tc(e)),r){const t=uc(e,!0,s,e);c.x=t.x+e.clientLeft,c.y=t.y+e.clientTop}else i&&(c.x=dc(i));const l=!i||r||s?ba(0):hc(i,a);return{x:o.left+a.scrollLeft-c.x-l.x,y:o.top+a.scrollTop-c.y-l.y,width:o.width,height:o.height}}function gc(t){return"static"===Ja(t).position}function wc(t,e){if(!qa(t)||"fixed"===Ja(t).position)return null;if(e)return e(t);let n=t.offsetParent;return La(t)===n&&(n=n.ownerDocument.body),n}function yc(t,e){const n=Fa(t);if(Za(t))return n;if(!qa(t)){let e=ec(t);for(;e&&!Xa(e);){if(Va(e)&&!gc(e))return e;e=ec(e)}return n}let r=wc(t,e);for(;r&&Ya(r)&&gc(r);)r=wc(r,e);return r&&Xa(r)&&gc(r)&&!Ga(r)?n:r||function(t){let e=ec(t);for(;qa(e)&&!Xa(e);){if(Ga(e))return e;if(Za(e))return null;e=ec(e)}return null}(t)||n}const vc={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s="fixed"===i,o=La(r),a=!!e&&Za(e.floating);if(r===o||a&&s)return n;let c={scrollLeft:0,scrollTop:0},l=ba(1);const u=ba(0),d=qa(r);if((d||!d&&!s)&&(("body"!==Ua(r)||Ha(o))&&(c=tc(r)),qa(r))){const t=uc(r);l=ac(r),u.x=t.x+r.clientLeft,u.y=t.y+r.clientTop}const h=!o||d||s?ba(0):hc(o,c,!0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:n.y*l.y-c.scrollTop*l.y+u.y+h.y}},getDocumentElement:La,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[..."clippingAncestors"===n?Za(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let r=rc(t,[],!1).filter(t=>Va(t)&&"body"!==Ua(t)),i=null;const s="fixed"===Ja(t).position;let o=s?ec(t):t;for(;Va(o)&&!Xa(o);){const e=Ja(o),n=Ga(o);n||"fixed"!==e.position||(i=null),(s?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||Ha(o)&&!n&&mc(t,o))?r=r.filter(t=>t!==o):i=e,o=ec(o)}return e.set(t,r),r}(e,this.R):[].concat(n),r],o=s[0],a=s.reduce((t,n)=>{const r=fc(e,n,i);return t.top=wa(r.top,t.top),t.right=ga(r.right,t.right),t.bottom=ga(r.bottom,t.bottom),t.left=wa(r.left,t.left),t},fc(e,o,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:yc,getElementRects:async function(t){const e=this.getOffsetParent||yc,n=this.getDimensions,r=await n(t.floating);return{reference:pc(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=sc(t);return{width:e,height:n}},getScale:ac,isElement:Va,isRTL:function(t){return"rtl"===Ja(t).direction}};function bc(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}const xc=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await async function(t,e){const{placement:n,platform:r,elements:i}=t,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=Aa(n),a=Ea(n),c="y"===Ta(n),l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,d=Ma(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"==typeof m&&(f="end"===a?-1*m:m),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}(e,t);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},Nc=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...c}=Ma(t,e),l={x:n,y:r},u=await _a(e,c),d=Ta(Aa(i)),h=Sa(d);let f=l[h],m=l[d];if(s){const t="y"===h?"bottom":"right";f=ka(f+u["y"===h?"top":"left"],f,f-u[t])}if(o){const t="y"===d?"bottom":"right";m=ka(m+u["y"===d?"top":"left"],m,m-u[t])}const p=a.fn({...e,[h]:f,[d]:m});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[h]:s,[d]:o}}}}}},kc=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:p=!0,...g}=Ma(t,e);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const w=Aa(i),y=Ta(a),v=Aa(a)===a,b=await(null==c.isRTL?void 0:c.isRTL(l.floating)),x=h||(v||!p?[Pa(a)]:function(t){const e=Pa(t);return[Oa(t),e,Oa(e)]}(a)),N="none"!==m;!h&&N&&x.push(...function(t,e,n,r){const i=Ea(t);let s=function(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}(Aa(t),"start"===n,r);return i&&(s=s.map(t=>t+"-"+i),e&&(s=s.concat(s.map(Oa)))),s}(a,p,m,b));const k=[a,...x],M=await _a(e,g),A=[];let E=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&A.push(M[w]),d){const t=function(t,e,n){void 0===n&&(n=!1);const r=Ea(t),i=Ia(t),s=Ca(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Pa(o)),[o,Pa(o)]}(i,o,b);A.push(M[t[0]],M[t[1]])}if(E=[...E,{placement:i,overflows:A}],!A.every(t=>t<=0)){var S,C;const t=((null==(S=s.flip)?void 0:S.index)||0)+1,e=k[t];if(e)return{data:{index:t,overflows:E},reset:{placement:e}};let n=null==(C=E.filter(t=>t.overflows[0]<=0).sort((t,e)=>t.overflows[1]-e.overflows[1])[0])?void 0:C.placement;if(!n)switch(f){case"bestFit":{var T;const t=null==(T=E.filter(t=>{if(N){const e=Ta(t.placement);return e===y||"y"===e}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:T[0];t&&(n=t);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},Mc=function(t){return void 0===t&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:c=()=>{},...l}=Ma(t,e),u=await _a(e,l),d=Aa(i),h=Ea(i),f="y"===Ta(i),{width:m,height:p}=s.floating;let g,w;"top"===d||"bottom"===d?(g=d,w=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(w=d,g="end"===h?"top":"bottom");const y=p-u.top-u.bottom,v=m-u.left-u.right,b=ga(p-u[g],y),x=ga(m-u[w],v),N=!e.middlewareData.shift;let k=b,M=x;if(null!=(n=e.middlewareData.shift)&&n.enabled.x&&(M=v),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(k=y),N&&!h){const t=wa(u.left,0),e=wa(u.right,0),n=wa(u.top,0),r=wa(u.bottom,0);f?M=m-2*(0!==t||0!==e?t+e:wa(u.left,u.right)):k=p-2*(0!==n||0!==r?n+r:wa(u.top,u.bottom))}await c({...e,availableWidth:M,availableHeight:k});const A=await o.getDimensions(a.floating);return m!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}},Ac=function(t){return void 0===t&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ma(t,e);switch(r){case"referenceHidden":{const t=Ra(await _a(e,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:Ba(t)}}}case"escaped":{const t=Ra(await _a(e,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:t,escaped:Ba(t)}}}default:return{}}}}},Ec=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:c}=e,{element:l,padding:u=0}=Ma(t,e)||{};if(null==l)return{};const d=ja(u),h={x:n,y:r},f=Ia(i),m=Ca(f),p=await o.getDimensions(l),g="y"===f,w=g?"top":"left",y=g?"bottom":"right",v=g?"clientHeight":"clientWidth",b=s.reference[m]+s.reference[f]-h[f]-s.floating[m],x=h[f]-s.reference[f],N=await(null==o.getOffsetParent?void 0:o.getOffsetParent(l));let k=N?N[v]:0;k&&await(null==o.isElement?void 0:o.isElement(N))||(k=a.floating[v]||s.floating[m]);const M=b/2-x/2,A=k/2-p[m]/2-1,E=ga(d[w],A),S=ga(d[y],A),C=E,T=k-p[m]-S,I=k/2-p[m]/2+M,O=ka(C,I,T),P=!c.arrow&&null!=Ea(i)&&I!==O&&s.reference[m]/2-(I<C?E:S)-p[m]/2<0,j=P?I<C?I-C:I-T:0;return{[f]:h[f]+j,data:{[f]:O,centerOffset:I-O-j,...P&&{alignmentOffset:j}},reset:P}}}),Sc=function(t){return void 0===t&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Ma(t,e),u={x:n,y:r},d=Ta(i),h=Sa(d);let f=u[h],m=u[d];const p=Ma(a,e),g="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const t="y"===h?"height":"width",e=s.reference[h]-s.floating[t]+g.mainAxis,n=s.reference[h]+s.reference[t]-g.mainAxis;f<e?f=e:f>n&&(f=n)}if(l){var w,y;const t="y"===h?"width":"height",e=["top","left"].includes(Aa(i)),n=s.reference[d]-s.floating[t]+(e&&(null==(w=o.offset)?void 0:w[d])||0)+(e?0:g.crossAxis),r=s.reference[d]+s.reference[t]+(e?0:(null==(y=o.offset)?void 0:y[d])||0)-(e?g.crossAxis:0);m<n?m=n:m>r&&(m=r)}return{[h]:f,[d]:m}}}};var Cc="undefined"!=typeof document?Ct.useLayoutEffect:Ct.useEffect;function Tc(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if("function"==typeof t&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&"object"==typeof t){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;0!==r--;)if(!Tc(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(!("_owner"===n&&t.$$typeof||Tc(t[n],e[n])))return!1}return!0}return t!=t&&e!=e}function Ic(t){return"undefined"==typeof window?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Oc(t,e){const n=Ic(t);return Math.round(e*n)/n}function Pc(t){const e=Ct.useRef(t);return Cc(()=>{e.current=t}),e}const jc=t=>({name:"arrow",options:t,fn(e){const{element:n,padding:r}="function"==typeof t?t(e):t;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?Ec({element:n.current,padding:r}).fn(e):{}:n?Ec({element:n,padding:r}).fn(e):{};var i}}),Dc=(t,e)=>({...xc(t),options:[t,e]}),zc=(t,e)=>({...Nc(t),options:[t,e]}),_c=(t,e)=>({...Sc(t),options:[t,e]}),Rc=(t,e)=>({...kc(t),options:[t,e]}),Bc=(t,e)=>({...Mc(t),options:[t,e]}),$c=(t,e)=>({...Ac(t),options:[t,e]}),Uc=(t,e)=>({...jc(t),options:[t,e]});var Fc=Ct.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return Gt.jsx(wr.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:Gt.jsx("polygon",{points:"0,0 30,0 15,10"})})});Fc.displayName="Arrow";var Lc=Fc,Wc="Popper",[Vc,qc]=cr(Wc),[Kc,Hc]=Vc(Wc),Yc=t=>{const{U:e,children:n}=t,[r,i]=Ct.useState(null);return Gt.jsx(Kc,{scope:e,anchor:r,onAnchorChange:i,children:n})};Yc.displayName=Wc;var Zc="PopperAnchor",Gc=Ct.forwardRef((t,e)=>{const{U:n,virtualRef:r,...i}=t,s=Hc(Zc,n),o=Ct.useRef(null),a=ar(e,o);return Ct.useEffect(()=>{s.onAnchorChange((null==r?void 0:r.current)||o.current)}),r?null:Gt.jsx(wr.div,{...i,ref:a})});Gc.displayName=Zc;var Qc="PopperContent",[Xc,Jc]=Vc(Qc),tl=Ct.forwardRef((t,e)=>{var n,r,i,s,o,a;const{U:c,side:l="bottom",sideOffset:u=0,align:d="center",alignOffset:h=0,arrowPadding:f=0,avoidCollisions:m=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:w="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:b,...x}=t,N=Hc(Qc,c),[k,M]=Ct.useState(null),A=ar(e,t=>M(t)),[E,S]=Ct.useState(null),C=function(t){const[e,n]=Ct.useState(void 0);return Tr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver(e=>{if(!Array.isArray(e))return;if(!e.length)return;const r=e[0];let i,s;if("borderBoxSize"in r){const t=r.borderBoxSize,e=Array.isArray(t)?t[0]:t;i=e.inlineSize,s=e.blockSize}else i=t.offsetWidth,s=t.offsetHeight;n({width:i,height:s})});return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}n(void 0)},[t]),e}(E),T=(null==C?void 0:C.width)??0,I=(null==C?void 0:C.height)??0,O=l+("center"!==d?"-"+d:""),P="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},j=Array.isArray(p)?p:[p],D=j.length>0,z={padding:P,boundary:j.filter(il),altBoundary:D},{refs:_,floatingStyles:R,placement:B,isPositioned:$,middlewareData:U}=function(t){void 0===t&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:c,open:l}=t,[u,d]=Ct.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=Ct.useState(r);Tc(h,r)||f(r);const[m,p]=Ct.useState(null),[g,w]=Ct.useState(null),y=Ct.useCallback(t=>{t!==N.current&&(N.current=t,p(t))},[]),v=Ct.useCallback(t=>{t!==k.current&&(k.current=t,w(t))},[]),b=s||m,x=o||g,N=Ct.useRef(null),k=Ct.useRef(null),M=Ct.useRef(u),A=null!=c,E=Pc(c),S=Pc(i),C=Pc(l),T=Ct.useCallback(()=>{if(!N.current||!k.current)return;const t={placement:e,strategy:n,middleware:h};S.current&&(t.platform=S.current),((t,e,n)=>{const r=new Map,i={platform:vc,...n},s={...i.platform,R:r};return(async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(null==o.isRTL?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=za(l,r,c),h=r,f={},m=0;for(let p=0;p<a.length;p++){const{name:n,fn:s}=a[p],{x:g,y:w,data:y,reset:v}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:o,elements:{reference:t,floating:e}});u=null!=g?g:u,d=null!=w?w:d,f={...f,[n]:{...f[n],...y}},v&&m<=50&&(m++,"object"==typeof v&&(v.placement&&(h=v.placement),v.rects&&(l=!0===v.rects?await o.getElementRects({reference:t,floating:e,strategy:i}):v.rects),({x:u,y:d}=za(l,h,c))),p=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}})(t,e,{...i,platform:s})})(N.current,k.current,t).then(t=>{const e={...t,isPositioned:!1!==C.current};I.current&&!Tc(M.current,e)&&(M.current=e,Tt.flushSync(()=>{d(e)}))})},[h,e,n,S,C]);Cc(()=>{!1===l&&M.current.isPositioned&&(M.current.isPositioned=!1,d(t=>({...t,isPositioned:!1})))},[l]);const I=Ct.useRef(!1);Cc(()=>(I.current=!0,()=>{I.current=!1}),[]),Cc(()=>{if(b&&(N.current=b),x&&(k.current=x),b&&x){if(E.current)return E.current(b,x,T);T()}},[b,x,T,E,A]);const O=Ct.useMemo(()=>({reference:N,floating:k,setReference:y,setFloating:v}),[y,v]),P=Ct.useMemo(()=>({reference:b,floating:x}),[b,x]),j=Ct.useMemo(()=>{const t={position:n,left:0,top:0};if(!P.floating)return t;const e=Oc(P.floating,u.x),r=Oc(P.floating,u.y);return a?{...t,transform:"translate("+e+"px, "+r+"px)",...Ic(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:e,top:r}},[n,a,P.floating,u.x,u.y]);return Ct.useMemo(()=>({...u,update:T,refs:O,elements:P,floatingStyles:j}),[u,T,O,P,j])}({strategy:"fixed",placement:O,whileElementsMounted:(...t)=>function(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,l=oc(t),u=i||s?[...l?rc(l):[],...rc(e)]:[];u.forEach(t=>{i&&t.addEventListener("scroll",n,{passive:!0}),s&&t.addEventListener("resize",n)});const d=l&&a?function(t,e){let n,r=null;const i=La(t);function s(){var t;clearTimeout(n),null==(t=r)||t.disconnect(),r=null}return function o(a,c){void 0===a&&(a=!1),void 0===c&&(c=1),s();const l=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=l;if(a||e(),!h||!f)return;const m={rootMargin:-va(d)+"px "+-va(i.clientWidth-(u+h))+"px "+-va(i.clientHeight-(d+f))+"px "+-va(u)+"px",threshold:wa(0,ga(1,c))||1};let p=!0;function g(e){const r=e[0].intersectionRatio;if(r!==c){if(!p)return o();r?o(!1,r):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==r||bc(l,t.getBoundingClientRect())||o(),p=!1}try{r=new IntersectionObserver(g,{...m,root:i.ownerDocument})}catch(w){r=new IntersectionObserver(g,m)}r.observe(t)}(!0),s}(l,n):null;let h,f=-1,m=null;o&&(m=new ResizeObserver(t=>{let[r]=t;r&&r.target===l&&m&&(m.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var t;null==(t=m)||t.observe(e)})),n()}),l&&!c&&m.observe(l),m.observe(e));let p=c?uc(t):null;return c&&function e(){const r=uc(t);p&&!bc(p,r)&&n(),p=r,h=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach(t=>{i&&t.removeEventListener("scroll",n),s&&t.removeEventListener("resize",n)}),null==d||d(),null==(t=m)||t.disconnect(),m=null,c&&cancelAnimationFrame(h)}}(...t,{animationFrame:"always"===v}),elements:{reference:N.anchor},middleware:[Dc({mainAxis:u+I,alignmentAxis:h}),m&&zc({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?_c():void 0,...z}),m&&Rc({...z}),Bc({...z,apply:({elements:t,rects:e,availableWidth:n,availableHeight:r})=>{const{width:i,height:s}=e.reference,o=t.floating.style;o.setProperty("--radix-popper-available-width",`${n}px`),o.setProperty("--radix-popper-available-height",`${r}px`),o.setProperty("--radix-popper-anchor-width",`${i}px`),o.setProperty("--radix-popper-anchor-height",`${s}px`)}}),E&&Uc({element:E,padding:f}),sl({arrowWidth:T,arrowHeight:I}),y&&$c({strategy:"referenceHidden",...z})]}),[F,L]=ol(B),W=vr(b);Tr(()=>{$&&(null==W||W())},[$,W]);const V=null==(n=U.arrow)?void 0:n.x,q=null==(r=U.arrow)?void 0:r.y,K=0!==(null==(i=U.arrow)?void 0:i.centerOffset),[H,Y]=Ct.useState();return Tr(()=>{k&&Y(window.getComputedStyle(k).zIndex)},[k]),Gt.jsx("div",{ref:_.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:$?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[null==(s=U.transformOrigin)?void 0:s.x,null==(o=U.transformOrigin)?void 0:o.y].join(" "),...(null==(a=U.hide)?void 0:a.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:Gt.jsx(Xc,{scope:c,placedSide:F,onArrowChange:S,arrowX:V,arrowY:q,shouldHideArrow:K,children:Gt.jsx(wr.div,{"data-side":F,"data-align":L,...x,ref:A,style:{...x.style,animation:$?void 0:"none"}})})})});tl.displayName=Qc;var el="PopperArrow",nl={top:"bottom",right:"left",bottom:"top",left:"right"},rl=Ct.forwardRef(function(t,e){const{U:n,...r}=t,i=Jc(el,n),s=nl[i.placedSide];return Gt.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:Gt.jsx(Lc,{...r,ref:e,style:{...r.style,display:"block"}})})});function il(t){return null!==t}rl.displayName=el;var sl=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i;const{placement:s,rects:o,middlewareData:a}=e,c=0!==(null==(n=a.arrow)?void 0:n.centerOffset),l=c?0:t.arrowWidth,u=c?0:t.arrowHeight,[d,h]=ol(s),f={start:"0%",center:"50%",end:"100%"}[h],m=((null==(r=a.arrow)?void 0:r.x)??0)+l/2,p=((null==(i=a.arrow)?void 0:i.y)??0)+u/2;let g="",w="";return"bottom"===d?(g=c?f:`${m}px`,w=-u+"px"):"top"===d?(g=c?f:`${m}px`,w=`${o.floating.height+u}px`):"right"===d?(g=-u+"px",w=c?f:`${p}px`):"left"===d&&(g=`${o.floating.width+u}px`,w=c?f:`${p}px`),{data:{x:g,y:w}}}});function ol(t){const[e,n="center"]=t.split("-");return[e,n]}var al=Yc,cl=Gc,ll=tl,ul=rl,[dl,hl]=cr("Tooltip",[qc]),fl=qc(),ml="TooltipProvider",pl=700,gl="tooltip.open",[wl,yl]=dl(ml),vl=t=>{const{W:e,delayDuration:n=pl,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=Ct.useRef(!0),a=Ct.useRef(!1),c=Ct.useRef(0);return Ct.useEffect(()=>{const t=c.current;return()=>window.clearTimeout(t)},[]),Gt.jsx(wl,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:Ct.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:Ct.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:Ct.useCallback(t=>{a.current=t},[]),disableHoverableContent:i,children:s})};vl.displayName=ml;var bl="Tooltip",[xl,Nl]=dl(bl),kl="TooltipTrigger";Ct.forwardRef((t,e)=>{const{W:n,...r}=t,i=Nl(kl,n),s=yl(kl,n),o=fl(n),a=ar(e,Ct.useRef(null),i.onTriggerChange),c=Ct.useRef(!1),l=Ct.useRef(!1),u=Ct.useCallback(()=>c.current=!1,[]);return Ct.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),Gt.jsx(cl,{asChild:!0,...o,children:Gt.jsx(wr.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:a,onPointerMove:ir(t.onPointerMove,t=>{"touch"!==t.pointerType&&(l.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),l.current=!0))}),onPointerLeave:ir(t.onPointerLeave,()=>{i.onTriggerLeave(),l.current=!1}),onPointerDown:ir(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:ir(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:ir(t.onBlur,i.onClose),onClick:ir(t.onClick,i.onClose)})})}).displayName=kl;var[Ml,Al]=dl("TooltipPortal",{forceMount:void 0}),El="TooltipContent",Sl=Ct.forwardRef((t,e)=>{const n=Al(El,t.W),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=Nl(El,t.W);return Gt.jsx(Or,{present:r||o.open,children:o.disableHoverableContent?Gt.jsx(Pl,{side:i,...s,ref:e}):Gt.jsx(Cl,{side:i,...s,ref:e})})}),Cl=Ct.forwardRef((t,e)=>{const n=Nl(El,t.W),r=yl(El,t.W),i=Ct.useRef(null),s=ar(e,i),[o,a]=Ct.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,h=Ct.useCallback(()=>{a(null),d(!1)},[d]),f=Ct.useCallback((t,e)=>{const n=t.currentTarget,r={x:t.clientX,y:t.clientY},i=function(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n})}return r}(r,function(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),s=function(t){const e=t.slice();return e.sort((t,e)=>t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0),function(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const n=t[r];for(;e.length>=2;){const t=e[e.length-1],r=e[e.length-2];if(!((t.x-r.x)*(n.y-r.y)>=(t.y-r.y)*(n.x-r.x)))break;e.pop()}e.push(n)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const e=t[r];for(;n.length>=2;){const t=n[n.length-1],r=n[n.length-2];if(!((t.x-r.x)*(e.y-r.y)>=(t.y-r.y)*(e.x-r.x)))break;n.pop()}n.push(e)}return n.pop(),1===e.length&&1===n.length&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}(e)}([...i,...function(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}(e.getBoundingClientRect())]);a(s),d(!0)},[d]);return Ct.useEffect(()=>()=>h(),[h]),Ct.useEffect(()=>{if(c&&u){const t=t=>f(t,u),e=t=>f(t,c);return c.addEventListener("pointerleave",t),u.addEventListener("pointerleave",e),()=>{c.removeEventListener("pointerleave",t),u.removeEventListener("pointerleave",e)}}},[c,u,f,h]),Ct.useEffect(()=>{if(o){const t=t=>{const e=t.target,n={x:t.clientX,y:t.clientY},r=(null==c?void 0:c.contains(e))||(null==u?void 0:u.contains(e)),i=!function(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const t=e[s].x,a=e[s].y,c=e[o].x,l=e[o].y;a>r!=l>r&&n<(c-t)*(r-a)/(l-a)+t&&(i=!i)}return i}(n,o);r?h():i&&(h(),l())};return document.addEventListener("pointermove",t),()=>document.removeEventListener("pointermove",t)}},[c,u,o,l,h]),Gt.jsx(Pl,{...t,ref:s})}),[Tl,Il]=dl(bl,{isInside:!1}),Ol=mr("TooltipContent"),Pl=Ct.forwardRef((t,e)=>{const{W:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,c=Nl(El,n),l=fl(n),{onClose:u}=c;return Ct.useEffect(()=>(document.addEventListener(gl,u),()=>document.removeEventListener(gl,u)),[u]),Ct.useEffect(()=>{if(c.trigger){const t=t=>{const e=t.target;(null==e?void 0:e.contains(c.trigger))&&u()};return window.addEventListener("scroll",t,{capture:!0}),()=>window.removeEventListener("scroll",t,{capture:!0})}},[c.trigger,u]),Gt.jsx(kr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:t=>t.preventDefault(),onDismiss:u,children:Gt.jsxs(ll,{"data-state":c.stateAttribute,...l,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[Gt.jsx(Ol,{children:r}),Gt.jsx(Tl,{scope:n,isInside:!0,children:Gt.jsx(zr,{id:c.contentId,role:"tooltip",children:i||r})})]})})});Sl.displayName=El;var jl="TooltipArrow";Ct.forwardRef((t,e)=>{const{W:n,...r}=t,i=fl(n);return Il(jl,n).isInside?null:Gt.jsx(ul,{...i,...r,ref:e})}).displayName=jl;var Dl=Sl;const zl=vl;Ct.forwardRef(({className:t,sideOffset:e=4,...n},r)=>Gt.jsx(Dl,{ref:r,sideOffset:e,className:na("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n})).displayName=Dl.displayName;for(var _l={},Rl={byteLength:function(t){var e=Wl(t),n=e[0],r=e[1];return 3*(n+r)/4-r},toByteArray:function(t){var e,n,r=Wl(t),i=r[0],s=r[1],o=new Ul(function(t,e,n){return 3*(e+n)/4-n}(0,i,s)),a=0,c=s>0?i-4:i;for(n=0;n<c;n+=4)e=$l[t.charCodeAt(n)]<<18|$l[t.charCodeAt(n+1)]<<12|$l[t.charCodeAt(n+2)]<<6|$l[t.charCodeAt(n+3)],o[a++]=e>>16&255,o[a++]=e>>8&255,o[a++]=255&e;return 2===s&&(e=$l[t.charCodeAt(n)]<<2|$l[t.charCodeAt(n+1)]>>4,o[a++]=255&e),1===s&&(e=$l[t.charCodeAt(n)]<<10|$l[t.charCodeAt(n+1)]<<4|$l[t.charCodeAt(n+2)]>>2,o[a++]=e>>8&255,o[a++]=255&e),o},fromByteArray:function(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(ql(t,o,o+s>a?a:o+s));return 1===r?(e=t[n-1],i.push(Bl[e>>2]+Bl[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(Bl[e>>10]+Bl[e>>4&63]+Bl[e<<2&63]+"=")),i.join("")}},Bl=[],$l=[],Ul="undefined"!=typeof Uint8Array?Uint8Array:Array,Fl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ll=0;Ll<64;++Ll)Bl[Ll]=Fl[Ll],$l[Fl.charCodeAt(Ll)]=Ll;function Wl(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function Vl(t){return Bl[t>>18&63]+Bl[t>>12&63]+Bl[t>>6&63]+Bl[63&t]}function ql(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(Vl(r));return i.join("")}$l["-".charCodeAt(0)]=62,$l["_".charCodeAt(0)]=63;var Kl={read:function(t,e,n,r,i){var s,o,a=8*i-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+t[e+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+d],d+=h,u-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=l}return(f?-1:1)*o*Math.pow(2,s-r)},write:function(t,e,n,r,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,m=r?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o+=d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+f]=255&a,f+=m,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+f]=255&o,f+=m,o/=256,l-=8);t[n+f-m]|=128*p}};!function(t){const e=Rl,n=Kl,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function s(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|f(t,e);let r=s(n);const i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){const e=new Uint8Array(t);return d(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return d(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return d(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return o.from(r,e,n);const i=function(t){if(o.isBuffer(t)){const e=0|h(t.length),n=s(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||Y(t.length)?s(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),s(t<0?0:0|h(t))}function u(t){const e=t.length<0?0:0|h(t.length),n=s(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function d(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,o.prototype),r}function h(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function f(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(t).length;default:if(i)return r?-1:V(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return M(this,e,n);case"ascii":return E(this,e,n);case"latin1":case"binary":return S(this,e,n);case"base64":return k(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function p(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){let s,o=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,c/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let r=-1;for(s=n;s<a;s++)if(l(t,s)===l(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===c)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){let n=!0;for(let r=0;r<c;r++)if(l(t,s+r)!==l(e,r)){n=!1;break}if(n)return s}return-1}function y(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(Y(r))return o;t[n+o]=r}return o}function v(t,e,n,r){return K(V(e,t.length-n),t,n,r)}function b(t,e,n,r){return K(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return K(q(e),t,n,r)}function N(t,e,n,r){return K(function(t,e){let n,r,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(e,t.length-n),t,n,r)}function k(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function M(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=n){let n,r,a,c;switch(o){case 1:e<128&&(s=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(s=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=o}return function(t){const e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}t.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?s(t):void 0!==e?"string"==typeof n?s(t).fill(e,n):s(t).fill(e):s(t)}(t,e,n)},o.allocUnsafe=function(t){return l(t)},o.allocUnsafeSlow=function(t){return l(t)},o.isBuffer=function(t){return null!=t&&!0===t.V&&t!==o.prototype},o.compare=function(t,e){if(H(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=o.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(H(e,Uint8Array))i+e.length>r.length?(o.isBuffer(e)||(e=o.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!o.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},o.byteLength=f,o.prototype.V=!0,o.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)p(this,e,e+1);return this},o.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)p(this,e,e+3),p(this,e+1,e+2);return this},o.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)p(this,e,e+7),p(this,e+1,e+6),p(this,e+2,e+5),p(this,e+3,e+4);return this},o.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?M(this,0,t):m.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(t,e,n,r,i){if(H(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let s=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const c=Math.min(s,a),l=this.slice(r,i),u=t.slice(e,n);for(let o=0;o<c;++o)if(l[o]!==u[o]){s=l[o],a=u[o];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return v(this,t,e,n);case"ascii":case"latin1":case"binary":return b(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this.q||this,0)}};const A=4096;function E(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function S(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let s=e;s<n;++s)i+=Z[t[s]];return i}function T(t,e,n){const r=t.slice(e,n);let i="";for(let s=0;s<r.length-1;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r,i){U(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,n}function j(t,e,n,r,i){U(e,r,i,t,n,7);let s=Number(e&BigInt(4294967295));t[n+7]=s,s>>=8,t[n+6]=s,s>>=8,t[n+5]=s,s>>=8,t[n+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=o,o>>=8,t[n+2]=o,o>>=8,t[n+1]=o,o>>=8,t[n]=o,n+8}function D(t,e,n,r,i,s){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(t,e,r,i,s){return e=+e,r>>>=0,s||D(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function _(t,e,r,i,s){return e=+e,r>>>=0,s||D(t,0,r,8),n.write(t,e,r,i,52,8),r+8}o.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readBigUInt64LE=G(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=G(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);let r=this[t],i=1,s=0;for(;++s<e&&(i*=256);)r+=this[t+s]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);let r=e,i=1,s=this[t+--r];for(;r>0&&(i*=256);)s+=this[t+--r]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},o.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readBigInt64LE=G(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),o.prototype.readBigInt64BE=G(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||L(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)}),o.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),n.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),n.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),n.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),n.read(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);let i=1,s=0;for(this[e]=255&t;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||O(this,t,e,n,Math.pow(2,8*n)-1,0);let i=n-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigUInt64LE=G(function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=G(function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}let i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s|0)-o&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeBigInt64LE=G(function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=G(function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(t,e,n){return z(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return z(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return _(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return _(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const s=o.isBuffer(t)?t:o.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};const R={};function B(t,e,n){R[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function $(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function U(t,e,n,r,i,s){if(t>n||t<e){const n="bigint"==typeof e?"n":"";let r;throw r=0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`,new R.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){F(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||L(e,t.length-(n+1))}(r,i,s)}function F(t,e){if("number"!=typeof t)throw new R.ERR_INVALID_ARG_TYPE(e,"number",t)}function L(t,e,n){if(Math.floor(t)!==t)throw F(t,n),new R.ERR_OUT_OF_RANGE("offset","an integer",t);if(e<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),B("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=$(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=$(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function V(t,e){let n;e=e||1/0;const r=t.length;let i=null;const s=[];for(let o=0;o<r;++o){if(n=t.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;s.push(n)}else if(n<2048){if((e-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function q(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const Z=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function G(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}}(_l);const Hl="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Yl(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function Zl(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Gl(t,...e){if(!Yl(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Ql(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");Zl(t.outputLen),Zl(t.blockLen)}function Xl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Jl(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function tu(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function eu(t,e){return t<<32-e|t>>>e}const nu=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),ru=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function iu(t){if(Gl(t),nu)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=ru[t[n]];return e}function su(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:void 0}function ou(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(nu)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const e=su(t.charCodeAt(s)),n=su(t.charCodeAt(s+1));if(void 0===e||void 0===n){const e=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+s)}r[i]=16*e+n}return r}function au(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t)),Gl(t),t}function cu(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];Gl(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const e=t[r];n.set(e,i),i+=e.length}return n}class lu{}function uu(t){const e=e=>t().update(au(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function du(t=32){if(Hl&&"function"==typeof Hl.getRandomValues)return Hl.getRandomValues(new Uint8Array(t));if(Hl&&"function"==typeof Hl.randomBytes)return Uint8Array.from(Hl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function hu(t,e,n){return t&e^~t&n}function fu(t,e,n){return t&e^t&n^e&n}class mu extends lu{constructor(t,e,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(t),this.view=tu(this.buffer)}update(t){Xl(this),Gl(t=au(t));const{view:e,buffer:n,blockLen:r}=this,i=t.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o===r){const e=tu(t);for(;r<=i-s;s+=r)this.process(e,s);continue}n.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Xl(this),function(t,e){Gl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;e[s++]=128,Jl(this.buffer.subarray(s)),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)e[u]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=tu(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}K(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return t.destroyed=s,t.finished=i,t.length=r,t.pos=o,r%e&&t.buffer.set(n),t}clone(){return this.K()}}const pu=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gu=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),wu=BigInt(2**32-1),yu=BigInt(32);function vu(t,e=!1){return e?{h:Number(t&wu),l:Number(t>>yu&wu)}:{h:0|Number(t>>yu&wu),l:0|Number(t&wu)}}const bu=(t,e,n)=>t>>>n,xu=(t,e,n)=>t<<32-n|e>>>n,Nu=(t,e,n)=>t>>>n|e<<32-n,ku=(t,e,n)=>t<<32-n|e>>>n,Mu=(t,e,n)=>t<<64-n|e>>>n-32,Au=(t,e,n)=>t>>>n-32|e<<64-n;function Eu(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}const Su=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Cu=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Tu=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Iu=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Ou=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Pu=(t,e,n,r,i,s)=>e+n+r+i+s+(t/2**32|0)|0,ju=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Du=new Uint32Array(64);class zu extends mu{constructor(t=32){super(64,t,8,!1),this.A=0|pu[0],this.B=0|pu[1],this.C=0|pu[2],this.D=0|pu[3],this.E=0|pu[4],this.F=0|pu[5],this.G=0|pu[6],this.H=0|pu[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[t,e,n,r,i,s,o,a]}set(t,e,n,r,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let u=0;u<16;u++,e+=4)Du[u]=t.getUint32(e,!1);for(let u=16;u<64;u++){const t=Du[u-15],e=Du[u-2],n=eu(t,7)^eu(t,18)^t>>>3,r=eu(e,17)^eu(e,19)^e>>>10;Du[u]=r+Du[u-7]+n+Du[u-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:c,H:l}=this;for(let u=0;u<64;u++){const t=l+(eu(o,6)^eu(o,11)^eu(o,25))+hu(o,a,c)+ju[u]+Du[u]|0,e=(eu(n,2)^eu(n,13)^eu(n,22))+fu(n,r,i)|0;l=c,c=a,a=o,o=s+t|0,s=i,i=r,r=n,n=t+e|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,i,s,o,a,c,l)}roundClean(){Jl(Du)}destroy(){this.set(0,0,0,0,0,0,0,0),Jl(this.buffer)}}const _u=(()=>function(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let s=0;s<n;s++){const{h:n,l:o}=vu(t[s],e);[r[s],i[s]]=[n,o]}return[r,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Ru=(()=>_u[0])(),Bu=(()=>_u[1])(),$u=new Uint32Array(80),Uu=new Uint32Array(80);class Fu extends mu{constructor(t=64){super(128,t,16,!1),this.Ah=0|gu[0],this.Al=0|gu[1],this.Bh=0|gu[2],this.Bl=0|gu[3],this.Ch=0|gu[4],this.Cl=0|gu[5],this.Dh=0|gu[6],this.Dl=0|gu[7],this.Eh=0|gu[8],this.El=0|gu[9],this.Fh=0|gu[10],this.Fl=0|gu[11],this.Gh=0|gu[12],this.Gl=0|gu[13],this.Hh=0|gu[14],this.Hl=0|gu[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:d,Gh:h,Gl:f,Hh:m,Hl:p}=this;return[t,e,n,r,i,s,o,a,c,l,u,d,h,f,m,p]}set(t,e,n,r,i,s,o,a,c,l,u,d,h,f,m,p){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|m,this.Hl=0|p}process(t,e){for(let y=0;y<16;y++,e+=4)$u[y]=t.getUint32(e),Uu[y]=t.getUint32(e+=4);for(let y=16;y<80;y++){const t=0|$u[y-15],e=0|Uu[y-15],n=Nu(t,e,1)^Nu(t,e,8)^bu(t,0,7),r=ku(t,e,1)^ku(t,e,8)^xu(t,e,7),i=0|$u[y-2],s=0|Uu[y-2],o=Nu(i,s,19)^Mu(i,s,61)^bu(i,0,6),a=ku(i,s,19)^Au(i,s,61)^xu(i,s,6),c=Tu(r,a,Uu[y-7],Uu[y-16]),l=Iu(c,n,o,$u[y-7],$u[y-16]);$u[y]=0|l,Uu[y]=0|c}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:d,Fh:h,Fl:f,Gh:m,Gl:p,Hh:g,Hl:w}=this;for(let y=0;y<80;y++){const t=Nu(u,d,14)^Nu(u,d,18)^Mu(u,d,41),e=ku(u,d,14)^ku(u,d,18)^Au(u,d,41),v=u&h^~u&m,b=Ou(w,e,d&f^~d&p,Bu[y],Uu[y]),x=Pu(b,g,t,v,Ru[y],$u[y]),N=0|b,k=Nu(n,r,28)^Mu(n,r,34)^Mu(n,r,39),M=ku(n,r,28)^Au(n,r,34)^Au(n,r,39),A=n&i^n&o^i&o,E=r&s^r&a^s&a;g=0|m,w=0|p,m=0|h,p=0|f,h=0|u,f=0|d,({h:u,l:d}=Eu(0|c,0|l,0|x,0|N)),c=0|o,l=0|a,o=0|i,a=0|s,i=0|n,s=0|r;const S=Su(N,M,E);n=Cu(S,x,k,A),r=0|S}({h:n,l:r}=Eu(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=Eu(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Eu(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:l}=Eu(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:d}=Eu(0|this.Eh,0|this.El,0|u,0|d)),({h:h,l:f}=Eu(0|this.Fh,0|this.Fl,0|h,0|f)),({h:m,l:p}=Eu(0|this.Gh,0|this.Gl,0|m,0|p)),({h:g,l:w}=Eu(0|this.Hh,0|this.Hl,0|g,0|w)),this.set(n,r,i,s,o,a,c,l,u,d,h,f,m,p,g,w)}roundClean(){Jl($u,Uu)}destroy(){Jl(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Lu=uu(()=>new zu),Wu=uu(()=>new Fu),Vu=BigInt(0),qu=BigInt(1);function Ku(t,e=""){if("boolean"!=typeof t)throw new Error((e&&`"${e}"`)+"expected boolean, got type="+typeof t);return t}function Hu(t,e,n=""){const r=Yl(t),i=null==t?void 0:t.length,s=void 0!==e;if(!r||s&&i!==e)throw new Error((n&&`"${n}" `)+"expected Uint8Array"+(s?` of length ${e}`:"")+", got "+(r?`length=${i}`:"type="+typeof t));return t}function Yu(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function Zu(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?Vu:BigInt("0x"+t)}function Gu(t){return Zu(iu(t))}function Qu(t){return Gl(t),Zu(iu(Uint8Array.from(t).reverse()))}function Xu(t,e){return ou(t.toString(16).padStart(2*e,"0"))}function Ju(t,e){return Xu(t,e).reverse()}function td(t,e,n){let r;if("string"==typeof e)try{r=ou(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else{if(!Yl(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function ed(t){return Uint8Array.from(t)}const nd=t=>"bigint"==typeof t&&Vu<=t;function rd(t,e,n,r){if(!function(t,e,n){return nd(t)&&nd(e)&&nd(n)&&e<=t&&t<n}(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function id(t){let e;for(e=0;t>Vu;t>>=qu,e+=1);return e}const sd=t=>(qu<<BigInt(t))-qu;function od(t,e,n={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(e,n,r){const i=t[e];if(r&&void 0===i)return;const s=typeof i;if(s!==n||null===i)throw new Error(`param "${e}" is invalid: expected ${n}, got ${s}`)}Object.entries(e).forEach(([t,e])=>r(t,e,!1)),Object.entries(n).forEach(([t,e])=>r(t,e,!0))}function ad(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const s=t(n,...r);return e.set(n,s),s}}const cd=BigInt(0),ld=BigInt(1),ud=BigInt(2),dd=BigInt(3),hd=BigInt(4),fd=BigInt(5),md=BigInt(7),pd=BigInt(8),gd=BigInt(9),wd=BigInt(16);function yd(t,e){const n=t%e;return n>=cd?n:e+n}function vd(t,e,n){let r=t;for(;e-- >cd;)r*=r,r%=n;return r}function bd(t,e){if(t===cd)throw new Error("invert: expected non-zero number");if(e<=cd)throw new Error("invert: expected positive modulus, got "+e);let n=yd(t,e),r=e,i=cd,s=ld;for(;n!==cd;){const t=r%n,e=i-s*(r/n);r=n,n=t,i=s,s=e}if(r!==ld)throw new Error("invert: does not exist");return yd(i,e)}function xd(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Nd(t,e){const n=(t.ORDER+ld)/hd,r=t.pow(e,n);return xd(t,r,e),r}function kd(t,e){const n=(t.ORDER-fd)/pd,r=t.mul(e,ud),i=t.pow(r,n),s=t.mul(e,i),o=t.mul(t.mul(s,ud),i),a=t.mul(s,t.sub(o,t.ONE));return xd(t,a,e),a}function Md(t){if(t<dd)throw new Error("sqrt is not defined for small field");let e=t-ld,n=0;for(;e%ud===cd;)e/=ud,n++;let r=ud;const i=Td(t);for(;1===Sd(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return Nd;let s=i.pow(r,e);const o=(e+ld)/ud;return function(t,r){if(t.is0(r))return r;if(1!==Sd(t,r))throw new Error("Cannot find square root");let i=n,a=t.mul(t.ONE,s),c=t.pow(r,e),l=t.pow(r,o);for(;!t.eql(c,t.ONE);){if(t.is0(c))return t.ZERO;let e=1,n=t.sqr(c);for(;!t.eql(n,t.ONE);)if(e++,n=t.sqr(n),e===i)throw new Error("Cannot find square root");const r=ld<<BigInt(i-e-1),s=t.pow(a,r);i=e,a=t.sqr(s),c=t.mul(c,a),l=t.mul(l,s)}return l}}const Ad=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ed(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),s=t.inv(i);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),s),r}function Sd(t,e){const n=(t.ORDER-ld)/ud,r=t.pow(e,n),i=t.eql(r,t.ONE),s=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function Cd(t,e){void 0!==e&&Zl(e);const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Td(t,e,n=!1,r={}){if(t<=cd)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o,a=!1;if("object"==typeof e&&null!=e){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(i=t.BITS),t.sqrt&&(s=t.sqrt),"boolean"==typeof t.isLE&&(n=t.isLE),"boolean"==typeof t.modFromBytes&&(a=t.modFromBytes),o=t.allowedLengths}else"number"==typeof e&&(i=e),r.sqrt&&(s=r.sqrt);const{nBitLength:c,nByteLength:l}=Cd(t,i);if(l>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const d=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:l,MASK:sd(c),ZERO:cd,ONE:ld,allowedLengths:o,create:e=>yd(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return cd<=e&&e<t},is0:t=>t===cd,isValidNot0:t=>!d.is0(t)&&d.isValid(t),isOdd:t=>(t&ld)===ld,neg:e=>yd(-e,t),eql:(t,e)=>t===e,sqr:e=>yd(e*e,t),add:(e,n)=>yd(e+n,t),sub:(e,n)=>yd(e-n,t),mul:(e,n)=>yd(e*n,t),pow:(t,e)=>function(t,e,n){if(n<cd)throw new Error("invalid exponent, negatives unsupported");if(n===cd)return t.ONE;if(n===ld)return e;let r=t.ONE,i=e;for(;n>cd;)n&ld&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ld;return r}(d,t,e),div:(e,n)=>yd(e*bd(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>bd(e,t),sqrt:s||(e=>{return u||(u=(n=t)%hd===dd?Nd:n%pd===fd?kd:n%wd===gd?function(t){const e=Td(t),n=Md(t),r=n(e,e.neg(e.ONE)),i=n(e,r),s=n(e,e.neg(r)),o=(t+md)/wd;return(t,e)=>{let n=t.pow(e,o),a=t.mul(n,r);const c=t.mul(n,i),l=t.mul(n,s),u=t.eql(t.sqr(a),e),d=t.eql(t.sqr(c),e);n=t.cmov(n,a,u),a=t.cmov(l,c,d);const h=t.eql(t.sqr(a),e),f=t.cmov(n,a,h);return xd(t,f,e),f}}(n):Md(n)),u(d,e);var n}),toBytes:t=>n?Ju(t,l):Xu(t,l),fromBytes:(e,r=!0)=>{if(o){if(!o.includes(e.length)||e.length>l)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+e.length);const t=new Uint8Array(l);t.set(e,n?0:t.length-e.length),e=t}if(e.length!==l)throw new Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);let i=n?Qu(e):Gu(e);if(a&&(i=yd(i,t)),!r&&!d.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:t=>Ed(d,t),cmov:(t,e,n)=>n?e:t});return Object.freeze(d)}function Id(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Od(t){const e=Id(t);return e+Math.ceil(e/2)}const Pd=BigInt(0),jd=BigInt(1);function Dd(t,e){const n=e.negate();return t?n:e}function zd(t,e){const n=Ed(t.Fp,e.map(t=>t.Z));return e.map((e,r)=>t.fromAffine(e.toAffine(n[r])))}function _d(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Rd(t,e){_d(t,e);const n=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:sd(t),maxNumber:n,shiftBy:BigInt(t)}}function Bd(t,e,n){const{windowSize:r,mask:i,maxNumber:s,shiftBy:o}=n;let a=Number(t&i),c=t>>o;a>r&&(a-=s,c+=jd);const l=e*r;return{nextN:c,offset:l+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:e%2!=0,offsetF:l}}const $d=new WeakMap,Ud=new WeakMap;function Fd(t){return Ud.get(t)||1}function Ld(t){if(t!==Pd)throw new Error("invalid wNAF")}class Wd{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}J(t,e,n=this.ZERO){let r=t;for(;e>Pd;)e&jd&&(n=n.add(r)),r=r.double(),e>>=jd;return n}precomputeWindow(t,e){const{windows:n,windowSize:r}=Rd(e,this.bits),i=[];let s=t,o=s;for(let a=0;a<n;a++){o=s,i.push(o);for(let t=1;t<r;t++)o=o.add(s),i.push(o);s=o.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,i=this.BASE;const s=Rd(t,this.bits);for(let o=0;o<s.windows;o++){const{nextN:t,offset:a,isZero:c,isNeg:l,isNegF:u,offsetF:d}=Bd(n,o,s);n=t,c?i=i.add(Dd(u,e[d])):r=r.add(Dd(l,e[a]))}return Ld(n),{p:r,f:i}}wNAFUnsafe(t,e,n,r=this.ZERO){const i=Rd(t,this.bits);for(let s=0;s<i.windows&&n!==Pd;s++){const{nextN:t,offset:o,isZero:a,isNeg:c}=Bd(n,s,i);if(n=t,!a){const t=e[o];r=r.add(c?t.negate():t)}}return Ld(n),r}getPrecomputes(t,e,n){let r=$d.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&("function"==typeof n&&(r=n(r)),$d.set(e,r))),r}cached(t,e,n){const r=Fd(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)}unsafe(t,e,n,r){const i=Fd(t);return 1===i?this.J(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)}createCache(t,e){_d(e,this.bits),Ud.set(t,e),$d.delete(t)}hasCache(t){return 1!==Fd(t)}}function Vd(t,e,n,r){!function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}(r,e);const i=n.length,s=r.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=id(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=sd(c),u=new Array(Number(l)+1).fill(o);let d=o;for(let h=Math.floor((e.BITS-1)/c)*c;h>=0;h-=c){u.fill(o);for(let e=0;e<s;e++){const t=r[e],i=Number(t>>BigInt(h)&l);u[i]=u[i].add(n[e])}let t=o;for(let e=u.length-1,n=o;e>0;e--)n=n.add(u[e]),t=t.add(n);if(d=d.add(t),0!==h)for(let e=0;e<c;e++)d=d.double()}return d}function qd(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(t){od(t,Ad.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(e),e}return Td(t,{isLE:n})}function Kd(t,e,n={},r){if(void 0===r&&(r="edwards"===t),!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const t=e[a];if(!("bigint"==typeof t&&t>Pd))throw new Error(`CURVE.${a} must be positive bigint`)}const i=qd(e.p,n.Fp,r),s=qd(e.n,n.Fn,r),o=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const a of o)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{CURVE:e=Object.freeze(Object.assign({},e)),Fp:i,Fn:s}}const Hd=BigInt(0),Yd=BigInt(1),Zd=BigInt(2),Gd=BigInt(8);const Qd=BigInt(1),Xd=BigInt(2);BigInt(3);const Jd=BigInt(5),th=BigInt(8),eh=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),nh=(()=>({p:eh,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:th,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function rh(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ih=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function sh(t,e){const n=eh,r=yd(e*e*e,n),i=function(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),s=eh,o=t*t%s*t%s,a=vd(o,Xd,s)*o%s,c=vd(a,Qd,s)*t%s,l=vd(c,Jd,s)*c%s,u=vd(l,e,s)*l%s,d=vd(u,n,s)*u%s,h=vd(d,r,s)*d%s,f=vd(h,i,s)*h%s,m=vd(f,i,s)*h%s,p=vd(m,e,s)*l%s;return{pow_p_5_8:vd(p,Xd,s)*t%s,b2:o}}(t*yd(r*r*e,n)).pow_p_5_8;let s=yd(t*r*i,n);const o=yd(e*s*s,n),a=s,c=yd(s*ih,n),l=o===t,u=o===yd(-t,n),d=o===yd(-t*ih,n);return l&&(s=a),(u||d)&&(s=c),(yd(s,n)&ld)===ld&&(s=yd(-s,n)),{isValid:l||u,value:s}}const oh=(()=>Td(nh.p,{isLE:!0}))(),ah=(()=>({...nh,Fp:oh,hash:Wu,adjustScalarBytes:rh,uvRatio:sh}))(),ch=(()=>function(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=function(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n={Fp:t.Fp,Fn:Td(e.n,t.nBitLength,!0),uvRatio:t.uvRatio},r={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:n,hash:t.hash,eddsaOpts:r}}(t),s=function(t,e={}){const n=Kd("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o}=s;od(e,{},{uvRatio:"function"});const a=Zd<<BigInt(8*i.BYTES)-Yd,c=t=>r.create(t),l=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(r.div(t,e))}}catch(n){return{isValid:!1,value:Hd}}});if(!function(t,e,n,r){const i=t.sqr(n),s=t.sqr(r),o=t.add(t.mul(e.a,i),s),a=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,a)}(r,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(t,e,n=!1){return rd("coordinate "+t,e,n?Yd:Hd,a),e}function d(t){if(!(t instanceof m))throw new Error("ExtendedPoint expected")}const h=ad((t,e)=>{const{X:n,Y:i,Z:s}=t,o=t.is0();null==e&&(e=o?Gd:r.inv(s));const a=c(n*e),l=c(i*e),u=r.mul(s,e);if(o)return{x:Hd,y:Yd};if(u!==Yd)throw new Error("invZ was invalid");return{x:a,y:l}}),f=ad(t=>{const{a:e,d:n}=s;if(t.is0())throw new Error("bad point: ZERO");const{X:r,Y:i,Z:o,T:a}=t,l=c(r*r),u=c(i*i),d=c(o*o),h=c(d*d),f=c(l*e);if(c(d*c(f+u))!==c(h+c(n*c(l*u))))throw new Error("bad point: equation left != right (1)");if(c(r*i)!==c(o*a))throw new Error("bad point: equation left != right (2)");return!0});class m{constructor(t,e,n,r){this.X=u("x",t),this.Y=u("y",e),this.Z=u("z",n,!0),this.T=u("t",r),Object.freeze(this)}static CURVE(){return s}static fromAffine(t){if(t instanceof m)throw new Error("extended point not allowed");const{x:e,y:n}=t||{};return u("x",e),u("y",n),new m(e,n,Yd,c(e*n))}static fromBytes(t,e=!1){const n=r.BYTES,{a:i,d:o}=s;t=ed(Hu(t,n,"point")),Ku(e,"zip215");const u=ed(t),d=t[n-1];u[n-1]=-129&d;const h=Qu(u),f=e?a:r.ORDER;rd("point.y",h,Hd,f);const p=c(h*h),g=c(p-Yd),w=c(o*p-i);let{isValid:y,value:v}=l(g,w);if(!y)throw new Error("bad point: invalid y coordinate");const b=(v&Yd)===Yd,x=!!(128&d);if(!e&&v===Hd&&x)throw new Error("bad point: x=0 and x_0=1");return x!==b&&(v=c(-v)),m.fromAffine({x:v,y:h})}static fromHex(t,e=!1){return m.fromBytes(td("point",t),e)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return p.createCache(this,t),e||this.multiply(Zd),this}assertValidity(){f(this)}equals(t){d(t);const{X:e,Y:n,Z:r}=this,{X:i,Y:s,Z:o}=t,a=c(e*o),l=c(i*r),u=c(n*o),h=c(s*r);return a===l&&u===h}is0(){return this.equals(m.ZERO)}negate(){return new m(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:t}=s,{X:e,Y:n,Z:r}=this,i=c(e*e),o=c(n*n),a=c(Zd*c(r*r)),l=c(t*i),u=e+n,d=c(c(u*u)-i-o),h=l+o,f=h-a,p=l-o,g=c(d*f),w=c(h*p),y=c(d*p),v=c(f*h);return new m(g,w,v,y)}add(t){d(t);const{a:e,d:n}=s,{X:r,Y:i,Z:o,T:a}=this,{X:l,Y:u,Z:h,T:f}=t,p=c(r*l),g=c(i*u),w=c(a*n*f),y=c(o*h),v=c((r+i)*(l+u)-p-g),b=y-w,x=y+w,N=c(g-e*p),k=c(v*b),M=c(x*N),A=c(v*N),E=c(b*x);return new m(k,M,E,A)}subtract(t){return this.add(t.negate())}multiply(t){if(!i.isValidNot0(t))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:e,f:n}=p.cached(this,t,t=>zd(m,t));return zd(m,[e,n])[0]}multiplyUnsafe(t,e=m.ZERO){if(!i.isValid(t))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return t===Hd?m.ZERO:this.is0()||t===Yd?this:p.unsafe(this,t,t=>zd(m,t),e)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return p.unsafe(this,s.n).is0()}toAffine(t){return h(this,t)}clearCofactor(){return o===Yd?this:this.multiplyUnsafe(o)}toBytes(){const{x:t,y:e}=this.toAffine(),n=r.toBytes(e);return n[n.length-1]|=t&Yd?128:0,n}toHex(){return iu(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(t){return zd(m,t)}static msm(t,e){return Vd(m,i,t,e)}tt(t){this.precompute(t)}toRawBytes(){return this.toBytes()}}m.BASE=new m(s.Gx,s.Gy,Yd,c(s.Gx*s.Gy)),m.ZERO=new m(Hd,Yd,Yd,Hd),m.Fp=r,m.Fn=i;const p=new Wd(m,i.BITS);return m.BASE.precompute(8),m}(e,n);return function(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}(t,function(t,e,n={}){if("function"!=typeof e)throw new Error('"hash" function param is required');od(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:s,Fn:o}=t,a=n.randomBytes||du,c=n.adjustScalarBytes||(t=>t),l=n.domain||((t,e,n)=>{if(Ku(n,"phflag"),e.length||n)throw new Error("Contexts/pre-hash are not supported");return t});function u(t){return o.create(Qu(t))}function d(t){const{head:n,prefix:r,scalar:s}=function(t){const n=g.secretKey;t=td("private key",t,n);const r=td("hashed private key",e(t),2*n),i=c(r.slice(0,n));return{head:i,prefix:r.slice(n,2*n),scalar:u(i)}}(t),o=i.multiply(s),a=o.toBytes();return{head:n,prefix:r,scalar:s,point:o,pointBytes:a}}function h(t){return d(t).pointBytes}function f(t=Uint8Array.of(),...n){const i=cu(...n);return u(e(l(i,td("context",t),!!r)))}const m={zip215:!0},p=s.BYTES,g={secretKey:p,publicKey:p,signature:2*p,seed:p};function w(t=a(g.seed)){return Hu(t,g.seed,"seed")}const y={getExtendedPublicKey:d,randomSecretKey:w,isValidSecretKey:function(t){return Yl(t)&&t.length===o.BYTES},isValidPublicKey:function(e,n){try{return!!t.fromBytes(e,n)}catch(r){return!1}},toMontgomery(e){const{y:n}=t.fromBytes(e),r=g.publicKey,i=32===r;if(!i&&57!==r)throw new Error("only defined for 25519 and 448");const o=i?s.div(Yd+n,Yd-n):s.div(n-Yd,n+Yd);return s.toBytes(o)},toMontgomeryPriv(t){const n=g.secretKey;Hu(t,n);const r=e(t.subarray(0,n));return c(r).subarray(0,n)},randomPrivateKey:w,precompute:(e=8,n=t.BASE)=>n.precompute(e,!1)};return Object.freeze({keygen:function(t){const e=y.randomSecretKey(t);return{secretKey:e,publicKey:h(e)}},getPublicKey:h,sign:function(t,e,n={}){t=td("message",t),r&&(t=r(t));const{prefix:s,scalar:a,pointBytes:c}=d(e),l=f(n.context,s,t),u=i.multiply(l).toBytes(),h=f(n.context,u,c,t),m=o.create(l+h*a);if(!o.isValid(m))throw new Error("sign failed: invalid s");return Hu(cu(u,o.toBytes(m)),g.signature,"result")},verify:function(e,n,s,o=m){const{context:a,zip215:c}=o,l=g.signature;e=td("signature",e,l),n=td("message",n),s=td("publicKey",s,g.publicKey),void 0!==c&&Ku(c,"zip215"),r&&(n=r(n));const u=l/2,d=e.subarray(0,u),h=Qu(e.subarray(u,l));let p,w,y;try{p=t.fromBytes(s,c),w=t.fromBytes(d,c),y=i.multiplyUnsafe(h)}catch(b){return!1}if(!c&&p.isSmallOrder())return!1;const v=f(a,w.toBytes(),p.toBytes(),n);return w.add(p.multiplyUnsafe(v)).subtract(y).clearCofactor().is0()},utils:y,Point:t,lengths:g})}(s,r,i))}(ah))();var lh={exports:{}};!function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function i(t,e,n){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this.nt(t||0,e||10,n||"be"))}var s;"object"==typeof lh?lh.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:_t.Buffer}catch(E){}function o(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,n){var r=o(t,n);return n-1>=e&&(r|=o(t,n-1)<<4),r}function c(t,e,r,i){for(var s=0,o=0,a=Math.min(t.length,r),c=e;c<a;c++){var l=t.charCodeAt(c)-48;s*=i,o=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&o<i,"Invalid character"),s+=o}return s}function l(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype.nt=function(t,e,r){if("number"==typeof t)return this.rt(t,e,r);if("object"==typeof t)return this.it(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this.st(t,i,r):(this.ot(t,e,i),"le"===r&&this.it(this.toArray(),e,r)))},i.prototype.rt=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this.it(this.toArray(),e,r)},i.prototype.it=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=t.length-1,s=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.ct()},i.prototype.st=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,s=0,o=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=a(t,e,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=a(t,e,r)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this.ct()},i.prototype.ot=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var s=t.length-n,o=s%r,a=Math.min(s,s-o)+n,l=0,u=n;u<a;u+=r)l=c(t,u,u+r,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this.ut(l);if(0!==o){var d=1;for(l=c(t,u,t.length,e),u=0;u<o;u++)d*=e;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this.ut(l)}this.ct()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype.dt=function(t){l(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype.ht=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype.ct=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.ft()},i.prototype.ft=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch(E){i.prototype.inspect=u}else i.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],s=0|e.words[0],o=i*s,a=67108863&o,c=o/67108864|0;n.words[0]=a;for(var l=1;l<r;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=h;f++){var m=l-f|0;u+=(o=(i=0|t.words[m])*(s=0|e.words[f])+d)/67108864|0,d=67108863&o}n.words[l]=0|d,c=0|u}return 0!==c?n.words[l]=0|c:n.length--,n.ct()}i.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var l=h[t],u=f[t];r="";var m=this.clone();for(m.negative=0;!m.isZero();){var p=m.modrn(u).toString(t);r=(m=m.idivn(u)).isZero()?p+r:d[l-p.length]+p+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(s,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,r){this.ct();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,i),o},i.prototype.wt=function(t,e){for(var n=0,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;t[n++]=255&o,n<t.length&&(t[n++]=o>>8&255),n<t.length&&(t[n++]=o>>16&255),6===s?(n<t.length&&(t[n++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},i.prototype.yt=function(t,e){for(var n=t.length-1,r=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|r;t[n--]=255&o,n>=0&&(t[n--]=o>>8&255),n>=0&&(t[n--]=o>>16&255),6===s?(n>=0&&(t[n--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},Math.clz32?i.prototype.vt=function(t){return 32-Math.clz32(t)}:i.prototype.vt=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},i.prototype.bt=function(t){if(0===t)return 26;var e=t,n=0;return 8191&e||(n+=13,e>>>=13),127&e||(n+=7,e>>>=7),15&e||(n+=4,e>>>=4),3&e||(n+=2,e>>>=2),1&e||n++,n},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this.vt(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this.bt(this.words[e]);if(t+=n,26!==n)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.ct()},i.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.ct()},i.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.ct()},i.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this.ht(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.ct()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this.ht(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.ct()},i.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this.ft();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e.ft();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,s=0;s<r.length;s++)e=(0|n.words[s])+(0|r.words[s])+i,this.words[s]=67108863&e,i=e>>>26;for(;0!==i&&s<n.length;s++)e=(0|n.words[s])+i,this.words[s]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e.ft()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.ft();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|n.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<n.length;o++)s=(e=(0|n.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.ct()},i.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,s,o=t.words,a=e.words,c=n.words,l=0,u=0|o[0],d=8191&u,h=u>>>13,f=0|o[1],m=8191&f,p=f>>>13,g=0|o[2],w=8191&g,y=g>>>13,v=0|o[3],b=8191&v,x=v>>>13,N=0|o[4],k=8191&N,M=N>>>13,A=0|o[5],E=8191&A,S=A>>>13,C=0|o[6],T=8191&C,I=C>>>13,O=0|o[7],P=8191&O,j=O>>>13,D=0|o[8],z=8191&D,_=D>>>13,R=0|o[9],B=8191&R,$=R>>>13,U=0|a[0],F=8191&U,L=U>>>13,W=0|a[1],V=8191&W,q=W>>>13,K=0|a[2],H=8191&K,Y=K>>>13,Z=0|a[3],G=8191&Z,Q=Z>>>13,X=0|a[4],J=8191&X,tt=X>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,it=0|a[6],st=8191&it,ot=it>>>13,at=0|a[7],ct=8191&at,lt=at>>>13,ut=0|a[8],dt=8191&ut,ht=ut>>>13,ft=0|a[9],mt=8191&ft,pt=ft>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(l+(r=Math.imul(d,F))|0)+((8191&(i=(i=Math.imul(d,L))+Math.imul(h,F)|0))<<13)|0;l=((s=Math.imul(h,L))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(m,F),i=(i=Math.imul(m,L))+Math.imul(p,F)|0,s=Math.imul(p,L);var wt=(l+(r=r+Math.imul(d,V)|0)|0)+((8191&(i=(i=i+Math.imul(d,q)|0)+Math.imul(h,V)|0))<<13)|0;l=((s=s+Math.imul(h,q)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(w,F),i=(i=Math.imul(w,L))+Math.imul(y,F)|0,s=Math.imul(y,L),r=r+Math.imul(m,V)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(p,V)|0,s=s+Math.imul(p,q)|0;var yt=(l+(r=r+Math.imul(d,H)|0)|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(h,H)|0))<<13)|0;l=((s=s+Math.imul(h,Y)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(b,F),i=(i=Math.imul(b,L))+Math.imul(x,F)|0,s=Math.imul(x,L),r=r+Math.imul(w,V)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(y,V)|0,s=s+Math.imul(y,q)|0,r=r+Math.imul(m,H)|0,i=(i=i+Math.imul(m,Y)|0)+Math.imul(p,H)|0,s=s+Math.imul(p,Y)|0;var vt=(l+(r=r+Math.imul(d,G)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,G)|0))<<13)|0;l=((s=s+Math.imul(h,Q)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,F),i=(i=Math.imul(k,L))+Math.imul(M,F)|0,s=Math.imul(M,L),r=r+Math.imul(b,V)|0,i=(i=i+Math.imul(b,q)|0)+Math.imul(x,V)|0,s=s+Math.imul(x,q)|0,r=r+Math.imul(w,H)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,Y)|0,r=r+Math.imul(m,G)|0,i=(i=i+Math.imul(m,Q)|0)+Math.imul(p,G)|0,s=s+Math.imul(p,Q)|0;var bt=(l+(r=r+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,tt)|0)+Math.imul(h,J)|0))<<13)|0;l=((s=s+Math.imul(h,tt)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(E,F),i=(i=Math.imul(E,L))+Math.imul(S,F)|0,s=Math.imul(S,L),r=r+Math.imul(k,V)|0,i=(i=i+Math.imul(k,q)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(b,H)|0,i=(i=i+Math.imul(b,Y)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,Y)|0,r=r+Math.imul(w,G)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(y,G)|0,s=s+Math.imul(y,Q)|0,r=r+Math.imul(m,J)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(p,J)|0,s=s+Math.imul(p,tt)|0;var xt=(l+(r=r+Math.imul(d,nt)|0)|0)+((8191&(i=(i=i+Math.imul(d,rt)|0)+Math.imul(h,nt)|0))<<13)|0;l=((s=s+Math.imul(h,rt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(T,F),i=(i=Math.imul(T,L))+Math.imul(I,F)|0,s=Math.imul(I,L),r=r+Math.imul(E,V)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(S,V)|0,s=s+Math.imul(S,q)|0,r=r+Math.imul(k,H)|0,i=(i=i+Math.imul(k,Y)|0)+Math.imul(M,H)|0,s=s+Math.imul(M,Y)|0,r=r+Math.imul(b,G)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(x,G)|0,s=s+Math.imul(x,Q)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(p,nt)|0,s=s+Math.imul(p,rt)|0;var Nt=(l+(r=r+Math.imul(d,st)|0)|0)+((8191&(i=(i=i+Math.imul(d,ot)|0)+Math.imul(h,st)|0))<<13)|0;l=((s=s+Math.imul(h,ot)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(P,F),i=(i=Math.imul(P,L))+Math.imul(j,F)|0,s=Math.imul(j,L),r=r+Math.imul(T,V)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(E,H)|0,i=(i=i+Math.imul(E,Y)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(k,G)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(M,G)|0,s=s+Math.imul(M,Q)|0,r=r+Math.imul(b,J)|0,i=(i=i+Math.imul(b,tt)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(y,nt)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(m,st)|0,i=(i=i+Math.imul(m,ot)|0)+Math.imul(p,st)|0,s=s+Math.imul(p,ot)|0;var kt=(l+(r=r+Math.imul(d,ct)|0)|0)+((8191&(i=(i=i+Math.imul(d,lt)|0)+Math.imul(h,ct)|0))<<13)|0;l=((s=s+Math.imul(h,lt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(z,F),i=(i=Math.imul(z,L))+Math.imul(_,F)|0,s=Math.imul(_,L),r=r+Math.imul(P,V)|0,i=(i=i+Math.imul(P,q)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(T,H)|0,i=(i=i+Math.imul(T,Y)|0)+Math.imul(I,H)|0,s=s+Math.imul(I,Y)|0,r=r+Math.imul(E,G)|0,i=(i=i+Math.imul(E,Q)|0)+Math.imul(S,G)|0,s=s+Math.imul(S,Q)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(M,J)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(b,nt)|0,i=(i=i+Math.imul(b,rt)|0)+Math.imul(x,nt)|0,s=s+Math.imul(x,rt)|0,r=r+Math.imul(w,st)|0,i=(i=i+Math.imul(w,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(m,ct)|0,i=(i=i+Math.imul(m,lt)|0)+Math.imul(p,ct)|0,s=s+Math.imul(p,lt)|0;var Mt=(l+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,ht)|0)+Math.imul(h,dt)|0))<<13)|0;l=((s=s+Math.imul(h,ht)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,L))+Math.imul($,F)|0,s=Math.imul($,L),r=r+Math.imul(z,V)|0,i=(i=i+Math.imul(z,q)|0)+Math.imul(_,V)|0,s=s+Math.imul(_,q)|0,r=r+Math.imul(P,H)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(j,H)|0,s=s+Math.imul(j,Y)|0,r=r+Math.imul(T,G)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(I,G)|0,s=s+Math.imul(I,Q)|0,r=r+Math.imul(E,J)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(M,nt)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(b,st)|0,i=(i=i+Math.imul(b,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,r=r+Math.imul(w,ct)|0,i=(i=i+Math.imul(w,lt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(m,dt)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(p,dt)|0,s=s+Math.imul(p,ht)|0;var At=(l+(r=r+Math.imul(d,mt)|0)|0)+((8191&(i=(i=i+Math.imul(d,pt)|0)+Math.imul(h,mt)|0))<<13)|0;l=((s=s+Math.imul(h,pt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(B,V),i=(i=Math.imul(B,q))+Math.imul($,V)|0,s=Math.imul($,q),r=r+Math.imul(z,H)|0,i=(i=i+Math.imul(z,Y)|0)+Math.imul(_,H)|0,s=s+Math.imul(_,Y)|0,r=r+Math.imul(P,G)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(j,G)|0,s=s+Math.imul(j,Q)|0,r=r+Math.imul(T,J)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(I,J)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(E,nt)|0,i=(i=i+Math.imul(E,rt)|0)+Math.imul(S,nt)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(k,st)|0,i=(i=i+Math.imul(k,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(b,ct)|0,i=(i=i+Math.imul(b,lt)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,lt)|0,r=r+Math.imul(w,dt)|0,i=(i=i+Math.imul(w,ht)|0)+Math.imul(y,dt)|0,s=s+Math.imul(y,ht)|0;var Et=(l+(r=r+Math.imul(m,mt)|0)|0)+((8191&(i=(i=i+Math.imul(m,pt)|0)+Math.imul(p,mt)|0))<<13)|0;l=((s=s+Math.imul(p,pt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(B,H),i=(i=Math.imul(B,Y))+Math.imul($,H)|0,s=Math.imul($,Y),r=r+Math.imul(z,G)|0,i=(i=i+Math.imul(z,Q)|0)+Math.imul(_,G)|0,s=s+Math.imul(_,Q)|0,r=r+Math.imul(P,J)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(j,J)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(I,nt)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(E,st)|0,i=(i=i+Math.imul(E,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(k,ct)|0,i=(i=i+Math.imul(k,lt)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,lt)|0,r=r+Math.imul(b,dt)|0,i=(i=i+Math.imul(b,ht)|0)+Math.imul(x,dt)|0,s=s+Math.imul(x,ht)|0;var St=(l+(r=r+Math.imul(w,mt)|0)|0)+((8191&(i=(i=i+Math.imul(w,pt)|0)+Math.imul(y,mt)|0))<<13)|0;l=((s=s+Math.imul(y,pt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(B,G),i=(i=Math.imul(B,Q))+Math.imul($,G)|0,s=Math.imul($,Q),r=r+Math.imul(z,J)|0,i=(i=i+Math.imul(z,tt)|0)+Math.imul(_,J)|0,s=s+Math.imul(_,tt)|0,r=r+Math.imul(P,nt)|0,i=(i=i+Math.imul(P,rt)|0)+Math.imul(j,nt)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(T,st)|0,i=(i=i+Math.imul(T,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(E,ct)|0,i=(i=i+Math.imul(E,lt)|0)+Math.imul(S,ct)|0,s=s+Math.imul(S,lt)|0,r=r+Math.imul(k,dt)|0,i=(i=i+Math.imul(k,ht)|0)+Math.imul(M,dt)|0,s=s+Math.imul(M,ht)|0;var Ct=(l+(r=r+Math.imul(b,mt)|0)|0)+((8191&(i=(i=i+Math.imul(b,pt)|0)+Math.imul(x,mt)|0))<<13)|0;l=((s=s+Math.imul(x,pt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(B,J),i=(i=Math.imul(B,tt))+Math.imul($,J)|0,s=Math.imul($,tt),r=r+Math.imul(z,nt)|0,i=(i=i+Math.imul(z,rt)|0)+Math.imul(_,nt)|0,s=s+Math.imul(_,rt)|0,r=r+Math.imul(P,st)|0,i=(i=i+Math.imul(P,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(T,ct)|0,i=(i=i+Math.imul(T,lt)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,lt)|0,r=r+Math.imul(E,dt)|0,i=(i=i+Math.imul(E,ht)|0)+Math.imul(S,dt)|0,s=s+Math.imul(S,ht)|0;var Tt=(l+(r=r+Math.imul(k,mt)|0)|0)+((8191&(i=(i=i+Math.imul(k,pt)|0)+Math.imul(M,mt)|0))<<13)|0;l=((s=s+Math.imul(M,pt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(B,nt),i=(i=Math.imul(B,rt))+Math.imul($,nt)|0,s=Math.imul($,rt),r=r+Math.imul(z,st)|0,i=(i=i+Math.imul(z,ot)|0)+Math.imul(_,st)|0,s=s+Math.imul(_,ot)|0,r=r+Math.imul(P,ct)|0,i=(i=i+Math.imul(P,lt)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,lt)|0,r=r+Math.imul(T,dt)|0,i=(i=i+Math.imul(T,ht)|0)+Math.imul(I,dt)|0,s=s+Math.imul(I,ht)|0;var It=(l+(r=r+Math.imul(E,mt)|0)|0)+((8191&(i=(i=i+Math.imul(E,pt)|0)+Math.imul(S,mt)|0))<<13)|0;l=((s=s+Math.imul(S,pt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(B,st),i=(i=Math.imul(B,ot))+Math.imul($,st)|0,s=Math.imul($,ot),r=r+Math.imul(z,ct)|0,i=(i=i+Math.imul(z,lt)|0)+Math.imul(_,ct)|0,s=s+Math.imul(_,lt)|0,r=r+Math.imul(P,dt)|0,i=(i=i+Math.imul(P,ht)|0)+Math.imul(j,dt)|0,s=s+Math.imul(j,ht)|0;var Ot=(l+(r=r+Math.imul(T,mt)|0)|0)+((8191&(i=(i=i+Math.imul(T,pt)|0)+Math.imul(I,mt)|0))<<13)|0;l=((s=s+Math.imul(I,pt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(B,ct),i=(i=Math.imul(B,lt))+Math.imul($,ct)|0,s=Math.imul($,lt),r=r+Math.imul(z,dt)|0,i=(i=i+Math.imul(z,ht)|0)+Math.imul(_,dt)|0,s=s+Math.imul(_,ht)|0;var Pt=(l+(r=r+Math.imul(P,mt)|0)|0)+((8191&(i=(i=i+Math.imul(P,pt)|0)+Math.imul(j,mt)|0))<<13)|0;l=((s=s+Math.imul(j,pt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(B,dt),i=(i=Math.imul(B,ht))+Math.imul($,dt)|0,s=Math.imul($,ht);var jt=(l+(r=r+Math.imul(z,mt)|0)|0)+((8191&(i=(i=i+Math.imul(z,pt)|0)+Math.imul(_,mt)|0))<<13)|0;l=((s=s+Math.imul(_,pt)|0)+(i>>>13)|0)+(jt>>>26)|0,jt&=67108863;var Dt=(l+(r=Math.imul(B,mt))|0)+((8191&(i=(i=Math.imul(B,pt))+Math.imul($,mt)|0))<<13)|0;return l=((s=Math.imul($,pt))+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,c[0]=gt,c[1]=wt,c[2]=yt,c[3]=vt,c[4]=bt,c[5]=xt,c[6]=Nt,c[7]=kt,c[8]=Mt,c[9]=At,c[10]=Et,c[11]=St,c[12]=Ct,c[13]=Tt,c[14]=It,c[15]=Ot,c[16]=Pt,c[17]=jt,c[18]=Dt,0!==l&&(c[19]=l,n.length++),n};function g(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,s=0;s<n.length-1;s++){var o=i;i=0;for(var a=67108863&r,c=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=c;l++){var u=s-l,d=(0|t.words[u])*(0|e.words[l]),h=67108863&d;a=67108863&(h=h+a|0),i+=(o=(o=o+(d/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}n.words[s]=a,r=o,o=i}return 0!==r?n.words[s]=r:n.length--,n.ct()}function w(t,e,n){return g(t,e,n)}Math.imul||(p=m),i.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?m(this,t,e):n<1024?g(this,t,e):w(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),w(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*t,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=t.words[r]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var s=n.sqr();r<e.length;r++,s=s.sqr())0!==e[r]&&(n=n.mul(s));return n},i.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,c=(0|this.words[e])-a<<r;this.words[e]=c|o,o=a>>>26-r}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.ct()},i.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=i);l--){var d=0|this.words[l];this.words[l]=u<<26-s|d>>>s,u=d&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.ct()},i.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},i.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.ct()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.ut(t)},i.prototype.ut=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.ct()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype.xt=function(t,e,r){var i,s,o=t.length+r;this.ht(o);var a=0;for(i=0;i<t.length;i++){s=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this.ct();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this.ct()},i.prototype.Nt=function(t,e){var n=(this.length,t.length),r=this.clone(),s=t,o=0|s.words[s.length-1];0!=(n=26-this.vt(o))&&(s=s.ushln(n),r.iushln(n),o=0|s.words[s.length-1]);var a,c=r.length-s.length;if("mod"!==e){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone().xt(s,1,c);0===u.negative&&(r=u,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|r.words[s.length+d])+(0|r.words[s.length+d-1]);for(h=Math.min(h/o|0,67108863),r.xt(s,h,d);0!==r.negative;)h--,r.negative=0,r.xt(s,1,d),r.isZero()||(r.negative^=1);a&&(a.words[d]=h)}return a&&a.ct(),r.ct(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},i.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(s=a.div.neg()),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(t)),{div:s,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(s=a.div.neg()),{div:s,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this.Nt(t,e);var s,o,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),s=n.cmp(r);return s<0||1===i&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/t|0,r=s%t}return this.ct(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s=new i(1),o=new i(0),a=new i(0),c=new i(1),l=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),d=e.clone();!e.isZero();){for(var h=0,f=1;0===(e.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(s.isOdd()||o.isOdd())&&(s.iadd(u),o.isub(d)),s.iushrn(1),o.iushrn(1);for(var m=0,p=1;0===(r.words[0]&p)&&m<26;++m,p<<=1);if(m>0)for(r.iushrn(m);m-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(d)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a),o.isub(c)):(r.isub(e),a.isub(s),c.isub(o))}return{a:a,b:c,gcd:r.iushln(l)}},i.prototype.kt=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var s,o=new i(1),a=new i(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;0===(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var d=0,h=1;0===(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(a)):(r.isub(e),a.isub(o))}return(s=0===e.cmpn(1)?o:a).cmpn(0)<0&&s.iadd(t),s},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var s=e;e=n,n=s}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this.ht(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.ct(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new M(t)},i.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this).Mt(t)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype.Mt=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this.Mt(t)},i.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red.At(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red.At(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red.Et(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red.Et(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red.Et(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red.Et(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red.Et(this),this.red.neg(this)},i.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red.Et(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this.St()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function N(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=i.Ct(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function A(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.kt(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype.St=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n.ct(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},r(b,v),b.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&n,i=10;i<t.length;i++){var o=0|t.words[i];t.words[i-10]=(o&n)<<4|s>>>22,s=o}s>>>=22,t.words[i-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(x,v),r(N,v),r(k,v),k.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},i.Ct=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new x;else if("p192"===t)e=new N;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new k}return y[t]=e,e},M.prototype.Et=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype.At=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).Mt(this):(l(t,t.umod(this.m).Mt(this)),t)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).Mt(this)},M.prototype.add=function(t,e){this.At(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n.Mt(this)},M.prototype.iadd=function(t,e){this.At(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},M.prototype.sub=function(t,e){this.At(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n.Mt(this)},M.prototype.isub=function(t,e){this.At(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},M.prototype.shl=function(t,e){return this.Et(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this.At(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this.At(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new i(1)).iushrn(2);return this.pow(t,r)}for(var s=this.m.subn(1),o=0;!s.isZero()&&0===s.andln(1);)o++,s.iushrn(1);n(!s.isZero());var a=new i(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,s),h=this.pow(t,s.addn(1).iushrn(1)),f=this.pow(t,s),m=o;0!==f.cmp(a);){for(var p=f,g=0;0!==p.cmp(a);g++)p=p.redSqr();n(g<m);var w=this.pow(d,new i(1).iushln(m-g-1));h=h.redMul(w),d=w.redSqr(),f=f.redMul(d),m=g}return h},M.prototype.invm=function(t){var e=t.kt(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var s=n[0],o=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=c-1;u>=0;u--){var d=l>>u&1;s!==n[0]&&(s=this.sqr(s)),0!==d||0!==o?(o<<=1,o|=d,(4===++a||0===r&&0===u)&&(s=this.mul(s,n[o]),a=0,o=0)):a=0}c=26}return s},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new A(t)},r(A,M),A.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},A.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},A.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s.Mt(this)},A.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0).Mt(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=n.isub(r).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o.Mt(this)},A.prototype.invm=function(t){return this.imod(t.kt(this.m).mul(this.r2)).Mt(this)}}(0,jt);var uh=lh.exports;const dh=Dt(uh);var hh={exports:{}};!function(t,e){var n=_l,r=n.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=s),s.prototype=Object.create(r.prototype),i(r,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}}(hh,hh.exports);var fh=hh.exports,mh=fh.Buffer;const ph=Dt(function(t){for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<58;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(255!==e[s])throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.charAt(0),a=Math.log(58)/Math.log(256),c=Math.log(256)/Math.log(58);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return mh.alloc(0);for(var n=0,r=0,i=0;t[n]===o;)r++,n++;for(var s=(t.length-n)*a+1>>>0,c=new Uint8Array(s);n<t.length;){var l=t.charCodeAt(n);if(l>255)return;var u=e[l];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=58*c[h]>>>0,c[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,n++}for(var f=s-i;f!==s&&0===c[f];)f++;var m=mh.allocUnsafe(r+(s-f));m.fill(0,0,r);for(var p=r;f!==s;)m[p++]=c[f++];return m}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=mh.from(e)),!mh.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var n=0,r=0,i=0,s=e.length;i!==s&&0===e[i];)i++,n++;for(var a=(s-i)*c+1>>>0,l=new Uint8Array(a);i!==s;){for(var u=e[i],d=0,h=a-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*l[h]>>>0,l[h]=u%58>>>0,u=u/58>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var f=a-r;f!==a&&0===l[f];)f++;for(var m=o.repeat(n);f<a;++f)m+=t.charAt(l[f]);return m},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base58 character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),gh=Lu;var wh={},yh=fh.Buffer,vh=function(t){for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<58;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(255!==e[s])throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.charAt(0),a=Math.log(58)/Math.log(256),c=Math.log(256)/Math.log(58);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return yh.alloc(0);for(var n=0,r=0,i=0;t[n]===o;)r++,n++;for(var s=(t.length-n)*a+1>>>0,c=new Uint8Array(s);n<t.length;){var l=t.charCodeAt(n);if(l>255)return;var u=e[l];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=58*c[h]>>>0,c[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,n++}for(var f=s-i;f!==s&&0===c[f];)f++;var m=yh.allocUnsafe(r+(s-f));m.fill(0,0,r);for(var p=r;f!==s;)m[p++]=c[f++];return m}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=yh.from(e)),!yh.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var n=0,r=0,i=0,s=e.length;i!==s&&0===e[i];)i++,n++;for(var a=(s-i)*c+1>>>0,l=new Uint8Array(a);i!==s;){for(var u=e[i],d=0,h=a-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*l[h]>>>0,l[h]=u%58>>>0,u=u/58>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var f=a-r;f!==a&&0===l[f];)f++;for(var m=o.repeat(n);f<a;++f)m+=t.charAt(l[f]);return m},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base58 character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function bh(t,e,n){return e<=t&&t<=n}function xh(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Nh(t){this.tokens=[].slice.call(t)}Nh.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var kh=-1;function Mh(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Ah="utf-8";function Eh(t,e){if(!(this instanceof Eh))return new Eh(t,e);if((t=void 0!==t?String(t).toLowerCase():Ah)!==Ah)throw new Error("Encoding not supported. Only utf-8 is supported");e=xh(e),this.Tt=!1,this.It=!1,this.Ot=null,this.Pt=Boolean(e.fatal),this.jt=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this.Pt}),Object.defineProperty(this,"ignoreBOM",{value:this.jt})}function Sh(t,e){if(!(this instanceof Sh))return new Sh(t,e);if((t=void 0!==t?String(t).toLowerCase():Ah)!==Ah)throw new Error("Encoding not supported. Only utf-8 is supported");e=xh(e),this.Tt=!1,this.Dt=null,this.zt={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Ch(t){var e=t.fatal,n=0,r=0,i=0,s=128,o=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,Mh(e);if(-1===a)return kh;if(0===i){if(bh(a,0,127))return a;if(bh(a,194,223))i=1,n=a-192;else if(bh(a,224,239))224===a&&(s=160),237===a&&(o=159),i=2,n=a-224;else{if(!bh(a,240,244))return Mh(e);240===a&&(s=144),244===a&&(o=143),i=3,n=a-240}return n<<=6*i,null}if(!bh(a,s,o))return n=i=r=0,s=128,o=191,t.prepend(a),Mh(e);if(s=128,o=191,n+=a-128<<6*(i-(r+=1)),r!==i)return null;var c=n;return n=i=r=0,c}}function Th(t){t.fatal,this.handler=function(t,e){if(-1===e)return kh;if(bh(e,0,127))return e;var n,r;bh(e,128,2047)?(n=1,r=192):bh(e,2048,65535)?(n=2,r=224):bh(e,65536,1114111)&&(n=3,r=240);for(var i=[(e>>6*n)+r];n>0;){var s=e>>6*(n-1);i.push(128|63&s),n-=1}return i}}Eh.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=xh(e),this.Tt||(this.Ot=new Ch({fatal:this.Pt}),this.It=!1),this.Tt=Boolean(e.stream);for(var r,i=new Nh(n),s=[];!i.endOfStream()&&(r=this.Ot.handler(i,i.read()))!==kh;)null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));if(!this.Tt){do{if((r=this.Ot.handler(i,i.read()))===kh)break;null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r))}while(!i.endOfStream());this.Ot=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this.jt||this.It||(65279===s[0]?(this.It=!0,s.shift()):this.It=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(s)}},Sh.prototype={encode:function(t,e){t=t?String(t):"",e=xh(e),this.Tt||(this.Dt=new Th(this.zt)),this.Tt=Boolean(e.stream);for(var n,r=[],i=new Nh(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===n-1)i.push(65533);else{var o=t.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}(t));!i.endOfStream()&&(n=this.Dt.handler(i,i.read()))!==kh;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this.Tt){for(;(n=this.Dt.handler(i,i.read()))!==kh;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this.Dt=null}return new Uint8Array(r)}};const Ih=zt(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Eh,TextEncoder:Sh},Symbol.toStringTag,{value:"Module"})));var Oh=jt&&jt._t||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),Ph=jt&&jt.Rt||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),jh=jt&&jt.Bt||function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o},Dh=jt&&jt.$t||function(t){if(t&&t.Ut)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&Oh(e,t,n);return Ph(e,t),e},zh=jt&&jt.Ft||function(t){return t&&t.Ut?t:{default:t}};Object.defineProperty(wh,"Ut",{value:!0});var _h=wh.deserializeUnchecked=Xh=wh.deserialize=Zh=wh.serialize=wh.BinaryReader=wh.BinaryWriter=wh.BorshError=wh.baseDecode=wh.baseEncode=void 0;const Rh=zh(uh),Bh=zh(vh),$h=Dh(Ih),Uh=new("function"!=typeof TextDecoder?$h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});wh.baseEncode=function(t){return"string"==typeof t&&(t=Buffer.from(t,"utf8")),Bh.default.encode(Buffer.from(t))},wh.baseDecode=function(t){return Buffer.from(Bh.default.decode(t))};const Fh=1024;class Lh extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}wh.BorshError=Lh;class Wh{constructor(){this.buf=Buffer.alloc(Fh),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Fh)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Rh.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Rh.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Rh.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Rh.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Fh)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}function Vh(t,e,n){const r=n.value;n.value=function(...t){try{return r.apply(this,t)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new Lh("Reached the end of buffer when deserializing")}throw e}}}wh.BinaryWriter=Wh;class qh{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Rh.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Rh.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Rh.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Rh.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Lh(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Uh.decode(e)}catch(n){throw new Lh(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let r=0;r<e;++r)n.push(t());return n}}function Kh(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Hh(t,e,n,r,i){try{if("string"==typeof r)i[`write${Kh(r)}`](n);else if(r instanceof Array)if("number"==typeof r[0]){if(n.length!==r[0])throw new Lh(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(2===r.length&&"number"==typeof r[1]){if(n.length!==r[1])throw new Lh(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let e=0;e<r[1];e++)Hh(t,null,n[e],r[0],i)}else i.writeArray(n,n=>{Hh(t,e,n,r[0],i)});else if(void 0!==r.kind)switch(r.kind){case"option":null==n?i.writeU8(0):(i.writeU8(1),Hh(t,e,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach((n,s)=>{Hh(t,e,s,r.key,i),Hh(t,e,n,r.value,i)});break;default:throw new Lh(`FieldType ${r} unrecognized`)}else Yh(t,n,i)}catch(s){throw s instanceof Lh&&s.addToFieldPath(e),s}}function Yh(t,e,n){if("function"==typeof e.borshSerialize)return void e.borshSerialize(n);const r=t.get(e.constructor);if(!r)throw new Lh(`Class ${e.constructor.name} is missing in schema`);if("struct"===r.kind)r.fields.map(([r,i])=>{Hh(t,r,e[r],i,n)});else{if("enum"!==r.kind)throw new Lh(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`);{const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){n.writeU8(s),Hh(t,o,e[o],a,n);break}}}}}jh([Vh],qh.prototype,"readU8",null),jh([Vh],qh.prototype,"readU16",null),jh([Vh],qh.prototype,"readU32",null),jh([Vh],qh.prototype,"readU64",null),jh([Vh],qh.prototype,"readU128",null),jh([Vh],qh.prototype,"readU256",null),jh([Vh],qh.prototype,"readU512",null),jh([Vh],qh.prototype,"readString",null),jh([Vh],qh.prototype,"readFixedArray",null),jh([Vh],qh.prototype,"readArray",null),wh.BinaryReader=qh;var Zh=wh.serialize=function(t,e,n=Wh){const r=new n;return Yh(t,e,r),r.toArray()};function Gh(t,e,n,r){try{if("string"==typeof n)return r[`read${Kh(n)}`]();if(n instanceof Array){if("number"==typeof n[0])return r.readFixedArray(n[0]);if("number"==typeof n[1]){const e=[];for(let i=0;i<n[1];i++)e.push(Gh(t,null,n[0],r));return e}return r.readArray(()=>Gh(t,e,n[0],r))}if("option"===n.kind)return r.readU8()?Gh(t,e,n.type,r):void 0;if("map"===n.kind){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const s=Gh(t,e,n.key,r),o=Gh(t,e,n.value,r);i.set(s,o)}return i}return Qh(t,n,r)}catch(i){throw i instanceof Lh&&i.addToFieldPath(e),i}}function Qh(t,e,n){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new Lh(`Class ${e.name} is missing in schema`);if("struct"===r.kind){const r={};for(const[i,s]of t.get(e).fields)r[i]=Gh(t,i,s,n);return new e(r)}if("enum"===r.kind){const i=n.readU8();if(i>=r.values.length)throw new Lh(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=Gh(t,s,o,n);return new e({[s]:a})}throw new Lh(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}var Xh=wh.deserialize=function(t,e,n,r=qh){const i=new r(n),s=Qh(t,e,i);if(i.offset<n.length)throw new Lh(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return s};_h=wh.deserializeUnchecked=function(t,e,n,r=qh){return Qh(t,e,new r(n))};var Jh={};Object.defineProperty(Jh,"Ut",{value:!0}),Jh.s16=Jh.s8=Jh.nu64be=Jh.u48be=Jh.u40be=Jh.u32be=Jh.u24be=Jh.u16be=Lf=Jh.nu64=Jh.u48=Jh.u40=Ff=Jh.u32=Jh.u24=Uf=Jh.u16=$f=Jh.u8=Bf=Jh.offset=Jh.greedy=Jh.Constant=Jh.UTF8=Jh.CString=Jh.Blob=Jh.Boolean=Jh.BitField=Jh.BitStructure=Jh.VariantLayout=Jh.Union=Jh.UnionLayoutDiscriminator=Jh.UnionDiscriminator=Jh.Structure=Jh.Sequence=Jh.DoubleBE=Jh.Double=Jh.FloatBE=Jh.Float=Jh.NearInt64BE=Jh.NearInt64=Jh.NearUInt64BE=Jh.NearUInt64=Jh.IntBE=Jh.Int=Jh.UIntBE=Jh.UInt=Jh.OffsetLayout=Jh.GreedyCount=Jh.ExternalLayout=Jh.bindConstructorLayout=Jh.nameWithProperty=Jh.Layout=Jh.uint8ArrayToBuffer=Jh.checkUint8Array=void 0,Jh.constant=Jh.utf8=Jh.cstr=Kf=Jh.blob=Jh.unionLayoutDiscriminator=Jh.union=qf=Jh.seq=Jh.bits=Vf=Jh.struct=Jh.f64be=Jh.f64=Jh.f32be=Jh.f32=Jh.ns64be=Jh.s48be=Jh.s40be=Jh.s32be=Jh.s24be=Jh.s16be=Wf=Jh.ns64=Jh.s48=Jh.s40=Jh.s32=Jh.s24=void 0;const tf=_l;function ef(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function nf(t){return ef(t),tf.Buffer.from(t.buffer,t.byteOffset,t.length)}Jh.checkUint8Array=ef,Jh.uint8ArrayToBuffer=nf;class rf{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function sf(t,e){return e.property?t+"["+e.property+"]":t}Jh.Layout=rf,Jh.nameWithProperty=sf,Jh.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof rf))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,n)=>e.decode(t,n),writable:!0})};class of extends rf{isCount(){throw new Error("ExternalLayout is abstract")}}Jh.ExternalLayout=of;class af extends of{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){ef(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}Jh.GreedyCount=af;class cf extends of{constructor(t,e=0,n){if(!(t instanceof rf))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof lf||this.layout instanceof uf}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}Jh.OffsetLayout=cf;class lf extends rf{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return nf(t).readUIntLE(e,this.span)}encode(t,e,n=0){return nf(e).writeUIntLE(t,n,this.span),this.span}}Jh.UInt=lf;class uf extends rf{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return nf(t).readUIntBE(e,this.span)}encode(t,e,n=0){return nf(e).writeUIntBE(t,n,this.span),this.span}}Jh.UIntBE=uf;class df extends rf{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return nf(t).readIntLE(e,this.span)}encode(t,e,n=0){return nf(e).writeIntLE(t,n,this.span),this.span}}Jh.Int=df;class hf extends rf{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return nf(t).readIntBE(e,this.span)}encode(t,e,n=0){return nf(e).writeIntBE(t,n,this.span),this.span}}Jh.IntBE=hf;const ff=Math.pow(2,32);function mf(t){const e=Math.floor(t/ff);return{hi32:e,lo32:t-e*ff}}function pf(t,e){return t*ff+e}class gf extends rf{constructor(t){super(8,t)}decode(t,e=0){const n=nf(t),r=n.readUInt32LE(e);return pf(n.readUInt32LE(e+4),r)}encode(t,e,n=0){const r=mf(t),i=nf(e);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}Jh.NearUInt64=gf;class wf extends rf{constructor(t){super(8,t)}decode(t,e=0){const n=nf(t);return pf(n.readUInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=mf(t),i=nf(e);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}Jh.NearUInt64BE=wf;class yf extends rf{constructor(t){super(8,t)}decode(t,e=0){const n=nf(t),r=n.readUInt32LE(e);return pf(n.readInt32LE(e+4),r)}encode(t,e,n=0){const r=mf(t),i=nf(e);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}Jh.NearInt64=yf;class vf extends rf{constructor(t){super(8,t)}decode(t,e=0){const n=nf(t);return pf(n.readInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=mf(t),i=nf(e);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}Jh.NearInt64BE=vf;class bf extends rf{constructor(t){super(4,t)}decode(t,e=0){return nf(t).readFloatLE(e)}encode(t,e,n=0){return nf(e).writeFloatLE(t,n),4}}Jh.Float=bf;class xf extends rf{constructor(t){super(4,t)}decode(t,e=0){return nf(t).readFloatBE(e)}encode(t,e,n=0){return nf(e).writeFloatBE(t,n),4}}Jh.FloatBE=xf;class Nf extends rf{constructor(t){super(8,t)}decode(t,e=0){return nf(t).readDoubleLE(e)}encode(t,e,n=0){return nf(e).writeDoubleLE(t,n),8}}Jh.Double=Nf;class kf extends rf{constructor(t){super(8,t)}decode(t,e=0){return nf(t).readDoubleBE(e)}encode(t,e,n=0){return nf(e).writeDoubleBE(t,n),8}}Jh.DoubleBE=kf;class Mf extends rf{constructor(t,e,n){if(!(t instanceof rf))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof of&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(e instanceof of)&&0<t.span&&(r=e*t.span),super(r,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof of&&(r=r.decode(t,e)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let r=0,i=this.count;for(i instanceof of&&(i=i.decode(t,e));r<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),r+=1;return n}encode(t,e,n=0){const r=this.elementLayout,i=t.reduce((t,i)=>t+r.encode(i,e,n+t),0);return this.count instanceof of&&this.count.encode(t.length,e,n),i}}Jh.Sequence=Mf;class Af extends rf{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof rf,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const s of t)if(0>s.span&&void 0===s.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce((t,e)=>t+e.getSpan(),0)}catch(i){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((n,r)=>{const i=r.getSpan(t,e);return e+=i,n+i},0)}catch(r){throw new RangeError("indeterminate span")}return n}decode(t,e=0){ef(t);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const r=n;let i=0,s=0;for(const o of this.fields){let r=o.span;if(s=0<r?r:0,void 0!==o.property){const i=t[o.property];void 0!==i&&(s=o.encode(i,e,n),0>r&&(r=o.getSpan(e,n)))}i=n,n+=r}return i+s-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}Jh.Structure=Af;class Ef{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}Jh.UnionDiscriminator=Ef;class Sf extends Ef{constructor(t,e){if(!(t instanceof of&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}Jh.UnionLayoutDiscriminator=Sf;class Cf extends rf{constructor(t,e,n){let r;if(t instanceof lf||t instanceof uf)r=new Sf(new cf(t));else if(t instanceof of&&t.isCount())r=new Sf(t);else{if(!(t instanceof Ef))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=t}if(void 0===e&&(e=null),!(null===e||e instanceof rf))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof lf||t instanceof uf)&&(i+=r.layout.span)),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=t instanceof lf||t instanceof uf,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return s(t)},this.configGetSourceVariant=function(t){s=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const r=this.discriminator,i=r.decode(t,e),s=this.registry[i];if(void 0===s){const s=this.defaultLayout;let o=0;this.usesPrefixDiscriminator&&(o=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[s.property]=s.decode(t,e+o)}else n=s.decode(t,e);return n}encode(t,e,n=0){const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let s=0;return this.usesPrefixDiscriminator&&(s=r.layout.span),r.encode(t[r.property],e,n),s+i.encode(t[i.property],e,n+s)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new Tf(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e=0){let n;return n=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[n]}}Jh.Union=Cf;class Tf extends rf{constructor(t,e,n,r){if(!(t instanceof Cf))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof rf))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(t,e+n)),n+r}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),i+=this.layout.getSpan(e,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function If(t){return 0>t&&(t+=4294967296),t}Jh.VariantLayout=Tf;class Of extends rf{constructor(t,e,n){if(!(t instanceof lf||t instanceof uf))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===n&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let r=0;this.Lt=function(t){return r=If(t),this},this.Wt=function(){return r}}decode(t,e=0){const n=this.makeDestinationObject(),r=this.word.decode(t,e);this.Lt(r);for(const i of this.fields)void 0!==i.property&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const r=this.word.decode(e,n);this.Lt(r);for(const i of this.fields)if(void 0!==i.property){const e=t[i.property];void 0!==e&&i.encode(e)}return this.word.encode(this.Wt(),e,n)}addField(t,e){const n=new Pf(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new jf(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}Jh.BitStructure=Of;class Pf{constructor(t,e,n){if(!(t instanceof Of))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const r=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-e),this.wordMask=If(this.valueMask<<this.start),this.property=n}decode(t,e){return If(this.container.Wt()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==If(t&this.valueMask))throw new TypeError(sf("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container.Wt(),n=If(t<<this.start);this.container.Lt(If(e&~this.wordMask)|n)}}Jh.BitField=Pf;let jf=class extends Pf{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}};Jh.Boolean=jf;let Df=class extends rf{constructor(t,e){if(!(t instanceof of&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof of||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),nf(t).slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof of&&(r=t.length),!(t instanceof Uint8Array&&r===t.length))throw new TypeError(sf("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>e.length)throw new RangeError("encoding overruns Uint8Array");const i=nf(t);return nf(e).write(i.toString("hex"),n,r,"hex"),this.length instanceof of&&this.length.encode(r,e,n),r}};Jh.Blob=Df;class zf extends rf{constructor(t){super(-1,t)}getSpan(t,e=0){ef(t);let n=e;for(;n<t.length&&0!==t[n];)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return nf(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=tf.Buffer.from(t,"utf8"),i=r.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const s=nf(e);return r.copy(s,n),s[n+i]=0,i+1}}Jh.CString=zf;class _f extends rf{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return ef(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return nf(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=tf.Buffer.from(t,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return r.copy(nf(e),n),i}}Jh.UTF8=_f;class Rf extends rf{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}Jh.Constant=Rf,Jh.greedy=(t,e)=>new af(t,e);var Bf=Jh.offset=(t,e,n)=>new cf(t,e,n),$f=Jh.u8=t=>new lf(1,t),Uf=Jh.u16=t=>new lf(2,t);Jh.u24=t=>new lf(3,t);var Ff=Jh.u32=t=>new lf(4,t);Jh.u40=t=>new lf(5,t),Jh.u48=t=>new lf(6,t);var Lf=Jh.nu64=t=>new gf(t);Jh.u16be=t=>new uf(2,t),Jh.u24be=t=>new uf(3,t),Jh.u32be=t=>new uf(4,t),Jh.u40be=t=>new uf(5,t),Jh.u48be=t=>new uf(6,t),Jh.nu64be=t=>new wf(t),Jh.s8=t=>new df(1,t),Jh.s16=t=>new df(2,t),Jh.s24=t=>new df(3,t),Jh.s32=t=>new df(4,t),Jh.s40=t=>new df(5,t),Jh.s48=t=>new df(6,t);var Wf=Jh.ns64=t=>new yf(t);Jh.s16be=t=>new hf(2,t),Jh.s24be=t=>new hf(3,t),Jh.s32be=t=>new hf(4,t),Jh.s40be=t=>new hf(5,t),Jh.s48be=t=>new hf(6,t),Jh.ns64be=t=>new vf(t),Jh.f32=t=>new bf(t),Jh.f32be=t=>new xf(t),Jh.f64=t=>new Nf(t),Jh.f64be=t=>new kf(t);var Vf=Jh.struct=(t,e,n)=>new Af(t,e,n);Jh.bits=(t,e,n)=>new Of(t,e,n);var qf=Jh.seq=(t,e,n)=>new Mf(t,e,n);Jh.union=(t,e,n)=>new Cf(t,e,n),Jh.unionLayoutDiscriminator=(t,e)=>new Sf(t,e);var Kf=Jh.blob=(t,e)=>new Df(t,e);function Hf(t){return Array.isArray(t)?"%5B"+t.map(Hf).join("%2C%20")+"%5D":"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}function Yf([t,e]){return`${t}=${Hf(e)}`}Jh.cstr=t=>new zf(t),Jh.utf8=(t,e)=>new _f(t,e),Jh.constant=(t,e)=>new Rf(t,e);var Zf=class extends Error{constructor(...[t,e]){let n,r;if(e){const{cause:t,...i}=e;t&&(r={cause:t}),Object.keys(i).length>0&&(n=i)}super(function(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${function(t){const e=Object.entries(t).map(Yf).join("&");return btoa(e)}(e)}'`),`${n}\``}}(t,n),r),xt(this,"cause",this.cause),xt(this,"context"),this.context={Vt:t,...n},this.name="SolanaError"}};function Gf(t){return"fixedSize"in t&&"number"==typeof t.fixedSize}function Qf(t){return 1!==(null==t?void 0:t.endian)}class Xf extends TypeError{constructor(t,e){let n;const{message:r,explanation:i,...s}=t,{path:o}=t,a=0===o.length?r:`At path: ${o.join(".")} -- ${r}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function Jf(t){return"object"==typeof t&&null!=t}function tm(t){return Jf(t)&&!Array.isArray(t)}function em(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function nm(t,e,n,r){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:s}=e,{type:o}=n,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${em(r)}\``}=t;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...t,message:c}}function*rm(t,e,n,r){var i;Jf(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const s of t){const t=nm(s,e,n,r);t&&(yield t)}}function*im(t,e,n={}){const{path:r=[],branch:i=[t],coerce:s=!1,mask:o=!1}=n,a={path:r,branch:i,mask:o};s&&(t=e.coercer(t,a));let c="valid";for(const l of e.validator(t,a))l.explanation=n.message,c="not_valid",yield[l,void 0];for(let[l,u,d]of e.entries(t,a)){const e=im(u,d,{path:void 0===l?r:[...r,l],branch:void 0===l?i:[...i,u],coerce:s,mask:o,message:n.message});for(const n of e)n[0]?(c=null!=n[0].refinement?"not_refined":"not_valid",yield[n[0],void 0]):s&&(u=n[1],void 0===l?t=u:t instanceof Map?t.set(l,u):t instanceof Set?t.add(u):Jf(t)&&(void 0!==u||l in t)&&(t[l]=u))}if("not_valid"!==c)for(const l of e.refiner(t,a))l.explanation=n.message,c="not_refined",yield[l,void 0];"valid"===c&&(yield[void 0,t])}let sm=class{constructor(t){const{type:e,schema:n,validator:r,refiner:i,coercer:s=t=>t,entries:o=function*(){}}=t;this.type=e,this.schema=n,this.entries=o,this.coercer=s,this.validator=r?(t,e)=>rm(r(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>rm(i(t,e),e,this,t):()=>[]}assert(t,e){return function(t,e,n){const r=cm(t,e,{message:n});if(r[0])throw r[0]}(t,this,e)}create(t,e){return om(t,this,e)}is(t){return am(t,this)}mask(t,e){return function(t,e,n){const r=cm(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(t,this,e)}validate(t,e={}){return cm(t,this,e)}};function om(t,e,n){const r=cm(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function am(t,e){return!cm(t,e)[0]}function cm(t,e,n={}){const r=im(t,e,n),i=function(t){const{done:e,value:n}=t.next();return e?void 0:n}(r);return i[0]?[new Xf(i[0],function*(){for(const t of r)t[0]&&(yield t[0])}),void 0]:[void 0,i[1]]}function lm(t,e){return new sm({type:t,schema:null,validator:e})}function um(t){return new sm({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${em(t)}`})}function dm(){return lm("boolean",t=>"boolean"==typeof t)}function hm(t){return lm("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${em(e)}`)}function fm(t){const e=em(t),n=typeof t;return new sm({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?t:null,validator:n=>n===t||`Expected the literal \`${e}\`, but received: ${em(n)}`})}function mm(t){return new sm({...t,validator:(e,n)=>null===e||t.validator(e,n),refiner:(e,n)=>null===e||t.refiner(e,n)})}function pm(){return lm("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${em(t)}`)}function gm(t){return new sm({...t,validator:(e,n)=>void 0===e||t.validator(e,n),refiner:(e,n)=>void 0===e||t.refiner(e,n)})}function wm(t,e){return new sm({type:"record",schema:null,*entries(n){if(Jf(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:t=>tm(t)||`Expected an object, but received: ${em(t)}`,coercer:t=>tm(t)?{...t}:t})}function ym(){return lm("string",t=>"string"==typeof t||`Expected a string, but received: ${em(t)}`)}function vm(t){const e=lm("never",()=>!1);return new sm({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${em(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function bm(t){const e=Object.keys(t);return new sm({type:"type",schema:t,*entries(n){if(Jf(n))for(const r of e)yield[r,n[r],t[r]]},validator:t=>tm(t)||`Expected an object, but received: ${em(t)}`,coercer:t=>tm(t)?{...t}:t})}function xm(t){const e=t.map(t=>t.type).join(" | ");return new sm({type:"union",schema:null,coercer(e,n){for(const r of t){const[t,i]=r.validate(e,{coerce:!0,mask:n.mask});if(!t)return i}return e},validator(n,r){const i=[];for(const e of t){const[...t]=im(n,e,r),[s]=t;if(!s[0])return[];for(const[e]of t)e&&i.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${em(n)}`,...i]}})}function Nm(){return lm("unknown",()=>!0)}function km(t,e,n){return new sm({...t,coercer:(r,i)=>am(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var Mm,Am=new Uint8Array(16);function Em(){if(!Mm&&!(Mm="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mm(Am)}const Sm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cm(t){return"string"==typeof t&&Sm.test(t)}for(var Tm,Im,Om=[],Pm=0;Pm<256;++Pm)Om.push((Pm+256).toString(16).substr(1));function jm(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Om[t[e+0]]+Om[t[e+1]]+Om[t[e+2]]+Om[t[e+3]]+"-"+Om[t[e+4]]+Om[t[e+5]]+"-"+Om[t[e+6]]+Om[t[e+7]]+"-"+Om[t[e+8]]+Om[t[e+9]]+"-"+Om[t[e+10]]+Om[t[e+11]]+Om[t[e+12]]+Om[t[e+13]]+Om[t[e+14]]+Om[t[e+15]]).toLowerCase();if(!Cm(n))throw TypeError("Stringified UUID is invalid");return n}var Dm=0,zm=0;function _m(t){if(!Cm(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function Rm(t,e,n){function r(t,r,i,s){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=_m(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(r),o.set(t,r.length),(o=n(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,i){s=s||0;for(var a=0;a<16;++a)i[s+a]=o[a];return i}return jm(o)}try{r.name=t}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function Bm(t){return 14+(t+64>>>9<<4)+1}function $m(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Um(t,e,n,r,i,s){return $m((o=$m($m(e,t),$m(r,s)))<<(a=i)|o>>>32-a,n);var o,a}function Fm(t,e,n,r,i,s,o){return Um(e&n|~e&r,t,e,i,s,o)}function Lm(t,e,n,r,i,s,o){return Um(e&r|n&~r,t,e,i,s,o)}function Wm(t,e,n,r,i,s,o){return Um(e^n^r,t,e,i,s,o)}function Vm(t,e,n,r,i,s,o){return Um(n^(e|~r),t,e,i,s,o)}var qm=Rm("v3",48,function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r="0123456789abcdef",i=0;i<n;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(15&s),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[Bm(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,c=r,l=i,u=s;n=Fm(n,r,i,s,t[o],7,-680876936),s=Fm(s,n,r,i,t[o+1],12,-389564586),i=Fm(i,s,n,r,t[o+2],17,606105819),r=Fm(r,i,s,n,t[o+3],22,-1044525330),n=Fm(n,r,i,s,t[o+4],7,-176418897),s=Fm(s,n,r,i,t[o+5],12,1200080426),i=Fm(i,s,n,r,t[o+6],17,-1473231341),r=Fm(r,i,s,n,t[o+7],22,-45705983),n=Fm(n,r,i,s,t[o+8],7,1770035416),s=Fm(s,n,r,i,t[o+9],12,-1958414417),i=Fm(i,s,n,r,t[o+10],17,-42063),r=Fm(r,i,s,n,t[o+11],22,-1990404162),n=Fm(n,r,i,s,t[o+12],7,1804603682),s=Fm(s,n,r,i,t[o+13],12,-40341101),i=Fm(i,s,n,r,t[o+14],17,-1502002290),n=Lm(n,r=Fm(r,i,s,n,t[o+15],22,1236535329),i,s,t[o+1],5,-165796510),s=Lm(s,n,r,i,t[o+6],9,-1069501632),i=Lm(i,s,n,r,t[o+11],14,643717713),r=Lm(r,i,s,n,t[o],20,-373897302),n=Lm(n,r,i,s,t[o+5],5,-701558691),s=Lm(s,n,r,i,t[o+10],9,38016083),i=Lm(i,s,n,r,t[o+15],14,-660478335),r=Lm(r,i,s,n,t[o+4],20,-405537848),n=Lm(n,r,i,s,t[o+9],5,568446438),s=Lm(s,n,r,i,t[o+14],9,-1019803690),i=Lm(i,s,n,r,t[o+3],14,-187363961),r=Lm(r,i,s,n,t[o+8],20,1163531501),n=Lm(n,r,i,s,t[o+13],5,-1444681467),s=Lm(s,n,r,i,t[o+2],9,-51403784),i=Lm(i,s,n,r,t[o+7],14,1735328473),n=Wm(n,r=Lm(r,i,s,n,t[o+12],20,-1926607734),i,s,t[o+5],4,-378558),s=Wm(s,n,r,i,t[o+8],11,-2022574463),i=Wm(i,s,n,r,t[o+11],16,1839030562),r=Wm(r,i,s,n,t[o+14],23,-35309556),n=Wm(n,r,i,s,t[o+1],4,-1530992060),s=Wm(s,n,r,i,t[o+4],11,1272893353),i=Wm(i,s,n,r,t[o+7],16,-155497632),r=Wm(r,i,s,n,t[o+10],23,-1094730640),n=Wm(n,r,i,s,t[o+13],4,681279174),s=Wm(s,n,r,i,t[o],11,-358537222),i=Wm(i,s,n,r,t[o+3],16,-722521979),r=Wm(r,i,s,n,t[o+6],23,76029189),n=Wm(n,r,i,s,t[o+9],4,-640364487),s=Wm(s,n,r,i,t[o+12],11,-421815835),i=Wm(i,s,n,r,t[o+15],16,530742520),n=Vm(n,r=Wm(r,i,s,n,t[o+2],23,-995338651),i,s,t[o],6,-198630844),s=Vm(s,n,r,i,t[o+7],10,1126891415),i=Vm(i,s,n,r,t[o+14],15,-1416354905),r=Vm(r,i,s,n,t[o+5],21,-57434055),n=Vm(n,r,i,s,t[o+12],6,1700485571),s=Vm(s,n,r,i,t[o+3],10,-1894986606),i=Vm(i,s,n,r,t[o+10],15,-1051523),r=Vm(r,i,s,n,t[o+1],21,-2054922799),n=Vm(n,r,i,s,t[o+8],6,1873313359),s=Vm(s,n,r,i,t[o+15],10,-30611744),i=Vm(i,s,n,r,t[o+6],15,-1560198380),r=Vm(r,i,s,n,t[o+13],21,1309151649),n=Vm(n,r,i,s,t[o+4],6,-145523070),s=Vm(s,n,r,i,t[o+11],10,-1120210379),i=Vm(i,s,n,r,t[o+2],15,718787259),r=Vm(r,i,s,n,t[o+9],21,-343485551),n=$m(n,a),r=$m(r,c),i=$m(i,l),s=$m(s,u)}return[n,r,i,s]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(Bm(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))});function Km(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function Hm(t,e){return t<<e|t>>>32-e}var Ym=Rm("v5",80,function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=t[64*c+4*u]<<24|t[64*c+4*u+1]<<16|t[64*c+4*u+2]<<8|t[64*c+4*u+3];a[c]=l}a[o-1][14]=8*(t.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(t.length-1)&4294967295;for(var d=0;d<o;++d){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[d][f];for(var m=16;m<80;++m)h[m]=Hm(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var p=n[0],g=n[1],w=n[2],y=n[3],v=n[4],b=0;b<80;++b){var x=Math.floor(b/20),N=Hm(p,5)+Km(x,g,w,y)+v+e[x]+h[b]>>>0;v=y,y=w,w=Hm(g,30)>>>0,g=p,p=N}n[0]=n[0]+p>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+w>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+v>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]});const Zm=Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:_m,stringify:jm,v1:function(t,e,n){var r=e&&n||0,i=e||new Array(16),s=(t=t||{}).node||Tm,o=void 0!==t.clockseq?t.clockseq:Im;if(null==s||null==o){var a=t.random||(t.rng||Em)();null==s&&(s=Tm=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=Im=16383&(a[6]<<8|a[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),l=void 0!==t.nsecs?t.nsecs:zm+1,u=c-Dm+(l-zm)/1e4;if(u<0&&void 0===t.clockseq&&(o=o+1&16383),(u<0||c>Dm)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dm=c,zm=l,Im=o;var d=(1e4*(268435455&(c+=122192928e5))+l)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var h=c/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=255&h,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var f=0;f<6;++f)i[r+f]=s[f];return e||jm(i)},v3:qm,v4:function(t,e,n){var r=(t=t||{}).random||(t.rng||Em)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return jm(r)},v5:Ym,validate:Cm,version:function(t){if(!Cm(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"})),Gm=zt(Zm),Qm=Gm.v4,Xm=Gm.v4,Jm=function(t,e){if(!(this instanceof Jm))return new Jm(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return Xm()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};var tp=Jm;Jm.prototype.request=function(t,e,n,r){const i=this;let s=null;const o=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&"object"==typeof t&&"function"==typeof e)r=e,s=t;else{"function"==typeof n&&(r=n,n=void 0);const i="function"==typeof r;try{s=function(t,e,n,r){if("string"!=typeof t)throw new TypeError(t+" must be a string");const i="number"==typeof(r=r||{}).version?r.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const s={method:t};if(2===i&&(s.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(void 0===n){const t="function"==typeof r.generator?r.generator:function(){return Qm()};s.id=t(s,r)}else 2===i&&null===n?r.notificationIdNull&&(s.id=null):s.id=n;return s}(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(c){if(i)return r(c);throw c}if(!i)return s}let a;try{a=JSON.stringify(s,this.options.replacer)}catch(c){return r(c)}return this.callServer(a,function(t,e){i.qt(t,e,r)}),s},Jm.prototype.qt=function(t,e,n){if(t)return void n(t);if(!e)return n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return n(i)}if(3===n.length){if(Array.isArray(r)){const t=function(t){return void 0!==t.error},e=function(e){return!t(e)};return n(null,r.filter(t),r.filter(e))}return n(null,r.error,r.result)}n(null,r)};const ep=Dt(tp);var np={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||t,o),c=n?n+e:e;return t.Kt[c]?t.Kt[c].fn?t.Kt[c]=[t.Kt[c],a]:t.Kt[c].push(a):(t.Kt[c]=a,t.Ht++),t}function o(t,e){0===--t.Ht?t.Kt=new r:delete t.Kt[e]}function a(){this.Kt=new r,this.Ht=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this.Ht)return i;for(r in t=this.Kt)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this.Kt[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this.Kt[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,s,o){var a=n?n+t:t;if(!this.Kt[a])return!1;var c,l,u=this.Kt[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,s),!0;case 6:return u.fn.call(u.context,e,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var s=n?n+t:t;if(!this.Kt[s])return this;if(!e)return o(this,s),this;var a=this.Kt[s];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this.Kt[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this.Kt[e]&&o(this,e)):(this.Kt=new r,this.Ht=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(np);const rp=Dt(np.exports);var ip=class extends rp{constructor(t,e,n){super(),xt(this,"socket"),this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,n){const r=n||e;try{this.socket.send(t),r()}catch(i){r(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}},sp=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},op=class extends rp{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:r=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),xt(this,"address"),xt(this,"rpc_id"),xt(this,"queue"),xt(this,"options"),xt(this,"autoconnect"),xt(this,"ready"),xt(this,"reconnect"),xt(this,"reconnect_timer_id"),xt(this,"reconnect_interval"),xt(this,"max_reconnects"),xt(this,"rest_options"),xt(this,"current_reconnects"),xt(this,"generate_request_id"),xt(this,"socket"),xt(this,"webSocketFactory"),xt(this,"dataPack"),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=c||new sp,this.autoconnect&&this.Yt(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this.Yt(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,r){return r||"object"!=typeof n||(r=n,n=null),new Promise((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),r,t=>{if(t)return s(t);this.queue[o]={promise:[i,s]},n&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],s(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,r)=>{if(!this.ready)return r(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),t=>{if(t)return r(t);n()})})}async subscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}Yt(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=_l.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch(e){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let n=0;n<t.params.length;n++)e.push(t.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,null==t?void 0:t.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:n,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",n,r),0),this.ready=!1,this.socket=void 0,1e3!==n&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout(()=>this.Yt(t,e),this.reconnect_interval)))})}};class ap extends lu{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ql(t);const n=au(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),Jl(i)}update(t){return Xl(this),this.iHash.update(t),this}digestInto(t){Xl(this),Gl(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}K(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=r,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e.K(t.oHash),t.iHash=n.K(t.iHash),t}clone(){return this.K()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const cp=(t,e,n)=>new ap(t,e).update(n).digest();cp.create=(t,e)=>new ap(t,e);const lp=(t,e)=>(t+(t>=0?e:-e)/gp)/e;function up(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function dp(t,e){const n={};for(let r of Object.keys(e))n[r]=void 0===t[r]?e[r]:t[r];return Ku(n.lowS,"lowS"),Ku(n.prehash,"prehash"),void 0!==n.format&&up(n.format),n}class hp extends Error{constructor(t=""){super(t)}}const fp={Err:hp,Zt:{encode:(t,e)=>{const{Err:n}=fp;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Yu(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Yu(i.length/2|128):"";return Yu(t)+s+i+e},decode(t,e){const{Err:n}=fp;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let s=0;if(128&i){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const o=e.subarray(r,r+t);if(o.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(r+=t,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},Gt:{encode(t){const{Err:e}=fp;if(t<mp)throw new e("integer: negative integers are not allowed");let n=Yu(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=fp;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return Gu(t)}},toSig(t){const{Err:e,Gt:n,Zt:r}=fp,i=td("signature",t),{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{Zt:e,Gt:n}=fp,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},mp=BigInt(0),pp=BigInt(1),gp=BigInt(2),wp=BigInt(3),yp=BigInt(4);function vp(t,e){const{BYTES:n}=t;let r;if("bigint"==typeof e)r=e;else{let s=td("private key",e);try{r=t.fromBytes(s)}catch(i){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function bp(t){return Uint8Array.of(t?2:3)}function xp(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Np(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=function(t){const{CURVE:e,curveOpts:n}=function(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(t=>Math.ceil(t/2)))):void 0;return{CURVE:e,curveOpts:{Fp:n,Fn:Td(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes}}}(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}(t);return function(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Cd(n.Fn.ORDER,n.Fn.BITS))})}(t,function(t,e,n={}){Ql(e),od(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||du,i=n.hmac||((t,...n)=>cp(e,t,cu(...n))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:c}=o,{keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f}=function(t,e={}){const{Fn:n}=t,r=e.randomBytes||du,i=Object.assign(xp(t.Fp,n),{seed:Od(n.ORDER)});function s(t){try{return!!vp(n,t)}catch(e){return!1}}function o(t=r(i.seed)){return function(t,e,n=!1){const r=t.length,i=Id(e),s=Od(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=yd(n?Qu(t):Gu(t),e-ld)+ld;return n?Ju(o,i):Xu(o,i)}(Hu(t,i.seed,"seed"),n.ORDER)}function a(e,r=!0){return t.BASE.multiply(vp(n,e)).toBytes(r)}function c(e){if("bigint"==typeof e)return!1;if(e instanceof t)return!0;const{secretKey:r,publicKey:s,publicKeyUncompressed:o}=i;if(n.allowedLengths||r===s)return;const a=td("key",e).length;return a===s||a===o}const l={isValidSecretKey:s,isValidPublicKey:function(e,n){const{publicKey:r,publicKeyUncompressed:s}=i;try{const i=e.length;return!(!0===n&&i!==r||!1===n&&i!==s||!t.fromBytes(e))}catch(o){return!1}},randomSecretKey:o,isValidPrivateKey:s,randomPrivateKey:o,normPrivateKeyToScalar:t=>vp(n,t),precompute:(e=8,n=t.BASE)=>n.precompute(e,!1)};return Object.freeze({getPublicKey:a,getSharedSecret:function(e,r,i=!0){if(!0===c(e))throw new Error("first arg must be private key");if(!1===c(r))throw new Error("second arg must be public key");const s=vp(n,e);return t.fromHex(r).multiply(s).toBytes(i)},keygen:function(t){const e=o(t);return{secretKey:e,publicKey:a(e)}},Point:t,utils:l,lengths:i})}(t,n),m={prehash:!1,lowS:"boolean"==typeof n.lowS&&n.lowS,format:void 0,extraEntropy:!1},p="compact";function g(t){return t>a>>pp}function w(t,e){if(!o.isValidNot0(e))throw new Error(`invalid signature ${t}: out of range 1..Point.Fn.ORDER`);return e}class y{constructor(t,e,n){this.r=w("r",t),this.s=w("s",e),null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(t,e=p){let n;if(function(t,e){up(e);const n=f.signature;Hu(t,"compact"===e?n:"recovered"===e?n+1:void 0,`${e} signature`)}(t,e),"der"===e){const{r:e,s:n}=fp.toSig(Hu(t));return new y(e,n)}"recovered"===e&&(n=t[0],e="compact",t=t.subarray(1));const r=o.BYTES,i=t.subarray(0,r),s=t.subarray(r,2*r);return new y(o.fromBytes(i),o.fromBytes(s),n)}static fromHex(t,e){return this.fromBytes(ou(t),e)}addRecoveryBit(t){return new y(this.r,this.s,t)}recoverPublicKey(e){const n=s.ORDER,{r:r,s:i,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*gp<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const l=2===c||3===c?r+a:r;if(!s.isValid(l))throw new Error("recovery id 2 or 3 invalid");const u=s.toBytes(l),d=t.fromBytes(cu(bp(!(1&c)),u)),h=o.inv(l),f=b(td("msgHash",e)),m=o.create(-f*h),p=o.create(i*h),g=t.BASE.multiplyUnsafe(m).add(d.multiplyUnsafe(p));if(g.is0())throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return g(this.s)}toBytes(t=p){if(up(t),"der"===t)return ou(fp.hexFromSig(this));const e=o.toBytes(this.r),n=o.toBytes(this.s);if("recovered"===t){if(null==this.recovery)throw new Error("recovery bit must be present");return cu(Uint8Array.of(this.recovery),e,n)}return cu(e,n)}toHex(t){return iu(this.toBytes(t))}assertValidity(){}static fromCompact(t){return y.fromBytes(td("sig",t),"compact")}static fromDER(t){return y.fromBytes(td("sig",t),"der")}normalizeS(){return this.hasHighS()?new y(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return iu(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return iu(this.toBytes("compact"))}}const v=n.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=Gu(t),n=8*t.length-c;return n>0?e>>BigInt(n):e},b=n.bits2int_modN||function(t){return o.create(v(t))},x=sd(c);function N(t){return rd("num < 2^"+c,t,mp,x),o.toBytes(t)}function k(t,n){return Hu(t,void 0,"message"),n?Hu(e(t),void 0,"prehashed message"):t}return Object.freeze({keygen:l,getPublicKey:u,getSharedSecret:d,utils:h,lengths:f,Point:t,sign:function(n,s,a={}){n=td("message",n);const{seed:c,k2sig:l}=function(e,n,i){if(["recovered","canonical"].some(t=>t in i))throw new Error("sign() legacy options not supported");const{lowS:s,prehash:a,extraEntropy:c}=dp(i,m);e=k(e,a);const l=b(e),u=vp(o,n),d=[N(u),N(l)];if(null!=c&&!1!==c){const t=!0===c?r(f.secretKey):c;d.push(td("extraEntropy",t))}const h=cu(...d),p=l;return{seed:h,k2sig:function(e){const n=v(e);if(!o.isValidNot0(n))return;const r=o.inv(n),i=t.BASE.multiply(n).toAffine(),a=o.create(i.x);if(a===mp)return;const c=o.create(r*o.create(p+a*u));if(c===mp)return;let l=(i.x===a?0:2)|Number(i.y&pp),d=c;return s&&g(c)&&(d=o.neg(c),l^=1),new y(a,d,l)}}}(n,s,a),u=function(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=t=>new Uint8Array(t),i=t=>Uint8Array.of(t);let s=r(t),o=r(t),a=0;const c=()=>{s.fill(1),o.fill(0),a=0},l=(...t)=>n(o,s,...t),u=(t=r(0))=>{o=l(i(0),t),s=l(),0!==t.length&&(o=l(i(1),t),s=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){s=l();const e=s.slice();n.push(e),t+=s.length}return cu(...n)};return(t,e)=>{let n;for(c(),u(t);!(n=e(d()));)u();return c(),n}}(e.outputLen,o.BYTES,i);return u(c,l)},verify:function(e,n,r,i={}){const{lowS:s,prehash:a,format:c}=dp(i,m);if(r=td("publicKey",r),n=k(td("message",n),a),"strict"in i)throw new Error("options.strict was renamed to lowS");const l=void 0===c?function(t){let e;const n="string"==typeof t||Yl(t),r=!n&&null!==t&&"object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s;if(!n&&!r)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(r)e=new y(t.r,t.s);else if(n){try{e=y.fromBytes(td("sig",t),"der")}catch(i){if(!(i instanceof fp.Err))throw i}if(!e)try{e=y.fromBytes(td("sig",t),"compact")}catch(s){return!1}}return e||!1}(e):y.fromBytes(td("sig",e),c);if(!1===l)return!1;try{const e=t.fromBytes(r);if(s&&l.hasHighS())return!1;const{r:i,s:a}=l,c=b(n),u=o.inv(a),d=o.create(c*u),h=o.create(i*u),f=t.BASE.multiplyUnsafe(d).add(e.multiplyUnsafe(h));return!f.is0()&&o.create(f.x)===i}catch(u){return!1}},recoverPublicKey:function(t,e,n={}){const{prehash:r}=dp(n,m);return e=k(e,r),y.fromBytes(t,"recovered").recoverPublicKey(e).toBytes()},Signature:y,hash:e})}(function(t,e={}){const n=Kd("weierstrass",t,e),{Fp:r,Fn:i}=n;let s=n.CURVE;const{h:o,n:a}=s;od(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(s.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const l=xp(r,i);function u(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const d=e.toBytes||function(t,e,n){const{x:i,y:s}=e.toAffine(),o=r.toBytes(i);return Ku(n,"isCompressed"),n?(u(),cu(bp(!r.isOdd(s)),o)):cu(Uint8Array.of(4),o,r.toBytes(s))},h=e.fromBytes||function(t){Hu(t,void 0,"Point");const{publicKey:e,publicKeyUncompressed:n}=l,i=t.length,s=t[0],o=t.subarray(1);if(i!==e||2!==s&&3!==s){if(i===n&&4===s){const t=r.BYTES,e=r.fromBytes(o.subarray(0,t)),n=r.fromBytes(o.subarray(t,2*t));if(!m(e,n))throw new Error("bad point: is not on curve");return{x:e,y:n}}throw new Error(`bad point: got length ${i}, expected compressed=${e} or uncompressed=${n}`)}{const t=r.fromBytes(o);if(!r.isValid(t))throw new Error("bad point: is not on curve, wrong x");const e=f(t);let n;try{n=r.sqrt(e)}catch(a){const t=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+t)}return u(),!(1&~s)!==r.isOdd(n)&&(n=r.neg(n)),{x:t,y:n}}};function f(t){const e=r.sqr(t),n=r.mul(e,t);return r.add(r.add(n,r.mul(t,s.a)),s.b)}function m(t,e){const n=r.sqr(e),i=f(t);return r.eql(n,i)}if(!m(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const p=r.mul(r.pow(s.a,wp),yp),g=r.mul(r.sqr(s.b),BigInt(27));if(r.is0(r.add(p,g)))throw new Error("bad curve params: a or b");function w(t,e,n=!1){if(!r.isValid(e)||n&&r.is0(e))throw new Error(`bad point coordinate ${t}`);return e}function y(t){if(!(t instanceof k))throw new Error("ProjectivePoint expected")}function v(t){if(!c||!c.basises)throw new Error("no endo");return function(t,e,n){const[[r,i],[s,o]]=e,a=lp(o*t,n),c=lp(-i*t,n);let l=t-a*r-c*s,u=-a*i-c*o;const d=l<mp,h=u<mp;d&&(l=-l),h&&(u=-u);const f=sd(Math.ceil(id(n)/2))+pp;if(l<mp||l>=f||u<mp||u>=f)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}(t,c.basises,i.ORDER)}const b=ad((t,e)=>{const{X:n,Y:i,Z:s}=t;if(r.eql(s,r.ONE))return{x:n,y:i};const o=t.is0();null==e&&(e=o?r.ONE:r.inv(s));const a=r.mul(n,e),c=r.mul(i,e),l=r.mul(s,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),x=ad(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.Y))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=t.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not field elements");if(!m(n,i))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function N(t,e,n,i,s){return n=new k(r.mul(n.X,t),n.Y,n.Z),e=Dd(i,e),n=Dd(s,n),e.add(n)}class k{constructor(t,e,n){this.X=w("x",t),this.Y=w("y",e,!0),this.Z=w("z",n),Object.freeze(this)}static CURVE(){return s}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof k)throw new Error("projective point not allowed");return r.is0(e)&&r.is0(n)?k.ZERO:new k(e,n,r.ONE)}static fromBytes(t){const e=k.fromAffine(h(Hu(t,void 0,"point")));return e.assertValidity(),e}static fromHex(t){return k.fromBytes(td("pointHex",t))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return A.createCache(this,t),e||this.multiply(wp),this}assertValidity(){x(this)}hasEvenY(){const{y:t}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(t)}equals(t){y(t);const{X:e,Y:n,Z:i}=this,{X:s,Y:o,Z:a}=t,c=r.eql(r.mul(e,a),r.mul(s,i)),l=r.eql(r.mul(n,a),r.mul(o,i));return c&&l}negate(){return new k(this.X,r.neg(this.Y),this.Z)}double(){const{a:t,b:e}=s,n=r.mul(e,wp),{X:i,Y:o,Z:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(i,i),h=r.mul(o,o),f=r.mul(a,a),m=r.mul(i,o);return m=r.add(m,m),u=r.mul(i,a),u=r.add(u,u),c=r.mul(t,u),l=r.mul(n,f),l=r.add(c,l),c=r.sub(h,l),l=r.add(h,l),l=r.mul(c,l),c=r.mul(m,c),u=r.mul(n,u),f=r.mul(t,f),m=r.sub(d,f),m=r.mul(t,m),m=r.add(m,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,f),d=r.mul(d,m),l=r.add(l,d),f=r.mul(o,a),f=r.add(f,f),d=r.mul(f,m),c=r.sub(c,d),u=r.mul(f,h),u=r.add(u,u),u=r.add(u,u),new k(c,l,u)}add(t){y(t);const{X:e,Y:n,Z:i}=this,{X:o,Y:a,Z:c}=t;let l=r.ZERO,u=r.ZERO,d=r.ZERO;const h=s.a,f=r.mul(s.b,wp);let m=r.mul(e,o),p=r.mul(n,a),g=r.mul(i,c),w=r.add(e,n),v=r.add(o,a);w=r.mul(w,v),v=r.add(m,p),w=r.sub(w,v),v=r.add(e,i);let b=r.add(o,c);return v=r.mul(v,b),b=r.add(m,g),v=r.sub(v,b),b=r.add(n,i),l=r.add(a,c),b=r.mul(b,l),l=r.add(p,g),b=r.sub(b,l),d=r.mul(h,v),l=r.mul(f,g),d=r.add(l,d),l=r.sub(p,d),d=r.add(p,d),u=r.mul(l,d),p=r.add(m,m),p=r.add(p,m),g=r.mul(h,g),v=r.mul(f,v),p=r.add(p,g),g=r.sub(m,g),g=r.mul(h,g),v=r.add(v,g),m=r.mul(p,v),u=r.add(u,m),m=r.mul(b,v),l=r.mul(w,l),l=r.sub(l,m),m=r.mul(w,p),d=r.mul(b,d),d=r.add(d,m),new k(l,u,d)}subtract(t){return this.add(t.negate())}is0(){return this.equals(k.ZERO)}multiply(t){const{endo:n}=e;if(!i.isValidNot0(t))throw new Error("invalid scalar: out of range");let r,s;const o=t=>A.cached(this,t,t=>zd(k,t));if(n){const{k1neg:e,k1:i,k2neg:a,k2:c}=v(t),{p:l,f:u}=o(i),{p:d,f:h}=o(c);s=u.add(h),r=N(n.beta,l,d,e,a)}else{const{p:e,f:n}=o(t);r=e,s=n}return zd(k,[r,s])[0]}multiplyUnsafe(t){const{endo:n}=e,r=this;if(!i.isValid(t))throw new Error("invalid scalar: out of range");if(t===mp||r.is0())return k.ZERO;if(t===pp)return r;if(A.hasCache(this))return this.multiply(t);if(n){const{k1neg:e,k1:i,k2neg:s,k2:o}=v(t),{p1:a,p2:c}=function(t,e,n,r){let i=e,s=t.ZERO,o=t.ZERO;for(;n>Pd||r>Pd;)n&jd&&(s=s.add(i)),r&jd&&(o=o.add(i)),i=i.double(),n>>=jd,r>>=jd;return{p1:s,p2:o}}(k,r,i,o);return N(n.beta,a,c,e,s)}return A.unsafe(r,t)}multiplyAndAddUnsafe(t,e,n){const r=this.multiplyUnsafe(e).add(t.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(t){return b(this,t)}isTorsionFree(){const{isTorsionFree:t}=e;return o===pp||(t?t(k,this):A.unsafe(this,a).is0())}clearCofactor(){const{clearCofactor:t}=e;return o===pp?this:t?t(k,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(t=!0){return Ku(t,"isCompressed"),this.assertValidity(),d(k,this,t)}toHex(t=!0){return iu(this.toBytes(t))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(t=!0){return this.toBytes(t)}tt(t){this.precompute(t)}static normalizeZ(t){return zd(k,t)}static msm(t,e){return Vd(k,i,t,e)}static fromPrivateKey(t){return k.BASE.multiply(vp(i,t))}}k.BASE=new k(s.Gx,s.Gy,r.ONE),k.ZERO=new k(r.ZERO,r.ONE,r.ZERO),k.Fp=r,k.Fn=i;const M=i.BITS,A=new Wd(k,e.endo?Math.ceil(M/2):M);return k.BASE.precompute(8),k}(e,n),r,i))}const kp={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Mp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Ap=BigInt(2),Ep=Td(kp.p,{sqrt:function(t){const e=kp.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=vd(u,n,e)*u%e,h=vd(d,n,e)*u%e,f=vd(h,Ap,e)*l%e,m=vd(f,i,e)*f%e,p=vd(m,s,e)*m%e,g=vd(p,a,e)*p%e,w=vd(g,c,e)*g%e,y=vd(w,a,e)*p%e,v=vd(y,n,e)*u%e,b=vd(v,o,e)*m%e,x=vd(b,r,e)*l%e,N=vd(x,Ap,e);if(!Ep.eql(Ep.sqr(N),t))throw new Error("Cannot find square root");return N}}),Sp=function(t){const e=e=>Np({...t,hash:e});return{...e(Lu),create:e}}({...kp,Fp:Ep,lowS:!0,endo:Mp});function Cp(t){try{return ch.ExtendedPoint.fromHex(t),!0}catch{return!1}}ch.utils.randomPrivateKey,ch.getPublicKey;const Tp=(t,e)=>ch.sign(t,e.slice(0,32)),Ip=ch.verify,Op=t=>_l.Buffer.isBuffer(t)?t:t instanceof Uint8Array?_l.Buffer.from(t.buffer,t.byteOffset,t.byteLength):_l.Buffer.from(t);class Pp{constructor(t){Object.assign(this,t)}encode(){return _l.Buffer.from(Zh(jp,this))}static decode(t){return Xh(jp,this,t)}static decodeUnchecked(t){return _h(jp,this,t)}}const jp=new Map;var Dp;const zp=32;let _p=1;class Rp extends Pp{constructor(t){if(super({}),this.Qt=void 0,function(t){return void 0!==t.Qt}(t))this.Qt=t.Qt;else{if("string"==typeof t){const e=ph.decode(t);if(e.length!=zp)throw new Error("Invalid public key input");this.Qt=new dh(e)}else this.Qt=new dh(t);if(this.Qt.byteLength()>zp)throw new Error("Invalid public key input")}}static unique(){const t=new Rp(_p);return _p+=1,new Rp(t.toBuffer())}equals(t){return this.Qt.eq(t.Qt)}toBase58(){return ph.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this.Qt.toArrayLike(_l.Buffer);if(t.length===zp)return t;const e=_l.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const r=_l.Buffer.concat([t.toBuffer(),_l.Buffer.from(e),n.toBuffer()]),i=gh(r);return new Rp(i)}static createProgramAddressSync(t,e){let n=_l.Buffer.alloc(0);t.forEach(function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");n=_l.Buffer.concat([n,Op(t)])}),n=_l.Buffer.concat([n,e.toBuffer(),_l.Buffer.from("ProgramDerivedAddress")]);const r=gh(n);if(Cp(r))throw new Error("Invalid seeds, address must fall off the curve");return new Rp(r)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n,r=255;for(;0!=r;){try{const i=t.concat(_l.Buffer.from([r]));n=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return Cp(new Rp(t).toBytes())}}Dp=Rp,Rp.default=new Dp("11111111111111111111111111111111"),jp.set(Rp,{kind:"struct",fields:[["_bn","u256"]]}),new Rp("BPFLoader1111111111111111111111111111111111");const Bp=1232;class $p extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty($p.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Up extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Up.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Fp extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Fp.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Lp{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach((t,n)=>{e.set(t.toBase58(),n)});const n=t=>{const n=e.get(t.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const Wp=(t="publicKey")=>Kf(32,t),Vp=(t="signature")=>Kf(64,t),qp=(t="string")=>{const e=Vf([Ff("length"),Ff("lengthPadding"),Kf(Bf(Ff(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(t,e)=>n(t,e).chars.toString(),i.encode=(t,e,n)=>{const i={chars:_l.Buffer.from(t,"utf8")};return r(i,e,n)},i.alloc=t=>Ff().span+Ff().span+_l.Buffer.from(t,"utf8").length,i};function Kp(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(127&r)<<7*n,n+=1,!(128&r))break}return e}function Hp(t,e){let n=e;for(;;){let e=127&n;if(n>>=7,0==n){t.push(e);break}e|=128,t.push(e)}}function Yp(t,e){if(!t)throw new Error(e||"Assertion failed")}class Zp{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,r=t=>{const e=t.toBase58();let r=n.get(e);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(e,r)),r},i=r(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){r(s.programId).isInvoked=!0;for(const t of s.keys){const e=r(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new Zp(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Yp(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),n=t.filter(([,t])=>t.isSigner&&!t.isWritable),r=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),s={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Yp(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Yp(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...e.map(([t])=>new Rp(t)),...n.map(([t])=>new Rp(t)),...r.map(([t])=>new Rp(t)),...i.map(([t])=>new Rp(t))]]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[r,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==r.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,r=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const e=new Rp(i),s=t.findIndex(t=>t.equals(e));s>=0&&(Yp(s<256,"Max lookup table index exceeded"),n.push(s),r.push(e),this.keyMetaMap.delete(i))}return[n,r]}}const Gp="Reached end of buffer unexpectedly";function Qp(t){if(0===t.length)throw new Error(Gp);return t.shift()}function Xp(t,...e){const[n]=e;if(2===e.length?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Gp);return t.splice(...e)}class Jp{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new Rp(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ph.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Lp(this.staticAccountKeys)}static compile(t){const e=Zp.compile(t.instructions,t.payerKey),[n,r]=e.getMessageComponents(),i=new Lp(r).compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:ph.encode(t.data)}));return new Jp({header:n,accountKeys:r,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;return t>=this.header.numRequiredSignatures?t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Hp(e,t);const n=this.instructions.map(t=>{const{accounts:e,programIdIndex:n}=t,r=Array.from(ph.decode(t.data));let i=[];Hp(i,e.length);let s=[];return Hp(s,r.length),{programIdIndex:n,keyIndicesCount:_l.Buffer.from(i),keyIndices:e,dataLength:_l.Buffer.from(s),data:r}});let r=[];Hp(r,n.length);let i=_l.Buffer.alloc(Bp);_l.Buffer.from(r).copy(i);let s=r.length;n.forEach(t=>{const e=Vf([$f("programIdIndex"),Kf(t.keyIndicesCount.length,"keyIndicesCount"),qf($f("keyIndex"),t.keyIndices.length,"keyIndices"),Kf(t.dataLength.length,"dataLength"),qf($f("userdatum"),t.data.length,"data")]).encode(t,i,s);s+=e}),i=i.slice(0,s);const o=Vf([Kf(1,"numRequiredSignatures"),Kf(1,"numReadonlySignedAccounts"),Kf(1,"numReadonlyUnsignedAccounts"),Kf(e.length,"keyCount"),qf(Wp("key"),t,"keys"),Wp("recentBlockhash")]),a={numRequiredSignatures:_l.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:_l.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:_l.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:_l.Buffer.from(e),keys:this.accountKeys.map(t=>Op(t.toBytes())),recentBlockhash:ph.decode(this.recentBlockhash)};let c=_l.Buffer.alloc(2048);const l=o.encode(a,c);return i.copy(c,l),c.slice(0,l+i.length)}static from(t){let e=[...t];const n=Qp(e);if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=Qp(e),i=Qp(e),s=Kp(e);let o=[];for(let d=0;d<s;d++){const t=Xp(e,0,zp);o.push(new Rp(_l.Buffer.from(t)))}const a=Xp(e,0,zp),c=Kp(e);let l=[];for(let d=0;d<c;d++){const t=Qp(e),n=Xp(e,0,Kp(e)),r=Xp(e,0,Kp(e)),i=ph.encode(_l.Buffer.from(r));l.push({programIdIndex:t,accounts:n,data:i})}const u={header:{numRequiredSignatures:n,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:i},recentBlockhash:ph.encode(_l.Buffer.from(a)),accountKeys:o,instructions:l};return new Jp(u)}}class tg{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Lp(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;return t>=n?t-n<this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0):t>=this.header.numRequiredSignatures?t-e<n-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const r=t.find(t=>t.key.equals(n.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const t of n.writableIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.writable.push(r.state.addresses[t])}for(const t of n.readonlyIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.readonly.push(r.state.addresses[t])}}return e}static compile(t){const e=Zp.compile(t.instructions,t.payerKey),n=new Array,r={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const c of i){const t=e.extractTableLookup(c);if(void 0!==t){const[e,{writable:i,readonly:s}]=t;n.push(e),r.writable.push(...i),r.readonly.push(...s)}}const[s,o]=e.getMessageComponents(),a=new Lp(o,r).compileInstructions(t.instructions);return new tg({header:s,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:n})}serialize(){const t=Array();Hp(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Hp(n,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),i=Array();Hp(i,this.addressTableLookups.length);const s=Vf([$f("prefix"),Vf([$f("numRequiredSignatures"),$f("numReadonlySignedAccounts"),$f("numReadonlyUnsignedAccounts")],"header"),Kf(t.length,"staticAccountKeysLength"),qf(Wp(),this.staticAccountKeys.length,"staticAccountKeys"),Wp("recentBlockhash"),Kf(n.length,"instructionsLength"),Kf(e.length,"serializedInstructions"),Kf(i.length,"addressTableLookupsLength"),Kf(r.length,"serializedAddressTableLookups")]),o=new Uint8Array(Bp),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:ph.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},o);return o.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(Bp);for(const n of this.compiledInstructions){const r=Array();Hp(r,n.accountKeyIndexes.length);const i=Array();Hp(i,n.data.length),t+=Vf([$f("programIdIndex"),Kf(r.length,"encodedAccountKeyIndexesLength"),qf($f(),n.accountKeyIndexes.length,"accountKeyIndexes"),Kf(i.length,"encodedDataLength"),Kf(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Bp);for(const n of this.addressTableLookups){const r=Array();Hp(r,n.writableIndexes.length);const i=Array();Hp(i,n.readonlyIndexes.length),t+=Vf([Wp("accountKey"),Kf(r.length,"encodedWritableIndexesLength"),qf($f(),n.writableIndexes.length,"writableIndexes"),Kf(i.length,"encodedReadonlyIndexesLength"),qf($f(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=Qp(e),r=127&n;Yp(n!==r,"Expected versioned message but received legacy message"),Yp(0===r,`Expected versioned message with version 0 but found version ${r}`);const i={numRequiredSignatures:Qp(e),numReadonlySignedAccounts:Qp(e),numReadonlyUnsignedAccounts:Qp(e)},s=[],o=Kp(e);for(let h=0;h<o;h++)s.push(new Rp(Xp(e,0,zp)));const a=ph.encode(Xp(e,0,zp)),c=Kp(e),l=[];for(let h=0;h<c;h++){const t=Qp(e),n=Xp(e,0,Kp(e)),r=Kp(e),i=new Uint8Array(Xp(e,0,r));l.push({programIdIndex:t,accountKeyIndexes:n,data:i})}const u=Kp(e),d=[];for(let h=0;h<u;h++){const t=new Rp(Xp(e,0,zp)),n=Xp(e,0,Kp(e)),r=Xp(e,0,Kp(e));d.push({accountKey:t,writableIndexes:n,readonlyIndexes:r})}return new tg({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:l,addressTableLookups:d})}}const eg={deserializeMessageVersion(t){const e=t[0],n=127&e;return n===e?"legacy":n},deserialize:t=>{const e=eg.deserializeMessageVersion(t);if("legacy"===e)return Jp.from(t);if(0===e)return tg.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let ng=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const rg=_l.Buffer.alloc(64).fill(0);class ig{constructor(t){this.keys=void 0,this.programId=void 0,this.data=_l.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class sg{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this.Xt=void 0,this.Jt=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ig(t))}),this}compileMessage(){if(this.Xt&&JSON.stringify(this.toJSON())===JSON.stringify(this.Jt))return this.Xt;let t,e,n;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let m=0;m<e.length;m++)if(void 0===e[m].programId)throw new Error(`Transaction instruction index ${m} has undefined program id`);const r=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();r.includes(e)||r.push(e)}),r.forEach(t=>{i.push({pubkey:new Rp(t),isSigner:!1,isWritable:!1})});const s=[];i.forEach(t=>{const e=t.pubkey.toString(),n=s.findIndex(t=>t.pubkey.toString()===e);n>-1?(s[n].isWritable=s[n].isWritable||t.isWritable,s[n].isSigner=s[n].isSigner||t.isSigner):s.push(t)}),s.sort(function(t,e){return t.isSigner!==e.isSigner?t.isSigner?-1:1:t.isWritable!==e.isWritable?t.isWritable?-1:1:t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const o=s.findIndex(t=>t.pubkey.equals(n));if(o>-1){const[t]=s.splice(o,1);t.isSigner=!0,t.isWritable=!0,s.unshift(t)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const m of this.signatures){const t=s.findIndex(t=>t.pubkey.equals(m.publicKey));if(!(t>-1))throw new Error(`unknown signer: ${m.publicKey.toString()}`);s[t].isSigner||(s[t].isSigner=!0)}let a=0,c=0,l=0;const u=[],d=[];s.forEach(({pubkey:t,isSigner:e,isWritable:n})=>{e?(u.push(t.toString()),a+=1,n||(c+=1)):(d.push(t.toString()),n||(l+=1))});const h=u.concat(d),f=e.map(t=>{const{data:e,programId:n}=t;return{programIdIndex:h.indexOf(n.toString()),accounts:t.keys.map(t=>h.indexOf(t.pubkey.toString())),data:ph.encode(e)}});return f.forEach(t=>{Yp(t.programIdIndex>=0),t.accounts.forEach(t=>Yp(t>=0))}),new Jp({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:h,recentBlockhash:t,instructions:f})}te(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((t,n)=>e[n].equals(t.publicKey))||(this.signatures=e.map(t=>({signature:null,publicKey:t}))),t}serializeMessage(){return this.te().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const n=t.toString();return!e.has(n)&&(e.add(n),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),n.push(i))}this.signatures=n.map(t=>({signature:null,publicKey:t.publicKey}));const r=this.te();this.ee(r,...n)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),n.push(i))}const r=this.te();this.ee(r,...n)}ee(t,...e){const n=t.serialize();e.forEach(t=>{const e=Tp(n,t.secretKey);this.ne(t.publicKey,Op(e))})}addSignature(t,e){this.te(),this.ne(t,e)}ne(t,e){Yp(64===e.length);const n=this.signatures.findIndex(e=>t.equals(e.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=_l.Buffer.from(e)}verifySignatures(t=!0){return!this.re(this.serializeMessage(),t)}re(t,e){const n={};for(const{signature:r,publicKey:i}of this.signatures)null===r?e&&(n.missing||(n.missing=[])).push(i):Ip(r,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),r=this.serializeMessage();if(n){const t=this.re(r,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this.ie(r)}ie(t){const{signatures:e}=this,n=[];Hp(n,e.length);const r=n.length+64*e.length+t.length,i=_l.Buffer.alloc(r);return Yp(e.length<256),_l.Buffer.from(n).copy(i,0),e.forEach(({signature:t},e)=>{null!==t&&(Yp(64===t.length,"signature has invalid length"),_l.Buffer.from(t).copy(i,n.length+64*e))}),t.copy(i,n.length+64*e.length),Yp(i.length<=Bp,`Transaction too large: ${i.length} > 1232`),i}get keys(){return Yp(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Yp(1===this.instructions.length),this.instructions[0].programId}get data(){return Yp(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const n=Kp(e);let r=[];for(let i=0;i<n;i++){const t=Xp(e,0,64);r.push(ph.encode(_l.Buffer.from(t)))}return sg.populate(Jp.from(e),r)}static populate(t,e=[]){const n=new sg;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((e,r)=>{const i={signature:e==ph.encode(rg)?null:ph.decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)}),t.instructions.forEach(e=>{const r=e.accounts.map(e=>{const r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some(t=>t.publicKey.toString()===r.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});n.instructions.push(new ig({keys:r,programId:t.accountKeys[e.programIdIndex],data:ph.decode(e.data)}))}),n.Xt=t,n.Jt=n.toJSON(),n}}class og{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Yp(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let n=0;n<t.header.numRequiredSignatures;n++)e.push(new Uint8Array(64));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Hp(e,this.signatures.length);const n=Vf([Kf(e.length,"encodedSignaturesLength"),qf(Vp(),this.signatures.length,"signatures"),Kf(t.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},r);return r.slice(0,i)}static deserialize(t){let e=[...t];const n=[],r=Kp(e);for(let s=0;s<r;s++)n.push(new Uint8Array(Xp(e,0,64)));const i=eg.deserialize(new Uint8Array(e));return new og(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of t){const t=n.findIndex(t=>t.equals(r.publicKey));Yp(t>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[t]=Tp(e,r.secretKey)}}addSignature(t,e){Yp(64===e.byteLength,"Signature must be 64 bytes long");const n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(e=>e.equals(t));Yp(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}new Rp("SysvarC1ock11111111111111111111111111111111"),new Rp("SysvarEpochSchedu1e111111111111111111111111"),new Rp("Sysvar1nstructions1111111111111111111111111"),new Rp("SysvarRecentB1ockHashes11111111111111111111"),new Rp("SysvarRent111111111111111111111111111111111"),new Rp("SysvarRewards111111111111111111111111111111"),new Rp("SysvarS1otHashes111111111111111111111111111"),new Rp("SysvarS1otHistory11111111111111111111111111"),new Rp("SysvarStakeHistory1111111111111111111111111");class ag extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:r}){const i=r?`Logs: \n${JSON.stringify(r.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(t){case"send":o=`Transaction ${e} resulted in an error. \n${n}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${n}. \n`+i+s;break;default:o=`Unknown action '${(t=>t)(t)}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=r||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(null==t||"object"!=typeof t||!("then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(t=>{if(t&&t.meta&&t.meta.logMessages){const n=t.meta.logMessages;this.transactionLogs=n,e(n)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class cg extends Error{constructor({code:t,message:e,data:n},r){super(null!=r?`${r}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function lg(t){return new Promise(e=>setTimeout(e,t))}const ug=Lf("lamportsPerSignature"),dg=Vf([Ff("version"),Ff("state"),Wp("authorizedPubkey"),Wp("nonce"),Vf([ug],"feeCalculator")]);dg.span;class hg{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=dg.decode(Op(t),0);return new hg({authorizedPubkey:new Rp(e.authorizedPubkey),nonce:new Rp(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function fg(t){const e=Kf(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,s=((t={})=>function(t,e){if(Gf(t)!==Gf(e))throw new Zf(8078004);if(Gf(t)&&Gf(e)&&t.fixedSize!==e.fixedSize)throw new Zf(8078005,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Gf(t)&&!Gf(e)&&t.maxSize!==e.maxSize)throw new Zf(8078006,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}(((t={})=>{return e={config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8},n={fixedSize:e.size,write(t,n,r){e.range&&function(t,e,n,r){if(r<e||r>n)throw new Zf(8078011,{codecDescription:t,max:n,min:e,value:r})}(e.name,e.range[0],e.range[1],t);const i=new ArrayBuffer(e.size);return e.set(new DataView(i),t,Qf(e.config)),n.set(new Uint8Array(i),r),r+e.size}},Object.freeze({...n,encode:t=>{const e=new Uint8Array(function(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}(t,n));return n.write(t,e,0),e}});var e,n})(t),((t={})=>{return n={fixedSize:(e={config:t,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}).size,read(t,n=0){!function(t,e,n=0){if(e.length-n<=0)throw new Zf(8078e3,{codecDescription:t})}(e.name,t,n),function(t,e,n,r=0){const i=n.length-r;if(i<e)throw new Zf(8078001,{bytesLength:i,codecDescription:t,expected:e})}(e.name,e.size,t,n);const r=new DataView(function(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}(t,n,e.size));return[e.get(r,Qf(e.config)),n+e.size]}},Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]});var e,n})(t)))();return i.decode=(t,e)=>{const r=n(t,e);return s.decode(r)},i.encode=(t,e,n)=>{const i=s.encode(t);return r(i,e,n)},i}function mg(t){return t&&t.Ut&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pg,gg;function wg(){if(gg)return pg;gg=1;var t=Object.prototype.toString,e=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function n(r,i){var s,o,a,c,l,u,d;if(!0===r)return"true";if(!1===r)return"false";switch(typeof r){case"object":if(null===r)return null;if(r.toJSON&&"function"==typeof r.toJSON)return n(r.toJSON(),i);if("[object Array]"===(d=t.call(r))){for(a="[",o=r.length-1,s=0;s<o;s++)a+=n(r[s],!0)+",";return o>-1&&(a+=n(r[s],!0)),a+"]"}if("[object Object]"===d){for(o=(c=e(r).sort()).length,a="",s=0;s<o;)void 0!==(u=n(r[l=c[s]],!1))&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return pg=function(t){var e=n(t,!1);if(void 0!==e)return""+e}}Object.freeze({Create:{index:0,layout:Vf([Ff("instruction"),Wf("lamports"),Wf("space"),Wp("programId")])},Assign:{index:1,layout:Vf([Ff("instruction"),Wp("programId")])},Transfer:{index:2,layout:Vf([Ff("instruction"),fg("lamports")])},CreateWithSeed:{index:3,layout:Vf([Ff("instruction"),Wp("base"),qp("seed"),Wf("lamports"),Wf("space"),Wp("programId")])},AdvanceNonceAccount:{index:4,layout:Vf([Ff("instruction")])},WithdrawNonceAccount:{index:5,layout:Vf([Ff("instruction"),Wf("lamports")])},InitializeNonceAccount:{index:6,layout:Vf([Ff("instruction"),Wp("authorized")])},AuthorizeNonceAccount:{index:7,layout:Vf([Ff("instruction"),Wp("authorized")])},Allocate:{index:8,layout:Vf([Ff("instruction"),Wf("space")])},AllocateWithSeed:{index:9,layout:Vf([Ff("instruction"),Wp("base"),qp("seed"),Wf("space"),Wp("programId")])},AssignWithSeed:{index:10,layout:Vf([Ff("instruction"),Wp("base"),qp("seed"),Wp("programId")])},TransferWithSeed:{index:11,layout:Vf([Ff("instruction"),fg("lamports"),qp("seed"),Wp("programId")])},UpgradeNonceAccount:{index:12,layout:Vf([Ff("instruction")])}}),new Rp("11111111111111111111111111111111"),new Rp("BPFLoader2111111111111111111111111111111111");var yg=mg(wg());function vg(t){let e=0;for(;t>1;)t/=2,e++;return e}class bg{constructor(t,e,n,r,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=r,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const n=vg(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32)))-vg(32)-1;return[n,t-(this.getSlotsInEpoch(n)-32)]}{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+n,e%this.slotsPerEpoch]}var e}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+vg(32)):this.slotsPerEpoch}}var xg=globalThis.fetch;class Ng extends op{constructor(t,e,n){super(t=>{const n=function(t,e){return new ip(t,e)}(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in n?n.socket:n,n},t,e,n),this.underlyingSocket=void 0}call(...t){var e;const n=null==(e=this.underlyingSocket)?void 0:e.readyState;return 1===n?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...t){var e;const n=null==(e=this.underlyingSocket)?void 0:e.readyState;return 1===n?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}class kg{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}(Mg,t),n=t.length-56;Yp(n>=0,"lookup table is invalid"),Yp(n%32==0,"lookup table is invalid");const r=n/32,{addresses:i}=Vf([qf(Wp(),r,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new Rp(e.authority[0]):void 0,addresses:i.map(t=>new Rp(t))}}}const Mg={index:1,layout:Vf([Ff("typeIndex"),fg("deactivationSlot"),Lf("lastExtendedSlot"),$f("lastExtendedStartIndex"),$f(),qf(Wp(),Bf($f(),-1),"authority")])},Ag=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Eg=km(hm(Rp),ym(),t=>new Rp(t)),Sg=vm([ym(),fm("base64")]),Cg=km(hm(_l.Buffer),Sg,t=>_l.Buffer.from(t[0],"base64"));function Tg(t){let e,n;if("string"==typeof t)e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function Ig(t){return t.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Og(t){return xm([bm({jsonrpc:fm("2.0"),id:ym(),result:t}),bm({jsonrpc:fm("2.0"),id:ym(),error:bm({code:Nm(),message:ym(),data:gm(lm("any",()=>!0))})})])}const Pg=Og(Nm());function jg(t){return km(Og(t),Pg,e=>"error"in e?e:{...e,result:om(e.result,t)})}function Dg(t){return jg(bm({context:bm({slot:pm()}),value:t}))}function zg(t){return bm({context:bm({slot:pm()}),value:t})}function _g(t,e){return 0===t?new tg({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Rp(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ph.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Jp(e)}const Rg=bm({foundation:pm(),foundationTerm:pm(),initial:pm(),taper:pm(),terminal:pm()}),Bg=jg(um(mm(bm({epoch:pm(),effectiveSlot:pm(),amount:pm(),postBalance:pm(),commission:gm(mm(pm()))})))),$g=um(bm({slot:pm(),prioritizationFee:pm()})),Ug=bm({total:pm(),validator:pm(),foundation:pm(),epoch:pm()}),Fg=bm({epoch:pm(),slotIndex:pm(),slotsInEpoch:pm(),absoluteSlot:pm(),blockHeight:gm(pm()),transactionCount:gm(pm())}),Lg=bm({slotsPerEpoch:pm(),leaderScheduleSlotOffset:pm(),warmup:dm(),firstNormalEpoch:pm(),firstNormalSlot:pm()}),Wg=wm(ym(),um(pm())),Vg=mm(xm([bm({}),ym()])),qg=bm({err:Vg}),Kg=fm("receivedSignature"),Hg=bm({"solana-core":ym(),"feature-set":gm(pm())}),Yg=bm({program:ym(),programId:Eg,parsed:Nm()}),Zg=bm({programId:Eg,accounts:um(Eg),data:ym()}),Gg=Dg(bm({err:mm(xm([bm({}),ym()])),logs:mm(um(ym())),accounts:gm(mm(um(mm(bm({executable:dm(),owner:ym(),lamports:pm(),data:um(ym()),rentEpoch:gm(pm())}))))),unitsConsumed:gm(pm()),returnData:gm(mm(bm({programId:ym(),data:vm([ym(),fm("base64")])}))),innerInstructions:gm(mm(um(bm({index:pm(),instructions:um(xm([Yg,Zg]))}))))})),Qg=Dg(bm({byIdentity:wm(ym(),um(pm())),range:bm({firstSlot:pm(),lastSlot:pm()})})),Xg=jg(Rg),Jg=jg(Ug),tw=jg($g),ew=jg(Fg),nw=jg(Lg),rw=jg(Wg),iw=jg(pm()),sw=Dg(bm({total:pm(),circulating:pm(),nonCirculating:pm(),nonCirculatingAccounts:um(Eg)})),ow=bm({amount:ym(),uiAmount:mm(pm()),decimals:pm(),uiAmountString:gm(ym())}),aw=Dg(um(bm({address:Eg,amount:ym(),uiAmount:mm(pm()),decimals:pm(),uiAmountString:gm(ym())}))),cw=Dg(um(bm({pubkey:Eg,account:bm({executable:dm(),owner:Eg,lamports:pm(),data:Cg,rentEpoch:pm()})}))),lw=bm({program:ym(),parsed:Nm(),space:pm()}),uw=Dg(um(bm({pubkey:Eg,account:bm({executable:dm(),owner:Eg,lamports:pm(),data:lw,rentEpoch:pm()})}))),dw=Dg(um(bm({lamports:pm(),address:Eg}))),hw=bm({executable:dm(),owner:Eg,lamports:pm(),data:Cg,rentEpoch:pm()}),fw=bm({pubkey:Eg,account:hw}),mw=km(xm([hm(_l.Buffer),lw]),xm([Sg,lw]),t=>Array.isArray(t)?om(t,Cg):t),pw=bm({executable:dm(),owner:Eg,lamports:pm(),data:mw,rentEpoch:pm()}),gw=bm({pubkey:Eg,account:pw}),ww=bm({state:xm([fm("active"),fm("inactive"),fm("activating"),fm("deactivating")]),active:pm(),inactive:pm()}),yw=jg(um(bm({signature:ym(),slot:pm(),err:Vg,memo:mm(ym()),blockTime:gm(mm(pm()))}))),vw=jg(um(bm({signature:ym(),slot:pm(),err:Vg,memo:mm(ym()),blockTime:gm(mm(pm()))}))),bw=bm({subscription:pm(),result:zg(hw)}),xw=bm({pubkey:Eg,account:hw}),Nw=bm({subscription:pm(),result:zg(xw)}),kw=bm({parent:pm(),slot:pm(),root:pm()}),Mw=bm({subscription:pm(),result:kw}),Aw=xm([bm({type:xm([fm("firstShredReceived"),fm("completed"),fm("optimisticConfirmation"),fm("root")]),slot:pm(),timestamp:pm()}),bm({type:fm("createdBank"),parent:pm(),slot:pm(),timestamp:pm()}),bm({type:fm("frozen"),slot:pm(),timestamp:pm(),stats:bm({numTransactionEntries:pm(),numSuccessfulTransactions:pm(),numFailedTransactions:pm(),maxTransactionsPerEntry:pm()})}),bm({type:fm("dead"),slot:pm(),timestamp:pm(),err:ym()})]),Ew=bm({subscription:pm(),result:Aw}),Sw=bm({subscription:pm(),result:zg(xm([qg,Kg]))}),Cw=bm({subscription:pm(),result:pm()}),Tw=bm({pubkey:ym(),gossip:mm(ym()),tpu:mm(ym()),rpc:mm(ym()),version:mm(ym())}),Iw=bm({votePubkey:ym(),nodePubkey:ym(),activatedStake:pm(),epochVoteAccount:dm(),epochCredits:um(vm([pm(),pm(),pm()])),commission:pm(),lastVote:pm(),rootSlot:mm(pm())}),Ow=jg(bm({current:um(Iw),delinquent:um(Iw)})),Pw=xm([fm("processed"),fm("confirmed"),fm("finalized")]),jw=bm({slot:pm(),confirmations:mm(pm()),err:Vg,confirmationStatus:gm(Pw)}),Dw=Dg(um(mm(jw))),zw=jg(pm()),_w=bm({accountKey:Eg,writableIndexes:um(pm()),readonlyIndexes:um(pm())}),Rw=bm({signatures:um(ym()),message:bm({accountKeys:um(ym()),header:bm({numRequiredSignatures:pm(),numReadonlySignedAccounts:pm(),numReadonlyUnsignedAccounts:pm()}),instructions:um(bm({accounts:um(pm()),data:ym(),programIdIndex:pm()})),recentBlockhash:ym(),addressTableLookups:gm(um(_w))})}),Bw=bm({pubkey:Eg,signer:dm(),writable:dm(),source:gm(xm([fm("transaction"),fm("lookupTable")]))}),$w=bm({accountKeys:um(Bw),signatures:um(ym())}),Uw=bm({parsed:Nm(),program:ym(),programId:Eg}),Fw=bm({accounts:um(Eg),data:ym(),programId:Eg}),Lw=km(xm([Fw,Uw]),xm([bm({parsed:Nm(),program:ym(),programId:ym()}),bm({accounts:um(ym()),data:ym(),programId:ym()})]),t=>om(t,"accounts"in t?Fw:Uw)),Ww=bm({signatures:um(ym()),message:bm({accountKeys:um(Bw),instructions:um(Lw),recentBlockhash:ym(),addressTableLookups:gm(mm(um(_w)))})}),Vw=bm({accountIndex:pm(),mint:ym(),owner:gm(ym()),programId:gm(ym()),uiTokenAmount:ow}),qw=bm({writable:um(Eg),readonly:um(Eg)}),Kw=bm({err:Vg,fee:pm(),innerInstructions:gm(mm(um(bm({index:pm(),instructions:um(bm({accounts:um(pm()),data:ym(),programIdIndex:pm()}))})))),preBalances:um(pm()),postBalances:um(pm()),logMessages:gm(mm(um(ym()))),preTokenBalances:gm(mm(um(Vw))),postTokenBalances:gm(mm(um(Vw))),loadedAddresses:gm(qw),computeUnitsConsumed:gm(pm()),costUnits:gm(pm())}),Hw=bm({err:Vg,fee:pm(),innerInstructions:gm(mm(um(bm({index:pm(),instructions:um(Lw)})))),preBalances:um(pm()),postBalances:um(pm()),logMessages:gm(mm(um(ym()))),preTokenBalances:gm(mm(um(Vw))),postTokenBalances:gm(mm(um(Vw))),loadedAddresses:gm(qw),computeUnitsConsumed:gm(pm()),costUnits:gm(pm())}),Yw=xm([fm(0),fm("legacy")]),Zw=bm({pubkey:ym(),lamports:pm(),postBalance:mm(pm()),rewardType:mm(ym()),commission:gm(mm(pm()))}),Gw=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),transactions:um(bm({transaction:Rw,meta:mm(Kw),version:gm(Yw)})),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),Qw=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),Xw=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),transactions:um(bm({transaction:$w,meta:mm(Kw),version:gm(Yw)})),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),Jw=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),transactions:um(bm({transaction:Ww,meta:mm(Hw),version:gm(Yw)})),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),ty=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),transactions:um(bm({transaction:$w,meta:mm(Hw),version:gm(Yw)})),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),ey=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),rewards:gm(um(Zw)),blockTime:mm(pm()),blockHeight:mm(pm())}))),ny=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),transactions:um(bm({transaction:Rw,meta:mm(Kw)})),rewards:gm(um(Zw)),blockTime:mm(pm())}))),ry=jg(mm(bm({blockhash:ym(),previousBlockhash:ym(),parentSlot:pm(),signatures:um(ym()),blockTime:mm(pm())}))),iy=jg(mm(bm({slot:pm(),meta:mm(Kw),blockTime:gm(mm(pm())),transaction:Rw,version:gm(Yw)}))),sy=jg(mm(bm({slot:pm(),transaction:Ww,meta:mm(Hw),blockTime:gm(mm(pm())),version:gm(Yw)}))),oy=Dg(bm({blockhash:ym(),lastValidBlockHeight:pm()})),ay=Dg(dm()),cy=jg(um(bm({slot:pm(),numTransactions:pm(),numSlots:pm(),samplePeriodSecs:pm()}))),ly=Dg(mm(bm({feeCalculator:bm({lamportsPerSignature:pm()})}))),uy=jg(ym()),dy=jg(ym()),hy=bm({err:Vg,logs:um(ym()),signature:ym()}),fy=bm({result:zg(hy),subscription:pm()}),my={"solana-client":"js/1.0.0-maintenance"};class py{constructor(t,e){let n,r,i,s,o,a;var c;this.se=void 0,this.oe=void 0,this.ae=void 0,this.ce=void 0,this.le=void 0,this.ue=void 0,this.de=void 0,this.he=void 0,this.fe=!1,this.ge=null,this.we=null,this.ye=0,this.ve=!1,this.be=!1,this.xe={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this.Ne=0,this.ke={},this.Me={},this.Ae={},this.Ee={},this.Se={},this.Ce=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:n,config:r}=Tg(e),i=this.Te([],n,void 0,r),s=yg(i);return t[s]=t[s]??(async()=>{try{const t=om(await this.ue("getBlockHeight",i),jg(pm()));if("error"in t)throw new cg(t.error,"failed to get block height information");return t.result}finally{delete t[s]}})(),await t[s]}})(),e&&"string"==typeof e?this.se=e:e&&(this.se=e.commitment,this.oe=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,r=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this.ae=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this.ce=n||function(t){const e=t.match(Ag);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${o}//${r}${null==a?"":`:${a+1}`}${s}`}(t),this.le=function(t,e,n,r,i){const s=n||xg;let o;r&&(o=async(t,e)=>{const n=await new Promise((n,i)=>{try{r(t,e,(t,e)=>n([t,e]))}catch(s){i(s)}});return await s(...n)});const a=new ep(async(n,r)=>{const a={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},my)};try{let e,n=5,c=500;for(;e=o?await o(t,a):await s(t,a),429===e.status&&!0!==i&&(n-=1,0!==n);)await lg(c),c*=2;const l=await e.text();e.ok?r(null,l):r(new Error(`${e.status} ${e.statusText}: ${l}`))}catch(c){c instanceof Error&&r(c)}},{});return a}(t,r,i,s,o),this.ue=(c=this.le,(t,e)=>new Promise((n,r)=>{c.request(t,e,(t,e)=>{t?r(t):n(e)})})),this.de=function(t){return e=>new Promise((n,r)=>{0===e.length&&n([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?r(t):n(e)})})}(this.le),this.he=new Ng(this.ce,{autoconnect:!1,max_reconnects:1/0}),this.he.on("open",this.Ie.bind(this)),this.he.on("error",this.Oe.bind(this)),this.he.on("close",this.Pe.bind(this)),this.he.on("accountNotification",this.je.bind(this)),this.he.on("programNotification",this.De.bind(this)),this.he.on("slotNotification",this.ze.bind(this)),this.he.on("slotsUpdatesNotification",this._e.bind(this)),this.he.on("signatureNotification",this.Re.bind(this)),this.he.on("rootNotification",this.Be.bind(this)),this.he.on("logsNotification",this.$e.bind(this))}get commitment(){return this.se}get rpcEndpoint(){return this.ae}async getBalanceAndContext(t,e){const{commitment:n,config:r}=Tg(e),i=this.Te([t.toBase58()],n,void 0,r),s=om(await this.ue("getBalance",i),Dg(pm()));if("error"in s)throw new cg(s.error,`failed to get balance for ${t.toBase58()}`);return s.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=om(await this.ue("getBlockTime",[t]),jg(mm(pm())));if("error"in e)throw new cg(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){const t=om(await this.ue("minimumLedgerSlot",[]),jg(pm()));if("error"in t)throw new cg(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const t=om(await this.ue("getFirstAvailableBlock",[]),iw);if("error"in t)throw new cg(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const n=om(await this.ue("getSupply",[e]),sw);if("error"in n)throw new cg(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const n=this.Te([t.toBase58()],e),r=om(await this.ue("getTokenSupply",n),Dg(ow));if("error"in r)throw new cg(r.error,"failed to get token supply");return r.result}async getTokenAccountBalance(t,e){const n=this.Te([t.toBase58()],e),r=om(await this.ue("getTokenAccountBalance",n),Dg(ow));if("error"in r)throw new cg(r.error,"failed to get token account balance");return r.result}async getTokenAccountsByOwner(t,e,n){const{commitment:r,config:i}=Tg(n);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const o=this.Te(s,r,"base64",i),a=om(await this.ue("getTokenAccountsByOwner",o),cw);if("error"in a)throw new cg(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,n){let r=[t.toBase58()];"mint"in e?r.push({mint:e.mint.toBase58()}):r.push({programId:e.programId.toBase58()});const i=this.Te(r,n,"jsonParsed"),s=om(await this.ue("getTokenAccountsByOwner",i),uw);if("error"in s)throw new cg(s.error,`failed to get token accounts owned by account ${t.toBase58()}`);return s.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],r=om(await this.ue("getLargestAccounts",n),dw);if("error"in r)throw new cg(r.error,"failed to get largest accounts");return r.result}async getTokenLargestAccounts(t,e){const n=this.Te([t.toBase58()],e),r=om(await this.ue("getTokenLargestAccounts",n),aw);if("error"in r)throw new cg(r.error,"failed to get token largest accounts");return r.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:r}=Tg(e),i=this.Te([t.toBase58()],n,"base64",r),s=om(await this.ue("getAccountInfo",i),Dg(mm(hw)));if("error"in s)throw new cg(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getParsedAccountInfo(t,e){const{commitment:n,config:r}=Tg(e),i=this.Te([t.toBase58()],n,"jsonParsed",r),s=om(await this.ue("getAccountInfo",i),Dg(mm(pw)));if("error"in s)throw new cg(s.error,`failed to get info about account ${t.toBase58()}`);return s.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:r}=Tg(e),i=t.map(t=>t.toBase58()),s=this.Te([i],n,"jsonParsed",r),o=om(await this.ue("getMultipleAccounts",s),Dg(um(mm(pw))));if("error"in o)throw new cg(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:r}=Tg(e),i=t.map(t=>t.toBase58()),s=this.Te([i],n,"base64",r),o=om(await this.ue("getMultipleAccounts",s),Dg(um(mm(hw))));if("error"in o)throw new cg(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:r,config:i}=Tg(e),s=this.Te([t.toBase58()],r,void 0,{...i,epoch:null!=n?n:null==i?void 0:i.epoch}),o=om(await this.ue("getStakeActivation",s),jg(ww));if("error"in o)throw new cg(o.error,`failed to get Stake Activation ${t.toBase58()}`);return o.result}async getProgramAccounts(t,e){const{commitment:n,config:r}=Tg(e),{encoding:i,...s}=r||{},o=this.Te([t.toBase58()],n,i||"base64",{...s,...s.filters?{filters:Ig(s.filters)}:null}),a=await this.ue("getProgramAccounts",o),c=um(fw),l=!0===s.withContext?om(a,Dg(c)):om(a,jg(c));if("error"in l)throw new cg(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:r}=Tg(e),i=this.Te([t.toBase58()],n,"jsonParsed",r),s=om(await this.ue("getProgramAccounts",i),jg(um(gw)));if("error"in s)throw new cg(s.error,`failed to get accounts owned by program ${t.toBase58()}`);return s.result}async confirmTransaction(t,e){var n;let r,i;if("string"==typeof t)r=t;else{const e=t;if(null==(n=e.abortSignal)?void 0:n.aborted)return Promise.reject(e.abortSignal.reason);r=e.signature}try{i=ph.decode(r)}catch(s){throw new Error("signature must be base58 encoded: "+r)}return Yp(64===i.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{null!=t&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,r,i=!1;return{abortConfirmation:()=>{r&&(r(),r=void 0),null!=n&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:new Promise((s,o)=>{try{n=this.onSignature(e,(t,e)=>{n=void 0;const r={context:e,value:t};s({Ue:ng.PROCESSED,response:r})},t);const a=new Promise(t=>{null==n?t():r=this.Fe(n,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const n=await this.getSignatureStatus(e);if(i)return;if(null==n)return;const{context:r,value:c}=n;if(null!=c)if(null==c?void 0:c.err)o(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,s({Ue:ng.PROCESSED,response:{context:r,value:c}})}})()}catch(a){o(a)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:r}}){let i=!1;const s=new Promise(e=>{const r=async()=>{try{return await this.getBlockHeight(t)}catch(e){return-1}};(async()=>{let t=await r();if(!i){for(;t<=n;){if(await lg(1e3),i)return;if(t=await r(),i)return}e({Ue:ng.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),c=this.getCancellationPromise(e);let l;try{const t=await Promise.race([c,a,s]);if(t.Ue!==ng.PROCESSED)throw new $p(r);l=t.response}finally{i=!0,o()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:r,nonceValue:i,signature:s}}){let o=!1;const a=new Promise(e=>{let s=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(r,{commitment:t,minContextSlot:n});return a=e.slot,null==i?void 0:i.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)for(;;){if(i!==s)return void e({Ue:ng.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await lg(2e3),o)return;if(s=await c(),o)return}})()}),{abortConfirmation:c,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),u=this.getCancellationPromise(e);let d;try{const e=await Promise.race([u,l,a]);if(e.Ue===ng.PROCESSED)d=e.response;else{let r;for(;;){const t=await this.getSignatureStatus(s);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??n))){r=t;break}await lg(400)}if(!(null==r?void 0:r.value))throw new Fp(s);{const e=t||"finalized",{confirmationStatus:n}=r.value;switch(e){case"processed":case"recent":if("processed"!==n&&"confirmed"!==n&&"finalized"!==n)throw new Fp(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==n&&"finalized"!==n)throw new Fp(s);break;case"finalized":case"max":case"root":if("finalized"!==n)throw new Fp(s)}d={context:r.context,value:{err:r.value.err}}}}}finally{o=!0,c()}return d}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const r=new Promise(e=>{let r=this.oe||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":r=this.oe||3e4}n=setTimeout(()=>e({Ue:ng.TIMED_OUT,timeoutMs:r}),r)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([s,r]);if(t.Ue!==ng.PROCESSED)throw new Up(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(n),i()}return o}async getClusterNodes(){const t=om(await this.ue("getClusterNodes",[]),jg(um(Tw)));if("error"in t)throw new cg(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){const e=this.Te([],t),n=om(await this.ue("getVoteAccounts",e),Ow);if("error"in n)throw new cg(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,void 0,n),i=om(await this.ue("getSlot",r),jg(pm()));if("error"in i)throw new cg(i.error,"failed to get slot");return i.result}async getSlotLeader(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,void 0,n),i=om(await this.ue("getSlotLeader",r),jg(ym()));if("error"in i)throw new cg(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){const n=[t,e],r=om(await this.ue("getSlotLeaders",n),jg(um(Eg)));if("error"in r)throw new cg(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(t,e){const{context:n,value:r}=await this.getSignatureStatuses([t],e);return Yp(1===r.length),{context:n,value:r[0]}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const r=om(await this.ue("getSignatureStatuses",n),Dw);if("error"in r)throw new cg(r.error,"failed to get signature status");return r.result}async getTransactionCount(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,void 0,n),i=om(await this.ue("getTransactionCount",r),jg(pm()));if("error"in i)throw new cg(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this.Te([],t),n=om(await this.ue("getInflationGovernor",e),Xg);if("error"in n)throw new cg(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,n){const{commitment:r,config:i}=Tg(n),s=this.Te([t.map(t=>t.toBase58())],r,void 0,{...i,epoch:null!=e?e:null==i?void 0:i.epoch}),o=om(await this.ue("getInflationReward",s),Bg);if("error"in o)throw new cg(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){const t=om(await this.ue("getInflationRate",[]),Jg);if("error"in t)throw new cg(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,void 0,n),i=om(await this.ue("getEpochInfo",r),ew);if("error"in i)throw new cg(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const t=om(await this.ue("getEpochSchedule",[]),nw);if("error"in t)throw new cg(t.error,"failed to get epoch schedule");const e=t.result;return new bg(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){const t=om(await this.ue("getLeaderSchedule",[]),rw);if("error"in t)throw new cg(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){const n=this.Te([t],e),r=om(await this.ue("getMinimumBalanceForRentExemption",n),zw);return"error"in r?0:r.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(t){const e=om(await this.ue("getRecentPerformanceSamples",t?[t]:[]),cy);if("error"in e)throw new cg(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){const n=this.Te([t],e),r=om(await this.ue("getFeeCalculatorForBlockhash",n),ly);if("error"in r)throw new cg(r.error,"failed to get fee calculator");const{context:i,value:s}=r.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(t,e){const n=Op(t.serialize()).toString("base64"),r=this.Te([n],e),i=om(await this.ue("getFeeForMessage",r),Dg(mm(pm())));if("error"in i)throw new cg(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(t){var e;const n=null==(e=null==t?void 0:t.lockedWritableAccounts)?void 0:e.map(t=>t.toBase58()),r=(null==n?void 0:n.length)?[n]:[],i=om(await this.ue("getRecentPrioritizationFees",r),tw);if("error"in i)throw new cg(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,void 0,n),i=om(await this.ue("getLatestBlockhash",r),oy);if("error"in i)throw new cg(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(t,e){const{commitment:n,config:r}=Tg(e),i=this.Te([t],n,void 0,r),s=om(await this.ue("isBlockhashValid",i),ay);if("error"in s)throw new cg(s.error,"failed to determine if the blockhash `"+t+"`is valid");return s.result}async getVersion(){const t=om(await this.ue("getVersion",[]),jg(Hg));if("error"in t)throw new cg(t.error,"failed to get version");return t.result}async getGenesisHash(){const t=om(await this.ue("getGenesisHash",[]),jg(ym()));if("error"in t)throw new cg(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){const{commitment:n,config:r}=Tg(e),i=this.Le([t],n,void 0,r),s=await this.ue("getBlock",i);try{switch(null==r?void 0:r.transactionDetails){case"accounts":{const t=om(s,Xw);if("error"in t)throw t.error;return t.result}case"none":{const t=om(s,Qw);if("error"in t)throw t.error;return t.result}default:{const t=om(s,Gw);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:n})=>({meta:e,transaction:{...t,message:_g(n,t.message)},version:n}))}:null}}}catch(o){throw new cg(o,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:r}=Tg(e),i=this.Le([t],n,"jsonParsed",r),s=await this.ue("getBlock",i);try{switch(null==r?void 0:r.transactionDetails){case"accounts":{const t=om(s,ty);if("error"in t)throw t.error;return t.result}case"none":{const t=om(s,ey);if("error"in t)throw t.error;return t.result}default:{const t=om(s,Jw);if("error"in t)throw t.error;return t.result}}}catch(o){throw new cg(o,"failed to get block")}}async getBlockProduction(t){let e,n;if("string"==typeof t)n=t;else if(t){const{commitment:r,...i}=t;n=r,e=i}const r=this.Te([],n,"base64",e),i=om(await this.ue("getBlockProduction",r),Qg);if("error"in i)throw new cg(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){const{commitment:n,config:r}=Tg(e),i=this.Le([t],n,void 0,r),s=om(await this.ue("getTransaction",i),iy);if("error"in s)throw new cg(s.error,"failed to get transaction");const o=s.result;return o?{...o,transaction:{...o.transaction,message:_g(o.version,o.transaction.message)}}:o}async getParsedTransaction(t,e){const{commitment:n,config:r}=Tg(e),i=this.Le([t],n,"jsonParsed",r),s=om(await this.ue("getTransaction",i),sy);if("error"in s)throw new cg(s.error,"failed to get transaction");return s.result}async getParsedTransactions(t,e){const{commitment:n,config:r}=Tg(e),i=t.map(t=>({methodName:"getTransaction",args:this.Le([t],n,"jsonParsed",r)}));return(await this.de(i)).map(t=>{const e=om(t,sy);if("error"in e)throw new cg(e.error,"failed to get transactions");return e.result})}async getTransactions(t,e){const{commitment:n,config:r}=Tg(e),i=t.map(t=>({methodName:"getTransaction",args:this.Le([t],n,void 0,r)}));return(await this.de(i)).map(t=>{const e=om(t,iy);if("error"in e)throw new cg(e.error,"failed to get transactions");const n=e.result;return n?{...n,transaction:{...n.transaction,message:_g(n.version,n.transaction.message)}}:n})}async getConfirmedBlock(t,e){const n=this.Le([t],e),r=om(await this.ue("getBlock",n),ny);if("error"in r)throw new cg(r.error,"failed to get confirmed block");const i=r.result;if(!i)throw new Error("Confirmed block "+t+" not found");const s={...i,transactions:i.transactions.map(({transaction:t,meta:e})=>{const n=new Jp(t.message);return{meta:e,transaction:{...t,message:n}}})};return{...s,transactions:s.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:sg.populate(t.message,t.signatures)}))}}async getBlocks(t,e,n){const r=this.Le(void 0!==e?[t,e]:[t],n),i=om(await this.ue("getBlocks",r),jg(um(pm())));if("error"in i)throw new cg(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){const n=this.Le([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=om(await this.ue("getBlock",n),ry);if("error"in r)throw new cg(r.error,"failed to get block");const i=r.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){const n=this.Le([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=om(await this.ue("getBlock",n),ry);if("error"in r)throw new cg(r.error,"failed to get confirmed block");const i=r.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const n=this.Le([t],e),r=om(await this.ue("getTransaction",n),iy);if("error"in r)throw new cg(r.error,"failed to get transaction");const i=r.result;if(!i)return i;const s=new Jp(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:sg.populate(s,o)}}async getParsedConfirmedTransaction(t,e){const n=this.Le([t],e,"jsonParsed"),r=om(await this.ue("getTransaction",n),sy);if("error"in r)throw new cg(r.error,"failed to get confirmed transaction");return r.result}async getParsedConfirmedTransactions(t,e){const n=t.map(t=>({methodName:"getTransaction",args:this.Le([t],e,"jsonParsed")}));return(await this.de(n)).map(t=>{const e=om(t,sy);if("error"in e)throw new cg(e.error,"failed to get confirmed transactions");return e.result})}async getConfirmedSignaturesForAddress(t,e,n){let r={},i=await this.getFirstAvailableBlock();for(;!("until"in r)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(r.until=t.signatures[t.signatures.length-1].toString())}catch(o){if(o instanceof Error&&o.message.includes("skipped"))continue;throw o}let s=await this.getSlot("finalized");for(;!("before"in r||++n>s);)try{const t=await this.getConfirmedBlockSignatures(n);t.signatures.length>0&&(r.before=t.signatures[t.signatures.length-1].toString())}catch(o){if(o instanceof Error&&o.message.includes("skipped"))continue;throw o}return(await this.getConfirmedSignaturesForAddress2(t,r)).map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const r=this.Le([t.toBase58()],n,void 0,e),i=om(await this.ue("getConfirmedSignaturesForAddress2",r),yw);if("error"in i)throw new cg(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,n){const r=this.Le([t.toBase58()],n,void 0,e),i=om(await this.ue("getSignaturesForAddress",r),vw);if("error"in i)throw new cg(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=new kg({key:t,state:kg.deserialize(r.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=hg.fromAccountData(r.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const n=om(await this.ue("requestAirdrop",[t.toBase58(),e]),uy);if("error"in n)throw new cg(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async We(t){if(!t){for(;this.be;)await lg(100);const t=Date.now()-this.xe.lastFetch>=3e4;if(null!==this.xe.latestBlockhash&&!t)return this.xe.latestBlockhash}return await this.Ve()}async Ve(){this.be=!0;try{const t=Date.now(),e=this.xe.latestBlockhash,n=e?e.blockhash:null;for(let r=0;r<50;r++){const t=await this.getLatestBlockhash("finalized");if(n!==t.blockhash)return this.xe={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await lg(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this.be=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Tg(t),r=this.Te([],e,"base64",n),i=om(await this.ue("getStakeMinimumDelegation",r),Dg(pm()));if("error"in i)throw new cg(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,n){if("message"in t){const r=t.serialize(),i=_l.Buffer.from(r).toString("base64");if(Array.isArray(e)||void 0!==n)throw new Error("Invalid arguments");const s=e||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment),e&&"object"==typeof e&&"innerInstructions"in e&&(s.innerInstructions=e.innerInstructions);const o=[i,s],a=om(await this.ue("simulateTransaction",o),Gg);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let r;if(t instanceof sg){let e=t;r=new sg,r.feePayer=e.feePayer,r.instructions=t.instructions,r.nonceInfo=e.nonceInfo,r.signatures=e.signatures}else r=sg.populate(t),r.Xt=r.Jt=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(r.nonceInfo&&i)r.sign(...i);else{let t=this.ve;for(;;){const e=await this.We(t);if(r.lastValidBlockHeight=e.lastValidBlockHeight,r.recentBlockhash=e.blockhash,!i)break;if(r.sign(...i),!r.signature)throw new Error("!signature");const n=r.signature.toString("base64");if(!this.xe.simulatedSignatures.includes(n)&&!this.xe.transactionSignatures.includes(n)){this.xe.simulatedSignatures.push(n);break}t=!0}}const s=r.te(),o=s.serialize(),a=r.ie(o).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(n){const t=(Array.isArray(n)?n:s.nonProgramIds()).map(t=>t.toBase58());c.accounts={encoding:"base64",addresses:t}}i&&(c.sigVerify=!0),e&&"object"==typeof e&&"innerInstructions"in e&&(c.innerInstructions=e.innerInstructions);const l=[a,c],u=om(await this.ue("simulateTransaction",l),Gg);if("error"in u){let t;if("data"in u.error&&(t=u.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new ag({action:"simulate",signature:"",transactionMessage:u.error.message,logs:t})}return u.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const n=t.serialize();return await this.sendRawTransaction(n,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const r=e;if(t.nonceInfo)t.sign(...r);else{let e=this.ve;for(;;){const n=await this.We(e);if(t.lastValidBlockHeight=n.lastValidBlockHeight,t.recentBlockhash=n.blockhash,t.sign(...r),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this.xe.transactionSignatures.includes(i)){this.xe.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=Op(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},r=e&&e.skipPreflight,i=!0===r?"processed":e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(n.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(n.minContextSlot=e.minContextSlot),r&&(n.skipPreflight=r),i&&(n.preflightCommitment=i);const s=[t,n],o=om(await this.ue("sendTransaction",s),dy);if("error"in o){let t;throw"data"in o.error&&(t=o.error.data.logs),new ag({action:r?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:t})}return o.result}Ie(){this.fe=!0,this.ge=setInterval(()=>{(async()=>{try{await this.he.notify("ping")}catch{}})()},5e3),this.qe()}Oe(t){this.fe=!1}Pe(t){this.fe=!1,this.ye=(this.ye+1)%Number.MAX_SAFE_INTEGER,this.we&&(clearTimeout(this.we),this.we=null),this.ge&&(clearInterval(this.ge),this.ge=null),1e3!==t?(this.Ee={},Object.entries(this.Se).forEach(([t,e])=>{this.Ke(t,{...e,state:"pending"})})):this.qe()}Ke(t,e){var n;const r=null==(n=this.Se[t])?void 0:n.state;if(this.Se[t]=e,r!==e.state){const n=this.Ae[t];n&&n.forEach(t=>{try{t(e.state)}catch{}})}}Fe(t,e){var n;const r=this.Me[t];if(null==r)return()=>{};const i=(n=this.Ae)[r]||(n[r]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this.Ae[r]}}async qe(){if(0===Object.keys(this.Se).length)return void(this.fe&&(this.fe=!1,this.we=setTimeout(()=>{this.we=null;try{this.he.close()}catch(t){Error}},500)));if(null!==this.we&&(clearTimeout(this.we),this.we=null,this.fe=!0),!this.fe)return void this.he.connect();const t=this.ye,e=()=>t===this.ye;await Promise.all(Object.keys(this.Se).map(async t=>{const n=this.Se[t];if(void 0!==n)switch(n.state){case"pending":case"unsubscribed":if(0===n.callbacks.size)return delete this.Se[t],"unsubscribed"===n.state&&delete this.Ee[n.serverSubscriptionId],void(await this.qe());await(async()=>{const{args:r,method:i}=n;try{this.Ke(t,{...n,state:"subscribing"});const e=await this.he.call(i,r);this.Ke(t,{...n,serverSubscriptionId:e,state:"subscribed"}),this.Ee[e]=n.callbacks,await this.qe()}catch(s){if(!e())return;this.Ke(t,{...n,state:"pending"}),await this.qe()}})();break;case"subscribed":0===n.callbacks.size&&await(async()=>{const{serverSubscriptionId:r,unsubscribeMethod:i}=n;if(this.Ce.has(r))this.Ce.delete(r);else{this.Ke(t,{...n,state:"unsubscribing"}),this.Ke(t,{...n,state:"unsubscribing"});try{await this.he.call(i,[r])}catch(s){if(Error,!e())return;return this.Ke(t,{...n,state:"subscribed"}),void(await this.qe())}}this.Ke(t,{...n,state:"unsubscribed"}),await this.qe()})()}}))}He(t,e){const n=this.Ee[t];void 0!==n&&n.forEach(t=>{try{t(...e)}catch(n){}})}je(t){const{result:e,subscription:n}=om(t,bw);this.He(n,[e.value,e.context])}Ye(t,e){const n=this.Ne++,r=yg([t.method,e]),i=this.Se[r];return void 0===i?this.Se[r]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this.Me[n]=r,this.ke[n]=async()=>{delete this.ke[n],delete this.Me[n];const e=this.Se[r];Yp(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),e.callbacks.delete(t.callback),await this.qe()},this.qe(),n}onAccountChange(t,e,n){const{commitment:r,config:i}=Tg(n),s=this.Te([t.toBase58()],r||this.se||"finalized","base64",i);return this.Ye({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(t){await this.Ze(t,"account change")}De(t){const{result:e,subscription:n}=om(t,Nw);this.He(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,r){const{commitment:i,config:s}=Tg(n),o=this.Te([t.toBase58()],i||this.se||"finalized","base64",s||(r?{filters:Ig(r)}:void 0));return this.Ye({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this.Ze(t,"program account change")}onLogs(t,e,n){const r=this.Te(["object"==typeof t?{mentions:[t.toString()]}:t],n||this.se||"finalized");return this.Ye({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(t){await this.Ze(t,"logs")}$e(t){const{result:e,subscription:n}=om(t,fy);this.He(n,[e.value,e.context])}ze(t){const{result:e,subscription:n}=om(t,Mw);this.He(n,[e])}onSlotChange(t){return this.Ye({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this.Ze(t,"slot change")}_e(t){const{result:e,subscription:n}=om(t,Ew);this.He(n,[e])}onSlotUpdate(t){return this.Ye({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this.Ze(t,"slot update")}async Ze(t,e){const n=this.ke[t];n&&await n()}Te(t,e,n,r){const i=e||this.se;if(i||n||r){let e={};n&&(e.encoding=n),i&&(e.commitment=i),r&&(e=Object.assign(e,r)),t.push(e)}return t}Le(t,e,n,r){const i=e||this.se;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this.se+"`, but method requires at least `confirmed`");return this.Te(t,e,n,r)}Re(t){const{result:e,subscription:n}=om(t,Sw);"receivedSignature"!==e.value&&this.Ce.add(n),this.He(n,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const r=this.Te([t],n||this.se||"finalized"),i=this.Ye({callback:(t,n)=>{if("status"===t.type){e(t.result,n);try{this.removeSignatureListener(i)}catch(r){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return i}onSignatureWithOptions(t,e,n){const{commitment:r,...i}={...n,commitment:n&&n.commitment||this.se||"finalized"},s=this.Te([t],r,void 0,i),o=this.Ye({callback:(t,n)=>{e(t,n);try{this.removeSignatureListener(o)}catch(r){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(t){await this.Ze(t,"signature result")}Be(t){const{result:e,subscription:n}=om(t,Cw);this.He(n,[e])}onRootChange(t){return this.Ye({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this.Ze(t,"root change")}}var gy;Object.freeze({CreateLookupTable:{index:0,layout:Vf([Ff("instruction"),fg("recentSlot"),$f("bumpSeed")])},FreezeLookupTable:{index:1,layout:Vf([Ff("instruction")])},ExtendLookupTable:{index:2,layout:Vf([Ff("instruction"),fg(),qf(Wp(),Bf(Ff(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Vf([Ff("instruction")])},CloseLookupTable:{index:4,layout:Vf([Ff("instruction")])}}),new Rp("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:Vf([$f("instruction"),Ff("units"),Ff("additionalFee")])},RequestHeapFrame:{index:1,layout:Vf([$f("instruction"),Ff("bytes")])},SetComputeUnitLimit:{index:2,layout:Vf([$f("instruction"),Ff("units")])},SetComputeUnitPrice:{index:3,layout:Vf([$f("instruction"),fg("microLamports")])}}),new Rp("ComputeBudget111111111111111111111111111111"),Vf([$f("numSignatures"),$f("padding"),Uf("signatureOffset"),Uf("signatureInstructionIndex"),Uf("publicKeyOffset"),Uf("publicKeyInstructionIndex"),Uf("messageDataOffset"),Uf("messageDataSize"),Uf("messageInstructionIndex")]),new Rp("Ed25519SigVerify111111111111111111111111111"),Sp.utils.isValidPrivateKey,Vf([$f("numSignatures"),Uf("signatureOffset"),$f("signatureInstructionIndex"),Uf("ethAddressOffset"),$f("ethAddressInstructionIndex"),Uf("messageDataOffset"),Uf("messageDataSize"),$f("messageInstructionIndex"),Kf(20,"ethAddress"),Kf(64,"signature"),$f("recoveryId")]),new Rp("KeccakSecp256k11111111111111111111111111111"),new Rp("StakeConfig11111111111111111111111111111111");class wy{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}gy=wy,wy.default=new gy(0,0,Rp.default),Object.freeze({Initialize:{index:0,layout:Vf([Ff("instruction"),((t="authorized")=>Vf([Wp("staker"),Wp("withdrawer")],t))(),((t="lockup")=>Vf([Wf("unixTimestamp"),Wf("epoch"),Wp("custodian")],t))()])},Authorize:{index:1,layout:Vf([Ff("instruction"),Wp("newAuthorized"),Ff("stakeAuthorizationType")])},Delegate:{index:2,layout:Vf([Ff("instruction")])},Split:{index:3,layout:Vf([Ff("instruction"),Wf("lamports")])},Withdraw:{index:4,layout:Vf([Ff("instruction"),Wf("lamports")])},Deactivate:{index:5,layout:Vf([Ff("instruction")])},Merge:{index:7,layout:Vf([Ff("instruction")])},AuthorizeWithSeed:{index:8,layout:Vf([Ff("instruction"),Wp("newAuthorized"),Ff("stakeAuthorizationType"),qp("authoritySeed"),Wp("authorityOwner")])}}),new Rp("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:Vf([Ff("instruction"),((t="voteInit")=>Vf([Wp("nodePubkey"),Wp("authorizedVoter"),Wp("authorizedWithdrawer"),$f("commission")],t))()])},Authorize:{index:1,layout:Vf([Ff("instruction"),Wp("newAuthorized"),Ff("voteAuthorizationType")])},Withdraw:{index:3,layout:Vf([Ff("instruction"),Wf("lamports")])},UpdateValidatorIdentity:{index:4,layout:Vf([Ff("instruction")])},AuthorizeWithSeed:{index:10,layout:Vf([Ff("instruction"),((t="voteAuthorizeWithSeedArgs")=>Vf([Ff("voteAuthorizationType"),Wp("currentAuthorityDerivedKeyOwnerPubkey"),qp("currentAuthorityDerivedKeySeed"),Wp("newAuthorized")],t))()])}}),new Rp("Vote111111111111111111111111111111111111111"),new Rp("Va1idator1nfo111111111111111111111111111111"),bm({name:ym(),website:gm(ym()),details:gm(ym()),iconUrl:gm(ym()),keybaseUsername:gm(ym())}),new Rp("Vote111111111111111111111111111111111111111"),Vf([Wp("nodePubkey"),Wp("authorizedWithdrawer"),$f("commission"),Lf(),qf(Vf([Lf("slot"),Ff("confirmationCount")]),Bf(Ff(),-8),"votes"),$f("rootSlotValid"),Lf("rootSlot"),Lf(),qf(Vf([Lf("epoch"),Wp("authorizedVoter")]),Bf(Ff(),-8),"authorizedVoters"),Vf([qf(Vf([Wp("authorizedPubkey"),Lf("epochOfLastAuthorizedSwitch"),Lf("targetEpoch")]),32,"buf"),Lf("idx"),$f("isEmpty")],"priorVoters"),Lf(),qf(Vf([Lf("epoch"),Lf("credits"),Lf("prevCredits")]),Bf(Ff(),-8),"epochCredits"),Vf([Lf("slot"),Lf("timestamp")],"lastTimestamp")]);const yy={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}},vy=Ct.createContext({});function by(){return Ct.useContext(vy)}const xy=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const r=Ct.useMemo(()=>new py(e,n),[e,n]);return Ot.createElement(vy.Provider,{value:{connection:r}},t)};!function(){var t=Object.prototype.hasOwnProperty,e="~";function n(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,n,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),c=e?e+n:n;return t.Kt[c]?t.Kt[c].fn?t.Kt[c]=[t.Kt[c],a]:t.Kt[c].push(a):(t.Kt[c]=a,t.Ht++),t}function s(t,e){0===--t.Ht?t.Kt=new n:delete t.Kt[e]}function o(){this.Kt=new n,this.Ht=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(e=!1)),o.prototype.eventNames=function(){var n,r,i=[];if(0===this.Ht)return i;for(r in n=this.Kt)t.call(n,r)&&i.push(e?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i},o.prototype.listeners=function(t){var n=e?e+t:t,r=this.Kt[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},o.prototype.listenerCount=function(t){var n=e?e+t:t,r=this.Kt[n];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,n,r,i,s,o){var a=e?e+t:t;if(!this.Kt[a])return!1;var c,l,u=this.Kt[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,n),!0;case 3:return u.fn.call(u.context,n,r),!0;case 4:return u.fn.call(u.context,n,r,i),!0;case 5:return u.fn.call(u.context,n,r,i,s),!0;case 6:return u.fn.call(u.context,n,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,n);break;case 3:u[l].fn.call(u[l].context,n,r);break;case 4:u[l].fn.call(u[l].context,n,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},o.prototype.removeListener=function(t,n,r,i){var o=e?e+t:t;if(!this.Kt[o])return this;if(!n)return s(this,o),this;var a=this.Kt[o];if(a.fn)a.fn!==n||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==n||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this.Kt[o]=1===l.length?l[0]:l:s(this,o)}return this},o.prototype.removeAllListeners=function(t){var r;return t?(r=e?e+t:t,this.Kt[r]&&s(this,r)):(this.Kt=new n,this.Ht=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o}();let Ny=class extends Error{constructor(t,e){super(t),this.error=e}},ky=class extends Ny{constructor(){super(...arguments),this.name="WalletNotReadyError"}},My=class extends Ny{constructor(){super(...arguments),this.name="WalletNotConnectedError"}};var Ay,Ey;(Ey=Ay||(Ay={})).Installed="Installed",Ey.NotDetected="NotDetected",Ey.Loadable="Loadable",Ey.Unsupported="Unsupported";const Sy="solana:signAndSendTransaction",Cy="solana:signIn",Ty="solana:signMessage",Iy="solana:signTransaction",Oy="standard:connect",Py="standard:disconnect",jy="standard:events";class Dy extends Ny{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const zy=[],_y={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Ry("call","select")},connect:()=>Promise.reject(Ry("call","connect")),disconnect:()=>Promise.reject(Ry("call","disconnect")),sendTransaction:()=>Promise.reject(Ry("call","sendTransaction")),signTransaction:()=>Promise.reject(Ry("call","signTransaction")),signAllTransactions:()=>Promise.reject(Ry("call","signAllTransactions")),signMessage:()=>Promise.reject(Ry("call","signMessage")),signIn:()=>Promise.reject(Ry("call","signIn"))};function Ry(t,e){return new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`)}Object.defineProperty(_y,"wallets",{get:()=>(Ry("read","wallets"),zy)}),Object.defineProperty(_y,"wallet",{get:()=>(Ry("read","wallet"),null)}),Object.defineProperty(_y,"publicKey",{get:()=>(Ry("read","publicKey"),null)});const By=Ct.createContext(_y);function $y(){return Ct.useContext(By)}var Uy={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||t,o),c=n?n+e:e;return t.Kt[c]?t.Kt[c].fn?t.Kt[c]=[t.Kt[c],a]:t.Kt[c].push(a):(t.Kt[c]=a,t.Ht++),t}function o(t,e){0===--t.Ht?t.Kt=new r:delete t.Kt[e]}function a(){this.Kt=new r,this.Ht=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this.Ht)return i;for(r in t=this.Kt)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this.Kt[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this.Kt[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,s,o){var a=n?n+t:t;if(!this.Kt[a])return!1;var c,l,u=this.Kt[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,s),!0;case 6:return u.fn.call(u.context,e,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var s=n?n+t:t;if(!this.Kt[s])return this;if(!e)return o(this,s),this;var a=this.Kt[s];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this.Kt[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this.Kt[e]&&o(this,e)):(this.Kt=new r,this.Ht=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Uy);const Fy=Dt(Uy.exports);let Ly=class extends Error{constructor(t,e){super(t),this.error=e}},Wy=class extends Ly{constructor(){super(...arguments),this.name="WalletNotReadyError"}};class Vy extends Ly{constructor(){super(...arguments),this.name="WalletConfigError"}}let qy=class extends Ly{constructor(){super(...arguments),this.name="WalletConnectionError"}},Ky=class extends Ly{constructor(){super(...arguments),this.name="WalletDisconnectedError"}},Hy=class extends Ly{constructor(){super(...arguments),this.name="WalletDisconnectionError"}},Yy=class extends Ly{constructor(){super(...arguments),this.name="WalletAccountError"}},Zy=class extends Ly{constructor(){super(...arguments),this.name="WalletPublicKeyError"}},Gy=class extends Ly{constructor(){super(...arguments),this.name="WalletNotConnectedError"}},Qy=class extends Ly{constructor(){super(...arguments),this.name="WalletSendTransactionError"}},Xy=class extends Ly{constructor(){super(...arguments),this.name="WalletSignTransactionError"}},Jy=class extends Ly{constructor(){super(...arguments),this.name="WalletSignMessageError"}};class tv extends Ly{constructor(){super(...arguments),this.name="WalletSignInError"}}var ev;!function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"}(ev||(ev={}));let nv=class extends Fy{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const r=this.publicKey;if(!r)throw new Gy;return t.feePayer=t.feePayer||r,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}};function rv(t){return"version"in t}let iv=class extends nv{async sendTransaction(t,e,n={}){let r=!0;try{if(rv(t)){if(!this.supportedTransactionVersions)throw new Qy("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new Qy(`Sending transaction version ${t.version} isn't supported by this wallet`);try{const r=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(r,n)}catch(i){if(i instanceof Xy)throw r=!1,i;throw new Qy(null==i?void 0:i.message,i)}}else try{const{signers:r,...i}=n;t=await this.prepareTransaction(t,e,i),(null==r?void 0:r.length)&&t.partialSign(...r);const s=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(s,i)}catch(i){if(i instanceof Xy)throw r=!1,i;throw new Qy(null==i?void 0:i.message,i)}}catch(i){throw r&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(rv(n)){if(!this.supportedTransactionVersions)throw new Xy("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new Xy(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}},sv=class extends iv{};class ov extends sv{}var av={},cv={};let lv;const uv=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];cv.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},cv.getSymbolTotalCodewords=function(t){return uv[t]},cv.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},cv.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');lv=t},cv.isKanjiModeEnabled=function(){return void 0!==lv},cv.toSJIS=function(t){return lv(t)};var dv,hv={};function fv(){this.buffer=[],this.length=0}(dv=hv).L={bit:1},dv.M={bit:0},dv.Q={bit:3},dv.H={bit:2},dv.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},dv.from=function(t,e){if(dv.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return dv.L;case"m":case"medium":return dv.M;case"q":case"quartile":return dv.Q;case"h":case"high":return dv.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(n){return e}},fv.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var mv=fv;function pv(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}pv.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},pv.prototype.get=function(t,e){return this.data[t*this.size+e]},pv.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},pv.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var gv=pv,wv={};!function(t){const e=cv.getSymbolSize;t.getRowColCoords=function(t){if(1===t)return[];const n=Math.floor(t/7)+2,r=e(t),i=145===r?26:2*Math.ceil((r-13)/(2*n-2)),s=[r-7];for(let e=1;e<n-1;e++)s[e]=s[e-1]-i;return s.push(6),s.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),i=r.length;for(let t=0;t<i;t++)for(let e=0;e<i;e++)0===t&&0===e||0===t&&e===i-1||t===i-1&&0===e||n.push([r[t],r[e]]);return n}}(wv);var yv={};const vv=cv.getSymbolSize;yv.getPositions=function(t){const e=vv(t);return[[0,0],[e-7,0],[0,e-7]]};var bv={};!function(t){function e(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},t.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(t){const e=t.size;let n=0,r=0,i=0,s=null,o=null;for(let a=0;a<e;a++){r=i=0,s=o=null;for(let c=0;c<e;c++){let e=t.get(a,c);e===s?r++:(r>=5&&(n+=r-5+3),s=e,r=1),e=t.get(c,a),e===o?i++:(i>=5&&(n+=i-5+3),o=e,i=1)}r>=5&&(n+=r-5+3),i>=5&&(n+=i-5+3)}return n},t.getPenaltyN2=function(t){const e=t.size;let n=0;for(let r=0;r<e-1;r++)for(let i=0;i<e-1;i++){const e=t.get(r,i)+t.get(r,i+1)+t.get(r+1,i)+t.get(r+1,i+1);4!==e&&0!==e||n++}return 3*n},t.getPenaltyN3=function(t){const e=t.size;let n=0,r=0,i=0;for(let s=0;s<e;s++){r=i=0;for(let o=0;o<e;o++)r=r<<1&2047|t.get(s,o),o>=10&&(1488===r||93===r)&&n++,i=i<<1&2047|t.get(o,s),o>=10&&(1488===i||93===i)&&n++}return 40*n},t.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let r=0;r<n;r++)e+=t.data[r];return 10*Math.abs(Math.ceil(100*e/n/5)-10)},t.applyMask=function(t,n){const r=n.size;for(let i=0;i<r;i++)for(let s=0;s<r;s++)n.isReserved(s,i)||n.xor(s,i,e(t,s,i))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let i=0,s=1/0;for(let o=0;o<r;o++){n(o),t.applyMask(o,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),r<s&&(s=r,i=o)}return i}}(bv);var xv={};const Nv=hv,kv=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Mv=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];xv.getBlocksCount=function(t,e){switch(e){case Nv.L:return kv[4*(t-1)+0];case Nv.M:return kv[4*(t-1)+1];case Nv.Q:return kv[4*(t-1)+2];case Nv.H:return kv[4*(t-1)+3];default:return}},xv.getTotalCodewordsCount=function(t,e){switch(e){case Nv.L:return Mv[4*(t-1)+0];case Nv.M:return Mv[4*(t-1)+1];case Nv.Q:return Mv[4*(t-1)+2];case Nv.H:return Mv[4*(t-1)+3];default:return}};var Av={},Ev={};const Sv=new Uint8Array(512),Cv=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)Sv[e]=t,Cv[t]=e,t<<=1,256&t&&(t^=285);for(let e=255;e<512;e++)Sv[e]=Sv[e-255]}(),Ev.log=function(t){if(t<1)throw new Error("log("+t+")");return Cv[t]},Ev.exp=function(t){return Sv[t]},Ev.mul=function(t,e){return 0===t||0===e?0:Sv[Cv[t]+Cv[e]]},function(t){const e=Ev;t.mul=function(t,n){const r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let s=0;s<n.length;s++)r[i+s]^=e.mul(t[i],n[s]);return r},t.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){const t=r[0];for(let s=0;s<n.length;s++)r[s]^=e.mul(n[s],t);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i)}return r},t.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=t.mul(r,new Uint8Array([1,e.exp(i)]));return r}}(Av);const Tv=Av;function Iv(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Iv.prototype.initialize=function(t){this.degree=t,this.genPoly=Tv.generateECPolynomial(this.degree)},Iv.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=Tv.mod(e,this.genPoly),r=this.degree-n.length;if(r>0){const t=new Uint8Array(this.degree);return t.set(n,r),t}return n};var Ov=Iv,Pv={},jv={},Dv={isValid:function(t){return!isNaN(t)&&t>=1&&t<=40}},zv={};const _v="[0-9]+";let Rv="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Rv=Rv.replace(/u/g,"\\u");const Bv="(?:(?![A-Z0-9 $%*+\\-./:]|"+Rv+")(?:.|[\r\n]))+";zv.KANJI=new RegExp(Rv,"g"),zv.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),zv.BYTE=new RegExp(Bv,"g"),zv.NUMERIC=new RegExp(_v,"g"),zv.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const $v=new RegExp("^"+Rv+"$"),Uv=new RegExp("^"+_v+"$"),Fv=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");zv.testKanji=function(t){return $v.test(t)},zv.testNumeric=function(t){return Uv.test(t)},zv.testAlphanumeric=function(t){return Fv.test(t)},function(t){const e=Dv,n=zv;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!e.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},t.isValid=function(t){return t&&t.bit&&t.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}}(jv),function(t){const e=cv,n=xv,r=hv,i=jv,s=Dv,o=e.getBCHDigit(7973);function a(t,e){return i.getCharCountIndicator(t,e)+4}function c(t,e){let n=0;return t.forEach(function(t){const r=a(t.mode,e);n+=r+t.getBitsLength()}),n}t.from=function(t,e){return s.isValid(t)?parseInt(t,10):e},t.getCapacity=function(t,r,o){if(!s.isValid(t))throw new Error("Invalid QR Code version");void 0===o&&(o=i.BYTE);const c=8*(e.getSymbolTotalCodewords(t)-n.getTotalCodewordsCount(t,r));if(o===i.MIXED)return c;const l=c-a(o,t);switch(o){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,n){let s;const o=r.from(n,r.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(c(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,o);if(0===e.length)return 1;s=e[0]}else s=e;return function(e,n,r){for(let i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(s.mode,s.getLength(),o)},t.getEncodedBits=function(t){if(!s.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;e.getBCHDigit(n)-o>=0;)n^=7973<<e.getBCHDigit(n)-o;return t<<12|n}}(Pv);var Lv={};const Wv=cv,Vv=Wv.getBCHDigit(1335);Lv.getEncodedBits=function(t,e){const n=t.bit<<3|e;let r=n<<10;for(;Wv.getBCHDigit(r)-Vv>=0;)r^=1335<<Wv.getBCHDigit(r)-Vv;return 21522^(n<<10|r)};var qv={};const Kv=jv;function Hv(t){this.mode=Kv.NUMERIC,this.data=t.toString()}Hv.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},Hv.prototype.getLength=function(){return this.data.length},Hv.prototype.getBitsLength=function(){return Hv.getBitsLength(this.data.length)},Hv.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*i+1))};var Yv=Hv;const Zv=jv,Gv=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Qv(t){this.mode=Zv.ALPHANUMERIC,this.data=t}Qv.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},Qv.prototype.getLength=function(){return this.data.length},Qv.prototype.getBitsLength=function(){return Qv.getBitsLength(this.data.length)},Qv.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*Gv.indexOf(this.data[e]);n+=Gv.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(Gv.indexOf(this.data[e]),6)};var Xv=Qv;const Jv=jv;function tb(t){this.mode=Jv.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}tb.getBitsLength=function(t){return 8*t},tb.prototype.getLength=function(){return this.data.length},tb.prototype.getBitsLength=function(){return tb.getBitsLength(this.data.length)},tb.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var eb=tb;const nb=jv,rb=cv;function ib(t){this.mode=nb.KANJI,this.data=t}ib.getBitsLength=function(t){return 13*t},ib.prototype.getLength=function(){return this.data.length},ib.prototype.getBitsLength=function(){return ib.getBitsLength(this.data.length)},ib.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=rb.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}};var sb,ob=ib,ab={exports:{}}.exports=sb={single_source_shortest_paths:function(t,e,n){var r={},i={};i[e]=0;var s,o,a,c,l,u,d,h=sb.PriorityQueue.make();for(h.push(e,0);!h.empty();)for(a in o=(s=h.pop()).value,c=s.cost,l=t[o]||{})l.hasOwnProperty(a)&&(u=c+l[a],d=i[a],(void 0===i[a]||d>u)&&(i[a]=u,h.push(a,u),r[a]=o));if(void 0!==n&&void 0===i[n]){var f=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(f)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=sb.single_source_shortest_paths(t,e,n);return sb.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var e,n=sb.PriorityQueue,r={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};!function(t){const e=jv,n=Yv,r=Xv,i=eb,s=ob,o=zv,a=cv,c=ab;function l(t){return unescape(encodeURIComponent(t)).length}function u(t,e,n){const r=[];let i;for(;null!==(i=t.exec(n));)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function d(t){const n=u(o.NUMERIC,e.NUMERIC,t),r=u(o.ALPHANUMERIC,e.ALPHANUMERIC,t);let i,s;return a.isKanjiModeEnabled()?(i=u(o.BYTE,e.BYTE,t),s=u(o.KANJI,e.KANJI,t)):(i=u(o.BYTE_KANJI,e.BYTE,t),s=[]),n.concat(r,i,s).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function h(t,o){switch(o){case e.NUMERIC:return n.getBitsLength(t);case e.ALPHANUMERIC:return r.getBitsLength(t);case e.KANJI:return s.getBitsLength(t);case e.BYTE:return i.getBitsLength(t)}}function f(t,o){let c;const l=e.getBestModeForData(t);if(c=e.from(o,l),c!==e.BYTE&&c.bit<l.bit)throw new Error('"'+t+'" cannot be encoded with mode '+e.toString(c)+".\n Suggested mode is: "+e.toString(l));switch(c!==e.KANJI||a.isKanjiModeEnabled()||(c=e.BYTE),c){case e.NUMERIC:return new n(t);case e.ALPHANUMERIC:return new r(t);case e.KANJI:return new s(t);case e.BYTE:return new i(t)}}t.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(f(e,null)):e.data&&t.push(f(e.data,e.mode)),t},[])},t.fromString=function(n,r){const i=function(t,n){const r={},i={start:{}};let s=["start"];for(let o=0;o<t.length;o++){const a=t[o],c=[];for(let t=0;t<a.length;t++){const l=a[t],u=""+o+t;c.push(u),r[u]={node:l,lastCount:0},i[u]={};for(let t=0;t<s.length;t++){const o=s[t];r[o]&&r[o].node.mode===l.mode?(i[o][u]=h(r[o].lastCount+l.length,l.mode)-h(r[o].lastCount,l.mode),r[o].lastCount+=l.length):(r[o]&&(r[o].lastCount=l.length),i[o][u]=h(l.length,l.mode)+4+e.getCharCountIndicator(l.mode,n))}}s=c}for(let e=0;e<s.length;e++)i[s[e]].end=0;return{map:i,table:r}}(function(t){const n=[];for(let r=0;r<t.length;r++){const i=t[r];switch(i.mode){case e.NUMERIC:n.push([i,{data:i.data,mode:e.ALPHANUMERIC,length:i.length},{data:i.data,mode:e.BYTE,length:i.length}]);break;case e.ALPHANUMERIC:n.push([i,{data:i.data,mode:e.BYTE,length:i.length}]);break;case e.KANJI:n.push([i,{data:i.data,mode:e.BYTE,length:l(i.data)}]);break;case e.BYTE:n.push([{data:i.data,mode:e.BYTE,length:l(i.data)}])}}return n}(d(n,a.isKanjiModeEnabled())),r),s=c.find_path(i.map,"start","end"),o=[];for(let t=1;t<s.length-1;t++)o.push(i.table[s[t]].node);return t.fromArray(o.reduce(function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[]))},t.rawSplit=function(e){return t.fromArray(d(e,a.isKanjiModeEnabled()))}}(qv);const cb=cv,lb=hv,ub=mv,db=gv,hb=wv,fb=yv,mb=bv,pb=xv,gb=Ov,wb=Pv,yb=Lv,vb=jv,bb=qv;function xb(t,e,n){const r=t.size,i=yb.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=1==(i>>s&1),s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(r-15+s,8,o,!0),s<8?t.set(8,r-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(r-8,8,1,!0)}av.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,r,i=lb.M;return void 0!==e&&(i=lb.from(e.errorCorrectionLevel,lb.M),n=wb.from(e.version),r=mb.from(e.maskPattern),e.toSJISFunc&&cb.setToSJISFunction(e.toSJISFunc)),function(t,e,n,r){let i;if(Array.isArray(t))i=bb.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=bb.rawSplit(t);r=wb.getBestVersionForData(e,n)}i=bb.fromString(t,r||40)}}const s=wb.getBestVersionForData(i,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<s)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else e=s;const o=function(t,e,n){const r=new ub;n.forEach(function(e){r.put(e.mode.bit,4),r.put(e.getLength(),vb.getCharCountIndicator(e.mode,t)),e.write(r)});const i=8*(cb.getSymbolTotalCodewords(t)-pb.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(i-r.getLengthInBits())/8;for(let o=0;o<s;o++)r.put(o%2?17:236,8);return function(t,e,n){const r=cb.getSymbolTotalCodewords(e),i=r-pb.getTotalCodewordsCount(e,n),s=pb.getBlocksCount(e,n),o=s-r%s,a=Math.floor(r/s),c=Math.floor(i/s),l=c+1,u=a-c,d=new gb(u);let h=0;const f=new Array(s),m=new Array(s);let p=0;const g=new Uint8Array(t.buffer);for(let x=0;x<s;x++){const t=x<o?c:l;f[x]=g.slice(h,h+t),m[x]=d.encode(f[x]),h+=t,p=Math.max(p,t)}const w=new Uint8Array(r);let y,v,b=0;for(y=0;y<p;y++)for(v=0;v<s;v++)y<f[v].length&&(w[b++]=f[v][y]);for(y=0;y<u;y++)for(v=0;v<s;v++)w[b++]=m[v][y];return w}(r,t,e)}(e,n,i),a=cb.getSymbolSize(e),c=new db(a);return function(t,e){const n=t.size,r=fb.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],s=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let i=-1;i<=7;i++)s+i<=-1||n<=s+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?t.set(e+r,s+i,!0,!0):t.set(e+r,s+i,!1,!0))}}(c,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(c),function(t,e){const n=hb.getPositions(e);for(let r=0;r<n.length;r++){const e=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?t.set(e+n,i+r,!0,!0):t.set(e+n,i+r,!1,!0)}}(c,e),xb(c,n,0),e>=7&&function(t,e){const n=t.size,r=wb.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+n-8-3,o=1==(r>>a&1),t.set(i,s,o,!0),t.set(s,i,o,!0)}(c,e),function(t,e){const n=t.size;let r=-1,i=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let r=!1;o<e.length&&(r=1==(e[o]>>>s&1)),t.set(i,a-n,r),s--,-1===s&&(o++,s=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(c,o),isNaN(r)&&(r=mb.getBestMask(c,xb.bind(null,c,n))),mb.applyMask(r,c),xb(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}(t,n,i,r)};var Nb={},kb={};!function(t){function e(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(t){t||(t={}),t.color||(t.color={});const n=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:e(t.color.dark||"#000000ff"),light:e(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},t.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const i=n.modules.size,s=n.modules.data,o=t.getScale(i,r),a=Math.floor((i+2*r.margin)*o),c=r.margin*o,l=[r.color.light,r.color.dark];for(let t=0;t<a;t++)for(let n=0;n<a;n++){let u=4*(t*a+n),d=r.color.light;t>=c&&n>=c&&t<a-c&&n<a-c&&(d=l[s[Math.floor((t-c)/o)*i+Math.floor((n-c)/o)]?1:0]),e[u++]=d.r,e[u++]=d.g,e[u++]=d.b,e[u]=d.a}}}(kb),function(t){const e=kb;t.render=function(t,n,r){let i=r,s=n;void 0!==i||n&&n.getContext||(i=n,n=void 0),n||(s=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),i=e.getOptions(i);const o=e.getImageWidth(t.modules.size,i),a=s.getContext("2d"),c=a.createImageData(o,o);return e.qrToImageData(c.data,t,i),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,s,o),a.putImageData(c,0,0),s},t.renderToDataURL=function(e,n,r){let i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const s=t.render(e,n,i),o=i.type||"image/png",a=i.rendererOpts||{};return s.toDataURL(o,a.quality)}}(Nb);var Mb={};const Ab=kb;function Eb(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Sb(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}Mb.render=function(t,e,n){const r=Ab.getOptions(e),i=t.modules.size,s=t.modules.data,o=i+2*r.margin,a=r.color.light.a?"<path "+Eb(r.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",c="<path "+Eb(r.color.dark,"stroke")+' d="'+function(t,e,n){let r="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),l=Math.floor(a/e);c||s||(s=!0),t[a]?(o++,a>0&&c>0&&t[a-1]||(r+=s?Sb("M",c+n,.5+l+n):Sb("m",i,0),i=0,s=!1),c+1<e&&t[a+1]||(r+=Sb("h",o),o=0)):i++}return r}(s,i,r.margin)+'"/>',l='viewBox="0 0 '+o+" "+o+'"',u='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+l+' shape-rendering="crispEdges">'+a+c+"</svg>\n";return"function"==typeof n&&n(null,u),u};const Cb=av,Tb=Nb,Ib=Mb;function Ob(t,e,n,r,i){const s=[].slice.call(arguments,1),o=s.length,a="function"==typeof s[o-1];if(!(a||"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then))throw new Error("Callback required as last argument");if(!a){if(o<1)throw new Error("Too few arguments provided");return 1===o?(n=e,e=r=void 0):2!==o||e.getContext||(r=n,n=e,e=void 0),new Promise(function(i,s){try{const s=Cb.create(n,r);i(t(s,e,r))}catch(o){s(o)}})}if(o<2)throw new Error("Too few arguments provided");2===o?(i=n,n=e,e=r=void 0):3===o&&(e.getContext&&void 0===i?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0));try{const s=Cb.create(n,r);i(null,t(s,e,r))}catch(c){i(c)}}function Pb(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}Cb.create,Ob.bind(null,Tb.render),Ob.bind(null,Tb.renderToDataURL),Ob.bind(null,function(t,e,n){return Ib.render(t,n)});const jb="solana:mainnet",Db="ERROR_FORBIDDEN_WALLET_BASE_URL";class zb extends Error{constructor(...t){const[e,n,r]=t;super(n),this.code=e,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class _b extends Error{constructor(...t){const[e,n,r,i]=t;super(r),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function Rb(t,e,n,r){return new(n||(n=Promise))(function(e,i){function s(t){try{a(r.next(t))}catch(e){i(e)}}function o(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(s,o)}a((r=r.apply(t,[])).next())})}function Bb(t,e){return window.btoa(String.fromCharCode.call(null,...t))}function $b(t){return new Uint8Array(window.atob(t).split("").map(t=>t.charCodeAt(0)))}function Ub(t,e){return Rb(this,0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i})}const Fb="solana:cloneAuthorization";function Lb(t,e){return Rb(this,0,void 0,function*(){const n=t.slice(0,4),r=t.slice(4,16),i=t.slice(16),s=yield crypto.subtle.decrypt(Wb(n,r),e,i);return(void 0===Vb&&(Vb=new TextDecoder("utf-8")),Vb).decode(s)})}function Wb(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let Vb;function qb(){return Rb(this,0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Kb(t){if(t<49152||t>65535)throw new zb("ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function Hb(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}let Yb=null;const Zb={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4};function Gb(t){return new DataView(t).getUint32(0,!1)}function Qb(t,e){return Rb(this,0,void 0,function*(){!function(){if("undefined"==typeof window||!0!==window.isSecureContext)throw new zb("ERROR_SECURE_CONTEXT_REQUIRED","The mobile wallet adapter protocol must be used in a secure context (`https`).")}();const n=yield function(){return Rb(this,0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),r=`ws://localhost:${yield function(t,e){return Rb(this,0,void 0,function*(){const n=Kb(49152+Math.floor(16384*Math.random())),r=yield function(t,e,n,r=["v1"]){return Rb(this,0,void 0,function*(){const i=Kb(e),s=function(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}(yield crypto.subtle.exportKey("raw",t)),o=function(t,e){let n=null;if(e){try{n=new URL(e)}catch(i){}if("https:"!==(null==n?void 0:n.protocol))throw new zb(Db,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL("solana-wallet:/"));const r=t.startsWith("/")?t:[...Hb(n.pathname),...Hb(t)].join("/");return new URL(r,n)}("v1/associate/local",n);return o.searchParams.set("association",s.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."}[t]))),o.searchParams.set("port",`${i}`),r.forEach(t=>{o.searchParams.set("v",t)}),o})}(t,n,e);return yield function(t){return Rb(this,0,void 0,function*(){if("https:"===t.protocol)window.location.assign(t);else try{switch(-1!==navigator.userAgent.indexOf("Firefox/")?0:1){case 0:e=t,null==Yb&&(Yb=document.createElement("iframe"),Yb.style.display="none",document.body.appendChild(Yb)),Yb.contentWindow.location.href=e.toString();break;case 1:{const e=new Promise((t,e)=>{function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),t()}window.addEventListener("blur",r);const i=setTimeout(()=>{n(),e()},3e3)});window.location.assign(t),yield e;break}}}catch(n){throw new zb("ERROR_WALLET_NOT_FOUND","Found no installed wallet that supports the mobile wallet protocol.")}var e})}(r),n})}(n.publicKey,null==e?void 0:e.baseUri)}/solana-wallet`;let i;const s=(()=>{const t=[...Zb.retryDelayScheduleMs];return()=>t.length>1?t.shift():t[0]})();let o=1,a=0,c={Ue:"disconnected"};return new Promise((e,l)=>{let u;const d={},h=()=>Rb(this,0,void 0,function*(){if("connecting"!==c.Ue)return;u.removeEventListener("open",h);const{associationKeypair:t}=c,e=yield qb();u.send(yield Ub(e.publicKey,t.privateKey)),c={Ue:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:e.privateKey}}),f=t=>{t.wasClean?c={Ue:"disconnected"}:l(new zb("ERROR_SESSION_CLOSED",`The wallet session dropped unexpectedly (${t.code}: ${t.reason}).`,{closeEvent:t})),g()},m=t=>Rb(this,0,void 0,function*(){g(),Date.now()-i>=Zb.timeoutMs?l(new zb("ERROR_SESSION_TIMEOUT",`Failed to connect to the wallet websocket at ${r}.`)):(yield new Promise(t=>{const e=s();w=window.setTimeout(t,e)}),y())}),p=r=>Rb(this,0,void 0,function*(){const i=yield r.data.arrayBuffer();switch(c.Ue){case"connecting":if(0!==i.byteLength)throw new Error("Encountered unexpected message while connecting");const r=yield qb();u.send(yield Ub(r.publicKey,n.privateKey)),c={Ue:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:r.privateKey};break;case"connected":try{const t=Gb(i.slice(0,4));if(t!==a+1)throw new Error("Encrypted message has invalid sequence number");a=t;const e=yield function(t,e){return Rb(this,0,void 0,function*(){const n=yield Lb(t,e),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new _b(r.id,r.error.code,r.error.message);return r})}(i,c.sharedSecret),n=d[e.id];delete d[e.id],n.resolve(e.result)}catch(f){if(!(f instanceof _b))throw f;{const t=d[f.jsonRpcMessageId];delete d[f.jsonRpcMessageId],t.reject(f)}}break;case"hello_req_sent":{if(0===i.byteLength){const t=yield qb();u.send(yield Ub(t.publicKey,n.privateKey)),c={Ue:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:t.privateKey};break}const r=yield function(t,e,n){return Rb(this,0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},n,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(i,c.associationPublicKey,c.ecdhPrivateKey),m=i.slice(65),p=0!==m.byteLength?yield(()=>Rb(this,0,void 0,function*(){const t=Gb(m.slice(0,4));if(t!==a+1)throw new Error("Encrypted message has invalid sequence number");return a=t,function(t,e){return Rb(this,0,void 0,function*(){const n=yield Lb(t,e),r=JSON.parse(n);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new zb("ERROR_INVALID_PROTOCOL_VERSION",`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}(m,r)}))():{protocol_version:"legacy"};c={Ue:"connected",sharedSecret:r,sessionProperties:p};const w=(s=p.protocol_version,h=(t,e)=>Rb(this,0,void 0,function*(){const n=o++;return u.send(yield function(t,e){return Rb(this,0,void 0,function*(){return function(t,e,n){return Rb(this,0,void 0,function*(){const r=function(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}(e),i=new Uint8Array(12);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(Wb(r,i),n,(new TextEncoder).encode(t)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}(JSON.stringify(t),t.id,e)})}({id:n,jsonrpc:"2.0",method:t,params:null!=e?e:{}},r)),new Promise((e,r)=>{d[n]={resolve(n){switch(t){case"authorize":case"reauthorize":{const{wallet_uri_base:t}=n;if(null!=t)try{!function(t){let e;try{e=new URL(t)}catch(n){throw new zb(Db,"Invalid base URL supplied by wallet")}if("https:"!==e.protocol)throw new zb(Db,"Base URLs supplied by wallets must be valid `https` URLs")}(t)}catch(f){return void r(f)}break}}e(n)},reject:r}})}),new Proxy({},{get:(t,e)=>"then"===e?null:(null==t[e]&&(t[e]=function(t){return Rb(this,0,void 0,function*(){const{method:n,params:r}=function(t,e,n){let r=e,i=t.toString().replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:t}=r;if("legacy"===n){switch(t){case"solana:testnet":t="testnet";break;case"solana:devnet":t="devnet";break;case"solana:mainnet":t="mainnet-beta";break;default:t=r.cluster}r.cluster=t}else{switch(t){case"testnet":case"devnet":t=`solana:${t}`;break;case"mainnet-beta":t="solana:mainnet"}r.chain=t}}case"reauthorize":{const{auth_token:t,identity:e}=r;t&&("legacy"===n?(i="reauthorize",r={auth_token:t,identity:e}):i="authorize");break}}return{method:i,params:r}}(e,t,s),i=yield h(n,r);return"authorize"===n&&r.sign_in_payload&&!i.sign_in_result&&(i.sign_in_result=yield function(t,e,n){var r;return Rb(this,0,void 0,function*(){const i=null!==(r=t.domain)&&void 0!==r?r:window.location.host,s=e.accounts[0].address,o=(u=Object.assign(Object.assign({},t),{domain:i,address:(p=s,d=$b(p),(h="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",f={read(t,e){const n=0===e?t:t.slice(e);if(0===n.length)return["",0];let r=n.findIndex(t=>0!==t);r=-1===r?n.length:r;const i=h[0].repeat(r);if(r===n.length)return[i,t.length];const s=function(t,e){const n=BigInt(58),r=[];for(;t>0n;)r.unshift(e[Number(t%n)]),t/=n;return r.join("")}(n.slice(r).reduce((t,e)=>256n*t+BigInt(e),0n),h);return[i+s,t.length]}},Object.freeze({...f,decode:(t,e=0)=>f.read(t,e)[0]})).decode(d))}),m=function(t){let e=`${t.domain} wants you to sign in with your Solana account:\n`;e+=`${t.address}`,t.statement&&(e+=`\n\n${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const e of t.resources)n.push(`- ${e}`)}return n.length&&(e+=`\n\n${n.join("\n")}`),e}(u),window.btoa(m)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),a=$b((yield n("sign_messages",{addresses:[s],payloads:[o]})).signed_payloads[0]),c=Bb(a.slice(0,a.length-64)),l=Bb(a.slice(a.length-64));var u,d,h,f,m,p;return{address:s,signed_message:0==c.length?o:c,signature:l}})}(r.sign_in_payload,i,h)),function(t,e,n){if("getCapabilities"===t){const t=e;switch(n){case"legacy":{const e=["solana:signTransactions"];return!0===t.supports_clone_authorization&&e.push(Fb),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(Fb)})}}return e}(e,i,s)})}),t[e]),defineProperty:()=>!1,deleteProperty:()=>!1}));try{e(yield t(w))}catch(f){l(f)}finally{g(),u.close()}break}}var s,h});let g,w;const y=()=>{g&&g(),c={Ue:"connecting",associationKeypair:n},void 0===i&&(i=Date.now()),u=new WebSocket(r,["com.solana.mobilewalletadapter.v1"]),u.addEventListener("open",h),u.addEventListener("close",f),u.addEventListener("error",m),u.addEventListener("message",p),g=()=>{window.clearTimeout(w),u.removeEventListener("open",h),u.removeEventListener("close",f),u.removeEventListener("error",m),u.removeEventListener("message",p)}};y()})})}const Xb=Dt(function(t){for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<58;r++){var i=t.charAt(r),s=i.charCodeAt(0);if(255!==e[s])throw new TypeError(i+" is ambiguous");e[s]=r}var o=t.charAt(0),a=Math.log(58)/Math.log(256),c=Math.log(256)/Math.log(58);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var n=0,r=0,i=0;t[n]===o;)r++,n++;for(var s=(t.length-n)*a+1>>>0,c=new Uint8Array(s);t[n];){var l=t.charCodeAt(n);if(l>255)return;var u=e[l];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=58*c[h]>>>0,c[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=d,n++}for(var f=s-i;f!==s&&0===c[f];)f++;for(var m=new Uint8Array(r+(s-f)),p=r;f!==s;)m[p++]=c[f++];return m}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var n=0,r=0,i=0,s=e.length;i!==s&&0===e[i];)i++,n++;for(var a=(s-i)*c+1>>>0,l=new Uint8Array(a);i!==s;){for(var u=e[i],d=0,h=a-1;(0!==u||d<r)&&-1!==h;h--,d++)u+=256*l[h]>>>0,l[h]=u%58>>>0,u=u/58>>>0;if(0!==u)throw new Error("Non-zero carry");r=d,i++}for(var f=a-r;f!==a&&0===l[f];)f++;for(var m=o.repeat(n);f<a;++f)m+=t.charAt(l[f]);return m},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base58 character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));function Jb(t,e,n,r){return new(n||(n=Promise))(function(e,i){function s(t){try{a(r.next(t))}catch(e){i(e)}}function o(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(s,o)}a((r=r.apply(t,[])).next())})}function tx(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function ex(t,e,n,r,i){if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var nx,rx,ix,sx,ox,ax,cx,lx,ux,dx,hx,fx,mx,px,gx,wx,yx,vx,bx,xx,Nx,kx,Mx,Ax,Ex,Sx,Cx,Tx,Ix,Ox,Px,jx,Dx,zx,_x,Rx,Bx,$x,Ux,Fx,Lx,Wx;class Vx{constructor(){nx.add(this),rx.set(this,null),ix.set(this,{}),sx.set(this,!1),this.dom=null,this.open=()=>{tx(this,nx,"m",ax).call(this),tx(this,rx,"f")&&(tx(this,rx,"f").style.display="flex")},this.close=(t=void 0)=>{var e;tx(this,nx,"m",cx).call(this),tx(this,rx,"f")&&(tx(this,rx,"f").style.display="none"),null===(e=tx(this,ix,"f").close)||void 0===e||e.forEach(e=>e(t))},lx.set(this,t=>{"Escape"===t.key&&this.close(t)}),this.init=this.init.bind(this),ex(this,rx,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return Jb(this,0,void 0,function*(){tx(this,nx,"m",ox).call(this)})}addEventListener(t,e){var n;return(null===(n=tx(this,ix,"f")[t])||void 0===n?void 0:n.push(e))||(tx(this,ix,"f")[t]=[e]),()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;tx(this,ix,"f")[t]=null===(n=tx(this,ix,"f")[t])||void 0===n?void 0:n.filter(t=>e!==t)}}function qx(t){return window.btoa(String.fromCharCode.call(null,...t))}function Kx(t){return new Uint8Array(window.atob(t).split("").map(t=>t.charCodeAt(0)))}rx=new WeakMap,ix=new WeakMap,sx=new WeakMap,lx=new WeakMap,nx=new WeakSet,ox=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui"))return void(tx(this,rx,"f")||ex(this,rx,document.getElementById("mobile-wallet-adapter-embedded-root-ui")));ex(this,rx,document.createElement("div")),tx(this,rx,"f").id="mobile-wallet-adapter-embedded-root-ui",tx(this,rx,"f").innerHTML='\n<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>\n\t<div class="mobile-wallet-adapter-embedded-modal-card">\n\t\t<div>\n\t\t\t<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">\n\t\t\t\t<svg width="14" height="14">\n\t\t\t\t\t<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="mobile-wallet-adapter-embedded-modal-content"></div>\n\t</div>\n</div>\n',tx(this,rx,"f").style.display="none";const t=tx(this,rx,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");t&&(t.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent='\n.mobile-wallet-adapter-embedded-modal-container {\n    display: flex; /* Use flexbox to center content */\n    justify-content: center; /* Center horizontally */\n    align-items: center; /* Center vertically */\n    position: fixed; /* Stay in place */\n    z-index: 1; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    overflow-y: auto; /* enable scrolling */\n}\n\n.mobile-wallet-adapter-embedded-modal-card {\n    display: flex;\n    flex-direction: column;\n    margin: auto 20px;\n    max-width: 780px;\n    padding: 20px;\n    border-radius: 24px;\n    background: #ffffff;\n    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;\n    transform: translateY(-200%);\n    animation: slide-in 0.5s forwards;\n}\n\n@keyframes slide-in {\n    100% { transform: translateY(0%); }\n}\n\n.mobile-wallet-adapter-embedded-modal-close {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    cursor: pointer;\n    background: #e4e9e9;\n    border: none;\n    border-radius: 50%;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:focus-visible {\n    outline-color: red;\n}\n\n.mobile-wallet-adapter-embedded-modal-close svg {\n    fill: #546266;\n    transition: fill 200ms ease 0s;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:hover svg {\n    fill: #fff;\n}\n'+this.contentStyles;const n=document.createElement("div");n.innerHTML='\n<link rel="preconnect" href="https://fonts.googleapis.com">\n<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">\n',this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(tx(this,rx,"f")),document.body.appendChild(n)},ax=function(){tx(this,rx,"f")&&!tx(this,sx,"f")&&([...tx(this,rx,"f").querySelectorAll("[data-modal-close]")].forEach(t=>null==t?void 0:t.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",tx(this,lx,"f")),ex(this,sx,!0))},cx=function(){tx(this,sx,"f")&&(window.removeEventListener("load",this.close),document.removeEventListener("keydown",tx(this,lx,"f")),tx(this,rx,"f")&&([...tx(this,rx,"f").querySelectorAll("[data-modal-close]")].forEach(t=>null==t?void 0:t.removeEventListener("click",this.close)),ex(this,sx,!1)))};const Hx="Mobile Wallet Adapter",Yx=[Sy,Iy,Ty,Cy];class Zx{constructor(t){ux.add(this),dx.set(this,{}),hx.set(this,"1.0.0"),fx.set(this,Hx),mx.set(this,"https://solanamobile.com/wallets"),px.set(this,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo="),gx.set(this,void 0),wx.set(this,void 0),yx.set(this,void 0),vx.set(this,!1),bx.set(this,0),xx.set(this,[]),Nx.set(this,void 0),kx.set(this,void 0),Mx.set(this,void 0),Ax.set(this,(t,e)=>{var n;return(null===(n=tx(this,dx,"f")[t])||void 0===n?void 0:n.push(e))||(tx(this,dx,"f")[t]=[e]),()=>tx(this,ux,"m",Sx).call(this,t,e)}),Cx.set(this,({silent:t}={})=>Jb(this,0,void 0,function*(){if(tx(this,vx,"f")||this.connected)return{accounts:this.accounts};ex(this,vx,!0);try{if(t){const t=yield tx(this,yx,"f").get();if(!t)return{accounts:this.accounts};yield tx(this,Ox,"f").call(this,t.capabilities),yield tx(this,Ix,"f").call(this,t)}else yield tx(this,Tx,"f").call(this)}catch(e){throw new Error(e instanceof Error&&e.message||"Unknown error")}finally{ex(this,vx,!1)}return{accounts:this.accounts}})),Tx.set(this,t=>Jb(this,0,void 0,function*(){try{const e=yield tx(this,yx,"f").get();if(e)return tx(this,Ix,"f").call(this,e),e;const n=yield tx(this,Nx,"f").select(tx(this,xx,"f"));return yield tx(this,Dx,"f").call(this,e=>Jb(this,0,void 0,function*(){const[r,i]=yield Promise.all([e.getCapabilities(),e.authorize({chain:n,identity:tx(this,gx,"f"),sign_in_payload:t})]),s=tx(this,_x,"f").call(this,i.accounts),o=Object.assign(Object.assign({},i),{accounts:s,chain:n,capabilities:r});return Promise.all([tx(this,Ox,"f").call(this,r),tx(this,yx,"f").set(o),tx(this,Ix,"f").call(this,o)]),o}))}catch(e){throw new Error(e instanceof Error&&e.message||"Unknown error")}})),Ix.set(this,t=>Jb(this,0,void 0,function*(){var e;const n=null==tx(this,wx,"f")||(null===(e=tx(this,wx,"f"))||void 0===e?void 0:e.accounts.length)!==t.accounts.length||tx(this,wx,"f").accounts.some((e,n)=>e.address!==t.accounts[n].address);ex(this,wx,t),n&&tx(this,ux,"m",Ex).call(this,"change",{accounts:this.accounts})})),Ox.set(this,t=>Jb(this,0,void 0,function*(){const e=t.features.includes("solana:signTransactions"),n=t.supports_sign_and_send_transactions,r=Sy in this.features!==n||Iy in this.features!==e;ex(this,kx,Object.assign(Object.assign({},(n||!n&&!e)&&{[Sy]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tx(this,$x,"f")}}),e&&{[Iy]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tx(this,Ux,"f")}})),r&&tx(this,ux,"m",Ex).call(this,"change",{features:this.features})})),Px.set(this,(t,e,n)=>Jb(this,0,void 0,function*(){var r,i;try{const[s,o]=yield Promise.all([null!==(i=null===(r=tx(this,wx,"f"))||void 0===r?void 0:r.capabilities)&&void 0!==i?i:yield t.getCapabilities(),t.authorize({auth_token:e,identity:tx(this,gx,"f"),chain:n})]),a=tx(this,_x,"f").call(this,o.accounts),c=Object.assign(Object.assign({},o),{accounts:a,chain:n,capabilities:s});Promise.all([tx(this,yx,"f").set(c),tx(this,Ix,"f").call(this,c)])}catch(s){throw tx(this,jx,"f").call(this),new Error(s instanceof Error&&s.message||"Unknown error")}})),jx.set(this,()=>Jb(this,0,void 0,function*(){var t;tx(this,yx,"f").clear(),ex(this,vx,!1),ex(this,bx,(t=tx(this,bx,"f"),++t)),ex(this,wx,void 0),tx(this,ux,"m",Ex).call(this,"change",{accounts:this.accounts})})),Dx.set(this,t=>Jb(this,0,void 0,function*(){var e;const n=null===(e=tx(this,wx,"f"))||void 0===e?void 0:e.wallet_uri_base,r=n?{baseUri:n}:void 0,i=tx(this,bx,"f");try{return yield Qb(t,r)}catch(s){throw tx(this,bx,"f")!==i&&(yield new Promise(()=>{})),s instanceof Error&&"SolanaMobileWalletAdapterError"===s.name&&"ERROR_WALLET_NOT_FOUND"===s.code&&(yield tx(this,Mx,"f").call(this,this)),s}})),zx.set(this,()=>{if(!tx(this,wx,"f"))throw new Error("Wallet not connected");return{authToken:tx(this,wx,"f").auth_token,chain:tx(this,wx,"f").chain}}),_x.set(this,t=>t.map(t=>{var e,n;const r=Kx(t.address);return{address:Xb.encode(r),publicKey:r,label:t.label,icon:t.icon,chains:null!==(e=t.chains)&&void 0!==e?e:tx(this,xx,"f"),features:null!==(n=t.features)&&void 0!==n?n:Yx}})),Rx.set(this,t=>Jb(this,0,void 0,function*(){const{authToken:e,chain:n}=tx(this,zx,"f").call(this);try{const r=t.map(t=>qx(t));return yield tx(this,Dx,"f").call(this,t=>Jb(this,0,void 0,function*(){return yield tx(this,Px,"f").call(this,t,e,n),(yield t.signTransactions({payloads:r})).signed_payloads.map(Kx)}))}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}})),Bx.set(this,(t,e)=>Jb(this,0,void 0,function*(){const{authToken:n,chain:r}=tx(this,zx,"f").call(this);try{return yield tx(this,Dx,"f").call(this,i=>Jb(this,0,void 0,function*(){const[s,o]=yield Promise.all([i.getCapabilities(),tx(this,Px,"f").call(this,i,n,r)]);if(s.supports_sign_and_send_transactions){const n=qx(t);return(yield i.signAndSendTransactions(Object.assign(Object.assign({},e),{payloads:[n]}))).signatures.map(Kx)[0]}throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),$x.set(this,(...t)=>Jb(this,0,void 0,function*(){const e=[];for(const n of t){const t=yield tx(this,Bx,"f").call(this,n.transaction,n.options);e.push({signature:t})}return e})),Ux.set(this,(...t)=>Jb(this,0,void 0,function*(){return(yield tx(this,Rx,"f").call(this,t.map(({transaction:t})=>t))).map(t=>({signedTransaction:t}))})),Fx.set(this,(...t)=>Jb(this,0,void 0,function*(){const{authToken:e,chain:n}=tx(this,zx,"f").call(this),r=t.map(({account:t})=>qx(t.publicKey)),i=t.map(({message:t})=>qx(t));try{return yield tx(this,Dx,"f").call(this,t=>Jb(this,0,void 0,function*(){return yield tx(this,Px,"f").call(this,t,e,n),(yield t.signMessages({addresses:r,payloads:i})).signed_payloads.map(Kx).map(t=>({signedMessage:t,signature:t.slice(-64)}))}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),Lx.set(this,(...t)=>Jb(this,0,void 0,function*(){const e=[];if(!(t.length>1))return[yield tx(this,Wx,"f").call(this,t[0])];for(const n of t)e.push(yield tx(this,Wx,"f").call(this,n));return e})),Wx.set(this,t=>Jb(this,0,void 0,function*(){var e,n,r;ex(this,vx,!0);try{const i=yield tx(this,Tx,"f").call(this,Object.assign(Object.assign({},t),{domain:null!==(e=null==t?void 0:t.domain)&&void 0!==e?e:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address,o=i.accounts.find(t=>t.address==s);return{account:Object.assign(Object.assign({},null!=o?o:{address:Xb.encode(Kx(s))}),{publicKey:Kx(s),chains:null!==(n=null==o?void 0:o.chains)&&void 0!==n?n:tx(this,xx,"f"),features:null!==(r=null==o?void 0:o.features)&&void 0!==r?r:i.capabilities.features}),signedMessage:Kx(i.sign_in_result.signed_message),signature:Kx(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{ex(this,vx,!1)}})),ex(this,yx,t.authorizationCache),ex(this,gx,t.appIdentity),ex(this,xx,t.chains),ex(this,Nx,t.chainSelector),ex(this,Mx,t.onWalletNotFound),ex(this,kx,{[Sy]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tx(this,$x,"f")},[Iy]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tx(this,Ux,"f")}})}get version(){return tx(this,hx,"f")}get name(){return tx(this,fx,"f")}get url(){return tx(this,mx,"f")}get icon(){return tx(this,px,"f")}get chains(){return tx(this,xx,"f")}get features(){return Object.assign({[Oy]:{version:"1.0.0",connect:tx(this,Cx,"f")},[Py]:{version:"1.0.0",disconnect:tx(this,jx,"f")},[jy]:{version:"1.0.0",on:tx(this,Ax,"f")},[Ty]:{version:"1.0.0",signMessage:tx(this,Fx,"f")},[Cy]:{version:"1.0.0",signIn:tx(this,Lx,"f")}},tx(this,kx,"f"))}get accounts(){var t,e;return null!==(e=null===(t=tx(this,wx,"f"))||void 0===t?void 0:t.accounts)&&void 0!==e?e:[]}get connected(){return!!tx(this,wx,"f")}get isAuthorized(){return!!tx(this,wx,"f")}get currentAuthorization(){return tx(this,wx,"f")}get cachedAuthorizationResult(){return tx(this,yx,"f").get()}}dx=new WeakMap,hx=new WeakMap,fx=new WeakMap,mx=new WeakMap,px=new WeakMap,gx=new WeakMap,wx=new WeakMap,yx=new WeakMap,vx=new WeakMap,bx=new WeakMap,xx=new WeakMap,Nx=new WeakMap,kx=new WeakMap,Mx=new WeakMap,Ax=new WeakMap,Cx=new WeakMap,Tx=new WeakMap,Ix=new WeakMap,Ox=new WeakMap,Px=new WeakMap,jx=new WeakMap,Dx=new WeakMap,zx=new WeakMap,_x=new WeakMap,Rx=new WeakMap,Bx=new WeakMap,$x=new WeakMap,Ux=new WeakMap,Fx=new WeakMap,Lx=new WeakMap,Wx=new WeakMap,ux=new WeakSet,Ex=function(t,...e){var n;null===(n=tx(this,dx,"f")[t])||void 0===n||n.forEach(t=>t.apply(null,e))},Sx=function(t,e){var n;tx(this,dx,"f")[t]=null===(n=tx(this,dx,"f")[t])||void 0===n?void 0:n.filter(t=>e!==t)};class Gx extends Vx{constructor(){super(...arguments),this.contentStyles=Xx,this.contentHtml=Qx}initWithError(t){super.init(),this.populateError(t)}populateError(t){var e,n;const r=null===(e=this.dom)||void 0===e?void 0:e.getElementById("mobile-wallet-adapter-error-message"),i=null===(n=this.dom)||void 0===n?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(r){if("SolanaMobileWalletAdapterError"===t.name)switch(t.code){case"ERROR_WALLET_NOT_FOUND":return r.innerHTML="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",void(i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"}));case"ERROR_BROWSER_NOT_SUPPORTED":return r.innerHTML="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.",void(i&&(i.style.display="none"))}r.innerHTML=`An unexpected error occurred: ${t.message}`}}}const Qx='\n<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>\n<div class="mobile-wallet-adapter-embedded-modal-title">We can\'t find a wallet.</div>\n<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>\n<div>\n    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">\n        Find a wallet\n    </button>\n</div>\n',Xx="\n.mobile-wallet-adapter-embedded-modal-content {\n    text-align: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-icon {\n    margin-top: 24px;\n}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    margin: 18px 100px auto 100px;\n    color: #000000;\n    font-size: 2.75em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: 30px 60px 40px 60px;\n    color: #000000;\n    font-size: 1.25em;\n    font-weight: 400;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-action {\n    display: block;\n    width: 100%;\n    height: 56px;\n    /*margin-top: 40px;*/\n    font-size: 1.25em;\n    /*line-height: 24px;*/\n    /*letter-spacing: -1%;*/\n    background: #000000;\n    color: #FFFFFF;\n    border-radius: 18px;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n}\n",Jx="SolanaMobileWalletAdapterDefaultAuthorizationCache";function tN(t,e,n,r){return new(n||(n=Promise))(function(e,i){function s(t){try{a(r.next(t))}catch(e){i(e)}}function o(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(s,o)}a((r=r.apply(t,[])).next())})}function eN(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function nN(t,e,n,r,i){if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}const rN="standard:connect";function iN(t){return window.btoa(String.fromCharCode.call(null,...t))}var sN,oN,aN,cN,lN,uN,dN,hN,fN,mN,pN,gN,wN;const yN=Hx;function vN(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class bN extends ov{constructor(t,e){super(),sN.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),oN.set(this,void 0),aN.set(this,!1),cN.set(this,"undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?ev.Loadable:ev.Unsupported),lN.set(this,void 0),uN.set(this,void 0),dN.set(this,void 0),hN.set(this,t=>tN(this,0,void 0,function*(){if(t.accounts&&t.accounts.length>0){eN(this,sN,"m",mN).call(this);const e=yield eN(this,lN,"f").call(this,t.accounts);e!==eN(this,uN,"f")&&(nN(this,uN,e),nN(this,dN,void 0),this.emit("connect",this.publicKey))}})),nN(this,lN,t=>tN(this,0,void 0,function*(){var n;const r=yield e.addressSelector.select(t.map(({publicKey:t})=>iN(t)));return null!==(n=t.find(({publicKey:t})=>iN(t)===r))&&void 0!==n?n:t[0]})),nN(this,oN,t),eN(this,oN,"f").features["standard:events"].on("change",eN(this,hN,"f")),this.name=eN(this,oN,"f").name,this.icon=eN(this,oN,"f").icon,this.url=eN(this,oN,"f").url}get publicKey(){var t;if(!eN(this,dN,"f")&&eN(this,uN,"f"))try{nN(this,dN,new Rp(eN(this,uN,"f").publicKey))}catch(e){throw new Zy(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return null!==(t=eN(this,dN,"f"))&&void 0!==t?t:null}get connected(){return eN(this,oN,"f").connected}get connecting(){return eN(this,aN,"f")}get readyState(){return eN(this,cN,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return tN(this,0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return tN(this,0,void 0,function*(){eN(this,sN,"m",fN).call(this,!0)})}connect(){return tN(this,0,void 0,function*(){eN(this,sN,"m",fN).call(this)})}performAuthorization(t){return tN(this,0,void 0,function*(){try{const e=yield eN(this,oN,"f").cachedAuthorizationResult;return e?(yield eN(this,oN,"f").features[rN].connect({silent:!0}),e):(t?yield eN(this,oN,"f").features[Cy].signIn(t):yield eN(this,oN,"f").features[rN].connect(),yield yield eN(this,oN,"f").cachedAuthorizationResult)}catch(e){throw new qy(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return tN(this,0,void 0,function*(){return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){nN(this,aN,!1),nN(this,dN,void 0),nN(this,uN,void 0),yield eN(this,oN,"f").features["standard:disconnect"].disconnect(),this.emit("disconnect")}))})}signIn(t){return tN(this,0,void 0,function*(){return eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){var e;if(eN(this,cN,"f")!==ev.Installed&&eN(this,cN,"f")!==ev.Loadable)throw new Wy;nN(this,aN,!0);try{const n=yield eN(this,oN,"f").features[Cy].signIn(Object.assign(Object.assign({},t),{domain:null!==(e=null==t?void 0:t.domain)&&void 0!==e?e:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new qy(n instanceof Error&&n.message||"Unknown error",n)}finally{nN(this,aN,!1)}}))})}signMessage(t){return tN(this,0,void 0,function*(){return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){const e=eN(this,sN,"m",pN).call(this);try{return(yield eN(this,oN,"f").features[Ty].signMessage({account:e,message:t}))[0].signature}catch(n){throw new Jy(null==n?void 0:n.message,n)}}))})}sendTransaction(t,e,n){return tN(this,0,void 0,function*(){return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){const r=eN(this,sN,"m",pN).call(this);try{let i=function(){let t,r;switch(e.commitment){case"confirmed":case"finalized":case"processed":t=e.commitment;break;default:t="finalized"}switch(null==n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":r=n.preflightCommitment;break;case void 0:r=t;break;default:r="finalized"}return("finalized"===r?2:"confirmed"===r?1:0)<("finalized"===t?2:"confirmed"===t?1:0)?r:t};if(Sy in eN(this,oN,"f").features){const e=vN(eN(this,oN,"f").currentAuthorization.chain),[i]=(yield eN(this,oN,"f").features[Sy].signAndSendTransaction({account:r,transaction:t.serialize(),chain:e,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(t=>iN(t.signature));return i}{const[r]=yield eN(this,sN,"m",gN).call(this,[t]);if(function(t){return"version"in t}(r))return yield e.sendTransaction(r);{const t=r.serialize();return yield e.sendRawTransaction(t,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new Qy(null==i?void 0:i.message,i)}}))})}signTransaction(t){return tN(this,0,void 0,function*(){return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){const[e]=yield eN(this,sN,"m",gN).call(this,[t]);return e}))})}signAllTransactions(t){return tN(this,0,void 0,function*(){return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){return yield eN(this,sN,"m",gN).call(this,t)}))})}}oN=new WeakMap,aN=new WeakMap,cN=new WeakMap,lN=new WeakMap,uN=new WeakMap,dN=new WeakMap,hN=new WeakMap,sN=new WeakSet,fN=function(t=!1){return tN(this,0,void 0,function*(){if(!this.connecting&&!this.connected)return yield eN(this,sN,"m",wN).call(this,()=>tN(this,0,void 0,function*(){if(eN(this,cN,"f")!==ev.Installed&&eN(this,cN,"f")!==ev.Loadable)throw new Wy;nN(this,aN,!0);try{yield eN(this,oN,"f").features[rN].connect({silent:t})}catch(e){throw new qy(e instanceof Error&&e.message||"Unknown error",e)}finally{nN(this,aN,!1)}}))})},mN=function(){eN(this,cN,"f")!==ev.Installed&&this.emit("readyStateChange",nN(this,cN,ev.Installed))},pN=function(){if(!eN(this,oN,"f").isAuthorized||!eN(this,uN,"f"))throw new Gy;return eN(this,uN,"f")},gN=function(t){return tN(this,0,void 0,function*(){const e=eN(this,sN,"m",pN).call(this);try{if(Iy in eN(this,oN,"f").features)return eN(this,oN,"f").features[Iy].signTransaction(...t.map(t=>({account:e,transaction:t.serialize()}))).then(t=>t.map(t=>{const e=t.signedTransaction,n=64*e[0]+1;return"legacy"===eg.deserializeMessageVersion(e.slice(n,e.length))?sg.from(e):og.deserialize(e)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new Xy(null==n?void 0:n.message,n)}})},wN=function(t){return tN(this,0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class xN extends bN{constructor(t){var e;const n=vN(null!==(e=t.chain)&&void 0!==e?e:t.cluster);super(new Zx({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>tN(this,0,void 0,function*(){return yield t.authorizationResultCache.get()}),clear:t.authorizationResultCache.clear},chains:[n],chainSelector:{select(t){return Jb(this,0,void 0,function*(){return 1===t.length?t[0]:t.includes(jb)?jb:t[0]})}},onWalletNotFound:()=>tN(this,0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:n})}}class NN extends xN{}function kN(t){return tN(this,0,void 0,function*(){return function(){return Jb(this,0,void 0,function*(){if("undefined"!=typeof window){const t=window.navigator.userAgent.toLowerCase(),e=new Gx;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}()})}var MN,AN,EN,SN,CN,TN,IN,ON,PN,jN,DN,zN,_N,RN,BN,$N,UN,FN,LN=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},WN=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n};class VN extends nv{get name(){return LN(this,ON,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return LN(this,ON,"f").icon}get readyState(){return LN(this,PN,"f")}get publicKey(){return LN(this,EN,"f")}get connecting(){return LN(this,SN,"f")}get supportedTransactionVersions(){return LN(this,IN,"f")}get wallet(){return LN(this,ON,"f")}get standard(){return!0}constructor({wallet:t}){super(),MN.add(this),AN.set(this,void 0),EN.set(this,void 0),SN.set(this,void 0),CN.set(this,void 0),TN.set(this,void 0),IN.set(this,void 0),ON.set(this,void 0),PN.set(this,"undefined"==typeof window||"undefined"==typeof document?ev.Unsupported:ev.Installed),RN.set(this,t=>{if("accounts"in t){const t=LN(this,ON,"f").accounts[0];LN(this,AN,"f")&&!LN(this,CN,"f")&&t!==LN(this,AN,"f")&&(t?LN(this,MN,"m",DN).call(this,t):(this.emit("error",new Ky),LN(this,MN,"m",zN).call(this)))}"features"in t&&LN(this,MN,"m",_N).call(this)}),WN(this,ON,t,"f"),WN(this,AN,null,"f"),WN(this,EN,null,"f"),WN(this,SN,!1,"f"),WN(this,CN,!1,"f"),WN(this,TN,LN(this,ON,"f").features[jy].on("change",LN(this,RN,"f")),"f"),LN(this,MN,"m",_N).call(this)}destroy(){WN(this,AN,null,"f"),WN(this,EN,null,"f"),WN(this,SN,!1,"f"),WN(this,CN,!1,"f");const t=LN(this,TN,"f");t&&(WN(this,TN,null,"f"),t())}async autoConnect(){return LN(this,MN,"m",jN).call(this,{silent:!0})}async connect(){return LN(this,MN,"m",jN).call(this)}async disconnect(){if(Py in LN(this,ON,"f").features)try{WN(this,CN,!0,"f"),await LN(this,ON,"f").features[Py].disconnect()}catch(t){this.emit("error",new Hy(null==t?void 0:t.message,t))}finally{WN(this,CN,!1,"f")}LN(this,MN,"m",zN).call(this)}async sendTransaction(t,e,n={}){try{const s=LN(this,AN,"f");if(!s)throw new Gy;let o;if(Sy in LN(this,ON,"f").features)if(s.features.includes(Sy))o=Sy;else{if(!(Iy in LN(this,ON,"f").features)||!s.features.includes(Iy))throw new Yy;o=Iy}else{if(!(Iy in LN(this,ON,"f").features))throw new Vy;if(!s.features.includes(Iy))throw new Yy;o=Iy}const a=(r=e.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?jb:/\bdevnet\b/i.test(r)?"solana:devnet":/\btestnet\b/i.test(r)?"solana:testnet":/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?"solana:localnet":jb;if(!s.chains.includes(a))throw new Qy;try{const{signers:r,...i}=n;let c;if(rv(t)?((null==r?void 0:r.length)&&t.sign(r),c=t.serialize()):(t=await this.prepareTransaction(t,e,i),(null==r?void 0:r.length)&&t.partialSign(...r),c=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),o===Sy){const[t]=await LN(this,ON,"f").features[Sy].signAndSendTransaction({account:s,chain:a,transaction:c,options:{preflightCommitment:Pb(i.preflightCommitment||e.commitment),skipPreflight:i.skipPreflight,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot}});return Xb.encode(t.signature)}{const[t]=await LN(this,ON,"f").features[Iy].signTransaction({account:s,chain:a,transaction:c,options:{preflightCommitment:Pb(i.preflightCommitment||e.commitment),minContextSlot:i.minContextSlot}});return await e.sendRawTransaction(t.signedTransaction,{...i,preflightCommitment:Pb(i.preflightCommitment||e.commitment)})}}catch(i){if(i instanceof Ly)throw i;throw new Qy(null==i?void 0:i.message,i)}}catch(i){throw this.emit("error",i),i}var r}}AN=new WeakMap,EN=new WeakMap,SN=new WeakMap,CN=new WeakMap,TN=new WeakMap,IN=new WeakMap,ON=new WeakMap,PN=new WeakMap,RN=new WeakMap,MN=new WeakSet,jN=async function(t){try{if(this.connected||this.connecting)return;if(LN(this,PN,"f")!==ev.Installed)throw new Wy;if(WN(this,SN,!0,"f"),!LN(this,ON,"f").accounts.length)try{await LN(this,ON,"f").features[Oy].connect(t)}catch(e){throw new qy(null==e?void 0:e.message,e)}const n=LN(this,ON,"f").accounts[0];if(!n)throw new Yy;LN(this,MN,"m",DN).call(this,n)}catch(e){throw this.emit("error",e),e}finally{WN(this,SN,!1,"f")}},DN=function(t){let e;try{e=new Rp(t.address)}catch(n){throw new Zy(null==n?void 0:n.message,n)}WN(this,AN,t,"f"),WN(this,EN,e,"f"),LN(this,MN,"m",_N).call(this),this.emit("connect",e)},zN=function(){WN(this,AN,null,"f"),WN(this,EN,null,"f"),LN(this,MN,"m",_N).call(this),this.emit("disconnect")},_N=function(){var t,e;const n=Sy in LN(this,ON,"f").features?LN(this,ON,"f").features[Sy].supportedTransactionVersions:LN(this,ON,"f").features[Iy].supportedTransactionVersions;WN(this,IN,function(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(n,["legacy"])?null:new Set(n),"f"),Iy in LN(this,ON,"f").features&&(null==(t=LN(this,AN,"f"))?void 0:t.features.includes(Iy))?(this.signTransaction=LN(this,MN,"m",BN),this.signAllTransactions=LN(this,MN,"m",$N)):(delete this.signTransaction,delete this.signAllTransactions),Ty in LN(this,ON,"f").features&&(null==(e=LN(this,AN,"f"))?void 0:e.features.includes(Ty))?this.signMessage=LN(this,MN,"m",UN):delete this.signMessage,Cy in LN(this,ON,"f").features?this.signIn=LN(this,MN,"m",FN):delete this.signIn},BN=async function(t){try{const n=LN(this,AN,"f");if(!n)throw new Gy;if(!(Iy in LN(this,ON,"f").features))throw new Vy;if(!n.features.includes(Iy))throw new Yy;try{const e=(await LN(this,ON,"f").features[Iy].signTransaction({account:n,transaction:rv(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return rv(t)?og.deserialize(e):sg.from(e)}catch(e){if(e instanceof Ly)throw e;throw new Xy(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}},$N=async function(t){try{const n=LN(this,AN,"f");if(!n)throw new Gy;if(!(Iy in LN(this,ON,"f").features))throw new Vy;if(!n.features.includes(Iy))throw new Yy;try{const e=await LN(this,ON,"f").features[Iy].signTransaction(...t.map(t=>({account:n,transaction:rv(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((t,n)=>{const r=e[n].signedTransaction;return rv(t)?og.deserialize(r):sg.from(r)})}catch(e){throw new Xy(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}},UN=async function(t){try{const n=LN(this,AN,"f");if(!n)throw new Gy;if(!(Ty in LN(this,ON,"f").features))throw new Vy;if(!n.features.includes(Ty))throw new Yy;try{return(await LN(this,ON,"f").features[Ty].signMessage({account:n,message:t}))[0].signature}catch(e){throw new Jy(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}},FN=async function(t={}){try{if(!(Cy in LN(this,ON,"f").features))throw new Vy;let n;try{[n]=await LN(this,ON,"f").features[Cy].signIn(t)}catch(e){throw new tv(null==e?void 0:e.message,e)}if(!n)throw new tv;return LN(this,MN,"m",DN).call(this,n.account),n}catch(e){throw this.emit("error",e),e}};const qN=function(t){return Oy in t.features&&jy in t.features&&(Sy in t.features||Iy in t.features)};var KN;let HN;const YN=new Set,ZN={};function GN(...t){var e;return(t=t.filter(t=>!YN.has(t))).length?(t.forEach(t=>function(t){QN=void 0,YN.add(t)}(t)),null==(e=ZN.register)||e.forEach(e=>tk(()=>e(...t))),function(){var e;t.forEach(t=>function(t){QN=void 0,YN.delete(t)}(t)),null==(e=ZN.unregister)||e.forEach(e=>tk(()=>e(...t)))}):()=>{}}let QN;function XN(){return QN||(QN=[...YN]),QN}function JN(t,e){var n;return(null==(n=ZN[t])?void 0:n.push(e))||(ZN[t]=[e]),function(){var n;ZN[t]=null==(n=ZN[t])?void 0:n.filter(t=>e!==t)}}function tk(t){try{t()}catch(e){}}class ek extends Event{get detail(){return function(t,e){if("function"==typeof e||!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}(this,KN)}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),KN.set(this,void 0),function(t,e,n){if("function"==typeof e||!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");e.set(t,n)}(this,KN,t)}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}function nk(t){const e=Ct.useRef(void 0);return void 0===e.current&&(e.current={value:t()}),e.current.value}function rk(t){return t.filter(qN).map(t=>new VN({wallet:t}))}var ik,sk;function ok({children:t,wallets:e,adapter:n,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const c=Ct.useRef(!1),[l,u]=Ct.useState(!1),d=Ct.useRef(!1),[h,f]=Ct.useState(!1),[m,p]=Ct.useState(()=>(null==n?void 0:n.publicKey)??null),[g,w]=Ct.useState(()=>(null==n?void 0:n.connected)??!1),y=Ct.useRef(o);Ct.useEffect(()=>(y.current=o,()=>{y.current=void 0}),[o]);const v=Ct.useRef((t,e)=>(r.current||(y.current?y.current(t,e):t instanceof ky&&"undefined"!=typeof window&&e&&window.open(e.url,"_blank")),t)),[b,x]=Ct.useState(()=>e.map(t=>({adapter:t,readyState:t.readyState})).filter(({readyState:t})=>t!==Ay.Unsupported));Ct.useEffect(()=>{function t(t){x(e=>{const n=e.findIndex(({adapter:t})=>t===this);if(-1===n)return e;const{adapter:r}=e[n];return[...e.slice(0,n),{adapter:r,readyState:t},...e.slice(n+1)].filter(({readyState:t})=>t!==Ay.Unsupported)})}return x(t=>e.map((e,n)=>{const r=t[n];return r&&r.adapter===e&&r.readyState===e.readyState?r:{adapter:e,readyState:e.readyState}}).filter(({readyState:t})=>t!==Ay.Unsupported)),e.forEach(e=>e.on("readyStateChange",t,e)),()=>{e.forEach(e=>e.off("readyStateChange",t,e))}},[n,e]);const N=Ct.useMemo(()=>b.find(t=>t.adapter===n)??null,[n,b]);Ct.useEffect(()=>{if(!n)return;const t=t=>{p(t),c.current=!1,u(!1),w(!0),d.current=!1,f(!1)},e=()=>{r.current||(p(null),c.current=!1,u(!1),w(!1),d.current=!1,f(!1))},i=t=>{v.current(t,n)};return n.on("connect",t),n.on("disconnect",e),n.on("error",i),()=>{n.off("connect",t),n.off("disconnect",e),n.off("error",i),e()}},[n,r]);const k=Ct.useRef(!1);Ct.useEffect(()=>()=>{k.current=!1},[n]),Ct.useEffect(()=>{k.current||c.current||g||!i||(null==N?void 0:N.readyState)!==Ay.Installed&&(null==N?void 0:N.readyState)!==Ay.Loadable||(c.current=!0,u(!0),k.current=!0,async function(){try{await i()}catch{s()}finally{u(!1),c.current=!1}}())},[g,i,s,N]);const M=Ct.useCallback(async(t,e,r)=>{if(!n)throw v.current(new Dy);if(!g)throw v.current(new My,n);return await n.sendTransaction(t,e,r)},[n,g]),A=Ct.useMemo(()=>n&&"signTransaction"in n?async t=>{if(!g)throw v.current(new My,n);return await n.signTransaction(t)}:void 0,[n,g]),E=Ct.useMemo(()=>n&&"signAllTransactions"in n?async t=>{if(!g)throw v.current(new My,n);return await n.signAllTransactions(t)}:void 0,[n,g]),S=Ct.useMemo(()=>n&&"signMessage"in n?async t=>{if(!g)throw v.current(new My,n);return await n.signMessage(t)}:void 0,[n,g]),C=Ct.useMemo(()=>n&&"signIn"in n?async t=>await n.signIn(t):void 0,[n]),T=Ct.useCallback(async()=>{if(c.current||d.current||(null==N?void 0:N.adapter.connected))return;if(!N)throw v.current(new Dy);const{adapter:t,readyState:e}=N;if(e!==Ay.Installed&&e!==Ay.Loadable)throw v.current(new ky,t);c.current=!0,u(!0);try{await t.connect()}catch(n){throw s(),n}finally{u(!1),c.current=!1}},[s,N]),I=Ct.useCallback(async()=>{if(!d.current&&n){d.current=!0,f(!0);try{await n.disconnect()}finally{f(!1),d.current=!1}}},[n]);return Ot.createElement(By.Provider,{value:{autoConnect:!!i,wallets:b,wallet:N,publicKey:m,connected:g,connecting:l,disconnecting:h,select:a,connect:T,disconnect:I,sendTransaction:M,signTransaction:A,signAllTransactions:E,signMessage:S,signIn:C}},t)}let ak;function ck(t){var e;return function({adapters:t,userAgentString:e}){return t.some(t=>t.name!==yN&&t.readyState===Ay.Installed)?ik.DESKTOP_WEB:e&&/android/i.test(e)&&!function(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}(e)?ik.MOBILE_WEB:ik.DESKTOP_WEB}({adapters:t,userAgentString:(void 0===ak&&(ak=(null==(e=globalThis.navigator)?void 0:e.userAgent)??null),ak)})===ik.MOBILE_WEB}function lk(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function uk({children:t,wallets:e,autoConnect:n,localStorageKey:r="walletName",onError:i}){const{connection:s}=by(),o=function(t){const e=nk(()=>new Set),{get:n,on:r}=nk(()=>function(){if(HN)return HN;if(HN=function(){if(HN)return HN;if(HN=Object.freeze({register:GN,get:XN,on:JN}),"undefined"==typeof window)return HN;const t=Object.freeze({register:GN});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){}try{window.dispatchEvent(new ek(t))}catch(e){}return HN}(),"undefined"==typeof window)return HN;const t=window.navigator.wallets||[];if(!Array.isArray(t))return HN;const{register:e}=HN,n=(...t)=>t.forEach(t=>tk(()=>t({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch(r){return HN}return n(...t),HN}()),[i,s]=Ct.useState(()=>rk(n()));Ct.useEffect(()=>{const t=[r("register",(...t)=>s(e=>[...e,...rk(t)])),r("unregister",(...t)=>s(e=>e.filter(e=>t.some(t=>t===e.wallet))))];return()=>t.forEach(t=>t())},[r]);const o=function(t){const e=Ct.useRef(void 0);return Ct.useEffect(()=>{e.current=t}),e.current}(i);return Ct.useEffect(()=>{if(!o)return;const t=new Set(i);new Set(o.filter(e=>!t.has(e))).forEach(t=>t.destroy())},[o,i]),Ct.useEffect(()=>()=>i.forEach(t=>t.destroy()),[]),Ct.useMemo(()=>[...i,...t.filter(({name:t})=>!i.some(e=>e.name===t)||(e.has(t)||e.add(t),!1))],[i,t,e])}(e),a=Ct.useMemo(()=>{return ck(o)?o.find(t=>t.name===yN)||new NN({addressSelector:{select(t){return tN(this,0,void 0,function*(){return t[0]})}},appIdentity:{uri:lk()},authorizationResultCache:function(){let t;try{t=window.localStorage}catch(e){}return{clear(){return Jb(this,0,void 0,function*(){if(t)try{t.removeItem(Jx)}catch(e){}})},get(){return Jb(this,0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(Jx));if(e&&e.accounts){const t=e.accounts.map(t=>Object.assign(Object.assign({},t),{publicKey:"publicKey"in t?new Uint8Array(Object.values(t.publicKey)):Xb.decode(t.address)}));return Object.assign(Object.assign({},e),{accounts:t})}return e||void 0}catch(e){}})},set(n){return Jb(this,0,void 0,function*(){if(t)try{t.setItem(Jx,JSON.stringify(n))}catch(e){}})}}}(),cluster:(t=null==s?void 0:s.rpcEndpoint,t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"),onWalletNotFound:kN}):null;var t},[o,null==s?void 0:s.rpcEndpoint]),c=Ct.useMemo(()=>null==a||-1!==o.indexOf(a)?o:[a,...o],[o,a]),[l,u]=function(t){const e=Ct.useState(()=>{try{const e=localStorage.getItem(t);if(e)return JSON.parse(e)}catch(e){}return null}),n=e[0],r=Ct.useRef(!0);return Ct.useEffect(()=>{if(r.current)r.current=!1;else try{null===n?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}catch(e){}},[n,t]),e}(r),d=Ct.useMemo(()=>c.find(t=>t.name===l)??null,[c,l]),h=Ct.useCallback(t=>{l!==t&&(d&&d.name!==yN&&d.disconnect(),u(t))},[d,u,l]);Ct.useEffect(()=>{if(d)return d.on("disconnect",t),()=>{d.off("disconnect",t)};function t(){p.current||u(null)}},[d,o,u,l]);const f=Ct.useRef(!1),m=Ct.useMemo(()=>{if(n&&d)return async()=>{(!0===n||await n(d))&&(f.current?await d.connect():await d.autoConnect())}},[n,d]),p=Ct.useRef(!1);Ct.useEffect(()=>{if(l!==yN||!ck(o))return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)};function t(){p.current=!0}p.current=!1},[o,l]);const g=Ct.useCallback(()=>{d&&h(null)},[d,h]),w=Ct.useCallback(t=>{f.current=!0,h(t)},[h]);return Ot.createElement(ok,{wallets:c,adapter:d,isUnloadingRef:p,onAutoConnectRequest:m,onConnectError:g,onError:i,onSelectWallet:w},t)}function dk(t){if(!t)return t;const e={...t};return delete e.email,delete e.walletAddress,delete e.firstName,delete e.lastName,delete e.companyEmail,delete e.companyDomain,delete e.dynamicProfile,delete e.password,delete e.zkProofHash,e}function hk(t){if(!t)return!0;const e=["email","walletAddress","firstName","lastName","companyEmail","companyDomain","password","zkProofHash"];if(Array.isArray(t))return t.every(t=>hk(t));if("object"==typeof t&&null!==t){for(const n of e)if(t.hasOwnProperty(n)&&null!==t[n]&&void 0!==t[n])return!1;for(const e in t)if("object"==typeof t[e]&&null!==t[e]&&!hk(t[e]))return!1}return!0}KN=new WeakMap,(sk=ik||(ik={}))[sk.DESKTOP_WEB=0]="DESKTOP_WEB",sk[sk.MOBILE_WEB=1]="MOBILE_WEB";const fk=Ct.createContext(null);function mk({children:t}){const{publicKey:e,connected:n,connect:r,disconnect:i,signMessage:s,wallet:o}=$y();by();const[a,c]=Ct.useState(null),[l,u]=Ct.useState(null),[d,h]=Ct.useState(!1),[f,m]=Ct.useState(!1),p=Ct.useRef(!1),g=!!(n&&e&&a),w=!0;Ct.useEffect(()=>{},[n,e,g,a]);const y=Ct.useCallback(async()=>{try{m(!0),n&&o||await r()}catch(t){throw t}finally{m(!1)}},[r,n,o]),v=Ct.useCallback(async()=>{try{await i(),c(null),u(null),p.current=!1,localStorage.removeItem("phantom_auth_token"),window.location.replace("/auth")}catch(t){}},[i]);Ct.useEffect(()=>{!async function(){if(n&&e&&s&&!a)try{m(!0);const t=await fetch("/api/auth/nonce",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:e.toString(),walletType:"phantom"})});if(!t.ok)throw new Error("Failed to get nonce from server");const{nonce:n}=await t.json(),r=(new TextEncoder).encode(`Sign this message to authenticate with Anonn.\n\nNonce: ${n}`),i=await s(r),o=await fetch("/api/auth/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:e.toString(),signature:Xb.encode(i),nonce:n,walletType:"phantom"})});if(!o.ok)throw new Error("Failed to verify signature");const{token:a}=await o.json();c(a),localStorage.setItem("phantom_auth_token",a)}catch(t){await i()}finally{m(!1)}}()},[n,e,s,a,i]),Ct.useEffect(()=>{const t=localStorage.getItem("phantom_auth_token");t&&!a&&c(t)},[a]);const b=Ct.useCallback(async()=>a,[a]);Ct.useEffect(()=>{window.__getDynamicToken=async()=>a,window.__getPrivyToken=window.__getDynamicToken},[a]);const x=Ct.useCallback(async()=>{if(g&&!d){h(!0);try{const t=await b();if(!t)return;const e=await fetch("/api/auth/user",{headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(e.ok){const t=await e.json();hk(t);const n=dk(t);u(n)}else 401===e.status&&(c(null),localStorage.removeItem("phantom_auth_token"),u(null))}catch(t){}finally{h(!1)}}},[w,g,d,b]);Ct.useEffect(()=>{g&&!p.current&&(p.current=!0,x())},[w,g,x]),Ct.useEffect(()=>{g||(p.current=!1,u(null))},[g]);const N=Ct.useMemo(()=>{if(!e)return null;if(l)return dk({id:l.id||e.toString(),username:l.username||null,password:null,profileImageUrl:l.profileImageUrl||null,bannerUrl:l.bannerUrl||null,bio:l.bio||null,location:l.location||null,website:l.website||null,allowlisted:l.allowlisted??!0,karma:l.karma||0,postKarma:l.postKarma||0,commentKarma:l.commentKarma||0,awardeeKarma:l.awardeeKarma||0,followerCount:l.followerCount||0,followingCount:l.followingCount||0,isVerified:l.isVerified||!1,isPremium:l.isPremium||!1,premiumExpiresAt:l.premiumExpiresAt||null,isOnline:l.isOnline??!0,lastActiveAt:l.lastActiveAt||null,createdAt:l.createdAt||null,updatedAt:l.updatedAt||null,dynamicProfile:null,dynamicProfileSynced:l.dynamicProfileSynced||!1});const t=new Date;return dk({id:e.toString(),username:null,password:null,profileImageUrl:null,bannerUrl:null,bio:null,location:null,website:null,allowlisted:!0,karma:0,postKarma:0,commentKarma:0,awardeeKarma:0,followerCount:0,followingCount:0,isVerified:!1,isPremium:!1,premiumExpiresAt:null,isOnline:!0,lastActiveAt:t,createdAt:t,updatedAt:t,dynamicProfile:null,dynamicProfileSynced:!1})},[e,l]),k=Ct.useMemo(()=>({user:N,isAuthenticated:g,isLoading:d||f,dbProfile:l,refreshProfile:x,getAccessToken:b,login:y,logout:v,setDbProfile:t=>{u(e=>e?{...e,...t}:t)}}),[N,g,w,d,f,l,x,b,y,v]);return Gt.jsx(fk.Provider,{value:k,children:t})}function pk(){const t=Ct.useContext(fk);if(!t)throw new Error("useAuth must be used within an AuthProvider. Check that AuthProvider is properly set up in your app.");return t}const gk=Ei("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wk=Ct.forwardRef(({className:t,variant:e,...n},r)=>Gt.jsx("div",{ref:r,role:"alert",className:na(gk({variant:e}),t),...n}));wk.displayName="Alert",Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("h5",{ref:n,className:na("mb-1 font-medium leading-none tracking-tight",t),...e})).displayName="AlertTitle";const yk=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("text-sm [&_p]:leading-relaxed",t),...e}));function vk(){const[t,e]=Ct.useState(navigator.onLine);return Ct.useEffect(()=>{const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}},[]),t?null:Gt.jsxs(wk,{variant:"destructive",className:"fixed top-4 right-4 z-50 max-w-sm bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800",children:[Gt.jsx(qs,{className:"h-4 w-4"}),Gt.jsx(yk,{children:"You're currently offline. Some features may not work properly."})]})}yk.displayName="AlertDescription";const bk=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));bk.displayName="Card",Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("flex flex-col space-y-1.5 p-6",t),...e})).displayName="CardHeader",Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("text-2xl font-semibold leading-none tracking-tight",t),...e})).displayName="CardTitle",Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("text-sm text-muted-foreground",t),...e})).displayName="CardDescription";const xk=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("p-6 pt-0",t),...e}));xk.displayName="CardContent",Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("div",{ref:n,className:na("flex items-center p-6 pt-0",t),...e})).displayName="CardFooter";const Nk=Ei("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:translate-y-[-1px]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),kk=Ct.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?dr:"button";return Gt.jsx(o,{className:na(Nk({variant:e,size:n,className:t})),ref:s,...i})});function Mk(){return Gt.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-orange-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:Gt.jsx(bk,{className:"w-full max-w-lg mx-4 bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm border-0 shadow-xl",children:Gt.jsxs(xk,{className:"pt-12 pb-8 px-8 text-center",children:[Gt.jsx("div",{className:"mb-6",children:Gt.jsx("div",{className:"text-8xl font-[#E8EAE9] bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent animate-pulse",children:"404"})}),Gt.jsx("div",{className:"mb-6",children:Gt.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center mx-auto shadow-lg",children:Gt.jsx(Xi,{className:"h-8 w-8 text-white"})})}),Gt.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Page Not Found"}),Gt.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-8",children:"The page you're looking for doesn't exist."}),Gt.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[Gt.jsx(Be,{href:"/",children:Gt.jsxs(kk,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-all duration-200",children:[Gt.jsx(ds,{className:"h-4 w-4 mr-2"}),"Go Home"]})}),Gt.jsx(Be,{href:"/bowls",children:Gt.jsxs(kk,{variant:"outline",className:"border-2 border-gray-300 dark:border-slate-600 hover:border-orange-500 dark:hover:border-orange-400 text-gray-700 dark:text-gray-300 px-6 py-2 rounded-lg font-medium hover:bg-orange-50 dark:hover:bg-orange-950/20 transition-all duration-200",children:[Gt.jsx(is,{className:"h-4 w-4 mr-2"}),"Browse Bowls"]})})]})]})})})}function Ak(){const[,t]=je();return Ct.useEffect(()=>{t("/")},[t]),null}function Ek(t){if("undefined"==typeof Proxy)return t;const e=new Map;return new Proxy((...e)=>t(...e),{get:(n,r)=>"create"===r?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}function Sk(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}kk.displayName="Button";const Ck=t=>Array.isArray(t);function Tk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ik(t){return"string"==typeof t||Array.isArray(t)}function Ok(t){const e=[{},{}];return null==t||t.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function Pk(t,e,n,r){if("function"==typeof e){const[i,s]=Ok(r);e=e(void 0!==n?n:t.custom,i,s)}if("string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e){const[i,s]=Ok(r);e=e(void 0!==n?n:t.custom,i,s)}return e}function jk(t,e,n){const r=t.getProps();return Pk(r,e,void 0!==n?n:r.custom,t)}const Dk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zk=["initial",...Dk],_k=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rk=new Set(_k),Bk=t=>1e3*t,$k=t=>t/1e3,Uk={type:"spring",stiffness:500,damping:25,restSpeed:10},Fk={type:"keyframes",duration:.8},Lk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wk=(t,{keyframes:e})=>e.length>2?Fk:Rk.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:Uk:Lk;function Vk(t,e){return t?t[e]||t.default||t:void 0}const qk=t=>null!==t;function Kk(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(qk),s=e&&"loop"!==n&&e%2==1?0:i.length-1;return s&&void 0!==r?r:i[s]}const Hk=t=>t;let Yk=Hk;const Zk=["read","resolveKeyframes","update","preRender","render","postRender"];function Gk(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Zk.reduce((t,e)=>(t[e]=function(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(e){s.has(e)&&(c.schedule(e),t()),e(o)}const c={schedule:(t,i=!1,o=!1)=>{const a=o&&r?e:n;return i&&s.add(t),a.has(t)||a.add(t),t},cancel:t=>{n.delete(t),s.delete(t)},process:t=>{o=t,r?i=!0:(r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,c.process(t)))}};return c}(s),t),{}),{read:a,resolveKeyframes:c,update:l,preRender:u,render:d,postRender:h}=o,f=()=>{const s=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(s-i.timestamp,40),1),i.timestamp=s,i.isProcessing=!0,a.process(i),c.process(i),l.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(f))};return{schedule:Zk.reduce((e,s)=>{const a=o[s];return e[s]=(e,s=!1,o=!1)=>(n||(n=!0,r=!0,i.isProcessing||t(f)),a.schedule(e,s,o)),e},{}),cancel:t=>{for(let e=0;e<Zk.length;e++)o[Zk[e]].cancel(t)},state:i,steps:o}}const{schedule:Qk,cancel:Xk,state:Jk,steps:tM}=Gk("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Hk,!0),eM=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function nM(t,e,n,r){return t===e&&n===r?Hk:i=>0===i||1===i?i:eM(function(t,e,n,r,i){let s,o,a=0;do{o=e+(n-e)/2,s=eM(o,r,i)-t,s>0?n=o:e=o}while(Math.abs(s)>1e-7&&++a<12);return o}(i,0,1,t,n),e,r)}const rM=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,iM=t=>e=>1-t(1-e),sM=nM(.33,1.53,.69,.99),oM=iM(sM),aM=rM(oM),cM=t=>(t*=2)<1?.5*oM(t):.5*(2-Math.pow(2,-10*(t-1))),lM=t=>1-Math.sin(Math.acos(t)),uM=iM(lM),dM=rM(lM),hM=t=>/^0[^.\s]+$/u.test(t);function fM(t){return"number"==typeof t?0===t:null===t||"none"===t||"0"===t||hM(t)}const mM=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),pM=t=>e=>"string"==typeof e&&e.startsWith(t),gM=pM("--"),wM=pM("var(--"),yM=t=>!!wM(t)&&vM.test(t.split("/*")[0].trim()),vM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function xM(t,e,n=1){const[r,i]=function(t){const e=bM.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${null!=n?n:r}`,i]}(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const t=s.trim();return mM(t)?parseFloat(t):t}return yM(i)?xM(i,e,n+1):i}const NM=(t,e,n)=>n>e?e:n<t?t:n,kM={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},MM={...kM,transform:t=>NM(0,1,t)},AM={...kM,default:1},EM=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),SM=EM("deg"),CM=EM("%"),TM=EM("px"),IM=EM("vh"),OM=EM("vw"),PM={...CM,parse:t=>CM.parse(t)/100,transform:t=>CM.transform(100*t)},jM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),DM=t=>t===kM||t===TM,zM=(t,e)=>parseFloat(t.split(", ")[e]),_M=(t,e)=>(n,{transform:r})=>{if("none"===r||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return zM(i[1],e);{const e=r.match(/^matrix\((.+)\)$/u);return e?zM(e[1],t):0}},RM=new Set(["x","y","z"]),BM=_k.filter(t=>!RM.has(t)),$M={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_M(4,13),y:_M(5,14)};$M.translateX=$M.x,$M.translateY=$M.y;const UM=t=>e=>e.test(t),FM=[kM,TM,CM,SM,OM,IM,{test:t=>"auto"===t,parse:t=>t}],LM=t=>FM.find(UM(t)),WM=new Set;let VM=!1,qM=!1;function KM(){if(qM){const t=Array.from(WM).filter(t=>t.needsMeasurement),e=new Set(t.map(t=>t.element)),n=new Map;e.forEach(t=>{const e=function(t){const e=[];return BM.forEach(n=>{const r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}(t);e.length&&(n.set(t,e),t.render())}),t.forEach(t=>t.measureInitialState()),e.forEach(t=>{t.render();const e=n.get(t);e&&e.forEach(([e,n])=>{var r;null===(r=t.getValue(e))||void 0===r||r.set(n)})}),t.forEach(t=>t.measureEndState()),t.forEach(t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)})}qM=!1,VM=!1,WM.forEach(t=>t.complete()),WM.clear()}function HM(){WM.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qM=!0)})}class YM{constructor(t,e,n,r,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=r,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(WM.add(this),VM||(VM=!0,Qk.read(HM),Qk.resolveKeyframes(KM))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:r}=this;for(let i=0;i<t.length;i++)if(null===t[i])if(0===i){const i=null==r?void 0:r.get(),s=t[t.length-1];if(void 0!==i)t[0]=i;else if(n&&e){const r=n.readValue(e,s);null!=r&&(t[0]=r)}void 0===t[0]&&(t[0]=s),r&&void 0===i&&r.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),WM.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,WM.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ZM=t=>Math.round(1e5*t)/1e5,GM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,QM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XM=(t,e)=>n=>Boolean("string"==typeof n&&QM.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),JM=(t,e,n)=>r=>{if("string"!=typeof r)return r;const[i,s,o,a]=r.match(GM);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},tA={...kM,transform:t=>Math.round((t=>NM(0,255,t))(t))},eA={test:XM("rgb","red"),parse:JM("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+tA.transform(t)+", "+tA.transform(e)+", "+tA.transform(n)+", "+ZM(MM.transform(r))+")"},nA={test:XM("#"),parse:function(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:eA.transform},rA={test:XM("hsl","hue"),parse:JM("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+CM.transform(ZM(e))+", "+CM.transform(ZM(n))+", "+ZM(MM.transform(r))+")"},iA={test:t=>eA.test(t)||nA.test(t)||rA.test(t),parse:t=>eA.test(t)?eA.parse(t):rA.test(t)?rA.parse(t):nA.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?eA.transform(t):rA.transform(t)},sA=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,oA="number",aA="color",cA=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lA(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(cA,t=>(iA.test(t)?(r.color.push(s),i.push(aA),n.push(iA.parse(t))):t.startsWith("var(")?(r.var.push(s),i.push("var"),n.push(t)):(r.number.push(s),i.push(oA),n.push(parseFloat(t))),++s,"${}")).split("${}");return{values:n,split:o,indexes:r,types:i}}function uA(t){return lA(t).values}function dA(t){const{split:e,types:n}=lA(t),r=e.length;return t=>{let i="";for(let s=0;s<r;s++)if(i+=e[s],void 0!==t[s]){const e=n[s];i+=e===oA?ZM(t[s]):e===aA?iA.transform(t[s]):t[s]}return i}}const hA=t=>"number"==typeof t?0:t,fA={test:function(t){var e,n;return isNaN(t)&&"string"==typeof t&&((null===(e=t.match(GM))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(sA))||void 0===n?void 0:n.length)||0)>0},parse:uA,createTransformer:dA,getAnimatableNone:function(t){const e=uA(t);return dA(t)(e.map(hA))}},mA=new Set(["brightness","contrast","saturate","opacity"]);function pA(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[r]=n.match(GM)||[];if(!r)return t;const i=n.replace(r,"");let s=mA.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const gA=/\b([a-z-]*)\(.*?\)/gu,wA={...fA,getAnimatableNone:t=>{const e=t.match(gA);return e?e.map(pA).join(" "):t}},yA={borderWidth:TM,borderTopWidth:TM,borderRightWidth:TM,borderBottomWidth:TM,borderLeftWidth:TM,borderRadius:TM,radius:TM,borderTopLeftRadius:TM,borderTopRightRadius:TM,borderBottomRightRadius:TM,borderBottomLeftRadius:TM,width:TM,maxWidth:TM,height:TM,maxHeight:TM,top:TM,right:TM,bottom:TM,left:TM,padding:TM,paddingTop:TM,paddingRight:TM,paddingBottom:TM,paddingLeft:TM,margin:TM,marginTop:TM,marginRight:TM,marginBottom:TM,marginLeft:TM,backgroundPositionX:TM,backgroundPositionY:TM},vA={rotate:SM,rotateX:SM,rotateY:SM,rotateZ:SM,scale:AM,scaleX:AM,scaleY:AM,scaleZ:AM,skew:SM,skewX:SM,skewY:SM,distance:TM,translateX:TM,translateY:TM,translateZ:TM,x:TM,y:TM,z:TM,perspective:TM,transformPerspective:TM,opacity:MM,originX:PM,originY:PM,originZ:TM},bA={...kM,transform:Math.round},xA={...yA,...vA,zIndex:bA,size:TM,fillOpacity:MM,strokeOpacity:MM,numOctaves:bA},NA={...xA,color:iA,backgroundColor:iA,outlineColor:iA,fill:iA,stroke:iA,borderColor:iA,borderTopColor:iA,borderRightColor:iA,borderBottomColor:iA,borderLeftColor:iA,filter:wA,WebkitFilter:wA},kA=t=>NA[t];function MA(t,e){let n=kA(t);return n!==wA&&(n=fA),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AA=new Set(["auto","none","0"]);class EA extends YM{constructor(t,e,n,r,i){super(t,e,n,r,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let n=t[a];if("string"==typeof n&&(n=n.trim(),yM(n))){const r=xM(n,e.current);void 0!==r&&(t[a]=r),a===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!jM.has(n)||2!==t.length)return;const[r,i]=t,s=LM(r),o=LM(i);if(s!==o)if(DM(s)&&DM(o))for(let a=0;a<t.length;a++){const e=t[a];"string"==typeof e&&(t[a]=parseFloat(e))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let r=0;r<t.length;r++)fM(t[r])&&n.push(r);n.length&&function(t,e,n){let r,i=0;for(;i<t.length&&!r;){const e=t[i];"string"==typeof e&&!AA.has(e)&&lA(e).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=MA(n,r)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$M[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const r=e[e.length-1];void 0!==r&&t.getValue(n,r).jump(r,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=$M[n](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach(([t,n])=>{e.getValue(t).set(n)}),this.resolveNoneKeyframes()}}function SA(t){return"function"==typeof t}let CA;function TA(){CA=void 0}const IA={now:()=>(void 0===CA&&IA.set(Jk.isProcessing?Jk.timestamp:performance.now()),CA),set:t=>{CA=t,queueMicrotask(TA)}},OA=(t,e)=>!("zIndex"===e||"number"!=typeof t&&!Array.isArray(t)&&("string"!=typeof t||!fA.test(t)&&"0"!==t||t.startsWith("url(")));class PA{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=IA.now(),this.options={autoplay:t,delay:e,type:n,repeat:r,repeatDelay:i,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this.Ge||this.hasAttemptedResolve||(HM(),KM()),this.Ge}onKeyframesResolved(t,e){this.resolvedAt=IA.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:i,delay:s,onComplete:o,onUpdate:a,isGenerator:c}=this.options;if(!c&&!function(t,e,n,r){const i=t[0];if(null===i)return!1;if("display"===e||"visibility"===e)return!0;const s=t[t.length-1],o=OA(i,e),a=OA(s,e);return!(!o||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||SA(n))&&r)}(t,n,r,i)){if(!s)return null==a||a(Kk(t,this.options,e)),null==o||o(),void this.resolveFinishedPromise();this.options.duration=0}const l=this.initPlayback(t,e);!1!==l&&(this.Ge={keyframes:t,finalKeyframe:e,...l},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const jA=(t,e,n)=>{const r=e-t;return 0===r?1:(n-t)/r},DA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(jA(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function zA(t,e){return e?t*(1e3/e):0}function _A(t,e,n){const r=Math.max(e-5,0);return zA(n-t(r),e-r)}function RA(t,e){return t*Math.sqrt(1-e*e)}const BA=2e4;function $A(t){let e=0,n=t.next(e);for(;!n.done&&e<BA;)e+=50,n=t.next(e);return e>=BA?1/0:e}const UA=["duration","bounce"],FA=["stiffness","damping","mass"];function LA(t,e){return e.some(e=>void 0!==t[e])}function WA(t=.3,e=.3){const n="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=function(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!LA(t,FA)&&LA(t,UA))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(1.2*n),i=r*r,s=2*NM(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:1,stiffness:i,damping:s}}else{const n=function({duration:t=800,bounce:e=.3,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=NM(.05,1,o),t=NM(.01,10,$k(t)),o<1?(i=e=>{const r=e*o,i=r*t;return.001-(r-n)/RA(e,o)*Math.exp(-i)},s=e=>{const r=e*o*t,s=r*n+n,a=Math.pow(o,2)*Math.pow(e,2)*t,c=Math.exp(-r),l=RA(Math.pow(e,2),o);return(.001-i(e)>0?-1:1)*((s-a)*c)/l}):(i=e=>Math.exp(-e*t)*((e-n)*t+1)-.001,s=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let r=n;for(let i=1;i<12;i++)r-=t(r)/e(r);return r}(i,s,5/t);if(t=Bk(t),isNaN(a))return{stiffness:100,damping:10,duration:t};{const e=Math.pow(a,2)*r;return{stiffness:e,damping:2*o*Math.sqrt(r*e),duration:t}}}(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}({...n,velocity:-$k(n.velocity||0)}),m=h||0,p=l/(2*Math.sqrt(c*u)),g=o-s,w=$k(Math.sqrt(c/u)),y=Math.abs(g)<5;let v;if(r||(r=y?.01:2),i||(i=y?.005:.5),p<1){const t=RA(w,p);v=e=>{const n=Math.exp(-p*w*e);return o-n*((m+p*w*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===p)v=t=>o-Math.exp(-w*t)*(g+(m+w*g)*t);else{const t=w*Math.sqrt(p*p-1);v=e=>{const n=Math.exp(-p*w*e),r=Math.min(t*e,300);return o-n*((m+p*w*g)*Math.sinh(r)+t*g*Math.cosh(r))/t}}const b={calculatedDuration:f&&d||null,next:t=>{const e=v(t);if(f)a.done=t>=d;else{let n=0;p<1&&(n=0===t?Bk(m):_A(v,t,e));const s=Math.abs(n)<=r,c=Math.abs(o-e)<=i;a.done=s&&c}return a.value=a.done?o:e,a},toString:()=>{const t=Math.min($A(b),BA),e=DA(e=>b.next(t*e).value,t,30);return t+"ms "+e}};return b}function VA({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=t=>void 0===a?c:void 0===c||Math.abs(a-t)<Math.abs(c-t)?a:c;let m=n*e;const p=d+m,g=void 0===o?p:o(p);g!==p&&(m=g-d);const w=t=>-m*Math.exp(-t/r),y=t=>g+w(t),v=t=>{const e=w(t),n=y(t);h.done=Math.abs(e)<=l,h.value=h.done?g:n};let b,x;const N=t=>{var e;e=h.value,(void 0!==a&&e<a||void 0!==c&&e>c)&&(b=t,x=WA({keyframes:[h.value,f(h.value)],velocity:_A(y,t,h.value),damping:i,stiffness:s,restDelta:l,restSpeed:u}))};return N(0),{calculatedDuration:null,next:t=>{let e=!1;return x||void 0!==b||(e=!0,v(t),N(t)),void 0!==b&&t>=b?x.next(t-b):(!e&&v(t),h)}}}const qA=nM(.42,0,1,1),KA=nM(0,0,.58,1),HA=nM(.42,0,.58,1),YA=t=>Array.isArray(t)&&"number"==typeof t[0],ZA={linear:Hk,easeIn:qA,easeInOut:HA,easeOut:KA,circIn:lM,circInOut:dM,circOut:uM,backIn:oM,backInOut:aM,backOut:sM,anticipate:cM},GA=t=>{if(YA(t)){Yk(4===t.length);const[e,n,r,i]=t;return nM(e,n,r,i)}return"string"==typeof t?(Yk(void 0!==ZA[t]),ZA[t]):t},QA=(t,e)=>n=>e(t(n)),XA=(...t)=>t.reduce(QA),JA=(t,e,n)=>t+(e-t)*n;function tE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eE(t,e){return n=>n>0?e:t}const nE=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},rE=[nA,eA,rA];function iE(t){const e=(n=t,rE.find(t=>t.test(n)));var n;if(!Boolean(e))return!1;let r=e.parse(t);return e===rA&&(r=function({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,n/=100;let i=0,s=0,o=0;if(e/=100){const r=n<.5?n*(1+e):n+e-n*e,a=2*n-r;i=tE(a,r,t+1/3),s=tE(a,r,t),o=tE(a,r,t-1/3)}else i=s=o=n;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*o),alpha:r}}(r)),r}const sE=(t,e)=>{const n=iE(t),r=iE(e);if(!n||!r)return eE(t,e);const i={...n};return t=>(i.red=nE(n.red,r.red,t),i.green=nE(n.green,r.green,t),i.blue=nE(n.blue,r.blue,t),i.alpha=JA(n.alpha,r.alpha,t),eA.transform(i))},oE=new Set(["none","hidden"]);function aE(t,e){return n=>JA(t,e,n)}function cE(t){return"number"==typeof t?aE:"string"==typeof t?yM(t)?eE:iA.test(t)?sE:dE:Array.isArray(t)?lE:"object"==typeof t?iA.test(t)?sE:uE:eE}function lE(t,e){const n=[...t],r=n.length,i=t.map((t,n)=>cE(t)(t,e[n]));return t=>{for(let e=0;e<r;e++)n[e]=i[e](t);return n}}function uE(t,e){const n={...t,...e},r={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=cE(t[i])(t[i],e[i]));return t=>{for(const e in r)n[e]=r[e](t);return n}}const dE=(t,e)=>{const n=fA.createTransformer(e),r=lA(t),i=lA(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?oE.has(t)&&!i.values.length||oE.has(e)&&!r.values.length?function(t,e){return oE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):XA(lE(function(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],c=null!==(n=t.values[a])&&void 0!==n?n:0;r[s]=c,i[o]++}return r}(r,i),i.values),n):eE(t,e)};function hE(t,e,n){return"number"==typeof t&&"number"==typeof e&&"number"==typeof n?JA(t,e,n):cE(t)(t,e)}function fE({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=(t=>Array.isArray(t)&&"number"!=typeof t[0])(r)?r.map(GA):GA(r),s={done:!1,value:e[0]},o=function(t,e){return t.map(t=>t*e)}(n&&n.length===e.length?n:function(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=jA(0,e,r);t.push(JA(n,1,i))}}(e,t.length-1),e}(e),t),a=function(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Yk(s===e.length),1===s)return()=>e[0];if(2===s&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=function(t,e,n){const r=[],i=n||hE,s=t.length-1;for(let o=0;o<s;o++){let n=i(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||Hk:e;n=XA(t,n)}r.push(n)}return r}(e,r,i),a=o.length,c=e=>{let n=0;if(a>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const r=jA(t[n],t[n+1],e);return o[n](r)};return n?e=>c(NM(t[0],t[s-1],e)):c}(o,e,{ease:Array.isArray(i)?i:(c=e,l=i,c.map(()=>l||HA).splice(0,c.length-1))});var c,l;return{calculatedDuration:t,next:e=>(s.value=a(e),s.done=e>=t,s)}}const mE=t=>{const e=({timestamp:e})=>t(e);return{start:()=>Qk.update(e,!0),stop:()=>Xk(e),now:()=>Jk.isProcessing?Jk.timestamp:IA.now()}},pE={decay:VA,inertia:VA,tween:fE,keyframes:fE,spring:WA},gE=t=>t/100;class wE extends PA{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()};const{name:e,motionValue:n,element:r,keyframes:i}=this.options,s=(null==r?void 0:r.KeyframeResolver)||YM;this.resolver=new s(i,(t,e)=>this.onKeyframesResolved(t,e),e,n,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this.Ge&&Object.assign(this.Ge,this.initPlayback(this.Ge.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i,velocity:s=0}=this.options,o=SA(e)?e:pE[e]||fE;let a,c;o!==fE&&"number"!=typeof t[0]&&(a=XA(gE,hE(t[0],t[1])),t=[0,100]);const l=o({...this.options,keyframes:t});"mirror"===i&&(c=o({...this.options,keyframes:[...t].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=$A(l));const{calculatedDuration:u}=l,d=u+r;return{generator:l,mirroredGenerator:c,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-r}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}const{finalKeyframe:r,generator:i,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:c,totalDuration:l,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:d,repeat:h,repeatType:f,repeatDelay:m,onUpdate:p}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-l/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),w=this.speed>=0?g<0:g>l;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=l);let y=this.currentTime,v=i;if(h){const t=Math.min(this.currentTime,l)/u;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,h+1),Boolean(e%2)&&("reverse"===f?(n=1-n,m&&(n-=m/u)):"mirror"===f&&(v=s)),y=NM(0,1,n)*u}const b=w?{done:!1,value:a[0]}:v.next(y);o&&(b.value=o(b.value));let{done:x}=b;w||null===c||(x=this.speed>=0?this.currentTime>=l:this.currentTime<=0);const N=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return N&&void 0!==r&&(b.value=Kk(a,this.options,r)),p&&p(b.value),N&&this.finish(),b}get duration(){const{resolved:t}=this;return t?$k(t.calculatedDuration):0}get time(){return $k(this.currentTime)}set time(t){t=Bk(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=$k(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this.Ge)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=mE,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(t=>this.tick(t))),e&&e();const r=this.driver.now();null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=r):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;this.Ge?(this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const yE=new Set(["opacity","clipPath","filter","transform"]);function vE(t){let e;return()=>(void 0===e&&(e=t()),e)}const bE={linearEasing:void 0};function xE(t,e){const n=vE(t);return()=>{var t;return null!==(t=bE[e])&&void 0!==t?t:n()}}const NE=xE(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0},"linearEasing");function kE(t){return Boolean("function"==typeof t&&NE()||!t||"string"==typeof t&&(t in AE||NE())||YA(t)||Array.isArray(t)&&t.every(kE))}const ME=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,AE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ME([0,.65,.55,1]),circOut:ME([.55,0,1,.45]),backIn:ME([.31,.01,.66,-.59]),backOut:ME([.33,1.53,.69,.99])};function EE(t,e){return t?"function"==typeof t&&NE()?DA(t,e):YA(t)?ME(t):Array.isArray(t)?t.map(t=>EE(t,e)||AE.easeOut):AE[t]:void 0}function SE(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:c}={}){const l={[e]:n};c&&(l.offset=c);const u=EE(a,i);return Array.isArray(u)&&(l.easing=u),t.animate(l,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===o?"alternate":"normal"})}function CE(t,e){t.timeline=e,t.onfinish=null}const TE=vE(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IE={anticipate:cM,backInOut:aM,circInOut:dM};class OE extends PA{constructor(t){super(t);const{name:e,motionValue:n,element:r,keyframes:i}=this.options;this.resolver=new EA(i,(t,e)=>this.onKeyframesResolved(t,e),e,n,r),this.resolver.scheduleResolve()}initPlayback(t,e){var n;let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:c,startTime:l}=this.options;if(!(null===(n=a.owner)||void 0===n?void 0:n.current))return!1;if("string"==typeof s&&NE()&&s in IE&&(s=IE[s]),function(t){return SA(t.type)||"spring"===t.type||!kE(t.ease)}(this.options)){const{onComplete:e,onUpdate:n,motionValue:a,element:c,...l}=this.options,u=function(t,e){const n=new wE({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<2e4;)r=n.sample(s),i.push(r.value),s+=10;return{times:void 0,keyframes:i,duration:s-10,ease:"linear"}}(t,l);1===(t=u.keyframes).length&&(t[1]=t[0]),r=u.duration,i=u.times,s=u.ease,o="keyframes"}const u=SE(a.owner.current,c,t,{...this.options,duration:r,times:i,ease:s});return u.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(CE(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;a.set(Kk(t,this.options,e)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return $k(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return $k(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=Bk(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(this.Ge){const{resolved:e}=this;if(!e)return Hk;const{animation:n}=e;CE(n,t)}else this.pendingTimeline=t;return Hk}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:r,type:i,ease:s,times:o}=t;if("idle"===e.playState||"finished"===e.playState)return;if(this.time){const{motionValue:t,onUpdate:e,onComplete:a,element:c,...l}=this.options,u=new wE({...l,keyframes:n,duration:r,type:i,ease:s,times:o,isGenerator:!0}),d=Bk(this.time);t.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;return TE()&&n&&yE.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!r&&"mirror"!==i&&0!==s&&"inertia"!==o}}const PE=vE(()=>void 0!==window.ScrollTimeline);class jE{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(n=>PE()&&n.attachTimeline?n.attachTimeline(t):e(n));return()=>{n.forEach((t,e)=>{t&&t(),this.animations[e].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const DE=(t,e,n,r={},i,s)=>o=>{const a=Vk(r,t)||{},c=a.delay||r.delay||0;let{elapsed:l=0}=r;l-=Bk(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};(function({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length})(a)||(u={...u,...Wk(t,u)}),u.duration&&(u.duration=Bk(u.duration)),u.repeatDelay&&(u.repeatDelay=Bk(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),d&&!s&&void 0!==e.get()){const t=Kk(u.keyframes,a);if(void 0!==t)return Qk.update(()=>{u.onUpdate(t),u.onComplete()}),new jE([])}return!s&&OE.supports(u)?new OE(u):new wE(u)},zE=t=>Ck(t)?t[t.length-1]||0:t;function _E(t,e){-1===t.indexOf(e)&&t.push(e)}function RE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class BE{constructor(){this.subscriptions=[]}add(t){return _E(this.subscriptions,t),()=>RE(this.subscriptions,t)}notify(t,e,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(let i=0;i<r;i++){const r=this.subscriptions[i];r&&r(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class $E{constructor(t,e={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(t,e=!0)=>{const n=IA.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){var e;this.current=t,this.updatedAt=IA.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new BE);const n=this.events[t].add(e);return"change"===t?()=>{n(),Qk.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=IA.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return zA(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function UE(t,e){return new $E(t,e)}function FE(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,UE(n))}const LE=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),WE="data-"+LE("framerAppearId");function VE(t){return t.props[WE]}const qE=t=>Boolean(t&&t.getVelocity);function KE(t,e){const n=t.getValue("willChange");if(r=n,Boolean(qE(r)&&r.add))return n.add(e);var r}function HE({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,r}function YE(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...c}=e;r&&(o=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in c){const e=t.getValue(d,null!==(s=t.latestValues[d])&&void 0!==s?s:null),r=c[d];if(void 0===r||u&&HE(u,d))continue;const i={delay:n,...Vk(o||{},d)};let a=!1;if(window.MotionHandoffAnimation){const e=VE(t);if(e){const t=window.MotionHandoffAnimation(e,d,Qk);null!==t&&(i.startTime=t,a=!0)}}KE(t,d),e.start(DE(d,e,r,t.shouldReduceMotion&&Rk.has(d)?{type:!1}:i,t,a));const h=e.animation;h&&l.push(h)}return a&&Promise.all(l).then(()=>{Qk.update(()=>{a&&function(t,e){const n=jk(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s)FE(t,o,zE(s[o]))}(t,a)})}),l}function ZE(t,e,n={}){var r;const i=jk(t,e,"exit"===n.type?null===(r=t.presenceContext)||void 0===r?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(YE(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(r=0)=>{const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,c=1===i?(t=0)=>t*r:(t=0)=>a-t*r;return Array.from(t.variantChildren).sort(GE).forEach((t,r)=>{t.notify("AnimationStart",e),o.push(ZE(t,e,{...s,delay:n+c(r)}).then(()=>t.notify("AnimationComplete",e)))}),Promise.all(o)}(t,e,i+r,o,a,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[t,e]="beforeChildren"===c?[o,a]:[a,o];return t().then(()=>e())}return Promise.all([o(),a(n.delay)])}function GE(t,e){return t.sortNodePosition(e)}const QE=zk.length;function XE(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&XE(t.parent)||{};return void 0!==t.props.initial&&(e.initial=t.props.initial),e}const e={};for(let n=0;n<QE;n++){const r=zk[n],i=t.props[r];(Ik(i)||!1===i)&&(e[r]=i)}return e}const JE=[...Dk].reverse(),tS=Dk.length;function eS(t){let e=function(t){return e=>Promise.all(e.map(({animation:e,options:n})=>function(t,e,n={}){let r;if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map(e=>ZE(t,e,n));r=Promise.all(i)}else if("string"==typeof e)r=ZE(t,e,n);else{const i="function"==typeof e?jk(t,e,n.custom):e;r=Promise.all(YE(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}(t,e,n)))}(t),n=iS(),r=!0;const i=e=>(n,r)=>{var i;const s=jk(t,r,"exit"===e?null===(i=t.presenceContext)||void 0===i?void 0:i.custom:void 0);if(s){const{transition:t,transitionEnd:e,...r}=s;n={...n,...r,...e}}return n};function s(s){const{props:o}=t,a=XE(t.parent)||{},c=[],l=new Set;let u={},d=1/0;for(let e=0;e<tS;e++){const h=JE[e],f=n[h],m=void 0!==o[h]?o[h]:a[h],p=Ik(m),g=h===s?f.isActive:null;!1===g&&(d=e);let w=m===a[h]&&m!==o[h]&&p;if(w&&r&&t.manuallyAnimateOnMount&&(w=!1),f.protectedKeys={...u},!f.isActive&&null===g||!m&&!f.prevProp||Sk(m)||"boolean"==typeof m)continue;const y=nS(f.prevProp,m);let v=y||h===s&&f.isActive&&!w&&p||e>d&&p,b=!1;const x=Array.isArray(m)?m:[m];let N=x.reduce(i(h),{});!1===g&&(N={});const{prevResolvedValues:k={}}=f,M={...k,...N},A=e=>{v=!0,l.has(e)&&(b=!0,l.delete(e)),f.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in M){const e=N[t],n=k[t];if(u.hasOwnProperty(t))continue;let r=!1;r=Ck(e)&&Ck(n)?!Tk(e,n):e!==n,r?null!=e?A(t):l.add(t):void 0!==e&&l.has(t)?A(t):f.protectedKeys[t]=!0}f.prevProp=m,f.prevResolvedValues=N,f.isActive&&(u={...u,...N}),r&&t.blockInitialAnimation&&(v=!1),v&&(!w||!y||b)&&c.push(...x.map(t=>({animation:t,options:{type:h}})))}if(l.size){const e={};l.forEach(n=>{const r=t.getBaseTarget(n),i=t.getValue(n);i&&(i.liveStyle=!0),e[n]=null!=r?r:null}),c.push({animation:e})}let h=Boolean(c.length);return!r||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(h=!1),r=!1,h?e(c):Promise.resolve()}return{animateChanges:s,setActive:function(e,r){var i;if(n[e].isActive===r)return Promise.resolve();null===(i=t.variantChildren)||void 0===i||i.forEach(t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)}),n[e].isActive=r;const o=s(e);for(const t in n)n[t].protectedKeys={};return o},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=iS(),r=!0}}}function nS(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!Tk(e,t)}function rS(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function iS(){return{animate:rS(!0),whileInView:rS(),whileHover:rS(),whileTap:rS(),whileDrag:rS(),whileFocus:rS(),exit:rS()}}class sS{constructor(t){this.isMounted=!1,this.node=t}update(){}}let oS=0;const aS={animation:{Feature:class extends sS{constructor(t){super(t),t.animationState||(t.animationState=eS(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Sk(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),null===(t=this.unmountControls)||void 0===t||t.call(this)}}},exit:{Feature:class extends sS{constructor(){super(...arguments),this.id=oS++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const r=this.node.animationState.setActive("exit",!t);e&&!t&&r.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},cS={x:!1,y:!1};function lS(){return cS.x||cS.y}function uS(t){return e=>{"touch"===e.pointerType||lS()||t(e)}}const dS=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary;function hS(t){return{point:{x:t.pageX,y:t.pageY}}}function fS(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function mS(t,e,n,r){return fS(t,e,(t=>e=>dS(e)&&t(e,hS(e)))(n),r)}const pS=(t,e)=>Math.abs(t-e);class gS{constructor(t,e,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=vS(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=pS(t.x,e.x),r=pS(t.y,e.y);return Math.sqrt(n**2+r**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:r}=t,{timestamp:i}=Jk;this.history.push({...r,timestamp:i});const{onStart:s,onMove:o}=this.handlers;e||(s&&s(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=wS(e,this.transformPagePoint),Qk.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=vS("pointercancel"===t.type?this.lastMoveEventInfo:wS(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,s),r&&r(t,s)},!dS(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=r||window;const s=wS(hS(t),this.transformPagePoint),{point:o}=s,{timestamp:a}=Jk;this.history=[{...o,timestamp:a}];const{onSessionStart:c}=e;c&&c(t,vS(s,this.history)),this.removeListeners=XA(mS(this.contextWindow,"pointermove",this.handlePointerMove),mS(this.contextWindow,"pointerup",this.handlePointerUp),mS(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xk(this.updatePoint)}}function wS(t,e){return e?{point:e(t.point)}:t}function yS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function vS({point:t},e){return{point:t,delta:yS(t,xS(e)),offset:yS(t,bS(e)),velocity:NS(e,.1)}}function bS(t){return t[0]}function xS(t){return t[t.length-1]}function NS(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=xS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Bk(e)));)n--;if(!r)return{x:0,y:0};const s=$k(i.timestamp-r.timestamp);if(0===s)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function kS(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function MS(t){return t.max-t.min}function AS(t,e,n,r=.5){t.origin=r,t.originPoint=JA(e.min,e.max,t.origin),t.scale=MS(n)/MS(e),t.translate=JA(n.min,n.max,t.origin)-t.originPoint,(t.scale>=.9999&&t.scale<=1.0001||isNaN(t.scale))&&(t.scale=1),(t.translate>=-.01&&t.translate<=.01||isNaN(t.translate))&&(t.translate=0)}function ES(t,e,n,r){AS(t.x,e.x,n.x,r?r.originX:void 0),AS(t.y,e.y,n.y,r?r.originY:void 0)}function SS(t,e,n){t.min=n.min+e.min,t.max=t.min+MS(e)}function CS(t,e,n){t.min=e.min-n.min,t.max=t.min+MS(e)}function TS(t,e,n){CS(t.x,e.x,n.x),CS(t.y,e.y,n.y)}function IS(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function OS(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}const PS=.35;function jS(t,e,n){return{min:DS(t,e),max:DS(t,n)}}function DS(t,e){return"number"==typeof t?t:t[e]||0}const zS=()=>({x:{min:0,max:0},y:{min:0,max:0}});function _S(t){return[t("x"),t("y")]}function RS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function BS(t){return void 0===t||1===t}function $S({scale:t,scaleX:e,scaleY:n}){return!BS(t)||!BS(e)||!BS(n)}function US(t){return $S(t)||FS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function FS(t){return LS(t.x)||LS(t.y)}function LS(t){return t&&"0%"!==t}function WS(t,e,n){return n+e*(t-n)}function VS(t,e,n,r,i){return void 0!==i&&(t=WS(t,i,r)),WS(t,n,r)+e}function qS(t,e=0,n=1,r,i){t.min=VS(t.min,e,n,r,i),t.max=VS(t.max,e,n,r,i)}function KS(t,{x:e,y:n}){qS(t.x,e.translate,e.scale,e.originPoint),qS(t.y,n.translate,n.scale,n.originPoint)}const HS=.999999999999,YS=1.0000000000001;function ZS(t,e){t.min=t.min+e,t.max=t.max+e}function GS(t,e,n,r,i=.5){qS(t,e,n,JA(t.min,t.max,i),r)}function QS(t,e){GS(t.x,e.x,e.scaleX,e.scale,e.originX),GS(t.y,e.y,e.scaleY,e.scale,e.originY)}function XS(t,e){return RS(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(t.getBoundingClientRect(),e))}const JS=({current:t})=>t?t.ownerDocument.defaultView:null,tC=new WeakMap;class eC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new gS(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(hS(t).point)},onStart:(t,e)=>{const{drag:n,dragPropagation:r,onDragStart:i}=this.getProps();if(n&&!r&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(s=n)||"y"===s?cS[s]?null:(cS[s]=!0,()=>{cS[s]=!1}):cS.x||cS.y?null:(cS.x=cS.y=!0,()=>{cS.x=cS.y=!1}),!this.openDragLock))return;var s;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_S(t=>{let e=this.getAxisMotionValue(t).get()||0;if(CM.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[t];r&&(e=MS(r)*(parseFloat(e)/100))}}this.originPoint[t]=e}),i&&Qk.postRender(()=>i(t,e)),KE(this.visualElement,"transform");const{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:i,onDrag:s}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:o}=e;if(r&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),s&&s(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>_S(t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:JS(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=e;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Qk.postRender(()=>i(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:r}=this.getProps();if(!n||!nC(t,r,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(s=function(t,{min:e,max:n},r){return void 0!==e&&t<e?t=r?JA(e,t,r.min):Math.max(t,e):void 0!==n&&t>n&&(t=r?JA(n,t,r.max):Math.min(t,n)),t}(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,i=this.constraints;e&&kS(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!r)&&function(t,{top:e,left:n,bottom:r,right:i}){return{x:IS(t.x,n,i),y:IS(t.y,e,r)}}(r.layoutBox,e),this.elastic=function(t=PS){return!1===t?t=0:!0===t&&(t=PS),{x:jS(t,"left","right"),y:jS(t,"top","bottom")}}(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_S(t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(r.layoutBox[t],this.constraints[t]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!kS(t))return!1;const n=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=function(t,e,n){const r=XS(t,n),{scroll:i}=e;return i&&(ZS(r.x,i.offset.x),ZS(r.y,i.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let s=function(t,e){return{x:OS(t.x,e.x),y:OS(t.y,e.y)}}(r.layout.layoutBox,i);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(s));this.hasMutatedConstraints=!!t,t&&(s=RS(t))}return s}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:r,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},c=_S(o=>{if(!nC(o,e,this.currentDirection))return;let c=a&&a[o]||{};s&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,d={type:"inertia",velocity:n?t[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...c};return this.startAxisValueAnimation(o,d)});return Promise.all(c).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return KE(this.visualElement,t),n.start(DE(t,n,0,e,this.visualElement,!1))}stopAnimation(){_S(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){_S(t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()})}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps();return n[e]||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){_S(e=>{const{drag:n}=this.getProps();if(!nC(e,n,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(e);if(r&&r.layout){const{min:n,max:s}=r.layout.layoutBox[e];i.set(t[e]-JA(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!kS(e)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};_S(t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();r[t]=function(t,e){let n=.5;const r=MS(t),i=MS(e);return i>r?n=jA(e.min,e.max-r,t.min):r>i&&(n=jA(t.min,t.max-i,e.min)),NM(0,1,n)}({min:n,max:n},this.constraints[t])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),_S(e=>{if(!nC(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:s}=this.constraints[e];n.set(JA(i,s,r[e]))})}addListeners(){if(!this.visualElement.current)return;tC.set(this.visualElement,this);const t=mS(this.visualElement.current,"pointerdown",t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)}),e=()=>{const{dragConstraints:t}=this.getProps();kS(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),Qk.read(e);const i=fS(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(_S(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{i(),t(),r(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:s=PS,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:r,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function nC(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}const rC=t=>(e,n)=>{t&&Qk.postRender(()=>t(e,n))},iC=Ct.createContext(null),sC=Ct.createContext({}),oC=Ct.createContext({}),aC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function cC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const lC={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!TM.test(t))return t;t=parseFloat(t)}return`${cC(t,e.target.x)}% ${cC(t,e.target.y)}%`}},uC={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=fA.parse(t);if(i.length>5)return r;const s=fA.createTransformer(t),o="number"!=typeof i[0]?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const l=JA(a,c,.5);return"number"==typeof i[2+o]&&(i[2+o]/=l),"number"==typeof i[3+o]&&(i[3+o]/=l),s(i)}},dC={},{schedule:hC,cancel:fC}=Gk(queueMicrotask,!1);class mC extends Ct.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:r}=this.props,{projection:i}=t;var s;s=gC,Object.assign(dC,s),i&&(e.group&&e.group.add(i),n&&n.register&&r&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),aC.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:r,isPresent:i}=this.props,s=n.projection;return s?(s.isPresent=i,r||t.layoutDependency!==e||void 0===e?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||Qk.postRender(()=>{const t=s.getStack();t&&t.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),hC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function pC(t){const[e,n]=function(){const t=Ct.useContext(iC);if(null===t)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=Ct.useId();Ct.useEffect(()=>r(i),[]);const s=Ct.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}(),r=Ct.useContext(sC);return Gt.jsx(mC,{...t,layoutGroup:r,switchLayoutGroup:Ct.useContext(oC),isPresent:e,safeToRemove:n})}const gC={borderRadius:{...lC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lC,borderTopRightRadius:lC,borderBottomLeftRadius:lC,borderBottomRightRadius:lC,boxShadow:uC},wC=["TopLeft","TopRight","BottomLeft","BottomRight"],yC=wC.length,vC=t=>"string"==typeof t?parseFloat(t):t,bC=t=>"number"==typeof t||TM.test(t);function xC(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const NC=MC(0,.5,uM),kC=MC(.5,.95,Hk);function MC(t,e,n){return r=>r<t?0:r>e?1:n(jA(t,e,r))}function AC(t,e){t.min=e.min,t.max=e.max}function EC(t,e){AC(t.x,e.x),AC(t.y,e.y)}function SC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function CC(t,e,n,r,i){return t=WS(t-=e,1/n,r),void 0!==i&&(t=WS(t,1/i,r)),t}function TC(t,e,[n,r,i],s,o){!function(t,e=0,n=1,r=.5,i,s=t,o=t){if(CM.test(e)&&(e=parseFloat(e),e=JA(o.min,o.max,e/100)-o.min),"number"!=typeof e)return;let a=JA(s.min,s.max,r);t===s&&(a-=e),t.min=CC(t.min,e,n,a,i),t.max=CC(t.max,e,n,a,i)}(t,e[n],e[r],e[i],e.scale,s,o)}const IC=["x","scaleX","originX"],OC=["y","scaleY","originY"];function PC(t,e,n,r){TC(t.x,e,IC,n?n.x:void 0,r?r.x:void 0),TC(t.y,e,OC,n?n.y:void 0,r?r.y:void 0)}function jC(t){return 0===t.translate&&1===t.scale}function DC(t){return jC(t.x)&&jC(t.y)}function zC(t,e){return t.min===e.min&&t.max===e.max}function _C(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function RC(t,e){return _C(t.x,e.x)&&_C(t.y,e.y)}function BC(t){return MS(t.x)/MS(t.y)}function $C(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class UC{constructor(){this.members=[]}add(t){_E(this.members,t),t.scheduleRender()}remove(t){if(RE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex(e=>t===e);if(0===e)return!1;let n;for(let r=e;r>=0;r--){const t=this.members[r];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const FC=(t,e)=>t.depth-e.depth;class LC{constructor(){this.children=[],this.isDirty=!1}add(t){_E(this.children,t),this.isDirty=!0}remove(t){RE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(FC),this.isDirty=!1,this.children.forEach(t)}}function WC(t){const e=qE(t)?t.get():t;return n=e,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const VC={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},qC="undefined"!=typeof window&&void 0!==window.MotionDebug,KC=["","X","Y","Z"],HC={visibility:"hidden"};let YC=0;function ZC(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function GC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=VE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Qk,!(e||r))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&GC(r)}function QC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(t={},n=(null==e?void 0:e())){this.id=YC++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qC&&(VC.totalNodes=VC.resolvedTargetDeltas=VC.recalculatedProjection=0),this.nodes.forEach(tT),this.nodes.forEach(aT),this.nodes.forEach(cT),this.nodes.forEach(eT),qC&&window.MotionDebug.record(VC)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new LC)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new BE),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e,n=this.root.hasTreeAnimated){if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:i,layout:s,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||i)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t){const e=IA.now(),n=({timestamp:r})=>{const i=r-e;i>=250&&(Xk(n),t(i-250))};return Qk.read(n,!0),()=>Xk(n)}(r),aC.hasAnimatedSinceResize&&(aC.hasAnimatedSinceResize=!1,this.nodes.forEach(oT))})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||s)&&this.addEventListener("didUpdate",({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:n,layout:r})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||mT,{onLayoutAnimationStart:s,onLayoutAnimationComplete:a}=o.getProps(),c=!this.targetLayout||!RC(this.targetLayout,r)||n,l=!e&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||l||e&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,l);const e={...Vk(i,"layout"),onPlay:s,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||oT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xk(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lT),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(rT);this.isUpdating||this.nodes.forEach(iT),this.isUpdating=!1,this.nodes.forEach(sT),this.nodes.forEach(XC),this.nodes.forEach(JC),this.clearAllSnapshots();const t=IA.now();Jk.delta=NM(0,1e3/60,t-Jk.timestamp),Jk.timestamp=t,Jk.isProcessing=!0,tM.update.process(Jk),tM.preRender.process(Jk),tM.render.process(Jk),Jk.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nT),this.sharedNodes.forEach(uT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qk.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qk.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++)this.path[n].updateScroll();const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e){const e=r(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!i)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!DC(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;t&&(e||US(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var r;return t&&(n=this.removeTransform(n)),wT((r=n).x),wT(r.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var t;const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const n=e.measureViewportBox();if(!(null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)&&!this.path.some(vT)){const{scroll:t}=this.root;t&&(ZS(n.x,t.offset.x),ZS(n.y,t.offset.y))}return n}removeElementScroll(t){var e;const n={x:{min:0,max:0},y:{min:0,max:0}};if(EC(n,t),null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)return n;for(let r=0;r<this.path.length;r++){const e=this.path[r],{scroll:i,options:s}=e;e!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&EC(n,t),ZS(n.x,i.offset.x),ZS(n.y,i.offset.y))}return n}applyTransform(t,e=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};EC(n,t);for(let r=0;r<this.path.length;r++){const t=this.path[r];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&QS(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),US(t.latestValues)&&QS(n,t.latestValues)}return US(this.latestValues)&&QS(n,this.latestValues),n}removeTransform(t){const e={x:{min:0,max:0},y:{min:0,max:0}};EC(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!US(t.latestValues))continue;$S(t.latestValues)&&t.updateSnapshot();const r=zS();EC(r,t.measurePageBox()),PC(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,r)}return US(this.latestValues)&&PC(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Jk.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=Jk.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},TS(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),EC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,c;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,c=this.relativeParent.target,SS(o.x,a.x,c.x),SS(o.y,a.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):EC(this.target,this.layout.layoutBox),KS(this.target,this.targetDelta)):EC(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},TS(this.relativeTargetOrigin,this.target,t.target),EC(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qC&&VC.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!$S(this.parent.latestValues)&&!FS(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Jk.timestamp&&(r=!1),r)return;const{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!s)return;EC(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(t,e,n,r=!1){const i=n.length;if(!i)return;let s,o;e.x=e.y=1;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:i}=s.options;i&&i.props.style&&"contents"===i.props.style.display||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&QS(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,KS(t,o)),r&&US(s.latestValues)&&QS(t,s.latestValues))}e.x<YS&&e.x>HS&&(e.x=1),e.y<YS&&e.y>HS&&(e.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:c}=e;c?(this.projectionDelta&&this.prevProjectionDelta?(SC(this.prevProjectionDelta.x,this.projectionDelta.x),SC(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ES(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&$C(this.projectionDelta.x,this.prevProjectionDelta.x)&&$C(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),qC&&VC.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){var e;if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(t,e=!1){const n=this.snapshot,r=n?n.latestValues:{},i={...this.latestValues},s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(fT));let d;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;var c,h,f,m,p,g;dT(s.x,t.x,n),dT(s.y,t.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(TS(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),f=this.relativeTarget,m=this.relativeTargetOrigin,p=o,g=n,hT(f.x,m.x,p.x,g),hT(f.y,m.y,p.y,g),d&&(c=this.relativeTarget,h=d,zC(c.x,h.x)&&zC(c.y,h.y))&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),EC(d,this.relativeTarget)),a&&(this.animationValues=i,function(t,e,n,r,i,s){i?(t.opacity=JA(0,void 0!==n.opacity?n.opacity:1,NC(r)),t.opacityExit=JA(void 0!==e.opacity?e.opacity:1,0,kC(r))):s&&(t.opacity=JA(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<yC;o++){const i=`border${wC[o]}Radius`;let s=xC(e,i),a=xC(n,i);void 0===s&&void 0===a||(s||(s=0),a||(a=0),0===s||0===a||bC(s)===bC(a)?(t[i]=Math.max(JA(vC(s),vC(a),r),0),(CM.test(a)||CM.test(s))&&(t[i]+="%")):t[i]=a)}(e.rotate||n.rotate)&&(t.rotate=JA(e.rotate||0,n.rotate||0,r))}(i,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xk(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qk.update(()=>{aC.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n){const r=qE(0)?0:UE(0);return r.start(DE("",r,1e3,n)),r.animation}(0,0,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:r,latestValues:i}=t;if(e&&n&&r){if(this!==t&&this.layout&&r&&yT(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=MS(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const r=MS(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+r}EC(e,n),QS(e,i),ES(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new UC),this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const r=this.getStack();r&&r.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const r={};n.z&&ZC("z",t,r,this.animationValues);for(let i=0;i<KC.length;i++)ZC(`rotate${KC[i]}`,t,r,this.animationValues),ZC(`skew${KC[i]}`,t,r,this.animationValues);t.render();for(const i in r)t.setStaticValue(i,r[i]),this.animationValues&&(this.animationValues[i]=r[i]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return HC;const r={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=WC(null==t?void 0:t.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=WC(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!US(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),r.transform=function(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(null==n?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),1===e.x&&1===e.y||(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:t,rotate:e,rotateX:i,rotateY:s,skewX:o,skewY:a}=n;t&&(r=`perspective(${t}px) ${r}`),e&&(r+=`rotate(${e}deg) `),i&&(r+=`rotateX(${i}deg) `),s&&(r+=`rotateY(${s}deg) `),o&&(r+=`skewX(${o}deg) `),a&&(r+=`skewY(${a}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return 1===a&&1===c||(r+=`scale(${a}, ${c})`),r||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),i&&(r.transform=i(o,r.transform));const{x:a,y:c}=this.projectionDelta;r.transformOrigin=`${100*a.origin}% ${100*c.origin}% 0`,s.animationValues?r.opacity=s===this?null!==(n=null!==(e=o.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const l in dC){if(void 0===o[l])continue;const{correct:t,applyTo:e}=dC[l],n="none"===r.transform?o[l]:t(o[l],s);if(e){const t=e.length;for(let i=0;i<t;i++)r[e[i]]=n}else r[l]=n}return this.options.layoutId&&(r.pointerEvents=s===this?WC(null==t?void 0:t.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()}),this.root.nodes.forEach(rT),this.root.sharedNodes.clear()}}}function XC(t){t.updateLayout()}function JC(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:r}=t.layout,{animationType:i}=t.options,s=n.source!==t.layout.source;"size"===i?_S(t=>{const r=s?n.measuredBox[t]:n.layoutBox[t],i=MS(r);r.min=e[t].min,r.max=r.min+i}):yT(i,n.layoutBox,e)&&_S(r=>{const i=s?n.measuredBox[r]:n.layoutBox[r],o=MS(e[r]);i.max=i.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[r].max=t.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};ES(o,e,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?ES(a,t.applyTransform(r,!0),n.measuredBox):ES(a,e,n.layoutBox);const c=!DC(o);let l=!1;if(!t.resumeFrom){const r=t.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:i,layout:s}=r;if(i&&s){const o={x:{min:0,max:0},y:{min:0,max:0}};TS(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};TS(a,e,s.layoutBox),RC(o,a)||(l=!0),r.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=r)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function tT(t){qC&&VC.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nT(t){t.clearSnapshot()}function rT(t){t.clearMeasurements()}function iT(t){t.isLayoutDirty=!1}function sT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function oT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aT(t){t.resolveTargetDelta()}function cT(t){t.calcProjection()}function lT(t){t.resetSkewAndRotation()}function uT(t){t.removeLeadSnapshot()}function dT(t,e,n){t.translate=JA(e.translate,0,n),t.scale=JA(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function hT(t,e,n,r){t.min=JA(e.min,n.min,r),t.max=JA(e.max,n.max,r)}function fT(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const mT={duration:.45,ease:[.4,0,.1,1]},pT=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),gT=pT("applewebkit/")&&!pT("chrome/")?Math.round:Hk;function wT(t){t.min=gT(t.min),t.max=gT(t.max)}function yT(t,e,n){return"position"===t||"preserve-aspect"===t&&(r=BC(e),i=BC(n),!(Math.abs(r-i)<=.2));var r,i}function vT(t){var e;return t!==t.root&&(null===(e=t.scroll)||void 0===e?void 0:e.wasRoot)}const bT=QC({attachResizeListener:(t,e)=>fS(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xT={current:void 0},NT=QC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xT.current){const t=new bT({});t.mount(window),t.setOptions({layoutScroll:!0}),xT.current=t}return xT.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),kT={pan:{Feature:class extends sS{constructor(){super(...arguments),this.removePointerDownListener=Hk}onPointerDown(t){this.session=new gS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:rC(t),onStart:rC(e),onMove:n,onEnd:(t,e)=>{delete this.session,r&&Qk.postRender(()=>r(t,e))}}}mount(){this.removePointerDownListener=mS(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends sS{constructor(t){super(t),this.removeGroupControls=Hk,this.removeListeners=Hk,this.controls=new eC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hk}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:NT,MeasureLayout:pC}};function MT(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n);const i=r[n?"onHoverStart":"onHoverEnd"];i&&Qk.postRender(()=>i(e,hS(e)))}const AT=(t,e)=>!!e&&(t===e||AT(t,e.parentElement));function ET(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,hS(n))}const ST=new WeakMap,CT=new WeakMap,TT=t=>{const e=ST.get(t.target);e&&e(t)},IT=t=>{t.forEach(TT)},OT={some:0,all:1},PT={inView:{Feature:class extends sS{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:r="some",once:i}=t,s={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof r?r:OT[r]};return function(t,e,n){const r=function({root:t,...e}){const n=t||document;CT.has(n)||CT.set(n,{});const r=CT.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(IT,{root:t,...e})),r[i]}(e);return ST.set(t,n),r.observe(t),()=>{ST.delete(t),r.unobserve(t)}}(this.node.current,s,t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),s=e?n:r;s&&s(t)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends sS{constructor(){super(...arguments),this.removeStartListeners=Hk,this.removeEndListeners=Hk,this.removeAccessibleListeners=Hk,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=mS(window,"pointerup",(t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:i}=this.node.getProps(),s=i||AT(this.node.current,t.target)?n:r;s&&Qk.update(()=>s(t,e))},{passive:!(n.onTap||n.onPointerUp)}),i=mS(window,"pointercancel",(t,e)=>this.cancelPress(t,e),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=XA(r,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=fS(this.node.current,"keydown",t=>{"Enter"!==t.key||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=fS(this.node.current,"keyup",t=>{"Enter"===t.key&&this.checkPressEnd()&&ET("up",(t,e)=>{const{onTap:n}=this.node.getProps();n&&Qk.postRender(()=>n(t,e))})}),ET("down",(t,e)=>{this.startPress(t,e)}))}),e=fS(this.node.current,"blur",()=>{this.isPressing&&ET("cancel",(t,e)=>this.cancelPress(t,e))});this.removeAccessibleListeners=XA(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Qk.postRender(()=>n(t,e))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!lS()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Qk.postRender(()=>n(t,e))}mount(){const t=this.node.getProps(),e=mS(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=fS(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=XA(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends sS{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=XA(fS(this.node.current,"focus",()=>this.onFocus()),fS(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends sS{mount(){const{current:t,props:e}=this.node;t&&(this.unmount=function(t,e,n={}){const r=new AbortController,i={passive:!0,...n,signal:r.signal},s=uS(t=>{const{target:n}=t,r=e(t);if(!r||!n)return;const s=uS(t=>{r(t),n.removeEventListener("pointerleave",s)});n.addEventListener("pointerleave",s,i)});return function(t){if(t instanceof Element)return[t];if("string"==typeof t){const e=document.querySelectorAll(t);return e?Array.from(e):[]}return Array.from(t)}(t).forEach(t=>{t.addEventListener("pointerenter",s,i)}),()=>r.abort()}(t,t=>(MT(this.node,t,!0),t=>MT(this.node,t,!1)),{passive:!e.onHoverStart&&!e.onHoverEnd}))}unmount(){}}}},jT={layout:{ProjectionNode:NT,MeasureLayout:pC}},DT=Ct.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),zT=Ct.createContext({}),_T="undefined"!=typeof window,RT=_T?Ct.useLayoutEffect:Ct.useEffect,BT=Ct.createContext({strict:!1});function $T(t,e,n,r,i){var s,o;const{visualElement:a}=Ct.useContext(zT),c=Ct.useContext(BT),l=Ct.useContext(iC),u=Ct.useContext(DT).reducedMotion,d=Ct.useRef();r=r||c.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u}));const h=d.current,f=Ct.useContext(oC);!h||h.projection||!i||"html"!==h.type&&"svg"!==h.type||function(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:UT(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:Boolean(o)||a&&kS(a),visualElement:t,animationType:"string"==typeof s?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:l})}(d.current,n,i,f);const m=Ct.useRef(!1);Ct.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const p=n[WE],g=Ct.useRef(Boolean(p)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,p))&&(null===(o=window.MotionHasOptimisedAnimation)||void 0===o?void 0:o.call(window,p)));return RT(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),hC.render(h.render),g.current&&h.animationState&&h.animationState.animateChanges())}),Ct.useEffect(()=>{h&&(!g.current&&h.animationState&&h.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var t;null===(t=window.MotionHandoffMarkAsComplete)||void 0===t||t.call(window,p)}),g.current=!1))}),h}function UT(t){if(t)return!1!==t.options.allowProjection?t.projection:UT(t.parent)}function FT(t,e,n){return Ct.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&("function"==typeof n?n(r):kS(n)&&(n.current=r))},[e])}function LT(t){return Sk(t.animate)||zk.some(e=>Ik(t[e]))}function WT(t){return Boolean(LT(t)||t.variants)}function VT(t){return Array.isArray(t)?t.join(" "):t}const qT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},KT={};for(const HL in qT)KT[HL]={isEnabled:t=>qT[HL].some(e=>!!t[e])};const HT=Symbol.for("motionComponentSymbol");function YT({layoutId:t}){const e=Ct.useContext(sC).id;return e&&void 0!==t?e+"-"+t:t}const ZT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function GT(t){return"string"==typeof t&&!t.includes("-")&&!!(ZT.indexOf(t)>-1||/[A-Z]/u.test(t))}function QT(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const XT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JT(t,e,n,r){QT(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(XT.has(i)?i:LE(i),e.attrs[i])}function tI(t,{layout:e,layoutId:n}){return Rk.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!dC[t]||"opacity"===t)}function eI(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(qE(i[o])||e.style&&qE(e.style[o])||tI(o,t)||void 0!==(null===(r=null==n?void 0:n.getValue(o))||void 0===r?void 0:r.liveStyle))&&(s[o]=i[o]);return s}function nI(t,e,n){const r=eI(t,e,n);for(const i in t)(qE(t[i])||qE(e[i]))&&(r[-1!==_k.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]);return r}function rI(t){const e=Ct.useRef(null);return null===e.current&&(e.current=t()),e.current}const iI=t=>(e,n)=>{const r=Ct.useContext(zT),i=Ct.useContext(iC),s=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:sI(r,i,s,t),renderState:e()};return n&&(o.mount=t=>n(r,t,o)),o}(t,e,r,i);return n?s():rI(s)};function sI(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=WC(s[h]);let{initial:o,animate:a}=t;const c=LT(t),l=WT(t);e&&l&&!c&&!1!==t.inherit&&(void 0===o&&(o=e.initial),void 0===a&&(a=e.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const d=u?a:o;if(d&&"boolean"!=typeof d&&!Sk(d)){const e=Array.isArray(d)?d:[d];for(let n=0;n<e.length;n++){const r=Pk(t,e[n]);if(r){const{transitionEnd:t,transition:e,...n}=r;for(const r in n){let t=n[r];Array.isArray(t)&&(t=t[u?t.length-1:0]),null!==t&&(i[r]=t)}for(const r in t)i[r]=t[r]}}}return i}const oI=(t,e)=>e&&"number"==typeof t?e.transform(t):t,aI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cI=_k.length;function lI(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const c in e){const t=e[c];if(Rk.has(c))o=!0;else if(gM(c))i[c]=t;else{const e=oI(t,xA[c]);c.startsWith("origin")?(a=!0,s[c]=e):r[c]=e}}if(e.transform||(o||n?r.transform=function(t,e,n){let r="",i=!0;for(let s=0;s<cI;s++){const o=_k[s],a=t[o];if(void 0===a)continue;let c=!0;if(c="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!c||n){const t=oI(a,xA[o]);c||(i=!1,r+=`${aI[o]||o}(${t}) `),n&&(e[o]=t)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:t="50%",originY:e="50%",originZ:n=0}=s;r.transformOrigin=`${t} ${e} ${n}`}}function uI(t,e,n){return"string"==typeof t?t:TM.transform(e+n*t)}const dI={offset:"stroke-dashoffset",array:"stroke-dasharray"},hI={offset:"strokeDashoffset",array:"strokeDasharray"};function fI(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...l},u,d){if(lI(t,l,d),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:m}=t;h.transform&&(m&&(f.transform=h.transform),delete h.transform),m&&(void 0!==i||void 0!==s||f.transform)&&(f.transformOrigin=function(t,e,n){return`${uI(e,t.x,t.width)} ${uI(n,t.y,t.height)}`}(m,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==e&&(h.x=e),void 0!==n&&(h.y=n),void 0!==r&&(h.scale=r),void 0!==o&&function(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?dI:hI;t[s.offset]=TM.transform(-r);const o=TM.transform(e),a=TM.transform(n);t[s.array]=`${o} ${a}`}(h,o,a,c,!1)}const mI=t=>"string"==typeof t&&"svg"===t.toLowerCase(),pI={useVisualState:iI({scrapeMotionValuesFromProps:nI,createRenderState:()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),onMount:(t,e,{renderState:n,latestValues:r})=>{Qk.read(()=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}}),Qk.render(()=>{fI(n,r,mI(e.tagName),t.transformTemplate),JT(e,n)})}})},gI={useVisualState:iI({scrapeMotionValuesFromProps:eI,createRenderState:()=>({style:{},transform:{},transformOrigin:{},vars:{}})})};function wI(t,e,n){for(const r in e)qE(e[r])||tI(r,n)||(t[r]=e[r])}function yI(t,e){const n={},r=function(t,e){const n={};return wI(n,t.style||{},t),Object.assign(n,function({transformTemplate:t},e){return Ct.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return lI(n,e,t),Object.assign({},n.vars,n.style)},[e])}(t,e)),n}(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const vI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bI(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vI.has(t)}let xI=t=>!bI(t);try{(NI=require("@emotion/is-prop-valid").default)&&(xI=t=>t.startsWith("on")?!bI(t):NI(t))}catch(qL){}var NI;function kI(t,e,n,r){const i=Ct.useMemo(()=>{const n={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return fI(n,e,mI(r),t.transformTemplate),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const e={};wI(e,t.style,t),i.style={...e,...i.style}}return i}function MI(t=!1){return(e,n,r,{latestValues:i},s)=>{const o=(GT(e)?kI:yI)(n,i,s,e),a=function(t,e,n){const r={};for(const i in t)"values"===i&&"object"==typeof t.values||(xI(i)||!0===n&&bI(i)||!e&&!bI(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}(n,"string"==typeof e,t),c=e!==Ct.Fragment?{...a,...o,ref:r}:{},{children:l}=n,u=Ct.useMemo(()=>qE(l)?l.get():l,[l]);return Ct.createElement(e,{...c,children:u})}}function AI(t,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){return function({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&function(t){for(const e in t)KT[e]={...KT[e],...t[e]}}(t);const s=Ct.forwardRef(function(t,s){let o;const a={...Ct.useContext(DT),...t,layoutId:YT(t)},{isStatic:c}=a,l=function(t){const{initial:e,animate:n}=function(t,e){if(LT(t)){const{initial:e,animate:n}=t;return{initial:!1===e||Ik(e)?e:void 0,animate:Ik(n)?n:void 0}}return!1!==t.inherit?e:{}}(t,Ct.useContext(zT));return Ct.useMemo(()=>({initial:e,animate:n}),[VT(e),VT(n)])}(t),u=r(t,c);if(!c&&_T){Ct.useContext(BT).strict;const t=function(t){const{drag:e,layout:n}=KT;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:(null==e?void 0:e.isEnabled(t))||(null==n?void 0:n.isEnabled(t))?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}(a);o=t.MeasureLayout,l.visualElement=$T(i,u,a,e,t.ProjectionNode)}return Gt.jsxs(zT.Provider,{value:l,children:[o&&l.visualElement?Gt.jsx(o,{visualElement:l.visualElement,...a}):null,n(i,t,FT(u,l.visualElement,s),u,c,l.visualElement)]})});return s[HT]=i,s}({...GT(n)?pI:gI,preloadedFeatures:t,useRender:MI(r),createVisualElement:e,Component:n})}}const EI={current:null},SI={current:!1},CI=new WeakMap,TI=[...FM,iA,fA],II=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class OI{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=YM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const t=IA.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,Qk.render(this.render,!1,!0))};const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=LT(e),this.isVariantNode=WT(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:l,...u}=this.scrapeMotionValuesFromProps(e,{},this);for(const d in u){const t=u[d];void 0!==a[d]&&qE(t)&&t.set(a[d],!1)}}mount(t){this.current=t,CI.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,e)=>this.bindToMotionValue(e,t)),SI.current||function(){if(SI.current=!0,_T)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>EI.current=t.matches;t.addListener(e),e()}else EI.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||EI.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){CI.delete(this.current),this.projection&&this.projection.unmount(),Xk(this.notifyUpdate),Xk(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Rk.has(t),r=e.on("change",e=>{this.latestValues[t]=e,this.props.onUpdate&&Qk.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=e.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{r(),i(),s&&s(),e.owner&&e.stop()})}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in KT){const e=KT[t];if(!e)continue;const{isEnabled:n,Feature:r}=e;if(!this.features[t]&&r&&n(this.props)&&(this.features[t]=new r(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<II.length;n++){const e=II[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const r=t["on"+e];r&&(this.propEventSubscriptions[e]=this.on(e,r))}this.prevMotionValues=function(t,e,n){for(const r in e){const i=e[r],s=n[r];if(qE(i))t.addValue(r,i);else if(qE(s))t.addValue(r,UE(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const e=t.getValue(r);!0===e.liveStyle?e.jump(i):e.hasAnimated||e.set(i)}else{const e=t.getStaticValue(r);t.addValue(r,UE(void 0!==e?e:i,{owner:t}))}}for(const r in n)void 0===e[r]&&t.removeValue(r);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=UE(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let r=void 0===this.latestValues[t]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,t))&&void 0!==n?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];var i;return null!=r&&("string"==typeof r&&(mM(r)||hM(r))?r=parseFloat(r):(i=r,!TI.find(UM(i))&&fA.test(e)&&(r=MA(t,e))),this.setBaseTarget(t,qE(r)?r.get():r)),qE(r)?r.get():r}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let r;if("string"==typeof n||"object"==typeof n){const i=Pk(this.props,n,null===(e=this.presenceContext)||void 0===e?void 0:e.custom);i&&(r=i[t])}if(n&&void 0!==r)return r;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||qE(i)?void 0!==this.initialValues[t]&&void 0===r?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new BE),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class PI extends OI{constructor(){super(...arguments),this.KeyframeResolver=EA}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qE(t)&&(this.childSubscription=t.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class jI extends PI{constructor(){super(...arguments),this.type="html",this.renderInstance=QT}readValueFromInstance(t,e){if(Rk.has(e)){const t=kA(e);return t&&t.default||0}{const r=(n=t,window.getComputedStyle(n)),i=(gM(e)?r.getPropertyValue(e):r[e])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return XS(t,e)}build(t,e,n){lI(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return eI(t,e,n)}}class DI extends PI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zS}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Rk.has(e)){const t=kA(e);return t&&t.default||0}return e=XT.has(e)?e:LE(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return nI(t,e,n)}build(t,e,n){fI(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,r){JT(t,e,0,r)}mount(t){this.isSVGTag=mI(t.tagName),super.mount(t)}}const zI=(t,e)=>GT(t)?new DI(e):new jI(e,{allowProjection:t!==Ct.Fragment}),_I=Ek(AI({...aS,...PT,...kT,...jT},zI));class RI extends Ct.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=e.offsetHeight||0,t.width=e.offsetWidth||0,t.top=e.offsetTop,t.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function BI({children:t,isPresent:e}){const n=Ct.useId(),r=Ct.useRef(null),i=Ct.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Ct.useContext(DT);return Ct.useInsertionEffect(()=>{const{width:t,height:o,top:a,left:c}=i.current;if(e||!r.current||!t||!o)return;r.current.dataset.motionPopId=n;const l=document.createElement("style");return s&&(l.nonce=s),document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${t}px !important;\n            height: ${o}px !important;\n            top: ${a}px !important;\n            left: ${c}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}},[e]),Gt.jsx(RI,{isPresent:e,childRef:r,sizeRef:i,children:Ct.cloneElement(t,{ref:r})})}const $I=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=rI(UI),c=Ct.useId(),l=Ct.useCallback(t=>{a.set(t,!0);for(const e of a.values())if(!e)return;r&&r()},[a,r]),u=Ct.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:l,register:t=>(a.set(t,!1),()=>a.delete(t))}),s?[Math.random(),l]:[n,l]);return Ct.useMemo(()=>{a.forEach((t,e)=>a.set(e,!1))},[n]),Ct.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),"popLayout"===o&&(t=Gt.jsx(BI,{isPresent:n,children:t})),Gt.jsx(iC.Provider,{value:u,children:t})};function UI(){return new Map}const FI=t=>t.key||"";function LI(t){const e=[];return Ct.Children.forEach(t,t=>{Ct.isValidElement(t)&&e.push(t)}),e}const WI=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=Ct.useMemo(()=>LI(t),[t]),c=a.map(FI),l=Ct.useRef(!0),u=Ct.useRef(a),d=rI(()=>new Map),[h,f]=Ct.useState(a),[m,p]=Ct.useState(a);RT(()=>{l.current=!1,u.current=a;for(let t=0;t<m.length;t++){const e=FI(m[t]);c.includes(e)?d.delete(e):!0!==d.get(e)&&d.set(e,!1)}},[m,c.length,c.join("-")]);const g=[];if(a!==h){let t=[...a];for(let e=0;e<m.length;e++){const n=m[e],r=FI(n);c.includes(r)||(t.splice(e,0,n),g.push(n))}return"wait"===o&&g.length&&(t=g),p(LI(t)),void f(a)}const{forceRender:w}=Ct.useContext(sC);return Gt.jsx(Gt.Fragment,{children:m.map(t=>{const e=FI(t),h=a===m||c.includes(e);return Gt.jsx($I,{isPresent:h,initial:!(l.current&&!r)&&void 0,custom:h?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:h?void 0:()=>{if(!d.has(e))return;d.set(e,!0);let t=!0;d.forEach(e=>{e||(t=!1)}),t&&(null==w||w(),p(u.current),i&&i())},children:t},e)})})},VI=Ct.createContext(null),qI=t=>!t.isLayoutDirty&&t.willUpdate(!1);function KI(){const t=new Set,e=new WeakMap,n=()=>t.forEach(qI);return{add:r=>{t.add(r),e.set(r,r.addEventListener("willUpdate",n))},remove:r=>{t.delete(r);const i=e.get(r);i&&(i(),e.delete(r)),n()},dirty:n}}const HI=t=>!0===t,YI=({children:t,id:e,inherit:n=!0})=>{const r=Ct.useContext(sC),i=Ct.useContext(VI),[s,o]=function(){const t=function(){const t=Ct.useRef(!1);return RT(()=>(t.current=!0,()=>{t.current=!1}),[]),t}(),[e,n]=Ct.useState(0),r=Ct.useCallback(()=>{t.current&&n(e+1)},[e]);return[Ct.useCallback(()=>Qk.postRender(r),[r]),e]}(),a=Ct.useRef(null),c=r.id||i;null===a.current&&((t=>HI(!0===t)||"id"===t)(n)&&c&&(e=e?c+"-"+e:c),a.current={id:e,group:HI(n)&&r.group||KI()});const l=Ct.useMemo(()=>({...a.current,forceRender:s}),[o]);return Gt.jsx(sC.Provider,{value:l,children:t})},ZI=Ct.forwardRef(({className:t,type:e,...n},r)=>Gt.jsx("input",{type:e,className:na("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ZI.displayName="Input";var GI=Ct.forwardRef((t,e)=>Gt.jsx(wr.label,{...t,ref:e,onMouseDown:e=>{var n;e.target.closest("button, input, select, textarea")||(null==(n=t.onMouseDown)||n.call(t,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));GI.displayName="Label";var QI=GI;const XI=Ei("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),JI=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(QI,{ref:n,className:na(XI(),t),...e}));JI.displayName=QI.displayName;var tO="focusScope.autoFocusOnMount",eO="focusScope.autoFocusOnUnmount",nO={bubbles:!1,cancelable:!0},rO=Ct.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,c]=Ct.useState(null),l=vr(i),u=vr(s),d=Ct.useRef(null),h=ar(e,t=>c(t)),f=Ct.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;Ct.useEffect(()=>{if(r){let t=function(t){if(f.paused||!a)return;const e=t.target;a.contains(e)?d.current=e:aO(d.current,{select:!0})},e=function(t){if(f.paused||!a)return;const e=t.relatedTarget;null!==e&&(a.contains(e)||aO(d.current,{select:!0}))},n=function(t){if(document.activeElement===document.body)for(const e of t)e.removedNodes.length>0&&aO(a)};document.addEventListener("focusin",t),document.addEventListener("focusout",e);const r=new MutationObserver(n);return a&&r.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",t),document.removeEventListener("focusout",e),r.disconnect()}}},[r,a,f.paused]),Ct.useEffect(()=>{if(a){cO.add(f);const t=document.activeElement;if(!a.contains(t)){const e=new CustomEvent(tO,nO);a.addEventListener(tO,l),a.dispatchEvent(e),e.defaultPrevented||(function(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(aO(r,{select:e}),document.activeElement!==n)return}(iO(a).filter(t=>"A"!==t.tagName),{select:!0}),document.activeElement===t&&aO(a))}return()=>{a.removeEventListener(tO,l),setTimeout(()=>{const e=new CustomEvent(eO,nO);a.addEventListener(eO,u),a.dispatchEvent(e),e.defaultPrevented||aO(t??document.body,{select:!0}),a.removeEventListener(eO,u),cO.remove(f)},0)}}},[a,l,u,f]);const m=Ct.useCallback(t=>{if(!n&&!r)return;if(f.paused)return;const e="Tab"===t.key&&!t.altKey&&!t.ctrlKey&&!t.metaKey,i=document.activeElement;if(e&&i){const e=t.currentTarget,[r,s]=function(t){const e=iO(t);return[sO(e,t),sO(e.reverse(),t)]}(e);r&&s?t.shiftKey||i!==s?t.shiftKey&&i===r&&(t.preventDefault(),n&&aO(s,{select:!0})):(t.preventDefault(),n&&aO(r,{select:!0})):i===e&&t.preventDefault()}},[n,r,f.paused]);return Gt.jsx(wr.div,{tabIndex:-1,...o,ref:h,onKeyDown:m})});function iO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const e="INPUT"===t.tagName&&"hidden"===t.type;return t.disabled||t.hidden||e?NodeFilter.FILTER_SKIP:t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function sO(t,e){for(const n of t)if(!oO(n,{upTo:e}))return n}function oO(t,{upTo:e}){if("hidden"===getComputedStyle(t).visibility)return!0;for(;t;){if(void 0!==e&&t===e)return!1;if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}function aO(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&function(t){return t instanceof HTMLInputElement&&"select"in t}(t)&&e&&t.select()}}rO.displayName="FocusScope";var cO=function(){let t=[];return{add(e){const n=t[0];e!==n&&(null==n||n.pause()),t=lO(t,e),t.unshift(e)},remove(e){var n;t=lO(t,e),null==(n=t[0])||n.resume()}}}();function lO(t,e){const n=[...t],r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}var uO=0;function dO(){Ct.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??hO()),document.body.insertAdjacentElement("beforeend",t[1]??hO()),uO++,()=>{1===uO&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),uO--}},[])}function hO(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var fO="right-scroll-bar-position",mO="width-before-scroll-bar";function pO(t,e){return"function"==typeof t?t(e):t&&(t.current=e),t}var gO="undefined"!=typeof window?Ct.useLayoutEffect:Ct.useEffect,wO=new WeakMap;function yO(t){return t}var vO=function(t){var e=t.sideCar,n=Bt(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return Ct.createElement(r,Rt({},n))};vO.isSideCarExport=!0;var bO=function(t){void 0===t&&(t={});var e=function(t,e){void 0===e&&(e=yO);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:null},useMedium:function(t){var i=e(t,r);return n.push(i),function(){n=n.filter(function(t){return t!==i})}},assignSyncMedium:function(t){for(r=!0;n.length;){var e=n;n=[],e.forEach(t)}n={push:function(e){return t(e)},filter:function(){return n}}},assignMedium:function(t){r=!0;var e=[];if(n.length){var i=n;n=[],i.forEach(t),e=n}var s=function(){var n=e;e=[],n.forEach(t)},o=function(){return Promise.resolve().then(s)};o(),n={push:function(t){e.push(t),o()},filter:function(t){return e=e.filter(t),n}}}}}();return e.options=Rt({async:!0,ssr:!1},t),e}(),xO=function(){},NO=Ct.forwardRef(function(t,e){var n=Ct.useRef(null),r=Ct.useState({onScrollCapture:xO,onWheelCapture:xO,onTouchMoveCapture:xO}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noIsolation,m=t.inert,p=t.allowPinchZoom,g=t.as,w=void 0===g?"div":g,y=t.gapMode,v=Bt(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,x=function(t){var e,n,r=(e=function(e){return t.forEach(function(t){return pO(t,e)})},(n=Ct.useState(function(){return{value:null,callback:e,facade:{get current(){return n.value},set current(t){var e=n.value;e!==t&&(n.value=t,n.callback(t,e))}}}})[0]).callback=e,n.facade);return gO(function(){var e=wO.get(r);if(e){var n=new Set(e),i=new Set(t),s=r.current;n.forEach(function(t){i.has(t)||pO(t,null)}),i.forEach(function(t){n.has(t)||pO(t,s)})}wO.set(r,t)},[t]),r}([n,e]),N=Rt(Rt({},v),i);return Ct.createElement(Ct.Fragment,null,u&&Ct.createElement(b,{sideCar:bO,removeScrollBar:l,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!p,lockRef:n,gapMode:y}),o?Ct.cloneElement(Ct.Children.only(a),Rt(Rt({},N),{ref:x})):Ct.createElement(w,Rt({},N,{className:c,ref:x}),a))});NO.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},NO.classNames={fullWidth:mO,zeroRight:fO};var kO=function(){var t,e,n,r=(e=0,n=null,t={add:function(t){var r,i;0==e&&(n=function(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return e&&t.setAttribute("nonce",e),t}())&&(i=t,(r=n).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(t){(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}(n)),e++},remove:function(){! --e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}},function(e,n){Ct.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])});return function(t){var e=t.styles,n=t.dynamic;return r(e,n),null}},MO={left:0,top:0,right:0,gap:0},AO=function(t){return parseInt(t||"",10)||0},EO=kO(),SO="data-scroll-locked",CO=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(a,"px ").concat(r,";\n  }\n  body[").concat(SO,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([e&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(fO," {\n    right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(mO," {\n    margin-right: ").concat(a,"px ").concat(r,";\n  }\n  \n  .").concat(fO," .").concat(fO," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(mO," .").concat(mO," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(SO,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},TO=function(){var t=parseInt(document.body.getAttribute(SO)||"0",10);return isFinite(t)?t:0},IO=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=void 0===r?"margin":r;Ct.useEffect(function(){return document.body.setAttribute(SO,(TO()+1).toString()),function(){var t=TO()-1;t<=0?document.body.removeAttribute(SO):document.body.setAttribute(SO,t.toString())}},[]);var s=Ct.useMemo(function(){return function(t){if(void 0===t&&(t="margin"),"undefined"==typeof window)return MO;var e=function(t){var e=window.getComputedStyle(document.body),n=e["padding"===t?"paddingLeft":"marginLeft"],r=e["padding"===t?"paddingTop":"marginTop"],i=e["padding"===t?"paddingRight":"marginRight"];return[AO(n),AO(r),AO(i)]}(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}}(i)},[i]);return Ct.createElement(EO,{styles:CO(s,!e,i,n?"":"!important")})},OO=!1;if("undefined"!=typeof window)try{var PO=Object.defineProperty({},"passive",{get:function(){return OO=!0,!0}});window.addEventListener("test",PO,PO),window.removeEventListener("test",PO,PO)}catch(KL){OO=!1}var jO=!!OO&&{passive:!1},DO=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return"hidden"!==n[e]&&!(n.overflowY===n.overflowX&&!function(t){return"TEXTAREA"===t.tagName}(t)&&"visible"===n[e])},zO=function(t,e){var n=e.ownerDocument,r=e;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),_O(t,r)){var i=RO(t,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},_O=function(t,e){return"v"===t?function(t){return DO(t,"overflowY")}(e):function(t){return DO(t,"overflowX")}(e)},RO=function(t,e){return"v"===t?[(n=e).scrollTop,n.scrollHeight,n.clientHeight]:function(t){return[t.scrollLeft,t.scrollWidth,t.clientWidth]}(e);var n},BO=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$O=function(t){return[t.deltaX,t.deltaY]},UO=function(t){return t&&"current"in t?t.current:t},FO=function(t){return"\n  .block-interactivity-".concat(t," {pointer-events: none;}\n  .allow-interactivity-").concat(t," {pointer-events: all;}\n")},LO=0,WO=[];function VO(t){for(var e=null;null!==t;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const qO=(KO=function(t){var e=Ct.useRef([]),n=Ct.useRef([0,0]),r=Ct.useRef(),i=Ct.useState(LO++)[0],s=Ct.useState(kO)[0],o=Ct.useRef(t);Ct.useEffect(function(){o.current=t},[t]),Ct.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var e=$t([t.lockRef.current],(t.shards||[]).map(UO),!0).filter(Boolean);return e.forEach(function(t){return t.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),e.forEach(function(t){return t.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=Ct.useCallback(function(t,e){if("touches"in t&&2===t.touches.length||"wheel"===t.type&&t.ctrlKey)return!o.current.allowPinchZoom;var i,s=BO(t),a=n.current,c="deltaX"in t?t.deltaX:a[0]-s[0],l="deltaY"in t?t.deltaY:a[1]-s[1],u=t.target,d=Math.abs(c)>Math.abs(l)?"h":"v";if("touches"in t&&"h"===d&&"range"===u.type)return!1;var h=zO(d,u);if(!h)return!0;if(h?i=d:(i="v"===d?"h":"v",h=zO(d,u)),!h)return!1;if(!r.current&&"changedTouches"in t&&(c||l)&&(r.current=i),!i)return!0;var f=r.current||i;return function(t,e,n,r){var i=function(t,e){return"h"===t&&"rtl"===e?-1:1}(t,window.getComputedStyle(e).direction),s=i*r,o=n.target,a=e.contains(o),c=!1,l=s>0,u=0,d=0;do{var h=RO(t,o),f=h[0],m=h[1]-h[2]-i*f;(f||m)&&_O(t,o)&&(u+=m,d+=f),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!a&&o!==document.body||a&&(e.contains(o)||e===o));return l&&Math.abs(u)<1?c=!0:l||!(Math.abs(d)<1)&&!0||(c=!0),c}(f,e,t,"h"===f?c:l)},[]),c=Ct.useCallback(function(t){var n=t;if(WO.length&&WO[WO.length-1]===s){var r="deltaY"in n?$O(n):BO(n),i=e.current.filter(function(t){return t.name===n.type&&(t.target===n.target||n.target===t.shadowParent)&&(e=t.delta,i=r,e[0]===i[0]&&e[1]===i[1]);var e,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var c=(o.current.shards||[]).map(UO).filter(Boolean).filter(function(t){return t.contains(n.target)});(c.length>0?a(n,c[0]):!o.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),l=Ct.useCallback(function(t,n,r,i){var s={name:t,delta:n,target:r,should:i,shadowParent:VO(r)};e.current.push(s),setTimeout(function(){e.current=e.current.filter(function(t){return t!==s})},1)},[]),u=Ct.useCallback(function(t){n.current=BO(t),r.current=void 0},[]),d=Ct.useCallback(function(e){l(e.type,$O(e),e.target,a(e,t.lockRef.current))},[]),h=Ct.useCallback(function(e){l(e.type,BO(e),e.target,a(e,t.lockRef.current))},[]);Ct.useEffect(function(){return WO.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,jO),document.addEventListener("touchmove",c,jO),document.addEventListener("touchstart",u,jO),function(){WO=WO.filter(function(t){return t!==s}),document.removeEventListener("wheel",c,jO),document.removeEventListener("touchmove",c,jO),document.removeEventListener("touchstart",u,jO)}},[]);var f=t.removeScrollBar,m=t.inert;return Ct.createElement(Ct.Fragment,null,m?Ct.createElement(s,{styles:FO(i)}):null,f?Ct.createElement(IO,{gapMode:t.gapMode}):null)},bO.useMedium(KO),vO);var KO,HO=Ct.forwardRef(function(t,e){return Ct.createElement(NO,Rt({},t,{ref:e,sideCar:qO}))});HO.classNames=NO.classNames;var YO=new WeakMap,ZO=new WeakMap,GO={},QO=0,XO=function(t){return t&&(t.host||XO(t.parentNode))},JO=function(t,e,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=function(t){return"undefined"==typeof document?null:(Array.isArray(t)?t[0]:t).ownerDocument.body}(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),function(t,e,n,r){var i=function(t,e){return e.map(function(e){if(t.contains(e))return e;var n=XO(e);return n&&t.contains(n)?n:null}).filter(function(t){return Boolean(t)})}(e,Array.isArray(t)?t:[t]);GO[n]||(GO[n]=new WeakMap);var s=GO[n],o=[],a=new Set,c=new Set(i),l=function(t){t&&!a.has(t)&&(a.add(t),l(t.parentNode))};i.forEach(l);var u=function(t){t&&!c.has(t)&&Array.prototype.forEach.call(t.children,function(t){if(a.has(t))u(t);else try{var e=t.getAttribute(r),i=null!==e&&"false"!==e,c=(YO.get(t)||0)+1,l=(s.get(t)||0)+1;YO.set(t,c),s.set(t,l),o.push(t),1===c&&i&&ZO.set(t,!0),1===l&&t.setAttribute(n,"true"),i||t.setAttribute(r,"true")}catch(d){}})};return u(e),a.clear(),QO++,function(){o.forEach(function(t){var e=YO.get(t)-1,i=s.get(t)-1;YO.set(t,e),s.set(t,i),e||(ZO.has(t)||t.removeAttribute(r),ZO.delete(t)),i||t.removeAttribute(n)}),--QO||(YO=new WeakMap,YO=new WeakMap,ZO=new WeakMap,GO={})}}(r,i,n,"aria-hidden")):function(){return null}},tP="Dialog",[eP,nP]=cr(tP),[rP,iP]=eP(tP),sP=t=>{const{Qe:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=Ct.useRef(null),c=Ct.useRef(null),[l=!1,u]=jr({prop:r,defaultProp:i,onChange:s});return Gt.jsx(rP,{scope:e,triggerRef:a,contentRef:c,contentId:ma(),titleId:ma(),descriptionId:ma(),open:l,onOpenChange:u,onOpenToggle:Ct.useCallback(()=>u(t=>!t),[u]),modal:o,children:n})};sP.displayName=tP;var oP="DialogTrigger",aP=Ct.forwardRef((t,e)=>{const{Qe:n,...r}=t,i=iP(oP,n),s=ar(e,i.triggerRef);return Gt.jsx(wr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":SP(i.open),...r,ref:s,onClick:ir(t.onClick,i.onOpenToggle)})});aP.displayName=oP;var cP="DialogPortal",[lP,uP]=eP(cP,{forceMount:void 0}),dP=t=>{const{Qe:e,forceMount:n,children:r,container:i}=t,s=iP(cP,e);return Gt.jsx(lP,{scope:e,forceMount:n,children:Ct.Children.map(r,t=>Gt.jsx(Or,{present:n||s.open,children:Gt.jsx(Ir,{asChild:!0,container:i,children:t})}))})};dP.displayName=cP;var hP="DialogOverlay",fP=Ct.forwardRef((t,e)=>{const n=uP(hP,t.Qe),{forceMount:r=n.forceMount,...i}=t,s=iP(hP,t.Qe);return s.modal?Gt.jsx(Or,{present:r||s.open,children:Gt.jsx(pP,{...i,ref:e})}):null});fP.displayName=hP;var mP=ur("DialogOverlay.RemoveScroll"),pP=Ct.forwardRef((t,e)=>{const{Qe:n,...r}=t,i=iP(hP,n);return Gt.jsx(HO,{as:mP,allowPinchZoom:!0,shards:[i.contentRef],children:Gt.jsx(wr.div,{"data-state":SP(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),gP="DialogContent",wP=Ct.forwardRef((t,e)=>{const n=uP(gP,t.Qe),{forceMount:r=n.forceMount,...i}=t,s=iP(gP,t.Qe);return Gt.jsx(Or,{present:r||s.open,children:s.modal?Gt.jsx(yP,{...i,ref:e}):Gt.jsx(vP,{...i,ref:e})})});wP.displayName=gP;var yP=Ct.forwardRef((t,e)=>{const n=iP(gP,t.Qe),r=Ct.useRef(null),i=ar(e,n.contentRef,r);return Ct.useEffect(()=>{const t=r.current;if(t)return JO(t)},[]),Gt.jsx(bP,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ir(t.onCloseAutoFocus,t=>{var e;t.preventDefault(),null==(e=n.triggerRef.current)||e.focus()}),onPointerDownOutside:ir(t.onPointerDownOutside,t=>{const e=t.detail.originalEvent,n=0===e.button&&!0===e.ctrlKey;(2===e.button||n)&&t.preventDefault()}),onFocusOutside:ir(t.onFocusOutside,t=>t.preventDefault())})}),vP=Ct.forwardRef((t,e)=>{const n=iP(gP,t.Qe),r=Ct.useRef(!1),i=Ct.useRef(!1);return Gt.jsx(bP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var s,o;null==(s=t.onCloseAutoFocus)||s.call(t,e),e.defaultPrevented||(r.current||null==(o=n.triggerRef.current)||o.focus(),e.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:e=>{var s,o;null==(s=t.onInteractOutside)||s.call(t,e),e.defaultPrevented||(r.current=!0,"pointerdown"===e.detail.originalEvent.type&&(i.current=!0));const a=e.target;(null==(o=n.triggerRef.current)?void 0:o.contains(a))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&i.current&&e.preventDefault()}})}),bP=Ct.forwardRef((t,e)=>{const{Qe:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=iP(gP,n),c=Ct.useRef(null),l=ar(e,c);return dO(),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(rO,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:Gt.jsx(kr,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":SP(a.open),...o,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(OP,{titleId:a.titleId}),Gt.jsx(PP,{contentRef:c,descriptionId:a.descriptionId})]})]})}),xP="DialogTitle",NP=Ct.forwardRef((t,e)=>{const{Qe:n,...r}=t,i=iP(xP,n);return Gt.jsx(wr.h2,{id:i.titleId,...r,ref:e})});NP.displayName=xP;var kP="DialogDescription",MP=Ct.forwardRef((t,e)=>{const{Qe:n,...r}=t,i=iP(kP,n);return Gt.jsx(wr.p,{id:i.descriptionId,...r,ref:e})});MP.displayName=kP;var AP="DialogClose",EP=Ct.forwardRef((t,e)=>{const{Qe:n,...r}=t,i=iP(AP,n);return Gt.jsx(wr.button,{type:"button",...r,ref:e,onClick:ir(t.onClick,()=>i.onOpenChange(!1))})});function SP(t){return t?"open":"closed"}EP.displayName=AP;var CP="DialogTitleWarning",[TP,IP]=function(t,e){const n=Ct.createContext(e),r=t=>{const{children:e,...r}=t,i=Ct.useMemo(()=>r,Object.values(r));return Gt.jsx(n.Provider,{value:i,children:e})};return r.displayName=t+"Provider",[r,function(r){const i=Ct.useContext(n);if(i)return i;if(void 0!==e)return e;throw new Error(`\`${r}\` must be used within \`${t}\``)}]}(CP,{contentName:gP,titleName:xP,docsSlug:"dialog"}),OP=({titleId:t})=>{const e=IP(CP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return Ct.useEffect(()=>{t&&document.getElementById(t)},[n,t]),null},PP=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IP("DialogDescriptionWarning").contentName}}.`;return Ct.useEffect(()=>{var n;const r=null==(n=t.current)?void 0:n.getAttribute("aria-describedby");e&&r&&document.getElementById(e)},[n,t,e]),null},jP=sP,DP=aP,zP=dP,_P=fP,RP=wP,BP=NP,$P=MP,UP=EP;const FP=jP,LP=DP,WP=zP,VP=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(_P,{ref:n,className:na("modal-overlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));VP.displayName=_P.displayName;const qP=Ct.forwardRef(({className:t,children:e,...n},r)=>Gt.jsxs(WP,{children:[Gt.jsx(VP,{}),Gt.jsxs(RP,{ref:r,className:na("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 p-6 shadow-lg duration-200 bg-white text-gray-900 border data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,Gt.jsxs(UP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[Gt.jsx(Ks,{className:"h-4 w-4"}),Gt.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qP.displayName=RP.displayName;const KP=({className:t,...e})=>Gt.jsx("div",{className:na("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});KP.displayName="DialogHeader";const HP=({className:t,...e})=>Gt.jsx("div",{className:na("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});HP.displayName="DialogFooter";const YP=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(BP,{ref:n,className:na("text-lg font-semibold leading-none tracking-tight",t),...e}));YP.displayName=BP.displayName;const ZP=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx($P,{ref:n,className:na("text-sm text-muted-foreground",t),...e}));function GP({isOpen:t,onClose:e,organizationName:n,onOrganizationCreated:r}){const[i,s]=Ct.useState(n),[o,a]=Ct.useState(!1),{toast:c}=rr();Ct.useEffect(()=>{s(n)},[n]);const l=async()=>{var t;if(i.trim()){a(!0);try{const t=await Hn("POST","/api/organizations",{name:i.trim()});c({title:"Organization created!",description:`${i} has been created successfully.`}),r(t),e()}catch(n){let e="Failed to create organization. Please try again.";(null==(t=n.message)?void 0:t.includes("already exists"))&&(e="An organization with this name already exists."),c({title:"Failed to create organization",description:e,variant:"destructive"})}finally{a(!1)}}else c({title:"Organization name required",description:"Please enter a name for the organization",variant:"destructive"})},u=()=>{o||(s(n),e())};return Gt.jsx(FP,{open:t,onOpenChange:u,children:Gt.jsxs(qP,{className:"sm:max-w-[425px]",children:[Gt.jsxs(KP,{children:[Gt.jsxs(YP,{className:"flex items-center space-x-2",children:[Gt.jsx(Wi,{className:"h-5 w-5"}),Gt.jsx("span",{children:"Create New Organization"})]}),Gt.jsx(ZP,{children:"Create a new organization that you can tag in your posts. This organization will be available for all users."})]}),Gt.jsx("div",{className:"grid gap-4 py-4",children:Gt.jsxs("div",{className:"grid gap-2",children:[Gt.jsx(JI,{htmlFor:"name",children:"Organization Name"}),Gt.jsx(ZI,{id:"name",value:i,onChange:t=>s(t.target.value),placeholder:"Enter organization name",disabled:o,onKeyDown:t=>{"Enter"!==t.key||o||l()}})]})}),Gt.jsxs(HP,{children:[Gt.jsx(kk,{variant:"outline",onClick:u,disabled:o,children:"Cancel"}),Gt.jsx(kk,{onClick:l,disabled:o||!i.trim(),className:"bg-reddit-orange hover:bg-reddit-orange/90",children:o?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(ws,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Organization"})]})]})})}ZP.displayName=$P.displayName;const QP=(t,e="")=>{var n;document.execCommand(t,!1,e),null==(n=document.getElementById("content-editable"))||n.focus()},XP=()=>{const t=prompt("Enter image URL:");t&&QP("insertImage",t)},JP=()=>{const t=prompt("Enter URL:");t&&QP("createLink",t)};function tj(){const[,t]=je(),{user:e}=pk(),{toast:n}=rr(),r=Rn(),[i,s]=Ct.useState("select"),[o,a]=Ct.useState("text"),[c,l]=Ct.useState(null),[u,d]=Ct.useState(""),[h,f]=Ct.useState(""),[m,p]=Ct.useState([{id:"1",text:""},{id:"2",text:""}]),[g,w]=Ct.useState(null),[y,v]=Ct.useState(!1),[b,x]=Ct.useState(!1),[N,k]=Ct.useState(""),[M,A]=Ct.useState(""),[E,S]=Ct.useState(!1),[C,T]=Ct.useState(!1),[I,O]=Ct.useState(""),[P,j]=Ct.useState(!1),D=Ct.useRef(null),{data:z}=Vn({queryKey:["bowls"],queryFn:async()=>(await fetch("/api/bowls",{credentials:"include"})).json()}),{data:_}=Vn({queryKey:["organizations"],queryFn:async()=>(await fetch("/api/organizations",{credentials:"include"})).json()});Ct.useEffect(()=>{const t=new URLSearchParams(window.location.search),e=t.get("type"),n=t.get("bowlId");if(e&&["text","poll"].includes(e)&&(a(e),s("create")),n&&z){const t=z.find(t=>t.id===parseInt(n));t&&l(t)}},[z]);const R=(null==z?void 0:z.filter(t=>t.name.toLowerCase().includes(N.toLowerCase())||t.description.toLowerCase().includes(N.toLowerCase())))||[],B=(null==_?void 0:_.filter(t=>t.name.toLowerCase().includes(M.toLowerCase())))||[];return"select"===i?Gt.jsxs("div",{className:"fixed inset-0 bg-black z-50",children:[Gt.jsxs("div",{className:"bg-[#3a3a3a] px-4 py-3 flex items-center justify-between border-b border-gray-700",children:[Gt.jsx("button",{onClick:()=>t("/"),className:"text-white",children:Gt.jsx(zi,{className:"w-6 h-6"})}),Gt.jsx("button",{onClick:()=>t("/"),className:"text-white",children:Gt.jsx(Ks,{className:"w-6 h-6"})})]}),Gt.jsxs("div",{className:"p-6",children:[Gt.jsxs("div",{className:"flex items-center gap-3 mb-8 pb-4 border-b-2 border-dashed border-gray-700",children:[Gt.jsx("div",{className:"w-12 h-12 rounded bg-gray-700 flex items-center justify-center overflow-hidden",children:(null==e?void 0:e.username)?Gt.jsx("span",{className:"text-white font-semibold text-lg",children:e.username.charAt(0).toUpperCase()}):Gt.jsx(Vs,{className:"w-6 h-6 text-gray-400"})}),Gt.jsx("span",{className:"text-gray-400 text-lg",children:(null==e?void 0:e.username)||"user1234"})]}),Gt.jsxs("div",{className:"mb-8 pb-6 border-b-2 border-dashed border-gray-700",children:[Gt.jsx("p",{className:"text-gray-600 text-sm",children:"Choose what you wanna"}),Gt.jsx("p",{className:"text-gray-600 text-sm",children:"create today..."})]}),Gt.jsxs("div",{className:"grid grid-cols-2 gap-4 p-6 rounded",children:[Gt.jsxs("button",{onClick:()=>{a("text"),s("create")},className:"flex flex-col items-center justify-center py-8 bg-[#1a1a1a] hover:bg-[#252525] transition-colors rounded",children:[Gt.jsx("div",{className:"mb-3",children:Gt.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Gt.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeWidth:"2"}),Gt.jsx("line",{x1:"7",y1:"8",x2:"17",y2:"8",strokeWidth:"2"}),Gt.jsx("line",{x1:"7",y1:"12",x2:"17",y2:"12",strokeWidth:"2"}),Gt.jsx("line",{x1:"7",y1:"16",x2:"13",y2:"16",strokeWidth:"2"})]})}),Gt.jsx("span",{className:"text-white font-medium text-lg",children:"POST"})]}),Gt.jsxs("button",{onClick:()=>{a("poll"),s("create")},className:"flex flex-col items-center justify-center py-8 bg-[#1a1a1a] hover:bg-[#252525] transition-colors rounded",children:[Gt.jsx("div",{className:"mb-3",children:Gt.jsxs("svg",{className:"w-8 h-8 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Gt.jsx("path",{d:"M3 3v18h18",strokeWidth:"2"}),Gt.jsx("rect",{x:"7",y:"10",width:"3",height:"8",fill:"currentColor"}),Gt.jsx("rect",{x:"12",y:"6",width:"3",height:"12",fill:"currentColor"}),Gt.jsx("rect",{x:"17",y:"13",width:"3",height:"5",fill:"currentColor"})]})}),Gt.jsx("span",{className:"text-white font-medium text-lg",children:"POLL"})]})]})]})]}):Gt.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[Gt.jsxs("div",{className:"bg-[#3a3a3a] px-4 py-3 flex items-center justify-between border-b border-gray-700 flex-shrink-0",children:[Gt.jsx("button",{onClick:()=>s("select"),className:"text-white",children:Gt.jsx(zi,{className:"w-6 h-6"})}),Gt.jsxs("div",{className:"flex items-center gap-2 text-white",children:[Gt.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Gt.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",strokeWidth:"2"}),Gt.jsx("line",{x1:"7",y1:"8",x2:"17",y2:"8",strokeWidth:"2"})]}),Gt.jsx("span",{className:"font-medium",children:"poll"===o?"POLL":"POST"})]}),Gt.jsx("button",{onClick:()=>t("/"),className:"text-white",children:Gt.jsx(Ks,{className:"w-6 h-6"})})]}),Gt.jsx("div",{className:"flex-1 overflow-y-auto",children:Gt.jsxs("div",{className:"p-4 space-y-4",children:[Gt.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-700",children:[Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"w-10 h-10 rounded bg-gray-700 flex items-center justify-center overflow-hidden",children:(null==e?void 0:e.username)?Gt.jsx("span",{className:"text-white font-semibold",children:e.username.charAt(0).toUpperCase()}):Gt.jsx(Vs,{className:"w-5 h-5 text-gray-400"})}),Gt.jsx("span",{className:"text-gray-400",children:(null==e?void 0:e.username)||"user1234"})]}),Gt.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 text-gray-400 hover:text-gray-300 transition-colors",children:[Gt.jsx("span",{className:"text-sm",children:c?c.name:"CHOOSE COMMUNITY"}),Gt.jsx(Gi,{className:"w-4 h-4"})]})]}),Gt.jsxs("div",{className:"border border-gray-700 p-4",children:[Gt.jsx("label",{className:"text-gray-600 text-xs mb-2 block",children:"TITLE"}),Gt.jsx("input",{type:"text",value:u,onChange:t=>d(t.target.value),placeholder:". .",className:"w-full bg-transparent text-white text-lg outline-none placeholder-gray-700",maxLength:300})]}),Gt.jsxs("div",{className:"border border-gray-700 p-4",children:[Gt.jsx("label",{className:"text-gray-600 text-xs mb-2 block",children:"BODY"}),Gt.jsx("div",{ref:D,id:"content-editable",contentEditable:!0,onInput:()=>{D.current&&f(D.current.innerHTML)},placeholder:". .",className:"w-full bg-transparent text-white outline-none placeholder-gray-700 min-h-[100px] resize-none focus:outline-none focus:ring-0",style:{caretColor:"white",lineHeight:"1.5"}}),"text"===o&&Gt.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-700 flex-wrap",children:[Gt.jsx("button",{onClick:()=>QP("bold"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Bold",children:Gt.jsx(Fi,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("italic"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Italic",children:Gt.jsx(fs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("underline"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Underline",children:Gt.jsx(Fs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("insertUnorderedList"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Bullet List",children:Gt.jsx(gs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("insertOrderedList"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Numbered List",children:Gt.jsx(gs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("formatBlock","<pre>"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Code Block",children:Gt.jsx(rs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("formatBlock","<blockquote>"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Quote",children:Gt.jsx(Ss,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:JP,className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Insert Link",children:Gt.jsx(ms,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:XP,className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Insert Image",children:Gt.jsx(hs,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("justifyLeft"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Align Left",children:Gt.jsx(Pi,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("justifyCenter"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Align Center",children:Gt.jsx(Oi,{className:"w-4 h-4"})}),Gt.jsx("button",{onClick:()=>QP("justifyRight"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Align Right",children:Gt.jsx(ji,{className:"w-4 h-4"})}),Gt.jsxs("div",{className:"relative",children:[Gt.jsx("button",{onClick:()=>j(!P),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700",title:"Insert Emoji",children:Gt.jsx(js,{className:"w-4 h-4"})}),P&&Gt.jsx("div",{className:"absolute bottom-full left-0 mb-2 bg-[#2a2a2a] border border-gray-600 rounded-lg p-2 grid grid-cols-5 gap-1 z-10",children:["","","","","","","","","",""].map((t,e)=>Gt.jsx("button",{onClick:()=>{(t=>{QP("insertText",t)})(t),j(!1)},className:"w-8 h-8 flex items-center justify-center hover:bg-gray-600 rounded text-lg",children:t},e))})]}),Gt.jsx("button",{onClick:()=>QP("removeFormat"),className:"text-gray-400 hover:text-white transition-colors p-2 rounded hover:bg-gray-700 text-xs font-medium",title:"Clear Formatting",children:"Clear"})]})]}),"poll"===o&&Gt.jsxs("div",{className:"border border-gray-700 p-4 space-y-3",children:[Gt.jsx("div",{className:"grid grid-cols-2 gap-3",children:m.map((t,e)=>Gt.jsxs("div",{className:"relative",children:[Gt.jsx("input",{type:"text",value:t.text,onChange:e=>{return n=t.id,r=e.target.value,void p(m.map(t=>t.id===n?{...t,text:r}:t));var n,r},placeholder:`option ${e+1}`,className:"w-full bg-[#1a1a1a] text-white px-3 py-2 rounded outline-none placeholder-gray-600"}),m.length>2&&Gt.jsx("button",{onClick:()=>{return e=t.id,void(m.length>2&&p(m.filter(t=>t.id!==e)));var e},className:"absolute -top-2 -right-2 bg-red-500 rounded-full p-1",children:Gt.jsx(Ks,{className:"w-3 h-3 text-white"})})]},t.id))}),Gt.jsx("button",{onClick:()=>{const t=(m.length+1).toString();p([...m,{id:t,text:""}])},className:"w-full text-gray-500 hover:text-gray-400 transition-colors text-sm py-2",children:"Add another"})]}),"text"===o&&Gt.jsxs(Gt.Fragment,{children:[g&&Gt.jsx("div",{className:"border border-gray-700 p-4",children:Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(Wi,{className:"w-4 h-4 text-blue-400"}),Gt.jsx("span",{className:"text-white text-sm font-medium",children:g.name})]}),Gt.jsx("button",{onClick:()=>w(null),className:"text-gray-400 hover:text-red-400 transition-colors",title:"Remove company tag",children:Gt.jsx(Ks,{className:"w-4 h-4"})})]})}),Gt.jsxs("div",{className:"flex items-center gap-4",children:[Gt.jsx("button",{onClick:()=>x(!0),className:"text-gray-600 hover:text-gray-400 transition-colors text-sm",children:"TAG A COMPANY"}),Gt.jsx("button",{className:"text-gray-600 hover:text-gray-400 transition-colors text-sm",children:"abstract..."}),Gt.jsx("button",{className:"ml-auto text-gray-600 hover:text-gray-400 transition-colors",children:Gt.jsx(Ts,{className:"w-5 h-5"})})]})]})]})}),Gt.jsxs("div",{className:"flex-shrink-0 grid grid-cols-2 border-t border-gray-700",children:[Gt.jsxs("button",{onClick:()=>{try{const t={title:u,content:h,selectedBowl:c,selectedCompany:g,postType:o,pollOptions:m,timestamp:(new Date).toISOString()};localStorage.setItem("postDraft",JSON.stringify(t)),n({title:"Draft saved",description:"Your draft has been saved successfully"})}catch(t){n({title:"Save failed",description:"Couldn't save your draft",variant:"destructive"})}},className:"flex items-center justify-center gap-2 py-4 bg-[#1a1a1a] hover:bg-[#252525] transition-colors text-gray-400",children:[Gt.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[Gt.jsx("path",{d:"M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z",strokeWidth:"2"}),Gt.jsx("polyline",{points:"17 21 17 13 7 13 7 21",strokeWidth:"2"}),Gt.jsx("polyline",{points:"7 3 7 8 15 8",strokeWidth:"2"})]}),Gt.jsx("span",{className:"font-medium",children:"SAVE DRAFT"})]}),Gt.jsxs("button",{onClick:async()=>{var e;if(c)if(u.trim())if("poll"===o&&m.some(t=>!t.text.trim()))n({title:"Fill poll options",description:"Please fill in all poll options",variant:"destructive"});else{S(!0);try{const i=h.trim()||(null==(e=D.current)?void 0:e.innerText)||"",s={title:u.trim(),content:i,htmlContent:h,bowlId:c.id,organizationId:null==g?void 0:g.id,type:"poll"===o?"poll":"discussion",poll:"poll"===o?{title:u.trim(),description:i,options:m.map(t=>t.text),allowMultipleSelections:!1}:null};await Hn("POST","/api/posts",s),await r.invalidateQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),n({title:"Post created!",description:"Your post has been published"}),localStorage.removeItem("postDraft"),setTimeout(()=>t("/"),200)}catch(i){n({title:"Failed to post",description:"Please try again",variant:"destructive"})}finally{S(!1)}}else n({title:"Add a title",description:"Please add a title for your post",variant:"destructive"});else n({title:"Select a community",description:"Please select a community to post in",variant:"destructive"})},disabled:E||!c||!u.trim(),className:"flex items-center justify-center gap-2 py-4 bg-[#7dd3fc] hover:bg-[#6cc2eb] transition-colors text-black disabled:opacity-50",children:[Gt.jsx("svg",{className:"w-5 h-5 rotate-180",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:Gt.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7",strokeWidth:"2"})}),Gt.jsx("span",{className:"font-semibold",children:E?"POSTING...":"POST"})]})]}),Gt.jsx(WI,{children:y&&Gt.jsx(_I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 z-50 flex items-end",onClick:()=>v(!1),children:Gt.jsxs(_I.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full bg-[#1a1a1a] rounded-t-2xl max-h-[70vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[Gt.jsxs("div",{className:"p-4 border-b border-gray-700",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Gt.jsx("h3",{className:"text-white font-semibold",children:"Select Community"}),Gt.jsx("button",{onClick:()=>v(!1),className:"text-gray-400",children:Gt.jsx(Ks,{className:"w-5 h-5"})})]}),Gt.jsx("input",{type:"text",placeholder:"Search communities...",value:N,onChange:t=>k(t.target.value),className:"w-full bg-[#2a2a2a] text-white px-3 py-2 rounded outline-none"})]}),Gt.jsx("div",{className:"flex-1 overflow-y-auto",children:R.map(t=>Gt.jsxs("button",{onClick:()=>{l(t),v(!1),k("")},className:"w-full flex items-center gap-3 p-4 hover:bg-[#252525] transition-colors border-b border-gray-800",children:[Gt.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:Gt.jsx(Vs,{className:"w-5 h-5 text-white"})}),Gt.jsxs("div",{className:"text-left",children:[Gt.jsx("div",{className:"text-white font-medium",children:t.name}),Gt.jsx("div",{className:"text-gray-400 text-sm",children:t.description})]})]},t.id))})]})})}),Gt.jsx(WI,{children:b&&Gt.jsx(_I.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 z-50 flex items-end",onClick:()=>x(!1),children:Gt.jsxs(_I.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"w-full bg-[#1a1a1a] rounded-t-2xl max-h-[70vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[Gt.jsxs("div",{className:"p-4 border-b border-gray-700",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Gt.jsx("h3",{className:"text-white font-semibold",children:"Tag Company"}),Gt.jsx("button",{onClick:()=>x(!1),className:"text-gray-400",children:Gt.jsx(Ks,{className:"w-5 h-5"})})]}),Gt.jsx("input",{type:"text",placeholder:"Search companies...",value:M,onChange:t=>A(t.target.value),className:"w-full bg-[#2a2a2a] text-white px-3 py-2 rounded outline-none"})]}),Gt.jsx("div",{className:"flex-1 overflow-y-auto",children:B.length>0?B.map(t=>Gt.jsxs("button",{onClick:()=>{w(t),x(!1),A("")},className:"w-full flex items-center gap-3 p-4 hover:bg-[#252525] transition-colors border-b border-gray-800",children:[Gt.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center",children:Gt.jsx(Wi,{className:"w-5 h-5 text-white"})}),Gt.jsxs("div",{className:"text-left",children:[Gt.jsx("div",{className:"text-white font-medium",children:t.name}),Gt.jsx("div",{className:"text-gray-400 text-sm",children:t.description})]})]},t.id)):M.trim()?Gt.jsxs("button",{onClick:()=>{var t;(null==(t=M)?void 0:t.trim())&&(O(t.trim()),T(!0))},className:"w-full flex items-center gap-3 p-4 hover:bg-green-900/20 transition-colors border-b border-gray-800",children:[Gt.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center",children:Gt.jsx(Es,{className:"w-5 h-5 text-white"})}),Gt.jsxs("div",{className:"text-left",children:[Gt.jsxs("div",{className:"text-green-400 font-medium",children:['Create "',M,'"']}),Gt.jsx("div",{className:"text-gray-400 text-sm",children:"Add as new organization"})]})]}):Gt.jsx("div",{className:"p-8 text-center text-gray-500",children:"No companies found"})})]})})}),Gt.jsx(GP,{isOpen:C,onClose:()=>T(!1),organizationName:I,onOrganizationCreated:t=>{w(t),x(!1),A(""),r.invalidateQueries({queryKey:["organizations"]})}})]})}function ej(){const[t,e]=Ct.useState(!1);return Ct.useEffect(()=>{const t=()=>e(window.scrollY>2);return t(),window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),Gt.jsx(Gt.Fragment,{children:Gt.jsx("nav",{className:"bg-[#0a0a0a] border-b border-gray-800 fixed top-0 left-0 right-0 z-50 transition-shadow "+(t?"shadow-md":""),children:Gt.jsx("div",{className:"flex justify-center items-center h-14 px-4",children:Gt.jsx(Be,{href:"/",children:Gt.jsx("img",{src:"/anonn.png",alt:"Anonn Logo",className:"w-30 h-10"})})})})})}const{entries:nj,setPrototypeOf:rj,isFrozen:ij,getPrototypeOf:sj,getOwnPropertyDescriptor:oj}=Object;let{freeze:aj,seal:cj,create:lj}=Object,{apply:uj,construct:dj}="undefined"!=typeof Reflect&&Reflect;aj||(aj=function(t){return t}),cj||(cj=function(t){return t}),uj||(uj=function(t,e,n){return t.apply(e,n)}),dj||(dj=function(t,e){return new t(...e)});const hj=Sj(Array.prototype.forEach),fj=Sj(Array.prototype.lastIndexOf),mj=Sj(Array.prototype.pop),pj=Sj(Array.prototype.push),gj=Sj(Array.prototype.splice),wj=Sj(String.prototype.toLowerCase),yj=Sj(String.prototype.toString),vj=Sj(String.prototype.match),bj=Sj(String.prototype.replace),xj=Sj(String.prototype.indexOf),Nj=Sj(String.prototype.trim),kj=Sj(Object.prototype.hasOwnProperty),Mj=Sj(RegExp.prototype.test),Aj=(Ej=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return dj(Ej,e)});var Ej;function Sj(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return uj(t,e,r)}}function Cj(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wj;rj&&rj(t,null);let r=e.length;for(;r--;){let i=e[r];if("string"==typeof i){const t=n(i);t!==i&&(ij(e)||(e[r]=t),i=t)}t[i]=!0}return t}function Tj(t){for(let e=0;e<t.length;e++)kj(t,e)||(t[e]=null);return t}function Ij(t){const e=lj(null);for(const[n,r]of nj(t))kj(t,n)&&(Array.isArray(r)?e[n]=Tj(r):r&&"object"==typeof r&&r.constructor===Object?e[n]=Ij(r):e[n]=r);return e}function Oj(t,e){for(;null!==t;){const n=oj(t,e);if(n){if(n.get)return Sj(n.get);if("function"==typeof n.value)return Sj(n.value)}t=sj(t)}return function(){return null}}const Pj=aj(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),jj=aj(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Dj=aj(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),zj=aj(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_j=aj(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Rj=aj(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Bj=aj(["#text"]),$j=aj(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Uj=aj(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Fj=aj(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Lj=aj(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Wj=cj(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Vj=cj(/<%[\w\W]*|[\w\W]*%>/gm),qj=cj(/\$\{[\w\W]*/gm),Kj=cj(/^data-[\-\w.\u00B7-\uFFFF]+$/),Hj=cj(/^aria-[\-\w]+$/),Yj=cj(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Zj=cj(/^(?:\w+script|data):/i),Gj=cj(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Qj=cj(/^html$/i),Xj=cj(/^[a-z][.\w]*(-[.\w]+)+$/i);var Jj=Object.freeze({__proto__:null,ARIA_ATTR:Hj,ATTR_WHITESPACE:Gj,CUSTOM_ELEMENT:Xj,DATA_ATTR:Kj,DOCTYPE_NAME:Qj,ERB_EXPR:Vj,IS_ALLOWED_URI:Yj,IS_SCRIPT_OR_DATA:Zj,MUSTACHE_EXPR:Wj,TMPLIT_EXPR:qj}),tD=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window;const n=e=>t(e);if(n.version="3.2.6",n.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return n.isSupported=!1,n;let{document:r}=e;const i=r,s=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:c,Element:l,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=e,p=l.prototype,g=Oj(p,"cloneNode"),w=Oj(p,"remove"),y=Oj(p,"nextSibling"),v=Oj(p,"childNodes"),b=Oj(p,"parentNode");if("function"==typeof a){const t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let x,N="";const{implementation:k,createNodeIterator:M,createDocumentFragment:A,getElementsByTagName:E}=r,{importNode:S}=i;let C={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof nj&&"function"==typeof b&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:I,TMPLIT_EXPR:O,DATA_ATTR:P,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:z,CUSTOM_ELEMENT:_}=Jj;let{IS_ALLOWED_URI:R}=Jj,B=null;const $=Cj({},[...Pj,...jj,...Dj,..._j,...Bj]);let U=null;const F=Cj({},[...$j,...Uj,...Fj,...Lj]);let L=Object.seal(lj(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,V=null,q=!0,K=!0,H=!1,Y=!0,Z=!1,G=!0,Q=!1,X=!1,J=!1,tt=!1,et=!1,nt=!1,rt=!0,it=!1,st=!0,ot=!1,at={},ct=null;const lt=Cj({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ut=null;const dt=Cj({},["audio","video","img","source","image","track"]);let ht=null;const ft=Cj({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mt="http://www.w3.org/1998/Math/MathML",pt="http://www.w3.org/2000/svg",gt="http://www.w3.org/1999/xhtml";let wt=gt,yt=!1,vt=null;const bt=Cj({},[mt,pt,gt],yj);let xt=Cj({},["mi","mo","mn","ms","mtext"]),Nt=Cj({},["annotation-xml"]);const kt=Cj({},["title","style","font","a","script"]);let Mt=null;const At=["application/xhtml+xml","text/html"];let Et=null,St=null;const Ct=r.createElement("form"),Tt=function(t){return t instanceof RegExp||t instanceof Function},It=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!St||St!==t){if(t&&"object"==typeof t||(t={}),t=Ij(t),Mt=-1===At.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,Et="application/xhtml+xml"===Mt?yj:wj,B=kj(t,"ALLOWED_TAGS")?Cj({},t.ALLOWED_TAGS,Et):$,U=kj(t,"ALLOWED_ATTR")?Cj({},t.ALLOWED_ATTR,Et):F,vt=kj(t,"ALLOWED_NAMESPACES")?Cj({},t.ALLOWED_NAMESPACES,yj):bt,ht=kj(t,"ADD_URI_SAFE_ATTR")?Cj(Ij(ft),t.ADD_URI_SAFE_ATTR,Et):ft,ut=kj(t,"ADD_DATA_URI_TAGS")?Cj(Ij(dt),t.ADD_DATA_URI_TAGS,Et):dt,ct=kj(t,"FORBID_CONTENTS")?Cj({},t.FORBID_CONTENTS,Et):lt,W=kj(t,"FORBID_TAGS")?Cj({},t.FORBID_TAGS,Et):Ij({}),V=kj(t,"FORBID_ATTR")?Cj({},t.FORBID_ATTR,Et):Ij({}),at=!!kj(t,"USE_PROFILES")&&t.USE_PROFILES,q=!1!==t.ALLOW_ARIA_ATTR,K=!1!==t.ALLOW_DATA_ATTR,H=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Z=t.SAFE_FOR_TEMPLATES||!1,G=!1!==t.SAFE_FOR_XML,Q=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,nt=t.RETURN_TRUSTED_TYPE||!1,J=t.FORCE_BODY||!1,rt=!1!==t.SANITIZE_DOM,it=t.SANITIZE_NAMED_PROPS||!1,st=!1!==t.KEEP_CONTENT,ot=t.IN_PLACE||!1,R=t.ALLOWED_URI_REGEXP||Yj,wt=t.NAMESPACE||gt,xt=t.MATHML_TEXT_INTEGRATION_POINTS||xt,Nt=t.HTML_INTEGRATION_POINTS||Nt,L=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Tt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Tt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(L.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Z&&(K=!1),et&&(tt=!0),at&&(B=Cj({},Bj),U=[],!0===at.html&&(Cj(B,Pj),Cj(U,$j)),!0===at.svg&&(Cj(B,jj),Cj(U,Uj),Cj(U,Lj)),!0===at.svgFilters&&(Cj(B,Dj),Cj(U,Uj),Cj(U,Lj)),!0===at.mathMl&&(Cj(B,_j),Cj(U,Fj),Cj(U,Lj))),t.ADD_TAGS&&(B===$&&(B=Ij(B)),Cj(B,t.ADD_TAGS,Et)),t.ADD_ATTR&&(U===F&&(U=Ij(U)),Cj(U,t.ADD_ATTR,Et)),t.ADD_URI_SAFE_ATTR&&Cj(ht,t.ADD_URI_SAFE_ATTR,Et),t.FORBID_CONTENTS&&(ct===lt&&(ct=Ij(ct)),Cj(ct,t.FORBID_CONTENTS,Et)),st&&(B["#text"]=!0),Q&&Cj(B,["html","head","body"]),B.table&&(Cj(B,["tbody"]),delete W.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw Aj('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw Aj('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=t.TRUSTED_TYPES_POLICY,N=x.createHTML("")}else void 0===x&&(x=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:t=>t,createScriptURL:t=>t})}catch(s){return null}}(m,s)),null!==x&&"string"==typeof N&&(N=x.createHTML(""));aj&&aj(t),St=t}},Ot=Cj({},[...jj,...Dj,...zj]),Pt=Cj({},[..._j,...Rj]),jt=function(t){pj(n.removed,{element:t});try{b(t).removeChild(t)}catch(e){w(t)}},Dt=function(t,e){try{pj(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(r){pj(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(tt||et)try{jt(e)}catch(r){}else try{e.setAttribute(t,"")}catch(r){}},zt=function(t){let e=null,n=null;if(J)t="<remove></remove>"+t;else{const e=vj(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===Mt&&wt===gt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=x?x.createHTML(t):t;if(wt===gt)try{e=(new f).parseFromString(i,Mt)}catch(o){}if(!e||!e.documentElement){e=k.createDocument(wt,"template",null);try{e.documentElement.innerHTML=yt?N:i}catch(o){}}const s=e.body||e.documentElement;return t&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),wt===gt?E.call(e,Q?"html":"body")[0]:Q?e.documentElement:s},_t=function(t){return M.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Rt=function(t){return t instanceof h&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof d)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},Bt=function(t){return"function"==typeof c&&t instanceof c};function $t(t,e,r){hj(t,t=>{t.call(n,e,r,St)})}const Ut=function(t){let e=null;if($t(C.beforeSanitizeElements,t,null),Rt(t))return jt(t),!0;const r=Et(t.nodeName);if($t(C.uponSanitizeElement,t,{tagName:r,allowedTags:B}),G&&t.hasChildNodes()&&!Bt(t.firstElementChild)&&Mj(/<[/\w!]/g,t.innerHTML)&&Mj(/<[/\w!]/g,t.textContent))return jt(t),!0;if(7===t.nodeType)return jt(t),!0;if(G&&8===t.nodeType&&Mj(/<[/\w]/g,t.data))return jt(t),!0;if(!B[r]||W[r]){if(!W[r]&&Lt(r)){if(L.tagNameCheck instanceof RegExp&&Mj(L.tagNameCheck,r))return!1;if(L.tagNameCheck instanceof Function&&L.tagNameCheck(r))return!1}if(st&&!ct[r]){const e=b(t)||t.parentNode,n=v(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r){const i=g(n[r],!0);i.Xe=(t.Xe||0)+1,e.insertBefore(i,y(t))}}return jt(t),!0}return t instanceof l&&!function(t){let e=b(t);e&&e.tagName||(e={namespaceURI:wt,tagName:"template"});const n=wj(t.tagName),r=wj(e.tagName);return!!vt[t.namespaceURI]&&(t.namespaceURI===pt?e.namespaceURI===gt?"svg"===n:e.namespaceURI===mt?"svg"===n&&("annotation-xml"===r||xt[r]):Boolean(Ot[n]):t.namespaceURI===mt?e.namespaceURI===gt?"math"===n:e.namespaceURI===pt?"math"===n&&Nt[r]:Boolean(Pt[n]):t.namespaceURI===gt?!(e.namespaceURI===pt&&!Nt[r])&&!(e.namespaceURI===mt&&!xt[r])&&!Pt[n]&&(kt[n]||!Ot[n]):!("application/xhtml+xml"!==Mt||!vt[t.namespaceURI]))}(t)?(jt(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!Mj(/<\/no(script|embed|frames)/i,t.innerHTML)?(Z&&3===t.nodeType&&(e=t.textContent,hj([T,I,O],t=>{e=bj(e,t," ")}),t.textContent!==e&&(pj(n.removed,{element:t.cloneNode()}),t.textContent=e)),$t(C.afterSanitizeElements,t,null),!1):(jt(t),!0)},Ft=function(t,e,n){if(rt&&("id"===e||"name"===e)&&(n in r||n in Ct))return!1;if(K&&!V[e]&&Mj(P,e));else if(q&&Mj(j,e));else if(!U[e]||V[e]){if(!(Lt(t)&&(L.tagNameCheck instanceof RegExp&&Mj(L.tagNameCheck,t)||L.tagNameCheck instanceof Function&&L.tagNameCheck(t))&&(L.attributeNameCheck instanceof RegExp&&Mj(L.attributeNameCheck,e)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(e))||"is"===e&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&Mj(L.tagNameCheck,n)||L.tagNameCheck instanceof Function&&L.tagNameCheck(n))))return!1}else if(ht[e]);else if(Mj(R,bj(n,z,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==xj(n,"data:")||!ut[t])if(H&&!Mj(D,bj(n,z,"")));else if(n)return!1;return!0},Lt=function(t){return"annotation-xml"!==t&&vj(t,_)},Wt=function(t){$t(C.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||Rt(t))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:U,forceKeepAttr:void 0};let i=e.length;for(;i--;){const o=e[i],{name:a,namespaceURI:c,value:l}=o,u=Et(a),d=l;let h="value"===a?d:Nj(d);if(r.attrName=u,r.attrValue=h,r.keepAttr=!0,r.forceKeepAttr=void 0,$t(C.uponSanitizeAttribute,t,r),h=r.attrValue,!it||"id"!==u&&"name"!==u||(Dt(a,t),h="user-content-"+h),G&&Mj(/((--!?|])>)|<\/(style|title)/i,h)){Dt(a,t);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){Dt(a,t);continue}if(!Y&&Mj(/\/>/i,h)){Dt(a,t);continue}Z&&hj([T,I,O],t=>{h=bj(h,t," ")});const f=Et(t.nodeName);if(Ft(f,u,h)){if(x&&"object"==typeof m&&"function"==typeof m.getAttributeType)if(c);else switch(m.getAttributeType(f,u)){case"TrustedHTML":h=x.createHTML(h);break;case"TrustedScriptURL":h=x.createScriptURL(h)}if(h!==d)try{c?t.setAttributeNS(c,a,h):t.setAttribute(a,h),Rt(t)?jt(t):mj(n.removed)}catch(s){Dt(a,t)}}else Dt(a,t)}$t(C.afterSanitizeAttributes,t,null)},Vt=function t(e){let n=null;const r=_t(e);for($t(C.beforeSanitizeShadowDOM,e,null);n=r.nextNode();)$t(C.uponSanitizeShadowNode,n,null),Ut(n),Wt(n),n.content instanceof o&&t(n.content);$t(C.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,a=null,l=null;if(yt=!t,yt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Bt(t)){if("function"!=typeof t.toString)throw Aj("toString is not a function");if("string"!=typeof(t=t.toString()))throw Aj("dirty is not a string, aborting")}if(!n.isSupported)return t;if(X||It(e),n.removed=[],"string"==typeof t&&(ot=!1),ot){if(t.nodeName){const e=Et(t.nodeName);if(!B[e]||W[e])throw Aj("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)r=zt("\x3c!----\x3e"),s=r.ownerDocument.importNode(t,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!tt&&!Z&&!Q&&-1===t.indexOf("<"))return x&&nt?x.createHTML(t):t;if(r=zt(t),!r)return tt?null:nt?N:""}r&&J&&jt(r.firstChild);const u=_t(ot?t:r);for(;a=u.nextNode();)Ut(a),Wt(a),a.content instanceof o&&Vt(a.content);if(ot)return t;if(tt){if(et)for(l=A.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(U.shadowroot||U.shadowrootmode)&&(l=S.call(i,l,!0)),l}let d=Q?r.outerHTML:r.innerHTML;return Q&&B["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Mj(Qj,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),Z&&hj([T,I,O],t=>{d=bj(d,t," ")}),x&&nt?x.createHTML(d):d},n.setConfig=function(){It(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),X=!0},n.clearConfig=function(){St=null,X=!1},n.isValidAttribute=function(t,e,n){St||It({});const r=Et(t),i=Et(e);return Ft(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&pj(C[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=fj(C[t],e);return-1===n?void 0:gj(C[t],n,1)[0]}return mj(C[t])},n.removeHooks=function(t){C[t]=[]},n.removeAllHooks=function(){C={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function eD({content:t,className:e=""}){return Gt.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none ${e}`,dangerouslySetInnerHTML:{Je:(t=>{if(!t)return"";let e=t;return e=e.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mb-2 mt-4">$1</h3>'),e=e.replace(/^## (.*$)/gim,'<h2 class="text-xl font-bold mb-3 mt-4">$1</h2>'),e=e.replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mb-4 mt-4">$1</h1>'),e=e.replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>'),e=e.replace(/\*(.*?)\*/g,'<em class="italic">$1</em>'),e=e.replace(/__(.*?)__/g,'<u class="underline">$1</u>'),e=e.replace(/`(.*?)`/g,'<code class="bg-gray-100 dark:bg-slate-700 px-1 py-0.5 rounded text-sm font-mono">$1</code>'),e=e.replace(/```([\s\S]*?)```/g,'<pre class="bg-gray-100 dark:bg-slate-700 p-3 rounded-lg overflow-x-auto my-3"><code class="text-sm font-mono">$1</code></pre>'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 underline">$1</a>'),e=e.replace(/^- (.*$)/gim,'<li class="ml-4">$1</li>'),e=e.replace(/^\d+\. (.*$)/gim,'<li class="ml-4">$1</li>'),e=e.replace(/(<li[\s\S]*?<\/li>)/g,'<ul class="list-disc ml-4 mb-3">$1</ul>'),e=e.replace(/^> (.*$)/gim,'<blockquote class="border-l-4 border-gray-300 dark:border-slate-600 pl-4 py-2 my-3 bg-gray-50 dark:bg-slate-800 italic">$1</blockquote>'),e=e.replace(/\n/g,"<br />"),e=e.replace(/<\/ul>\s*<ul[^>]*>/g,""),tD.sanitize(e,{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","b","em","i","u","code","pre","a","li","ul","ol","blockquote","br","p","span","div"],ALLOWED_ATTR:{a:["href","target","rel","class"],"*":["class"]},ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i,ADD_ATTR:["target","rel"],FORBID_TAGS:["script","object","embed","form","input","textarea","button"],FORBID_ATTR:["style","onerror","onload","onclick","onmouseover","onfocus","onblur"],USE_PROFILES:{html:!0},RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!1})})(t)}})}const nD={posts:{all:()=>["posts"],lists:()=>[...nD.posts.all(),"list"],list:t=>[...nD.posts.lists(),t],details:()=>[...nD.posts.all(),"detail"],detail:t=>[...nD.posts.details(),t],api:{all:()=>["/api/posts"],byUser:t=>[...nD.posts.api.all(),"user",t],byOrganization:t=>[...nD.posts.api.all(),"organization",t],byBowl:t=>[...nD.posts.api.all(),"bowl",t],comments:t=>[...nD.posts.api.all(),t,"comments"]},featured:()=>["featured-posts"],trending:t=>t?["trending-posts",t]:["trending-posts"]},polls:{all:()=>["polls"],detail:t=>[...nD.polls.all(),t],comments:t=>[...nD.polls.all(),t,"comments"]},user:{current:()=>["/api/auth/user"],profile:t=>["user","profile",t]},organizations:{all:()=>["/api/organizations"],detail:t=>["organization",t]},bowls:{all:()=>["/api/bowls"],detail:t=>["bowl",t]}};function rD(t,e,n,r){var i,s;let o=t.upvotes,a=t.downvotes,c=t.userVote;return t.userVote?t.userVote.voteType===e?("up"===e?o--:a--,c=void 0):("up"===t.userVote.voteType?(o--,"down"===e&&a++):(a--,"up"===e&&o++),c={...t.userVote,voteType:e}):("up"===e?o++:a++,c={id:0,userId:"",targetId:(null==(i=t.userVote)?void 0:i.targetId)||n,targetType:(null==(s=t.userVote)?void 0:s.targetType)||r,voteType:e,createdAt:null}),{upvotes:o,downvotes:a,userVote:c}}function iD(t,e,n,r){t.getQueryCache().getAll().forEach(n=>{const i=n.queryKey;Array.isArray(i)&&("posts"===i[0]||"/api/posts"===i[0]||"featured-posts"===i[0]||"trending-posts"===i[0]||"polls"===i[0])&&t.setQueryData(i,t=>t?Array.isArray(t)?t.map(t=>t.id===e?r(t):t):t.id===e?r(t):t:t)})}function sD(t,e,n){[{queryKey:nD.posts.all()},{queryKey:nD.posts.api.all()},{queryKey:nD.posts.featured()},{predicate:t=>{const e=t.queryKey;return!!Array.isArray(e)&&("posts"===e[0]&&e.length>=2||"trending-posts"===e[0]||"/api/posts"===e[0])}}].forEach(e=>{t.invalidateQueries(e)}),"post"===n?(t.invalidateQueries({queryKey:nD.posts.detail(e)}),t.invalidateQueries({queryKey:nD.posts.api.comments(e)})):"poll"===n&&(t.invalidateQueries({queryKey:nD.polls.detail(e)}),t.invalidateQueries({queryKey:nD.polls.comments(e)})),t.invalidateQueries({queryKey:nD.user.current()})}async function oD(t){const{targetId:e,targetType:n,voteType:r}=t;return"poll"===n?await Hn("POST",`/api/polls/${e}/votes`,{voteType:r}):await Hn("POST","/api/vote",{targetId:e,targetType:n,voteType:r})}async function aD(t,e,n){await t.cancelQueries({queryKey:nD.posts.all()}),await t.cancelQueries({queryKey:nD.posts.api.all()}),await t.cancelQueries({queryKey:nD.posts.featured()}),await t.cancelQueries({predicate:t=>{const e=t.queryKey;return!!Array.isArray(e)&&("trending-posts"===e[0]||"posts"===e[0]&&e.length>=2)}}),"post"===n?await t.cancelQueries({queryKey:nD.posts.detail(e)}):"poll"===n&&await t.cancelQueries({queryKey:nD.polls.detail(e)})}function cD(t){return/^401: .*Unauthorized/.test(t.message)}var lD=Ct.createContext(void 0);function uD(t){const e=Ct.useContext(lD);return t||e||"ltr"}var dD="rovingFocusGroup.onEntryFocus",hD={bubbles:!1,cancelable:!0},fD="RovingFocusGroup",[mD,pD,gD]=gr(fD),[wD,yD]=cr(fD,[gD]),[vD,bD]=wD(fD),xD=Ct.forwardRef((t,e)=>Gt.jsx(mD.Provider,{scope:t.tn,children:Gt.jsx(mD.Slot,{scope:t.tn,children:Gt.jsx(ND,{...t,ref:e})})}));xD.displayName=fD;var ND=Ct.forwardRef((t,e)=>{const{tn:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=t,h=Ct.useRef(null),f=ar(e,h),m=uD(s),[p=null,g]=jr({prop:o,defaultProp:a,onChange:c}),[w,y]=Ct.useState(!1),v=vr(l),b=pD(n),x=Ct.useRef(!1),[N,k]=Ct.useState(0);return Ct.useEffect(()=>{const t=h.current;if(t)return t.addEventListener(dD,v),()=>t.removeEventListener(dD,v)},[v]),Gt.jsx(vD,{scope:n,orientation:r,dir:m,loop:i,currentTabStopId:p,onItemFocus:Ct.useCallback(t=>g(t),[g]),onItemShiftTab:Ct.useCallback(()=>y(!0),[]),onFocusableItemAdd:Ct.useCallback(()=>k(t=>t+1),[]),onFocusableItemRemove:Ct.useCallback(()=>k(t=>t-1),[]),children:Gt.jsx(wr.div,{tabIndex:w||0===N?-1:0,"data-orientation":r,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:ir(t.onMouseDown,()=>{x.current=!0}),onFocus:ir(t.onFocus,t=>{const e=!x.current;if(t.target===t.currentTarget&&e&&!w){const e=new CustomEvent(dD,hD);if(t.currentTarget.dispatchEvent(e),!e.defaultPrevented){const t=b().filter(t=>t.focusable);ED([t.find(t=>t.active),t.find(t=>t.id===p),...t].filter(Boolean).map(t=>t.ref.current),u)}}x.current=!1}),onBlur:ir(t.onBlur,()=>y(!1))})})}),kD="RovingFocusGroupItem",MD=Ct.forwardRef((t,e)=>{const{tn:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,a=ma(),c=s||a,l=bD(kD,n),u=l.currentTabStopId===c,d=pD(n),{onFocusableItemAdd:h,onFocusableItemRemove:f}=l;return Ct.useEffect(()=>{if(r)return h(),()=>f()},[r,h,f]),Gt.jsx(mD.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:Gt.jsx(wr.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...o,ref:e,onMouseDown:ir(t.onMouseDown,t=>{r?l.onItemFocus(c):t.preventDefault()}),onFocus:ir(t.onFocus,()=>l.onItemFocus(c)),onKeyDown:ir(t.onKeyDown,t=>{if("Tab"===t.key&&t.shiftKey)return void l.onItemShiftTab();if(t.target!==t.currentTarget)return;const e=function(t,e,n){const r=function(t,e){return"rtl"!==e?t:"ArrowLeft"===t?"ArrowRight":"ArrowRight"===t?"ArrowLeft":t}(t.key,n);return"vertical"===e&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===e&&["ArrowUp","ArrowDown"].includes(r)?void 0:AD[r]}(t,l.orientation,l.dir);if(void 0!==e){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let i=d().filter(t=>t.focusable).map(t=>t.ref.current);if("last"===e)i.reverse();else if("prev"===e||"next"===e){"prev"===e&&i.reverse();const s=i.indexOf(t.currentTarget);i=l.loop?(r=s+1,(n=i).map((t,e)=>n[(r+e)%n.length])):i.slice(s+1)}setTimeout(()=>ED(i))}var n,r})})})});MD.displayName=kD;var AD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ED(t,e=!1){const n=document.activeElement;for(const r of t){if(r===n)return;if(r.focus({preventScroll:e}),document.activeElement!==n)return}}var SD=xD,CD=MD,TD=["Enter"," "],ID=["ArrowUp","PageDown","End"],OD=["ArrowDown","PageUp","Home",...ID],PD={ltr:[...TD,"ArrowRight"],rtl:[...TD,"ArrowLeft"]},jD={ltr:["ArrowLeft"],rtl:["ArrowRight"]},DD="Menu",[zD,_D,RD]=gr(DD),[BD,$D]=cr(DD,[RD,qc,yD]),UD=qc(),FD=yD(),[LD,WD]=BD(DD),[VD,qD]=BD(DD),KD=t=>{const{en:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=UD(e),[c,l]=Ct.useState(null),u=Ct.useRef(!1),d=vr(s),h=uD(i);return Ct.useEffect(()=>{const t=()=>{u.current=!0,document.addEventListener("pointerdown",e,{capture:!0,once:!0}),document.addEventListener("pointermove",e,{capture:!0,once:!0})},e=()=>u.current=!1;return document.addEventListener("keydown",t,{capture:!0}),()=>{document.removeEventListener("keydown",t,{capture:!0}),document.removeEventListener("pointerdown",e,{capture:!0}),document.removeEventListener("pointermove",e,{capture:!0})}},[]),Gt.jsx(al,{...a,children:Gt.jsx(LD,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:l,children:Gt.jsx(VD,{scope:e,onClose:Ct.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};KD.displayName=DD;var HD=Ct.forwardRef((t,e)=>{const{en:n,...r}=t,i=UD(n);return Gt.jsx(cl,{...i,...r,ref:e})});HD.displayName="MenuAnchor";var YD="MenuPortal",[ZD,GD]=BD(YD,{forceMount:void 0}),QD=t=>{const{en:e,forceMount:n,children:r,container:i}=t,s=WD(YD,e);return Gt.jsx(ZD,{scope:e,forceMount:n,children:Gt.jsx(Or,{present:n||s.open,children:Gt.jsx(Ir,{asChild:!0,container:i,children:r})})})};QD.displayName=YD;var XD="MenuContent",[JD,tz]=BD(XD),ez=Ct.forwardRef((t,e)=>{const n=GD(XD,t.en),{forceMount:r=n.forceMount,...i}=t,s=WD(XD,t.en),o=qD(XD,t.en);return Gt.jsx(zD.Provider,{scope:t.en,children:Gt.jsx(Or,{present:r||s.open,children:Gt.jsx(zD.Slot,{scope:t.en,children:o.modal?Gt.jsx(nz,{...i,ref:e}):Gt.jsx(rz,{...i,ref:e})})})})}),nz=Ct.forwardRef((t,e)=>{const n=WD(XD,t.en),r=Ct.useRef(null),i=ar(e,r);return Ct.useEffect(()=>{const t=r.current;if(t)return JO(t)},[]),Gt.jsx(sz,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ir(t.onFocusOutside,t=>t.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rz=Ct.forwardRef((t,e)=>{const n=WD(XD,t.en);return Gt.jsx(sz,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),iz=ur("MenuContent.ScrollLock"),sz=Ct.forwardRef((t,e)=>{const{en:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:m,...p}=t,g=WD(XD,n),w=qD(XD,n),y=UD(n),v=FD(n),b=_D(n),[x,N]=Ct.useState(null),k=Ct.useRef(null),M=ar(e,k,g.onContentChange),A=Ct.useRef(0),E=Ct.useRef(""),S=Ct.useRef(0),C=Ct.useRef(null),T=Ct.useRef("right"),I=Ct.useRef(0),O=m?HO:Ct.Fragment,P=m?{as:iz,allowPinchZoom:!0}:void 0;Ct.useEffect(()=>()=>window.clearTimeout(A.current),[]),dO();const j=Ct.useCallback(t=>{var e,n;return T.current===(null==(e=C.current)?void 0:e.side)&&function(t,e){return!!e&&function(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const t=e[s].x,a=e[s].y,c=e[o].x,l=e[o].y;a>r!=l>r&&n<(c-t)*(r-a)/(l-a)+t&&(i=!i)}return i}({x:t.clientX,y:t.clientY},e)}(t,null==(n=C.current)?void 0:n.area)},[]);return Gt.jsx(JD,{scope:n,searchRef:E,onItemEnter:Ct.useCallback(t=>{j(t)&&t.preventDefault()},[j]),onItemLeave:Ct.useCallback(t=>{var e;j(t)||(null==(e=k.current)||e.focus(),N(null))},[j]),onTriggerLeave:Ct.useCallback(t=>{j(t)&&t.preventDefault()},[j]),pointerGraceTimerRef:S,onPointerGraceIntentChange:Ct.useCallback(t=>{C.current=t},[]),children:Gt.jsx(O,{...P,children:Gt.jsx(rO,{asChild:!0,trapped:i,onMountAutoFocus:ir(s,t=>{var e;t.preventDefault(),null==(e=k.current)||e.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:Gt.jsx(kr,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,children:Gt.jsx(SD,{asChild:!0,...v,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:x,onCurrentTabStopIdChange:N,onEntryFocus:ir(c,t=>{w.isUsingKeyboardRef.current||t.preventDefault()}),preventScrollOnEntryFocus:!0,children:Gt.jsx(ll,{role:"menu","aria-orientation":"vertical","data-state":Oz(g.open),"data-radix-menu-content":"",dir:w.dir,...y,...p,ref:M,style:{outline:"none",...p.style},onKeyDown:ir(p.onKeyDown,t=>{const e=t.target.closest("[data-radix-menu-content]")===t.currentTarget,n=t.ctrlKey||t.altKey||t.metaKey,r=1===t.key.length;e&&("Tab"===t.key&&t.preventDefault(),!n&&r&&(t=>{var e,n;const r=E.current+t,i=b().filter(t=>!t.disabled),s=document.activeElement,o=null==(e=i.find(t=>t.ref.current===s))?void 0:e.textValue,a=function(t,e,n){const r=e.length>1&&Array.from(e).every(t=>t===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=(o=t,a=Math.max(i,0),o.map((t,e)=>o[(a+e)%o.length]));var o,a;1===r.length&&(s=s.filter(t=>t!==n));const c=s.find(t=>t.toLowerCase().startsWith(r.toLowerCase()));return c!==n?c:void 0}(i.map(t=>t.textValue),r,o),c=null==(n=i.find(t=>t.textValue===a))?void 0:n.ref.current;!function t(e){E.current=e,window.clearTimeout(A.current),""!==e&&(A.current=window.setTimeout(()=>t(""),1e3))}(r),c&&setTimeout(()=>c.focus())})(t.key));const i=k.current;if(t.target!==i)return;if(!OD.includes(t.key))return;t.preventDefault();const s=b().filter(t=>!t.disabled).map(t=>t.ref.current);ID.includes(t.key)&&s.reverse(),function(t){const e=document.activeElement;for(const n of t){if(n===e)return;if(n.focus(),document.activeElement!==e)return}}(s)}),onBlur:ir(t.onBlur,t=>{t.currentTarget.contains(t.target)||(window.clearTimeout(A.current),E.current="")}),onPointerMove:ir(t.onPointerMove,Dz(t=>{const e=t.target,n=I.current!==t.clientX;if(t.currentTarget.contains(e)&&n){const e=t.clientX>I.current?"right":"left";T.current=e,I.current=t.clientX}}))})})})})})})});ez.displayName=XD;var oz=Ct.forwardRef((t,e)=>{const{en:n,...r}=t;return Gt.jsx(wr.div,{role:"group",...r,ref:e})});oz.displayName="MenuGroup";var az=Ct.forwardRef((t,e)=>{const{en:n,...r}=t;return Gt.jsx(wr.div,{...r,ref:e})});az.displayName="MenuLabel";var cz="MenuItem",lz="menu.itemSelect",uz=Ct.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=Ct.useRef(null),o=qD(cz,t.en),a=tz(cz,t.en),c=ar(e,s),l=Ct.useRef(!1);return Gt.jsx(dz,{...i,ref:c,disabled:n,onClick:ir(t.onClick,()=>{const t=s.current;if(!n&&t){const e=new CustomEvent(lz,{bubbles:!0,cancelable:!0});t.addEventListener(lz,t=>null==r?void 0:r(t),{once:!0}),yr(t,e),e.defaultPrevented?l.current=!1:o.onClose()}}),onPointerDown:e=>{var n;null==(n=t.onPointerDown)||n.call(t,e),l.current=!0},onPointerUp:ir(t.onPointerUp,t=>{var e;l.current||null==(e=t.currentTarget)||e.click()}),onKeyDown:ir(t.onKeyDown,t=>{const e=""!==a.searchRef.current;n||e&&" "===t.key||TD.includes(t.key)&&(t.currentTarget.click(),t.preventDefault())})})});uz.displayName=cz;var dz=Ct.forwardRef((t,e)=>{const{en:n,disabled:r=!1,textValue:i,...s}=t,o=tz(cz,n),a=FD(n),c=Ct.useRef(null),l=ar(e,c),[u,d]=Ct.useState(!1),[h,f]=Ct.useState("");return Ct.useEffect(()=>{const t=c.current;t&&f((t.textContent??"").trim())},[s.children]),Gt.jsx(zD.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:Gt.jsx(CD,{asChild:!0,...a,focusable:!r,children:Gt.jsx(wr.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:l,onPointerMove:ir(t.onPointerMove,Dz(t=>{r?o.onItemLeave(t):(o.onItemEnter(t),t.defaultPrevented||t.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ir(t.onPointerLeave,Dz(t=>o.onItemLeave(t))),onFocus:ir(t.onFocus,()=>d(!0)),onBlur:ir(t.onBlur,()=>d(!1))})})})}),hz=Ct.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return Gt.jsx(bz,{scope:t.en,checked:n,children:Gt.jsx(uz,{role:"menuitemcheckbox","aria-checked":Pz(n)?"mixed":n,...i,ref:e,"data-state":jz(n),onSelect:ir(i.onSelect,()=>null==r?void 0:r(!!Pz(n)||!n),{checkForDefaultPrevented:!1})})})});hz.displayName="MenuCheckboxItem";var fz="MenuRadioGroup",[mz,pz]=BD(fz,{value:void 0,onValueChange:()=>{}}),gz=Ct.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=vr(r);return Gt.jsx(mz,{scope:t.en,value:n,onValueChange:s,children:Gt.jsx(oz,{...i,ref:e})})});gz.displayName=fz;var wz="MenuRadioItem",yz=Ct.forwardRef((t,e)=>{const{value:n,...r}=t,i=pz(wz,t.en),s=n===i.value;return Gt.jsx(bz,{scope:t.en,checked:s,children:Gt.jsx(uz,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":jz(s),onSelect:ir(r.onSelect,()=>{var t;return null==(t=i.onValueChange)?void 0:t.call(i,n)},{checkForDefaultPrevented:!1})})})});yz.displayName=wz;var vz="MenuItemIndicator",[bz,xz]=BD(vz,{checked:!1}),Nz=Ct.forwardRef((t,e)=>{const{en:n,forceMount:r,...i}=t,s=xz(vz,n);return Gt.jsx(Or,{present:r||Pz(s.checked)||!0===s.checked,children:Gt.jsx(wr.span,{...i,ref:e,"data-state":jz(s.checked)})})});Nz.displayName=vz;var kz=Ct.forwardRef((t,e)=>{const{en:n,...r}=t;return Gt.jsx(wr.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});kz.displayName="MenuSeparator";var Mz=Ct.forwardRef((t,e)=>{const{en:n,...r}=t,i=UD(n);return Gt.jsx(ul,{...i,...r,ref:e})});Mz.displayName="MenuArrow";var[Az,Ez]=BD("MenuSub"),Sz="MenuSubTrigger",Cz=Ct.forwardRef((t,e)=>{const n=WD(Sz,t.en),r=qD(Sz,t.en),i=Ez(Sz,t.en),s=tz(Sz,t.en),o=Ct.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=s,l={en:t.en},u=Ct.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return Ct.useEffect(()=>u,[u]),Ct.useEffect(()=>{const t=a.current;return()=>{window.clearTimeout(t),c(null)}},[a,c]),Gt.jsx(HD,{asChild:!0,...l,children:Gt.jsx(dz,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Oz(n.open),...t,ref:or(e,i.onTriggerChange),onClick:e=>{var r;null==(r=t.onClick)||r.call(t,e),t.disabled||e.defaultPrevented||(e.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ir(t.onPointerMove,Dz(e=>{s.onItemEnter(e),e.defaultPrevented||t.disabled||n.open||o.current||(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ir(t.onPointerLeave,Dz(t=>{var e,r;u();const i=null==(e=n.content)?void 0:e.getBoundingClientRect();if(i){const e=null==(r=n.content)?void 0:r.dataset.side,o="right"===e,c=o?-5:5,l=i[o?"left":"right"],u=i[o?"right":"left"];s.onPointerGraceIntentChange({area:[{x:t.clientX+c,y:t.clientY},{x:l,y:i.top},{x:u,y:i.top},{x:u,y:i.bottom},{x:l,y:i.bottom}],side:e}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(t),t.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ir(t.onKeyDown,e=>{var i;const o=""!==s.searchRef.current;t.disabled||o&&" "===e.key||PD[r.dir].includes(e.key)&&(n.onOpenChange(!0),null==(i=n.content)||i.focus(),e.preventDefault())})})})});Cz.displayName=Sz;var Tz="MenuSubContent",Iz=Ct.forwardRef((t,e)=>{const n=GD(XD,t.en),{forceMount:r=n.forceMount,...i}=t,s=WD(XD,t.en),o=qD(XD,t.en),a=Ez(Tz,t.en),c=Ct.useRef(null),l=ar(e,c);return Gt.jsx(zD.Provider,{scope:t.en,children:Gt.jsx(Or,{present:r||s.open,children:Gt.jsx(zD.Slot,{scope:t.en,children:Gt.jsx(sz,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:t=>{var e;o.isUsingKeyboardRef.current&&(null==(e=c.current)||e.focus()),t.preventDefault()},onCloseAutoFocus:t=>t.preventDefault(),onFocusOutside:ir(t.onFocusOutside,t=>{t.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ir(t.onEscapeKeyDown,t=>{o.onClose(),t.preventDefault()}),onKeyDown:ir(t.onKeyDown,t=>{var e;const n=t.currentTarget.contains(t.target),r=jD[o.dir].includes(t.key);n&&r&&(s.onOpenChange(!1),null==(e=a.trigger)||e.focus(),t.preventDefault())})})})})})});function Oz(t){return t?"open":"closed"}function Pz(t){return"indeterminate"===t}function jz(t){return Pz(t)?"indeterminate":t?"checked":"unchecked"}function Dz(t){return e=>"mouse"===e.pointerType?t(e):void 0}Iz.displayName=Tz;var zz=KD,_z=HD,Rz=QD,Bz=ez,$z=oz,Uz=az,Fz=uz,Lz=hz,Wz=gz,Vz=yz,qz=Nz,Kz=kz,Hz=Mz,Yz=Cz,Zz=Iz,Gz="DropdownMenu",[Qz,Xz]=cr(Gz,[$D]),Jz=$D(),[t_,e_]=Qz(Gz),n_=t=>{const{nn:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,c=Jz(e),l=Ct.useRef(null),[u=!1,d]=jr({prop:i,defaultProp:s,onChange:o});return Gt.jsx(t_,{scope:e,triggerId:ma(),triggerRef:l,contentId:ma(),open:u,onOpenChange:d,onOpenToggle:Ct.useCallback(()=>d(t=>!t),[d]),modal:a,children:Gt.jsx(zz,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};n_.displayName=Gz;var r_="DropdownMenuTrigger",i_=Ct.forwardRef((t,e)=>{const{nn:n,disabled:r=!1,...i}=t,s=e_(r_,n),o=Jz(n);return Gt.jsx(_z,{asChild:!0,...o,children:Gt.jsx(wr.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:or(e,s.triggerRef),onPointerDown:ir(t.onPointerDown,t=>{r||0!==t.button||!1!==t.ctrlKey||(s.onOpenToggle(),s.open||t.preventDefault())}),onKeyDown:ir(t.onKeyDown,t=>{r||(["Enter"," "].includes(t.key)&&s.onOpenToggle(),"ArrowDown"===t.key&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(t.key)&&t.preventDefault())})})})});i_.displayName=r_;var s_=t=>{const{nn:e,...n}=t,r=Jz(e);return Gt.jsx(Rz,{...r,...n})};s_.displayName="DropdownMenuPortal";var o_="DropdownMenuContent",a_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=e_(o_,n),s=Jz(n),o=Ct.useRef(!1);return Gt.jsx(Bz,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:ir(t.onCloseAutoFocus,t=>{var e;o.current||null==(e=i.triggerRef.current)||e.focus(),o.current=!1,t.preventDefault()}),onInteractOutside:ir(t.onInteractOutside,t=>{const e=t.detail.originalEvent,n=0===e.button&&!0===e.ctrlKey,r=2===e.button||n;i.modal&&!r||(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a_.displayName=o_,Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx($z,{...i,...r,ref:e})}).displayName="DropdownMenuGroup";var c_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Uz,{...i,...r,ref:e})});c_.displayName="DropdownMenuLabel";var l_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Fz,{...i,...r,ref:e})});l_.displayName="DropdownMenuItem";var u_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Lz,{...i,...r,ref:e})});u_.displayName="DropdownMenuCheckboxItem",Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Wz,{...i,...r,ref:e})}).displayName="DropdownMenuRadioGroup";var d_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Vz,{...i,...r,ref:e})});d_.displayName="DropdownMenuRadioItem";var h_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(qz,{...i,...r,ref:e})});h_.displayName="DropdownMenuItemIndicator";var f_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Kz,{...i,...r,ref:e})});f_.displayName="DropdownMenuSeparator",Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Hz,{...i,...r,ref:e})}).displayName="DropdownMenuArrow";var m_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Yz,{...i,...r,ref:e})});m_.displayName="DropdownMenuSubTrigger";var p_=Ct.forwardRef((t,e)=>{const{nn:n,...r}=t,i=Jz(n);return Gt.jsx(Zz,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});p_.displayName="DropdownMenuSubContent";var g_=s_,w_=a_,y_=c_,v_=l_,b_=u_,x_=d_,N_=h_,k_=f_,M_=m_,A_=p_;const E_=n_,S_=i_;Ct.forwardRef(({className:t,inset:e,children:n,...r},i)=>Gt.jsxs(M_,{ref:i,className:na("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,Gt.jsx(Qi,{className:"ml-auto"})]})).displayName=M_.displayName,Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(A_,{ref:n,className:na("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e})).displayName=A_.displayName;const C_=Ct.forwardRef(({className:t,sideOffset:e=4,...n},r)=>Gt.jsx(g_,{children:Gt.jsx(w_,{ref:r,sideOffset:e,className:na("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));C_.displayName=w_.displayName;const T_=Ct.forwardRef(({className:t,inset:e,...n},r)=>Gt.jsx(v_,{ref:r,className:na("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));T_.displayName=v_.displayName,Ct.forwardRef(({className:t,children:e,checked:n,...r},i)=>Gt.jsxs(b_,{ref:i,className:na("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[Gt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Gt.jsx(N_,{children:Gt.jsx(Zi,{className:"h-4 w-4"})})}),e]})).displayName=b_.displayName,Ct.forwardRef(({className:t,children:e,...n},r)=>Gt.jsxs(x_,{ref:r,className:na("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[Gt.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:Gt.jsx(N_,{children:Gt.jsx(es,{className:"h-2 w-2 fill-current"})})}),e]})).displayName=x_.displayName,Ct.forwardRef(({className:t,inset:e,...n},r)=>Gt.jsx(y_,{ref:r,className:na("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n})).displayName=y_.displayName;const I_=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(k_,{ref:n,className:na("-mx-1 my-1 h-px bg-muted",t),...e}));I_.displayName=k_.displayName;var O_="AlertDialog",[P_,j_]=cr(O_,[nP]),D_=nP(),z_=t=>{const{rn:e,...n}=t,r=D_(e);return Gt.jsx(jP,{...r,...n,modal:!0})};z_.displayName=O_,Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,i=D_(n);return Gt.jsx(DP,{...i,...r,ref:e})}).displayName="AlertDialogTrigger";var __=t=>{const{rn:e,...n}=t,r=D_(e);return Gt.jsx(zP,{...r,...n})};__.displayName="AlertDialogPortal";var R_=Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,i=D_(n);return Gt.jsx(_P,{...i,...r,ref:e})});R_.displayName="AlertDialogOverlay";var B_="AlertDialogContent",[$_,U_]=P_(B_),F_=mr("AlertDialogContent"),L_=Ct.forwardRef((t,e)=>{const{rn:n,children:r,...i}=t,s=D_(n),o=Ct.useRef(null),a=ar(e,o),c=Ct.useRef(null);return Gt.jsx(TP,{contentName:B_,titleName:W_,docsSlug:"alert-dialog",children:Gt.jsx($_,{scope:n,cancelRef:c,children:Gt.jsxs(RP,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:ir(i.onOpenAutoFocus,t=>{var e;t.preventDefault(),null==(e=c.current)||e.focus({preventScroll:!0})}),onPointerDownOutside:t=>t.preventDefault(),onInteractOutside:t=>t.preventDefault(),children:[Gt.jsx(F_,{children:r}),Gt.jsx(G_,{contentRef:o})]})})})});L_.displayName=B_;var W_="AlertDialogTitle",V_=Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,i=D_(n);return Gt.jsx(BP,{...i,...r,ref:e})});V_.displayName=W_;var q_="AlertDialogDescription",K_=Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,i=D_(n);return Gt.jsx($P,{...i,...r,ref:e})});K_.displayName=q_;var H_=Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,i=D_(n);return Gt.jsx(UP,{...i,...r,ref:e})});H_.displayName="AlertDialogAction";var Y_="AlertDialogCancel",Z_=Ct.forwardRef((t,e)=>{const{rn:n,...r}=t,{cancelRef:i}=U_(Y_,n),s=D_(n),o=ar(e,i);return Gt.jsx(UP,{...s,...r,ref:o})});Z_.displayName=Y_;var G_=({contentRef:t})=>{const e=`\`${B_}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${B_}\` by passing a \`${q_}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${B_}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return Ct.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))},[e,t]),null},Q_=R_,X_=L_,J_=H_,tR=Z_,eR=V_,nR=K_;const rR=z_,iR=__,sR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(Q_,{className:na("fixed inset-0 z-50 bg-[#E8EAE9]/40 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));sR.displayName=Q_.displayName;const oR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsxs(iR,{children:[Gt.jsx(sR,{}),Gt.jsx(X_,{ref:n,className:na("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white dark:bg-slate-800 p-6 shadow-2xl duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-xl",t),...e})]}));oR.displayName=X_.displayName;const aR=({className:t,...e})=>Gt.jsx("div",{className:na("flex flex-col space-y-2 text-center sm:text-left",t),...e});aR.displayName="AlertDialogHeader";const cR=({className:t,...e})=>Gt.jsx("div",{className:na("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});cR.displayName="AlertDialogFooter";const lR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(eR,{ref:n,className:na("text-lg font-semibold",t),...e}));lR.displayName=eR.displayName;const uR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(nR,{ref:n,className:na("text-sm text-muted-foreground",t),...e}));uR.displayName=nR.displayName;const dR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(J_,{ref:n,className:na(Nk(),t),...e}));dR.displayName=J_.displayName;const hR=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(tR,{ref:n,className:na(Nk({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));function fR({post:t,onUpdate:e,compact:n=!1,showCommunity:r=!0,index:i=0}){const[s,o]=Ct.useState(!1),[a,c]=Ct.useState(!1),{user:l,isAuthenticated:u,getAccessToken:d}=pk(),{toast:h}=rr(),f=Rn(),[m,p]=Ct.useState(!1),[g,w]=Ct.useState(!1);Ct.useEffect(()=>{(async()=>{if(u&&l)try{w(!0);const e=await d(),n=await fetch(`/api/posts/${t.id}/saved`,{headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(n.ok){const t=await n.json();p(t.isSaved)}}catch(e){}finally{w(!1)}else p(!1)})()},[u,l,t.id,d]);const y=qn({mutationFn:async e=>{const n=await d(),r=e?"POST":"DELETE",i=await fetch(`/api/posts/${t.id}/save`,{method:r,headers:{Authorization:`Bearer ${n}`},credentials:"include"});if(!i.ok)throw new Error("Failed to update bookmark");return i.json()},onMutate:async t=>{p(t)},onError:(t,e)=>{if(p(!e),cD(t))return h({title:"Unauthorized",description:"You are logged out.",variant:"destructive"}),void setTimeout(()=>{window.location.href="/"},500);h({title:"Error",description:`Failed to ${e?"save":"unsave"} post. Please try again.`,variant:"destructive"})},onSuccess:(t,e)=>{h({title:e?"Post saved!":"Post unsaved",description:e?"You can find this post in your saved items.":"Post removed from your saved items."}),f.invalidateQueries({queryKey:["saved-posts"]}),f.invalidateQueries({queryKey:["user-saved"]})}}),v=(t,e)=>!!u||((t=>{h({title:"Authentication Required",description:`Please connect your wallet to ${t}.`,variant:"default",action:Gt.jsx(kk,{variant:"outline",size:"sm",onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},children:"Connect Wallet"})})})(t),!1),[b,x]=Ct.useState(null),[N,k]=Ct.useState({upvotes:t.upvotes,downvotes:t.downvotes,userVote:t.userVote});Ct.useEffect(()=>{k({upvotes:t.upvotes,downvotes:t.downvotes,userVote:t.userVote})},[t.upvotes,t.downvotes,t.userVote,t.id]);const M=qn({mutationFn:async e=>await oD({targetId:t.id,targetType:"post",voteType:e}),onMutate:async e=>{await aD(f,t.id,"post");const n={...N},r=rD(N,e,t.id,"post");return k(r),iD(f,t.id,0,t=>({...t,upvotes:r.upvotes,downvotes:r.downvotes,userVote:r.userVote})),{previousState:n}},onError:(e,n,r)=>{if((null==r?void 0:r.previousState)&&(k(r.previousState),iD(f,t.id,0,t=>({...t,upvotes:r.previousState.upvotes,downvotes:r.previousState.downvotes,userVote:r.previousState.userVote}))),x(null),cD(e))return h({title:"Unauthorized",description:"You are logged out.",variant:"destructive"}),void setTimeout(()=>{window.location.href="/auth"},500);h({title:"Error",description:"Failed to vote. Please try again.",variant:"destructive"})},onSuccess:e=>{if(null==e?void 0:e.updatedCounts){const n={upvotes:e.updatedCounts.upvotes,downvotes:e.updatedCounts.downvotes,userVote:e.userVote||void 0};k(n),iD(f,t.id,0,t=>({...t,upvotes:n.upvotes,downvotes:n.downvotes,userVote:n.userVote}))}},onSettled:()=>{sD(f,t.id,"post"),setTimeout(()=>x(null),300),e()}}),A=t=>{v("vote")&&(M.isPending||(x(t),M.mutate(t)))},E=N.upvotes,S=N.downvotes,C=N.userVote,T=t.content.length>300,I=T?((t,e=300)=>{if(t.length<=e)return t;let n=t.lastIndexOf(" ",e);return-1===n&&(n=e),t.substring(0,n).trim()+"..."})(t.content):t.content;return Gt.jsxs("article",{className:`\n        bg-[#EAEAEA05] border border-[#525252] max-w-full overflow-hidden\n        ${i%5==0&&i>0?"animate-post-reveal":""}\n      `,children:[Gt.jsxs("div",{className:"px-3 md:px-4 text-[#8E8E93] bg-[#525252] flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-2 md:gap-3 min-w-0 flex-1",children:[Gt.jsx("span",{className:" text-sm md:text-base font-normal underline cursor-pointer hover:text-gray-200 transition-colors truncate",onClick:e=>{if(e.stopPropagation(),!t.isAnonymous){if(!v("view user profiles"))return;window.location.href=`/u/${t.author.username}`}},children:t.isAnonymous?"anonymous":t.author.username||"user1234"}),Gt.jsx("div",{className:" p-0.5 md:p-1 flex items-center justify-center flex-shrink-0",children:Gt.jsx(_s,{className:"w-3 h-3 md:w-4 md:h-4 fill-green-500 text-green-500"})}),Gt.jsx("div",{className:"h-full flex items-center flex-shrink-0",children:Gt.jsx("img",{src:"https://imgs.search.brave.com/O1Zt--extN2ycg7i7yz2onbxwTR0GTuweYkfqMzih2U/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pLnBp/bmltZy5jb20vb3Jp/Z2luYWxzLzJjL2E2/Lzg4LzJjYTY4OGY5/ZGI4NDJhYjQ1MTY3/YmZlYjBlZmQ4OGJj/LmpwZw",alt:"company logo",className:"h-6 md:h-10 object-cover"})})]}),Gt.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-shrink-0",children:[Gt.jsx("span",{className:" text-xs md:text-sm",children:ra(t.createdAt)}),(null==l?void 0:l.id)&&(null==(O=t.author)?void 0:O.id)&&(l.id===t.author.id||l.id===t.author.id.toString())&&Gt.jsxs(E_,{children:[Gt.jsx(S_,{asChild:!0,children:Gt.jsx(kk,{variant:"ghost",size:"icon",className:"h-5 w-5 md:h-6 md:w-6 text-gray-300 hover:text-white",onClick:t=>t.stopPropagation(),children:Gt.jsx(os,{className:"h-3 w-3 md:h-4 md:w-4"})})}),Gt.jsxs(C_,{align:"end",className:"w-48",onClick:t=>t.stopPropagation(),children:[Gt.jsxs(T_,{onClick:()=>c(!0),className:"text-red-600",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-2"})," Delete"]}),Gt.jsx(I_,{})]})]})]})]}),Gt.jsxs("div",{className:"px-4 md:px-6 py-4 md:py-6 cursor-pointer",onClick:()=>{if("poll"===t.type){if(!v("participate in polls"))return;window.location.href=`/poll?id=${t.id}`}else{if(!v("participate in post"))return;window.location.href=`/post?id=${t.id}`}},children:[Gt.jsx("h3",{className:"text-lg md:text-xl font-normal text-[#E8EAE9] mb-3 md:mb-4 leading-normal",children:t.title}),"poll"===t.type?Gt.jsx("div",{className:"mb-3",children:Gt.jsx("div",{className:" rounded-lg py-3 md:p-4 hover:shadow-md transition-all duration-300",onClick:e=>{e.stopPropagation(),(()=>{if("poll"===t.type){if(!v("participate in polls"))return;window.location.href=`/poll?id=${t.id}`}})()},children:Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 min-w-0 flex-1",children:[Gt.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10  rounded-full flex items-center justify-center flex-shrink-0",children:Gt.jsx(Hi,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),Gt.jsxs("div",{className:"flex-1 min-w-0",children:[Gt.jsx("h3",{className:"font-medium text-white text-sm md:text-base",children:"Interactive Poll"}),Gt.jsx("div",{className:"text-xs md:text-sm text-[#8E8E93] line-clamp-2",children:Gt.jsx(eD,{content:t.content.length>120?t.content.substring(0,120)+"...":t.content,className:"text-xs md:text-sm text-[#8E8E93]"})})]})]}),Gt.jsxs("div",{className:"flex items-center p-2 rounded-sm space-x-1 md:space-x-2 hover:bg-gray-900 hover:text-blue-500 text-blue-400 flex-shrink-0 ml-2",children:[Gt.jsx("span",{className:"text-xs md:text-sm font-medium hidden sm:inline",children:"Vote Now"}),Gt.jsx(Qi,{className:"w-3 h-3 md:w-4 md:h-4"})]})]})})}):Gt.jsxs("div",{className:"text-gray-300 text-sm md:text-base leading-relaxed mb-3",children:[Gt.jsx("div",{className:"prose prose-sm md:prose-base max-w-none",children:Gt.jsx(eD,{content:I,className:"text-gray-300"})}),T&&!s&&Gt.jsx("button",{className:"text-[#525252] text-xs md:text-sm hover:text-gray-400 transition-colors mt-2 md:mt-3 block",children:"Read more ...."})]}),t.imageUrl&&Gt.jsx("div",{className:"mb-3 rounded-lg overflow-hidden",children:Gt.jsx("img",{src:t.imageUrl,alt:"Post attachment",className:"w-full max-h-64 md:max-h-96 object-cover hover:scale-105 transition-transform duration-300"})})]}),Gt.jsxs("div",{className:"flex items-stretch border-t border-[#525252]",children:[Gt.jsxs("div",{className:"flex items-stretch",onClick:t=>t.stopPropagation(),children:[Gt.jsxs("button",{"aria-label":"Upvote",onClick:t=>{t.stopPropagation(),A("up")},disabled:M.isPending,className:`flex items-center gap-2 md:gap-3 px-4 md:px-8 py-3 md:py-4 border-r border-gray-600 transition-colors ${"up"===(null==C?void 0:C.voteType)?"text-blue-500 bg-blue-500/5":"text-white hover:bg-gray-800/50"} ${M.isPending?"opacity-75 cursor-not-allowed":""}`,children:[M.isPending&&"up"===b?Gt.jsx(ws,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):Gt.jsx($s,{fill:"up"===(null==C?void 0:C.voteType)?"currentColor":"white",className:"w-4 h-4 md:w-5 md:h-5",strokeWidth:2.5}),Gt.jsx("span",{className:"text-base md:text-lg font-normal",children:E})]}),Gt.jsxs("button",{"aria-label":"Downvote",onClick:t=>{t.stopPropagation(),A("down")},disabled:M.isPending,className:`flex items-center gap-2 md:gap-3 px-4 md:px-8 py-3 md:py-4 border-r border-gray-600 transition-colors ${"down"===(null==C?void 0:C.voteType)?"text-orange-500 bg-orange-500/5":"text-white hover:bg-gray-800/50"} ${M.isPending?"opacity-75 cursor-not-allowed":""}`,children:[M.isPending&&"down"===b?Gt.jsx(ws,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):Gt.jsx($s,{fill:"down"===(null==C?void 0:C.voteType)?"currentColor":"white",className:"rotate-180 h-4 w-4 md:h-5 md:w-5"}),Gt.jsx("span",{className:"text-base md:text-lg font-normal hidden sm:inline",children:S})]})]}),Gt.jsx("div",{className:"flex-1"}),Gt.jsxs("div",{className:"flex items-stretch",onClick:t=>t.stopPropagation(),children:[Gt.jsxs("button",{onClick:e=>{e.stopPropagation(),v("view comments")&&(window.location.href=`/post?id=${t.id}`)},className:"flex items-center gap-2 md:gap-3 px-4 md:px-8 py-3 md:py-4 text-white hover:bg-gray-800/50 transition-colors",children:[Gt.jsx(ks,{className:"w-4 h-4 md:w-5 md:h-5",strokeWidth:2}),Gt.jsx("span",{className:"text-base md:text-lg font-normal",children:t.commentCount})]}),Gt.jsx("button",{"aria-label":m?"Unsave post":"Save post",onClick:t=>{t.stopPropagation(),v("save posts")&&(y.isPending||y.mutate(!m))},disabled:y.isPending||g,className:`flex items-center justify-center px-4 md:px-8 py-3 md:py-4 transition-colors hover:bg-gray-800/50 ${m?"text-blue-500":"text-white "} ${y.isPending||g?"opacity-75 cursor-not-allowed":""}`,children:y.isPending?Gt.jsx(ws,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):Gt.jsx(Li,{className:"w-4 h-4 md:w-5 md:h-5",strokeWidth:2,fill:m?"currentColor":"none"})})]})]}),Gt.jsx(rR,{open:a,onOpenChange:c,children:Gt.jsxs(oR,{onClick:t=>t.stopPropagation(),children:[Gt.jsxs(aR,{children:[Gt.jsx(lR,{children:"Delete this post?"}),Gt.jsx(uR,{children:"This action cannot be undone. This will permanently delete your post and remove its data."})]}),Gt.jsxs(cR,{children:[Gt.jsx(hR,{children:"Cancel"}),Gt.jsx(dR,{className:"bg-red-600 hover:bg-red-700",onClick:async n=>{var r;n.stopPropagation();try{if(!(await fetch(`/api/posts/${t.id}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(r=window.__getDynamicToken)?void 0:r.call(window))}`}})).ok)return void h({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"});f.invalidateQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),f.removeQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),h({title:"Post deleted",description:"Your post has been permanently deleted."}),"function"==typeof e&&e(),"/post"===window.location.pathname&&(window.history.length>1?window.history.back():window.location.href="/")}catch(i){h({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"})}},children:"Delete"})]})]})})]});var O}hR.displayName=tR.displayName;var mR="horizontal",pR=["horizontal","vertical"],gR=Ct.forwardRef((t,e)=>{const{decorative:n,orientation:r=mR,...i}=t,s=function(t){return pR.includes(t)}(r)?r:mR,o=n?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"};return Gt.jsx(wr.div,{"data-orientation":s,...o,...i,ref:e})});gR.displayName="Separator";var wR=gR;const yR=Ct.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>Gt.jsx(wR,{ref:i,decorative:n,orientation:e,className:na("shrink-0 bg-border","horizontal"===e?"h-[1px] w-full":"h-full w-[1px]",t),...r}));function vR({className:t,...e}){return Gt.jsx("div",{className:na("animate-pulse rounded-md bg-muted",t),...e})}function bR(t,e=10,n={}){const[r,i]=Ct.useState([]),[s,o]=Ct.useState(!1),[a,c]=Ct.useState(!0),[l,u]=Ct.useState(null),[d,h]=Ct.useState(1),[f,m]=Ct.useState(!1),p=Ct.useRef(null),g=Ct.useRef(null),w=Ct.useRef(null),{threshold:y=.1,rootMargin:v="100px",enabled:b=!0}=n,x=Ct.useCallback(async(n,r=!1)=>{var a,l;if(!s&&b)try{o(!0),u(null),w.current&&w.current.abort(),w.current=new AbortController;const s=await t(n,e);if(w.current.signal.aborted)return;r?(i(s.items),h(1)):(i(t=>[...t,...s.items]),h(n)),c(s.hasMore),m(!0)}catch(KL){if(null==(a=w.current)?void 0:a.signal.aborted)return;const e=KL instanceof Error?KL.message:"Failed to load items";u(e)}finally{(null==(l=w.current)?void 0:l.signal.aborted)||o(!1)}},[t,e,s,b]),N=Ct.useCallback(()=>{!s&&a&&b&&x(d+1)},[x,d,s,a,b]),k=Ct.useCallback(()=>{u(null),c(!0),h(1),x(1,!0)},[x]),M=Ct.useCallback(t=>{i(e=>[t,...e])},[]),A=Ct.useCallback(t=>{i(e=>e.filter(e=>e.id!==t))},[]),E=Ct.useCallback((t,e)=>{i(n=>n.map(n=>n.id===t?{...n,...e}:n))},[]),S=Ct.useCallback(t=>{i(t),c(t.length>=e),h(1)},[e]);return Ct.useEffect(()=>{if(!b||!g.current)return;const t=new IntersectionObserver(t=>{const[e]=t;e.isIntersecting&&a&&!s&&N()},{threshold:y,rootMargin:v});return p.current=t,t.observe(g.current),()=>{p.current&&p.current.disconnect()}},[N,a,s,y,v,b]),Ct.useEffect(()=>{!f&&b&&x(1,!0)},[x,f,b]),Ct.useEffect(()=>()=>{w.current&&w.current.abort()},[]),{items:r,isLoading:s,hasMore:a,error:l,loadMore:N,refresh:k,setItems:S,addItem:M,removeItem:A,updateItem:E}}function xR({isLoading:t,hasMore:e,error:n,onRetry:r,onLoadMore:i,loadingText:s="Loading more...",endText:o="You've reached the end!",errorText:a="Something went wrong"}){return n?Gt.jsxs(_I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-6 text-center",children:[Gt.jsx(Xi,{className:"h-8 w-8 text-red-500 mb-3"}),Gt.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:a}),Gt.jsxs(kk,{variant:"outline",size:"sm",onClick:r,className:"flex items-center space-x-2",children:[Gt.jsx(Cs,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Try Again"})]})]}):e?t?Gt.jsx(_I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center p-6",children:Gt.jsxs("div",{className:"flex items-center space-x-3",children:[Gt.jsx(ws,{className:"h-5 w-5 animate-spin text-blue-500"}),Gt.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s})]})}):Gt.jsx(_I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-center p-6",children:Gt.jsxs(kk,{variant:"outline",size:"sm",onClick:i,className:"flex items-center space-x-2",children:[Gt.jsx(Cs,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Load More"})]})}):Gt.jsxs(_I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-6 text-center",children:[Gt.jsx(Ji,{className:"h-8 w-8 text-green-500 mb-3"}),Gt.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o})]})}function NR({count:t=3,className:e=""}){return Gt.jsx("div",{className:`space-y-4 ${e}`,children:Array.from({length:t}).map((t,e)=>Gt.jsx(_I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*e},className:"animate-pulse",children:Gt.jsx("div",{className:"bg-gray-200 dark:bg-slate-700 rounded-lg p-4",children:Gt.jsxs("div",{className:"flex items-start space-x-3",children:[Gt.jsx("div",{className:"w-10 h-10 bg-gray-300 dark:bg-slate-600 rounded-full"}),Gt.jsxs("div",{className:"flex-1 space-y-2",children:[Gt.jsx("div",{className:"h-4 bg-gray-300 dark:bg-slate-600 rounded w-3/4"}),Gt.jsx("div",{className:"h-3 bg-gray-300 dark:bg-slate-600 rounded w-1/2"})]})]})})},e))})}yR.displayName=wR.displayName;const kR=()=>{};function MR(){const[t]=je();rr();const e=()=>{try{return new URLSearchParams(window.location.search).get("q")||""}catch{return""}},[n,r]=Ct.useState({query:e(),type:"all",postType:"all",timeRange:"all",sortBy:"relevance",includedFlairs:[],excludedFlairs:[]}),[i,s]=Ct.useState(!1);Ct.useEffect(()=>{e()||(window.location.href="/")},[]),Ct.useEffect(()=>{const t=e();r(e=>({...e,query:t}))},[t]);const{items:o,isLoading:a,hasMore:c,error:l,loadMore:u,refresh:d,setItems:h}=function(t,e=10,n){return bR(t,e,n)}(async(t,e)=>{const r=new URLSearchParams;r.append("page",t.toString()),r.append("limit",e.toString()),n.query&&r.append("q",n.query),"all"!==n.type&&r.append("type",n.type),"all"!==n.postType&&r.append("postType",n.postType),"all"!==n.timeRange&&r.append("time",n.timeRange),"relevance"!==n.sortBy&&r.append("sort",n.sortBy);const i=await fetch(`/api/search?${r.toString()}`,{credentials:"include"});if(!i.ok)throw new Error("Search failed");const s=await i.text();try{const t=JSON.parse(s);let n=[];return Array.isArray(t)?n=t:t&&"object"==typeof t&&t.posts&&(n=t.posts),{items:n,hasMore:n.length===e,total:n.length}}catch{return{items:[],hasMore:!1,total:0}}},10,{enabled:!!n.query,threshold:.1,rootMargin:"100px"}),f=t=>{r(e=>({...e,query:t}))};return Gt.jsxs("div",{className:"min-h-screen bg-reddit-light dark:bg-slate-900",children:[Gt.jsx(ej,{}),Gt.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-8",children:[Gt.jsx("div",{className:"mb-8",children:Gt.jsx("div",{className:"relative",children:Gt.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[Gt.jsxs("div",{className:"flex-1 relative",children:[Gt.jsx(Ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),Gt.jsx(ZI,{value:n.query,onChange:t=>f(t.target.value),placeholder:"Search Anonn",className:"pl-10 pr-10 py-3 text-lg border-2 border-gray-200 dark:border-slate-600 rounded-xl focus:border-orange-500 dark:focus:border-orange-400"}),n.query&&Gt.jsx("button",{onClick:()=>f(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:Gt.jsx(Ks,{className:"h-5 w-5"})})]}),Gt.jsxs(kk,{variant:"outline",onClick:()=>s(!i),className:"px-4 py-3 rounded-xl border-2 border-gray-200 dark:border-slate-600",children:[Gt.jsx(us,{className:"h-4 w-4 mr-2"}),"Filters"]})]})})}),n.query&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsx("div",{className:"flex items-center justify-between",children:Gt.jsxs("div",{children:[Gt.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:['Search Results for "',n.query,'"']}),Gt.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:a?"Searching...":`${(o?o.length:0).toLocaleString()} results`})]})}),Gt.jsx(yR,{}),a?Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsx(bk,{className:"bg-white dark:bg-slate-800",children:Gt.jsx(xk,{className:"p-6",children:Gt.jsxs("div",{className:"flex space-x-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(vR,{className:"h-6 w-6"}),Gt.jsx(vR,{className:"h-4 w-8"}),Gt.jsx(vR,{className:"h-6 w-6"})]}),Gt.jsxs("div",{className:"flex-1 space-y-3",children:[Gt.jsx(vR,{className:"h-4 w-3/4"}),Gt.jsx(vR,{className:"h-6 w-full"}),Gt.jsx(vR,{className:"h-20 w-full"})]})]})})},t))}):l?Gt.jsx(bk,{className:"bg-white dark:bg-slate-800",children:Gt.jsxs(xk,{className:"p-8 text-center",children:[Gt.jsx(Ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search Error"}),Gt.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Something went wrong while searching. Please try again."})]})}):o&&o.length>0?Gt.jsxs("div",{className:"space-y-4",children:[o.map((t,e)=>Gt.jsx(fR,{post:t,onUpdate:kR,showCommunity:!0,index:e},t.id)),Gt.jsx(xR,{isLoading:a,hasMore:c,error:l,onRetry:d,onLoadMore:u,loadingText:"Loading more results...",endText:"You've reached the end of the search results! ",errorText:"Failed to load more results"})]}):Gt.jsx(bk,{className:"bg-white dark:bg-slate-800",children:Gt.jsxs(xk,{className:"p-8 text-center",children:[Gt.jsx(Ts,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No results found"}),Gt.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Try adjusting your search terms to find what you're looking for."}),Gt.jsx(Be,{href:"/",children:Gt.jsxs(kk,{className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-6 py-2 rounded-lg font-medium",children:[Gt.jsx(ds,{className:"h-4 w-4 mr-2"}),"Go Home"]})})]})})]})]})]})}const AR={setVisible(t){},visible:!1};Object.defineProperty(AR,"visible",{get:()=>!1});const ER=Ct.createContext(AR);function SR(){return Ct.useContext(ER)}const CR=t=>Ot.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&Ot.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&Ot.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),TR=({wallet:t,...e})=>t&&Ot.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e});var IR;!function(){var t=Object.prototype.hasOwnProperty,e="~";function n(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,n,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),c=e?e+n:n;return t.Kt[c]?t.Kt[c].fn?t.Kt[c]=[t.Kt[c],a]:t.Kt[c].push(a):(t.Kt[c]=a,t.Ht++),t}function s(t,e){0===--t.Ht?t.Kt=new n:delete t.Kt[e]}function o(){this.Kt=new n,this.Ht=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(e=!1)),o.prototype.eventNames=function(){var n,r,i=[];if(0===this.Ht)return i;for(r in n=this.Kt)t.call(n,r)&&i.push(e?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(n)):i},o.prototype.listeners=function(t){var n=e?e+t:t,r=this.Kt[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},o.prototype.listenerCount=function(t){var n=e?e+t:t,r=this.Kt[n];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,n,r,i,s,o){var a=e?e+t:t;if(!this.Kt[a])return!1;var c,l,u=this.Kt[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,n),!0;case 3:return u.fn.call(u.context,n,r),!0;case 4:return u.fn.call(u.context,n,r,i),!0;case 5:return u.fn.call(u.context,n,r,i,s),!0;case 6:return u.fn.call(u.context,n,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,n);break;case 3:u[l].fn.call(u[l].context,n,r);break;case 4:u[l].fn.call(u[l].context,n,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},o.prototype.removeListener=function(t,n,r,i){var o=e?e+t:t;if(!this.Kt[o])return this;if(!n)return s(this,o),this;var a=this.Kt[o];if(a.fn)a.fn!==n||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==n||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this.Kt[o]=1===l.length?l[0]:l:s(this,o)}return this},o.prototype.removeAllListeners=function(t){var r;return t?(r=e?e+t:t,this.Kt[r]&&s(this,r)):(this.Kt=new n,this.Ht=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o}(),function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"}(IR||(IR={}));const OR=({id:t,children:e,expanded:n=!1})=>{const r=Ct.useRef(null),i=Ct.useRef(!0);return Ct.useLayoutEffect(()=>{n?(()=>{const t=r.current;t&&requestAnimationFrame(()=>{t.style.height=t.scrollHeight+"px"})})():(()=>{const t=r.current;t&&requestAnimationFrame(()=>{t.style.height=t.offsetHeight+"px",t.style.overflow="hidden",requestAnimationFrame(()=>{t.style.height="0"})})})()},[n]),Ct.useLayoutEffect(()=>{const t=r.current;if(t)return i.current&&(e(),i.current=!1),t.addEventListener("transitionend",s),()=>t.removeEventListener("transitionend",s);function e(){t&&(t.style.overflow=n?"initial":"hidden",n&&(t.style.height="auto"))}function s(n){t&&n.target===t&&"height"===n.propertyName&&e()}},[n]),Ot.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:r,role:"region",style:{height:0,transition:i.current?void 0:"height 250ms ease-out"}},e)},PR=({handleClick:t,tabIndex:e,wallet:n})=>Ot.createElement("li",null,Ot.createElement(CR,{onClick:t,startIcon:Ot.createElement(TR,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===IR.Installed&&Ot.createElement("span",null,"Detected"))),jR=()=>Ot.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ot.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Ot.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Ot.createElement("g",{clipPath:"url(#clip0_880_5115)"},Ot.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Ot.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Ot.createElement("defs",null,Ot.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ot.createElement("stop",{stopColor:"#9945FF"}),Ot.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ot.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ot.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ot.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ot.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ot.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Ot.createElement("stop",{stopColor:"#9945FF"}),Ot.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ot.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ot.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ot.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ot.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ot.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Ot.createElement("stop",{stopColor:"#9945FF"}),Ot.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ot.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ot.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ot.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ot.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ot.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Ot.createElement("stop",{stopColor:"#9945FF"}),Ot.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Ot.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Ot.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Ot.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Ot.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Ot.createElement("clipPath",{id:"clip0_880_5115"},Ot.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),DR=({className:t="",container:e="body"})=>{const n=Ct.useRef(null),{wallets:r,select:i}=$y(),{setVisible:s}=SR(),[o,a]=Ct.useState(!1),[c,l]=Ct.useState(!1),[u,d]=Ct.useState(null),[h,f]=Ct.useMemo(()=>{const t=[],e=[];for(const n of r)n.readyState===IR.Installed?t.push(n):e.push(n);return t.length?[t,e]:[e,[]]},[r]),m=Ct.useCallback(()=>{l(!1),setTimeout(()=>s(!1),150)},[s]),p=Ct.useCallback(t=>{t.preventDefault(),m()},[m]),g=Ct.useCallback((t,e)=>{i(e),p(t)},[i,p]),w=Ct.useCallback(()=>a(!o),[o]),y=Ct.useCallback(t=>{const e=n.current;if(!e)return;const r=e.querySelectorAll("button"),i=r[0],s=r[r.length-1];t.shiftKey?document.activeElement===i&&(s.focus(),t.preventDefault()):document.activeElement===s&&(i.focus(),t.preventDefault())},[n]);return Ct.useLayoutEffect(()=>{const t=t=>{"Escape"===t.key?m():"Tab"===t.key&&y(t)},{overflow:e}=window.getComputedStyle(document.body);return setTimeout(()=>l(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",t,!1),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t,!1)}},[m,y]),Ct.useLayoutEffect(()=>d(document.querySelector(e)),[e]),u&&Tt.createPortal(Ot.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${c&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},Ot.createElement("div",{className:"wallet-adapter-modal-container"},Ot.createElement("div",{className:"wallet-adapter-modal-wrapper"},Ot.createElement("button",{onClick:p,className:"wallet-adapter-modal-button-close"},Ot.createElement("svg",{width:"14",height:"14"},Ot.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),h.length?Ot.createElement(Ot.Fragment,null,Ot.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Ot.createElement("ul",{className:"wallet-adapter-modal-list"},h.map(t=>Ot.createElement(PR,{key:t.adapter.name,handleClick:e=>g(e,t.adapter.name),wallet:t})),f.length?Ot.createElement(OR,{expanded:o,id:"wallet-adapter-modal-collapse"},f.map(t=>Ot.createElement(PR,{key:t.adapter.name,handleClick:e=>g(e,t.adapter.name),tabIndex:o?0:-1,wallet:t}))):null),f.length?Ot.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:w,tabIndex:0},Ot.createElement("span",null,o?"Less ":"More ","options"),Ot.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:o?"wallet-adapter-modal-list-more-icon-rotate":""},Ot.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Ot.createElement(Ot.Fragment,null,Ot.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Ot.createElement("div",{className:"wallet-adapter-modal-middle"},Ot.createElement(jR,null)),f.length?Ot.createElement(Ot.Fragment,null,Ot.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:w,tabIndex:0},Ot.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Ot.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:o?"wallet-adapter-modal-list-more-icon-rotate":""},Ot.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Ot.createElement(OR,{expanded:o,id:"wallet-adapter-modal-collapse"},Ot.createElement("ul",{className:"wallet-adapter-modal-list"},f.map(t=>Ot.createElement(PR,{key:t.adapter.name,handleClick:e=>g(e,t.adapter.name),tabIndex:o?0:-1,wallet:t}))))):null))),Ot.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:p})),u)},zR=({children:t,...e})=>{const[n,r]=Ct.useState(!1);return Ot.createElement(ER.Provider,{value:{visible:n,setVisible:r}},t,n&&Ot.createElement(DR,{...e}))};var _R={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,s||t,o),c=n?n+e:e;return t.Kt[c]?t.Kt[c].fn?t.Kt[c]=[t.Kt[c],a]:t.Kt[c].push(a):(t.Kt[c]=a,t.Ht++),t}function o(t,e){0===--t.Ht?t.Kt=new r:delete t.Kt[e]}function a(){this.Kt=new r,this.Ht=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this.Ht)return i;for(r in t=this.Kt)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this.Kt[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this.Kt[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,s,o){var a=n?n+t:t;if(!this.Kt[a])return!1;var c,l,u=this.Kt[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,s),!0;case 6:return u.fn.call(u.context,e,r,i,s,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var s=n?n+t:t;if(!this.Kt[s])return this;if(!e)return o(this,s),this;var a=this.Kt[s];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||i&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this.Kt[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this.Kt[e]&&o(this,e)):(this.Kt=new r,this.Ht=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(_R);const RR=Dt(_R.exports);class BR extends Error{constructor(t,e){super(t),this.error=e}}class $R extends BR{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class UR extends BR{constructor(){super(...arguments),this.name="WalletConnectionError"}}class FR extends BR{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class LR extends BR{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class WR extends BR{constructor(){super(...arguments),this.name="WalletAccountError"}}class VR extends BR{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class qR extends BR{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class KR extends BR{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class HR extends BR{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class YR extends BR{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var ZR;!function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"}(ZR||(ZR={}));class GR extends RR{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const r=this.publicKey;if(!r)throw new qR;return t.feePayer=t.feePayer||r,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function QR(t){return"version"in t}class XR extends GR{async sendTransaction(t,e,n={}){let r=!0;try{if(QR(t)){if(!this.supportedTransactionVersions)throw new KR("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new KR(`Sending transaction version ${t.version} isn't supported by this wallet`);try{const r=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(r,n)}catch(i){if(i instanceof HR)throw r=!1,i;throw new KR(null==i?void 0:i.message,i)}}else try{const{signers:r,...i}=n;t=await this.prepareTransaction(t,e,i),(null==r?void 0:r.length)&&t.partialSign(...r);const s=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(s,i)}catch(i){if(i instanceof HR)throw r=!1,i;throw new KR(null==i?void 0:i.message,i)}}catch(i){throw r&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(QR(n)){if(!this.supportedTransactionVersions)throw new HR("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new HR(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class JR extends XR{}class tB extends JR{constructor(t={}){super(),this.name="Phantom",this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this.sn="undefined"==typeof window||"undefined"==typeof document?ZR.Unsupported:ZR.NotDetected,this.an=()=>{const t=this.cn;t&&(t.off("disconnect",this.an),t.off("accountChanged",this.ln),this.cn=null,this.un=null,this.emit("error",new FR),this.emit("disconnect"))},this.ln=t=>{const e=this.un;if(e){try{t=new Rp(t.toBytes())}catch(n){return void this.emit("error",new VR(null==n?void 0:n.message,n))}e.equals(t)||(this.un=t,this.emit("connect",t))}},this.dn=!1,this.cn=null,this.un=null,this.sn!==ZR.Unsupported&&(function(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}()?(this.sn=ZR.Loadable,this.emit("readyStateChange",this.sn)):function(t){if("undefined"==typeof window||"undefined"==typeof document)return;const e=[];function n(){if(t())for(const t of e)t()}const r=setInterval(n,1e3);e.push(()=>clearInterval(r)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),"complete"!==document.readyState&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}(()=>{var t,e,n;return!(!(null==(e=null==(t=window.phantom)?void 0:t.solana)?void 0:e.isPhantom)&&!(null==(n=window.solana)?void 0:n.isPhantom)||(this.sn=ZR.Installed,this.emit("readyStateChange",this.sn),0))}))}get publicKey(){return this.un}get connecting(){return this.dn}get readyState(){return this.sn}async autoConnect(){this.readyState===ZR.Installed&&await this.connect()}async connect(){var t;try{if(this.connected||this.connecting)return;if(this.readyState===ZR.Loadable){const t=encodeURIComponent(window.location.href),e=encodeURIComponent(window.location.origin);return void(window.location.href=`https://phantom.app/ul/browse/${t}?ref=${e}`)}if(this.readyState!==ZR.Installed)throw new $R;this.dn=!0;const n=(null==(t=window.phantom)?void 0:t.solana)||window.solana;if(!n.isConnected)try{await n.connect()}catch(e){throw new UR(null==e?void 0:e.message,e)}if(!n.publicKey)throw new WR;let r;try{r=new Rp(n.publicKey.toBytes())}catch(e){throw new VR(null==e?void 0:e.message,e)}n.on("disconnect",this.an),n.on("accountChanged",this.ln),this.cn=n,this.un=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this.dn=!1}}async disconnect(){const t=this.cn;if(t){t.off("disconnect",this.an),t.off("accountChanged",this.ln),this.cn=null,this.un=null;try{await t.disconnect()}catch(e){this.emit("error",new LR(null==e?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,n={}){try{const i=this.cn;if(!i)throw new qR;try{const{signers:r,...s}=n;QR(t)?(null==r?void 0:r.length)&&t.sign(r):(t=await this.prepareTransaction(t,e,s),(null==r?void 0:r.length)&&t.partialSign(...r)),s.preflightCommitment=s.preflightCommitment||e.commitment;const{signature:o}=await i.signAndSendTransaction(t,s);return o}catch(r){if(r instanceof BR)throw r;throw new KR(null==r?void 0:r.message,r)}}catch(r){throw this.emit("error",r),r}}async signTransaction(t){try{const n=this.cn;if(!n)throw new qR;try{return await n.signTransaction(t)||t}catch(e){throw new HR(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const n=this.cn;if(!n)throw new qR;try{return await n.signAllTransactions(t)||t}catch(e){throw new HR(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const n=this.cn;if(!n)throw new qR;try{const{signature:e}=await n.signMessage(t);return e}catch(e){throw new YR(null==e?void 0:e.message,e)}}catch(e){throw this.emit("error",e),e}}}function eB({onSearch:t,placeholder:e="Blow the whistle ....."}){const[n,r]=Ct.useState("");return Gt.jsxs("div",{className:"mb-4",children:["  "," ",Gt.jsxs("form",{onSubmit:e=>{e.preventDefault(),null==t||t(n)},className:"flex border border-gray-700 overflow-hidden",children:[" ",Gt.jsx(ZI,{type:"text",placeholder:e,value:n,onChange:e=>{const n=e.target.value;r(n),null==t||t(n)},className:"flex-1 h-10 md:h-16 bg-[#1a1a1a] border-0 text-white placeholder:text-gray-500 focus:ring-0 focus-visible:ring-0 focus-visible:ring-offset-0 text-base px-6"})," ",Gt.jsxs(kk,{type:"submit",className:"h-10 md:h-16 bg-[#505050] hover:bg-[#606060] text-white font-medium px-4 md:px-8 flex items-center gap-2 text-sm uppercase tracking-wider rounded-none border-0",children:[Gt.jsx(Ts,{className:"h-5 w-5"}),"     SEARCH"]})]})," "]})}function nB({sortBy:t,timeFilter:e,onSortChange:n,onTimeFilterChange:r}){return Gt.jsx("div",{className:"mb-6",children:Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-6",children:[Gt.jsx("button",{onClick:()=>n("new"),className:"font-medium text-sm uppercase tracking-wide transition-all "+("new"===t?"px-6 py-2 rounded-full bg-white text-gray-900":"text-gray-500 hover:text-gray-300"),children:"NEW"}),Gt.jsx("button",{onClick:()=>n("hot"),className:"font-medium text-sm uppercase tracking-wide transition-all "+("hot"===t?"px-6 py-2 rounded-full bg-white text-gray-900":"text-gray-500 hover:text-gray-300"),children:"HOT"})]}),Gt.jsxs("div",{className:"relative",children:[Gt.jsxs("select",{value:e,onChange:t=>r(t.target.value),className:"pl-4 pr-10 py-2 bg-transparent text-gray-500 text-sm font-medium uppercase tracking-wide border-none focus:outline-none appearance-none cursor-pointer hover:text-gray-300",children:[Gt.jsx("option",{value:"all",className:"bg-[#1a1a1a]",children:"ALL TIME"}),Gt.jsx("option",{value:"hour",className:"bg-[#1a1a1a]",children:"PAST HOUR"}),Gt.jsx("option",{value:"day",className:"bg-[#1a1a1a]",children:"PAST DAY"}),Gt.jsx("option",{value:"week",className:"bg-[#1a1a1a]",children:"THIS WEEK"}),Gt.jsx("option",{value:"month",className:"bg-[#1a1a1a]",children:"PAST MONTH"}),Gt.jsx("option",{value:"year",className:"bg-[#1a1a1a]",children:"PAST YEAR"})]}),Gt.jsx(Gi,{className:"absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500 pointer-events-none"})]})]})})}function rB({onCreatePost:t,onExploreCommunities:e,isAuthenticated:n}){const{toast:r}=rr(),i=Rn(),[s,o]=Ct.useState("hot"),[a,c]=Ct.useState("all"),[l,u]=Ct.useState(Date.now()),{user:d,getAccessToken:h}=pk(),[f,m]=Ct.useState([]),[p,g]=Ct.useState(!1),[w,y]=Ct.useState(null),[v,b]=Ct.useState(!0),[x,N]=Ct.useState(""),k=Ct.useCallback(async(t=1,e=20)=>{g(!0),y(null);try{const n=await h(),r=new URLSearchParams;r.set("page",t.toString()),r.set("limit",e.toString()),r.set("sortBy",s),a&&"all"!==a&&r.set("time",a),r.set("_t",Date.now().toString());const i=`/api/posts?${r.toString()}`,o=await fetch(i,{headers:{Authorization:`Bearer ${n}`},credentials:"include"});if(!o.ok){if(401===o.status)throw new Error("401: Unauthorized");throw new Error(`${o.status}: ${o.statusText}`)}const c=await o.json();m(1===t?c:t=>[...t,...c]),b(c.length===e)}catch(KL){const e=KL instanceof Error?KL.message:"Failed to load posts";y(e)}finally{g(!1)}},[n,s,a]),M=Ct.useMemo(()=>{if(!x)return f;const t=x.toLowerCase();return f.filter(e=>{var n,r,i;const s=e.title.toLowerCase().includes(t),o=(null==(n=e.content)?void 0:n.toLowerCase().includes(t))||!1,a=(null==(i=null==(r=e.author)?void 0:r.username)?void 0:i.toLowerCase().includes(t))||!1;return s||o||a})},[f,x]),A=()=>k(1,20);return Ct.useEffect(()=>{u(Date.now()),i.removeQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),A()},[]),Ct.useEffect(()=>{k(1,20)},[n,s,a,k]),Ct.useEffect(()=>{if(w&&cD(w))return r({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),void setTimeout(()=>{window.location.href="/"},500)},[w,r]),Gt.jsx("div",{className:"flex gap-6 max-w-[1400px] mx-auto px-4  py-6",children:Gt.jsxs("div",{className:"flex-1 min-w-[200px] mx-auto lg:mx-0",children:[Gt.jsx(eB,{placeholder:"Blow the whistle ...",onSearch:t=>N(t)}),Gt.jsx(nB,{sortBy:s,timeFilter:a,onSortChange:o,onTimeFilterChange:c}),Gt.jsx("div",{className:"space-y-4",children:p?Gt.jsx(Gt.Fragment,{children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):0===M.length?Gt.jsx("div",{className:"bg-[#1a1a1a] border border-gray-800 rounded-lg p-12",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:Gt.jsx(ks,{className:"h-8 w-8 text-gray-600"})}),Gt.jsx("h3",{className:"text-xl font-bold text-white mb-3",children:"No posts yet"}),Gt.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto text-sm",children:"Be the first to start a discussion! Create a post to get the conversation going."}),Gt.jsxs("div",{className:"flex justify-center gap-3",children:[Gt.jsxs(kk,{onClick:t,className:"bg-white hover:bg-gray-200 text-black px-5 py-2 rounded-full font-medium text-sm",children:[Gt.jsx(As,{className:"h-4 w-4 mr-2"}),"Create Post"]}),Gt.jsxs(kk,{onClick:e,variant:"outline",className:"border-gray-700 text-gray-300 hover:bg-gray-800 px-5 py-2 rounded-full font-medium text-sm",children:[Gt.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Explore Communities"]})]})]})}):M.filter(t=>"review"!==t.type).map((t,e)=>Gt.jsx("div",{className:"animate-post-reveal",style:{animationDelay:50*e+"ms"},children:Gt.jsx(fR,{post:t,onUpdate:A,compact:!1,showCommunity:!0,index:e})},t.id))})]})})}var iB="Tabs",[sB,oB]=cr(iB,[yD]),aB=yD(),[cB,lB]=sB(iB),uB=Ct.forwardRef((t,e)=>{const{hn:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:c="automatic",...l}=t,u=uD(a),[d,h]=jr({prop:r,onChange:i,defaultProp:s});return Gt.jsx(cB,{scope:n,baseId:ma(),value:d,onValueChange:h,orientation:o,dir:u,activationMode:c,children:Gt.jsx(wr.div,{dir:u,"data-orientation":o,...l,ref:e})})});uB.displayName=iB;var dB="TabsList",hB=Ct.forwardRef((t,e)=>{const{hn:n,loop:r=!0,...i}=t,s=lB(dB,n),o=aB(n);return Gt.jsx(SD,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:Gt.jsx(wr.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});hB.displayName=dB;var fB="TabsTrigger",mB=Ct.forwardRef((t,e)=>{const{hn:n,value:r,disabled:i=!1,...s}=t,o=lB(fB,n),a=aB(n),c=wB(o.baseId,r),l=yB(o.baseId,r),u=r===o.value;return Gt.jsx(CD,{asChild:!0,...a,focusable:!i,active:u,children:Gt.jsx(wr.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":l,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...s,ref:e,onMouseDown:ir(t.onMouseDown,t=>{i||0!==t.button||!1!==t.ctrlKey?t.preventDefault():o.onValueChange(r)}),onKeyDown:ir(t.onKeyDown,t=>{[" ","Enter"].includes(t.key)&&o.onValueChange(r)}),onFocus:ir(t.onFocus,()=>{const t="manual"!==o.activationMode;u||i||!t||o.onValueChange(r)})})})});mB.displayName=fB;var pB="TabsContent",gB=Ct.forwardRef((t,e)=>{const{hn:n,value:r,forceMount:i,children:s,...o}=t,a=lB(pB,n),c=wB(a.baseId,r),l=yB(a.baseId,r),u=r===a.value,d=Ct.useRef(u);return Ct.useEffect(()=>{const t=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(t)},[]),Gt.jsx(Or,{present:i||u,children:({present:n})=>Gt.jsx(wr.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":c,hidden:!n,id:l,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:n&&s})})});function wB(t,e){return`${t}-trigger-${e}`}function yB(t,e){return`${t}-content-${e}`}gB.displayName=pB;var vB=hB,bB=mB,xB=gB;const NB=uB,kB=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(vB,{ref:n,className:na("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));kB.displayName=vB.displayName;const MB=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(bB,{ref:n,className:na("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));function AB(){const[t,e]=Ct.useState("all"),n=Rn(),{user:r,isAuthenticated:i,getAccessToken:s,refreshProfile:o}=pk();if(!i)return Gt.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:Gt.jsxs(bk,{className:"bg-[#2a2a2a] border-gray-800 p-12 text-center",children:[Gt.jsx(Ui,{className:"h-16 w-16 text-gray-600 mx-auto mb-6"}),Gt.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Authentication Required"}),Gt.jsx("p",{className:"text-gray-400 mb-8 max-w-md mx-auto",children:"Please connect your wallet to view your notifications and stay updated with your activity."}),Gt.jsx(kk,{onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3",children:"Connect Wallet"})]})});const{data:a=[],isLoading:c,error:l}=Vn({queryKey:["/api/notifications"],queryFn:async()=>{const t=await s(),e=await fetch("/api/notifications",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error("Failed to fetch notifications");return e.json()},retry:!1,enabled:i}),u=qn({mutationFn:async t=>{await Hn("POST",`/api/notifications/${t}/read`,{})},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]})}}),d=qn({mutationFn:async()=>{const t=a.filter(t=>!t.read);await Promise.all(t.map(t=>Hn("POST",`/api/notifications/${t.id}/read`,{})))},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/notifications"]})}}),h=t=>{switch(t){case"comment":case"reply":return Gt.jsx(ks,{className:"h-5 w-5 text-blue-500"});case"upvote":return Gt.jsx(_s,{className:"h-5 w-5 text-green-500"});case"downvote":return Gt.jsx(zs,{className:"h-5 w-5 text-red-500"});case"mention":return Gt.jsx(Bi,{className:"h-5 w-5 text-purple-500"});case"community":case"bowl":return Gt.jsx(Vs,{className:"h-5 w-5 text-orange-500"});default:return Gt.jsx(Ui,{className:"h-5 w-5 text-gray-500"})}},f=t=>{const e=new Date(t),n=new Date,r=Math.floor((n.getTime()-e.getTime())/1e3);return r<60?"just now":r<3600?`${Math.floor(r/60)}m ago`:r<86400?`${Math.floor(r/3600)}h ago`:r<604800?`${Math.floor(r/86400)}d ago`:e.toLocaleDateString()},m=a.filter(e=>"all"===t||!e.read),p=a.filter(t=>!t.read).length;return l?Gt.jsx("div",{className:"max-w-3xl mx-auto px-4 py-8",children:Gt.jsxs(bk,{className:"bg-[#2a2a2a] border-gray-800 p-8 text-center",children:[Gt.jsx(Ui,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-lg font-medium text-gray-300 mb-2",children:"Failed to load notifications"}),Gt.jsx("p",{className:"text-gray-400 mb-4",children:"There was an error loading your notifications."}),Gt.jsx(kk,{onClick:()=>n.invalidateQueries({queryKey:["/api/notifications"]}),variant:"outline",children:"Try Again"})]})}):Gt.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[Gt.jsxs("div",{className:"mb-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Gt.jsx("h1",{className:"text-3xl font-bold text-white",children:"Notifications"}),p>0&&Gt.jsxs(kk,{onClick:()=>{p>0&&d.mutate()},variant:"outline",size:"sm",className:"bg-gray-800 border-gray-700 text-gray-300 hover:bg-gray-700",disabled:d.isPending,children:[Gt.jsx(Zi,{className:"h-4 w-4 mr-2"}),"Mark all as read"]})]}),Gt.jsx(NB,{value:t,onValueChange:t=>e(t),children:Gt.jsxs(kB,{className:"bg-[#2a2a2a] border border-gray-700",children:[Gt.jsx(MB,{value:"all",className:"data-[state=active]:bg-gray-700 data-[state=active]:text-white text-gray-400",children:"All"}),Gt.jsxs(MB,{value:"unread",className:"data-[state=active]:bg-gray-700 data-[state=active]:text-white text-gray-400",children:["Unread ",p>0&&`(${p})`]})]})})]}),c?Gt.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>Gt.jsx(bk,{className:"bg-[#2a2a2a] border-gray-800 p-4",children:Gt.jsx("div",{className:"animate-pulse",children:Gt.jsxs("div",{className:"flex space-x-3",children:[Gt.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full"}),Gt.jsxs("div",{className:"flex-1 space-y-2",children:[Gt.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4"}),Gt.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/2"})]})]})})},t))}):0===m.length?Gt.jsxs(bk,{className:"bg-[#2a2a2a] border-gray-800 p-12 text-center",children:[Gt.jsx(Ui,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-lg font-medium text-gray-400 mb-2",children:"unread"===t?"No unread notifications":"No notifications yet"}),Gt.jsx("p",{className:"text-gray-500",children:"unread"===t?"You're all caught up!":"When you get notifications, they'll show up here"})]}):Gt.jsx("div",{className:"space-y-3",children:m.map(t=>Gt.jsx(bk,{className:"bg-[#2a2a2a] border-gray-800 transition-all hover:bg-[#333333] "+(t.read?"":"border-l-4 border-l-blue-500"),children:Gt.jsx("div",{className:"p-4",children:Gt.jsxs("div",{className:"flex items-start space-x-3",children:[Gt.jsx("div",{className:"flex-shrink-0 mt-1",children:h(t.type)}),Gt.jsxs("div",{className:"flex-1 min-w-0",children:[Gt.jsxs("div",{className:"flex items-start justify-between",children:[Gt.jsx("p",{className:"text-sm text-gray-300",children:t.content}),!t.read&&Gt.jsx("button",{onClick:()=>{return e=t.id,void u.mutate(e);var e},className:"ml-2 text-gray-500 hover:text-gray-300 transition-colors",title:"Mark as read",disabled:u.isPending,children:Gt.jsx(Zi,{className:"h-4 w-4"})})]}),Gt.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[Gt.jsx("span",{className:"text-xs text-gray-500",children:f(t.createdAt)}),t.link&&Gt.jsx(Be,{href:t.link,children:Gt.jsx("span",{className:"text-xs text-blue-400 hover:text-blue-300 cursor-pointer",children:"View"})})]})]})]})})},t.id))})]})}function EB(){const t=Ct.useCallback(()=>{},[]),e=Oe(),[,n]=je(),r=e.id||"";rr();const{isAuthenticated:i,isLoading:s}=pk(),[o,a]=Ct.useState("about"),{data:c,isLoading:l,error:u}=Vn({queryKey:["/api/organizations",r],queryFn:async()=>{if(!isNaN(parseInt(r))){const t=await fetch(`/api/organizations/${r}`,{credentials:"include"});if(t.ok)return t.json()}const t=await fetch(`/api/organizations/search?q=${encodeURIComponent(r)}`,{credentials:"include"});if(!t.ok)throw new Error(`Organization not found: ${t.status}`);const e=(await t.json()).find(t=>t.name.toLowerCase()===r.toLowerCase());if(!e)throw new Error("Organization not found");return e},enabled:!!r,retry:(t,e)=>cD(e)?(window.location.href="/auth",!1):t<3}),{data:d=[],isLoading:h}=Vn({queryKey:["/api/posts",{organizationId:null==c?void 0:c.id}],queryFn:async()=>{if(!(null==c?void 0:c.id))throw new Error("Organization not loaded");const t=await fetch(`/api/posts?organizationId=${c.id}`,{credentials:"include"});if(!t.ok)throw new Error(`${t.status}: ${t.statusText}`);return t.json()},enabled:!!(null==c?void 0:c.id),retry:(t,e)=>cD(e)?(window.location.href="/auth",!1):t<3}),{data:f=[],isLoading:m}=Vn({queryKey:["/api/polls",{organizationId:null==c?void 0:c.id}],queryFn:async()=>{if(!(null==c?void 0:c.id))throw new Error("Organization not loaded");const t=await fetch(`/api/polls?organizationId=${c.id}`,{credentials:"include"});if(!t.ok)throw new Error(`${t.status}: ${t.statusText}`);return t.json()},enabled:!!(null==c?void 0:c.id),retry:(t,e)=>cD(e)?(window.location.href="/auth",!1):t<3}),p=d.filter(t=>"review"===t.type),g=d.filter(t=>"poll"!==t.type&&"review"!==t.type);if(u&&!l)return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6 flex items-center justify-center",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Organization not found"}),Gt.jsxs("p",{className:"text-gray-400 mb-6",children:['The organization "',r,"\" doesn't exist or you don't have access."]}),Gt.jsx(kk,{onClick:()=>n("/organizations"),className:"bg-green-500 hover:bg-green-600",children:"Back to Organizations"})]})});if(s||l)return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsx("div",{className:"h-10 w-32 bg-gray-800 rounded animate-pulse mb-6"}),Gt.jsx("div",{className:"h-64 bg-gray-800 rounded animate-pulse"})]})});if(!c)return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6 flex items-center justify-center",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("h3",{className:"text-2xl font-bold mb-3",children:"Organization not found"}),Gt.jsx(kk,{onClick:()=>n("/organizations"),className:"bg-green-500 hover:bg-green-600",children:"Back to Organizations"})]})});const w=void 0!==(null==(y=null==c?void 0:c.trustData)?void 0:y.trustPercentage)?{trust:c.trustData.trustPercentage,distrust:100-c.trustData.trustPercentage}:{trust:80,distrust:20};var y;return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[Gt.jsx("button",{onClick:()=>a("about"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("about"===o?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"ABOUT"}),Gt.jsx("button",{onClick:()=>a("posts"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("posts"===o?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POSTS"}),Gt.jsx("button",{onClick:()=>a("polls"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("polls"===o?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POLLS"}),Gt.jsx("button",{onClick:()=>a("comments"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("comments"===o?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"COMMENTS"})]}),"about"===o&&Gt.jsx("div",{className:"space-y-6",children:Gt.jsxs("div",{className:"bg-[#1a1a1a] p-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Gt.jsxs("div",{className:"flex items-center gap-4",children:[Gt.jsx("div",{className:"w-12 h-12 bg-[#22c55e] rounded flex items-center justify-center flex-shrink-0",children:Gt.jsx(Wi,{className:"w-6 h-6 text-white"})}),Gt.jsx("h2",{className:"text-white text-2xl font-normal",children:c.name})]}),Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("button",{className:"text-gray-400 hover:text-white transition-colors p-2",children:Gt.jsx(Vs,{className:"w-5 h-5"})}),Gt.jsx("button",{className:"text-gray-400 hover:text-white transition-colors p-2",children:Gt.jsx(Ps,{className:"w-5 h-5"})}),Gt.jsx("button",{className:"text-gray-400 hover:text-white transition-colors p-2",children:Gt.jsx(Os,{className:"w-5 h-5"})}),Gt.jsx("button",{className:"text-gray-400 hover:text-white transition-colors p-2",children:Gt.jsx(Li,{className:"w-5 h-5"})})]})]}),Gt.jsxs("div",{className:"flex gap-2 mb-6",children:[Gt.jsx("div",{className:"bg-[#7dd3fc] h-12 flex items-center justify-center rounded",style:{width:`${w.trust}%`},children:Gt.jsxs("span",{className:"text-black font-semibold text-sm",children:[Math.round(w.trust/100*1520)," (",w.trust,"%)"]})}),Gt.jsx("div",{className:"bg-[#fb7185] h-12 flex items-center justify-center rounded",style:{width:`${w.distrust}%`},children:Gt.jsxs("span",{className:"text-black font-semibold text-sm",children:[Math.round(w.distrust/100*1520)," (",w.distrust,"%)"]})})]}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-8",children:c.description||"Welcome to the Web3 Privacy Collective, a community focused on privacy in the decentralized web. We unite enthusiasts and developers who believe privacy is a fundamental right. Join us for discussions, workshops, and events that empower individuals to secure their online presence."}),Gt.jsxs("div",{className:"mb-8",children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold mb-4 uppercase",children:"INSIDERS"}),Gt.jsx("div",{className:"flex gap-6",children:[1,2].map(t=>Gt.jsxs("div",{className:"flex flex-col items-center",children:[Gt.jsx("div",{className:"w-16 h-16 bg-[#fb923c] rounded mb-2"}),Gt.jsx("span",{className:"text-gray-400 text-xs",children:"tery_jang"})]},t))})]}),Gt.jsxs("div",{children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold mb-4 uppercase",children:"TOP REVIEWS"}),p.length>0?Gt.jsx("div",{className:"space-y-4",children:p.slice(0,3).map(t=>{var e,r,i;return Gt.jsxs("div",{className:"bg-[#2a2a2a] p-4 rounded",children:[Gt.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[Gt.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded text-xs font-semibold "+((t.upvotes||0)>=(t.downvotes||0)?"bg-[#7dd3fc] text-black":"bg-[#fb7185] text-black"),children:[(t.upvotes||0)>=(t.downvotes||0)?Gt.jsx(_s,{className:"w-3 h-3"}):Gt.jsx(zs,{className:"w-3 h-3"}),Gt.jsx("span",{children:(null==(e=t.author)?void 0:e.username)||"Anonymous"})]}),Gt.jsx("div",{className:"w-8 h-8 bg-[#22c55e] rounded flex items-center justify-center",children:Gt.jsx(Wi,{className:"w-4 h-4 text-white"})}),Gt.jsx("span",{className:"text-gray-500 text-xs ml-auto",children:new Date(t.createdAt).toLocaleDateString()})]}),Gt.jsx("h4",{className:"text-white font-medium mb-3",children:t.title||"Review"}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-3",children:(null==(r=t.content)?void 0:r.length)>200?`${t.content.substring(0,200)}...`:t.content}),(null==(i=t.content)?void 0:i.length)>200&&Gt.jsx("button",{onClick:()=>n(`/posts/${t.id}`),className:"text-gray-500 text-xs hover:text-gray-400 mb-4",children:"Read more..."}),Gt.jsxs("div",{className:"flex items-center gap-6 text-gray-400 text-sm",children:[Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(_s,{className:"w-4 h-4"}),Gt.jsx("span",{children:t.upvotes||0})]}),Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(zs,{className:"w-4 h-4"}),Gt.jsx("span",{children:t.downvotes||0})]}),Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(ks,{className:"w-4 h-4"}),Gt.jsx("span",{children:t.commentCount||0})]}),Gt.jsx("button",{className:"hover:text-white transition-colors ml-auto",children:Gt.jsx(Li,{className:"w-4 h-4"})})]})]},t.id)})}):Gt.jsxs("div",{className:"bg-[#2a2a2a] p-4 rounded",children:[Gt.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[Gt.jsxs("div",{className:"flex items-center gap-2 bg-[#7dd3fc] px-3 py-1 rounded text-black text-xs font-semibold",children:[Gt.jsx(_s,{className:"w-3 h-3"}),Gt.jsx("span",{className:"text-black",children:"user1234"})]}),Gt.jsx("div",{className:"w-8 h-8 bg-[#22c55e] rounded flex items-center justify-center",children:Gt.jsx(Wi,{className:"w-4 h-4 text-white"})}),Gt.jsx("span",{className:"text-gray-500 text-xs ml-auto",children:"45 min ago"})]}),Gt.jsx("h4",{className:"text-white font-medium mb-3",children:"The consumer chain"}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-3",children:"Most fun i ever had using a chain before TGE. honest truth, it's fill with games and doesn't fill like a meme coin ecosystem here is strong as well. There are a lot of gambling related apps but I think this really caters to consumers. Con..."}),Gt.jsx("button",{className:"text-gray-500 text-xs hover:text-gray-400 mb-4",children:"Read more..."}),Gt.jsxs("div",{className:"flex items-center gap-6 text-gray-400 text-sm",children:[Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(_s,{className:"w-4 h-4"}),Gt.jsx("span",{children:"57"})]}),Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(zs,{className:"w-4 h-4"}),Gt.jsx("span",{children:"57"})]}),Gt.jsxs("button",{className:"flex items-center gap-2 hover:text-white transition-colors",children:[Gt.jsx(ks,{className:"w-4 h-4"}),Gt.jsx("span",{children:"23"})]}),Gt.jsx("button",{className:"hover:text-white transition-colors ml-auto",children:Gt.jsx(Li,{className:"w-4 h-4"})})]})]})]})]})}),"posts"===o&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Gt.jsx("h3",{className:"text-xl font-semibold text-white",children:"Posts"}),Gt.jsxs(kk,{onClick:()=>n(`/create-post?organizationId=${c.id}`),className:"bg-green-500 hover:bg-green-600 text-white",children:[Gt.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Create Post"]})]}),h?Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsx("div",{className:"h-32 bg-gray-800 rounded animate-pulse"},t))}):g.length>0?Gt.jsx("div",{className:"space-y-6",children:g.map(e=>Gt.jsx("div",{className:"bg-[#1a1a1a] border border-gray-800",children:Gt.jsx(fR,{post:e,onUpdate:t})},e.id))}):Gt.jsxs("div",{className:"text-center py-12 bg-[#1a1a1a]",children:[Gt.jsx(ks,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No posts yet"}),Gt.jsx("p",{className:"text-gray-500 mb-6",children:"Be the first to create a post!"}),Gt.jsxs(kk,{onClick:()=>n(`/create-post?organizationId=${c.id}`),className:"bg-green-500 hover:bg-green-600 text-white",children:[Gt.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Create First Post"]})]})]}),"polls"===o&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Gt.jsx("h3",{className:"text-xl font-semibold text-white",children:"Polls"}),Gt.jsxs(kk,{onClick:()=>n(`/create-post?organizationId=${c.id}&type=poll`),className:"bg-green-500 hover:bg-green-600 text-white",children:[Gt.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Create Poll"]})]}),m?Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsx("div",{className:"h-48 bg-gray-800 rounded animate-pulse"},t))}):f.length>0?Gt.jsx("div",{className:"space-y-6",children:f.map(t=>{var e;return Gt.jsxs("div",{className:"bg-[#1a1a1a] p-6",children:[Gt.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:t.title}),Gt.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:t.description}),Gt.jsx("div",{className:"space-y-2",children:null==(e=t.options)?void 0:e.map((t,e)=>Gt.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2a2a2a] rounded",children:[Gt.jsx("span",{className:"text-sm text-gray-400",children:t.text}),Gt.jsxs("span",{className:"text-sm text-gray-500",children:[t.votes||0," votes"]})]},e))})]},t.id)})}):Gt.jsxs("div",{className:"text-center py-12 bg-[#1a1a1a]",children:[Gt.jsx(Hi,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No polls yet"}),Gt.jsx("p",{className:"text-gray-500 mb-6",children:"Be the first to create a poll!"}),Gt.jsxs(kk,{onClick:()=>n(`/create-post?organizationId=${c.id}&type=poll`),className:"bg-green-500 hover:bg-green-600 text-white",children:[Gt.jsx(Hi,{className:"h-4 w-4 mr-2"}),"Create First Poll"]})]})]}),"comments"===o&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Comments"}),Gt.jsxs("div",{className:"text-center py-12 bg-[#1a1a1a]",children:[Gt.jsx(ks,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-500",children:"Comments feature coming soon"})]})]})]})})}MB.displayName=bB.displayName,Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(xB,{ref:n,className:na("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e})).displayName=xB.displayName;var SB=t=>"checkbox"===t.type,CB=t=>t instanceof Date,TB=t=>null==t;const IB=t=>"object"==typeof t;var OB=t=>!TB(t)&&!Array.isArray(t)&&IB(t)&&!CB(t),PB=t=>OB(t)&&t.target?SB(t.target)?t.target.checked:t.target.value:t,jB=(t,e)=>t.has((t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t)(e)),DB="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function zB(t){let e;const n=Array.isArray(t),r="undefined"!=typeof FileList&&t instanceof FileList;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else{if(DB&&(t instanceof Blob||r)||!n&&!OB(t))return t;if(e=n?[]:{},n||(t=>{const e=t.constructor&&t.constructor.prototype;return OB(e)&&e.hasOwnProperty("isPrototypeOf")})(t))for(const n in t)t.hasOwnProperty(n)&&(e[n]=zB(t[n]));else e=t}return e}var _B=t=>Array.isArray(t)?t.filter(Boolean):[],RB=t=>void 0===t,BB=(t,e,n)=>{if(!e||!OB(t))return n;const r=_B(e.split(/[,[\].]+?/)).reduce((t,e)=>TB(t)?t:t[e],t);return RB(r)||r===t?RB(t[e])?n:t[e]:r},$B=t=>"boolean"==typeof t,UB=t=>/^\w*$/.test(t),FB=t=>_B(t.replace(/["|']|\]/g,"").split(/\.|\[/)),LB=(t,e,n)=>{let r=-1;const i=UB(e)?[e]:FB(e),s=i.length,o=s-1;for(;++r<s;){const e=i[r];let s=n;if(r!==o){const n=t[e];s=OB(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===e||"constructor"===e||"prototype"===e)return;t[e]=s,t=t[e]}};const WB="blur",VB="onChange",qB="onSubmit",KB="all",HB="pattern",YB="required",ZB=Ot.createContext(null),GB=()=>Ot.useContext(ZB);var QB=(t,e,n,r=!0)=>{const i={defaultValues:e.mn};for(const s in t)Object.defineProperty(i,s,{get:()=>{const i=s;return e.pn[i]!==KB&&(e.pn[i]=!r||KB),n&&(n[i]=!0),t[i]}});return i},XB=t=>"string"==typeof t,JB=(t,e,n,r,i)=>XB(t)?(r&&e.watch.add(t),BB(n,t,i)):Array.isArray(t)?t.map(t=>(r&&e.watch.add(t),BB(n,t))):(r&&(e.watchAll=!0),n);const t$=t=>t.render(function(t){const e=GB(),{name:n,disabled:r,control:i=e.control,shouldUnregister:s}=t,o=jB(i.gn.array,n),a=function(t){const e=GB(),{control:n=e.control,name:r,defaultValue:i,disabled:s,exact:o}=t||{},a=Ot.useRef(r),c=Ot.useRef(i);a.current=r,Ot.useEffect(()=>n.wn({name:a.current,formState:{values:!0},exact:o,callback:t=>!s&&u(JB(a.current,n.gn,t.values||n.yn,!1,c.current))}),[n,s,o]);const[l,u]=Ot.useState(n.vn(r,i));return Ot.useEffect(()=>n.bn()),l}({control:i,name:n,defaultValue:BB(i.yn,n,BB(i.mn,n,t.defaultValue)),exact:!0}),c=function(t){const e=GB(),{control:n=e.control,disabled:r,name:i,exact:s}=t||{},[o,a]=Ot.useState(n.xn),c=Ot.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),l=Ot.useRef(i);return l.current=i,Ot.useEffect(()=>n.wn({name:l.current,formState:c.current,exact:s,callback:t=>{!r&&a({...n.xn,...t})}}),[n,r,s]),Ot.useEffect(()=>{c.current.isValid&&n.Nn(!0)},[n]),Ot.useMemo(()=>QB(o,n,c.current,!1),[o,n])}({control:i,name:n,exact:!0}),l=Ot.useRef(t),u=Ot.useRef(i.register(n,{...t.rules,value:a,...$B(t.disabled)?{disabled:t.disabled}:{}})),d=Ot.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!BB(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!BB(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!BB(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!BB(c.validatingFields,n)},error:{enumerable:!0,get:()=>BB(c.errors,n)}}),[c,n]),h=Ot.useCallback(t=>u.current.onChange({target:{value:PB(t),name:n},type:"change"}),[n]),f=Ot.useCallback(()=>u.current.onBlur({target:{value:BB(i.yn,n),name:n},type:WB}),[n,i.yn]),m=Ot.useCallback(t=>{const e=BB(i.kn,n);e&&t&&(e.Mn.ref={focus:()=>t.focus(),select:()=>t.select(),setCustomValidity:e=>t.setCustomValidity(e),reportValidity:()=>t.reportValidity()})},[i.kn,n]),p=Ot.useMemo(()=>({name:n,value:a,...$B(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:h,onBlur:f,ref:m}),[n,r,c.disabled,h,f,m,a]);return Ot.useEffect(()=>{const t=i.zt.shouldUnregister||s;i.register(n,{...l.current.rules,...$B(l.current.disabled)?{disabled:l.current.disabled}:{}});const e=(t,e)=>{const n=BB(i.kn,t);n&&n.Mn&&(n.Mn.mount=e)};if(e(n,!0),t){const t=zB(BB(i.zt.defaultValues,n));LB(i.mn,n,t),RB(BB(i.yn,n))&&LB(i.yn,n,t)}return!o&&i.register(n),()=>{(o?t&&!i.An.action:t)?i.unregister(n):e(n,!1)}},[n,i,o,s]),Ot.useEffect(()=>{i.En({disabled:r,name:n})},[r,n,i]),Ot.useMemo(()=>({field:p,formState:c,fieldState:d}),[p,c,d])}(t));var e$=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},n$=t=>Array.isArray(t)?t:[t],r$=()=>{let t=[];return{get observers(){return t},next:e=>{for(const n of t)n.next&&n.next(e)},subscribe:e=>(t.push(e),{unsubscribe:()=>{t=t.filter(t=>t!==e)}}),unsubscribe:()=>{t=[]}}},i$=t=>TB(t)||!IB(t);function s$(t,e){if(i$(t)||i$(e))return t===e;if(CB(t)&&CB(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n){const n=t[i];if(!r.includes(i))return!1;if("ref"!==i){const t=e[i];if(CB(n)&&CB(t)||OB(n)&&OB(t)||Array.isArray(n)&&Array.isArray(t)?!s$(n,t):n!==t)return!1}}return!0}var o$=t=>OB(t)&&!Object.keys(t).length,a$=t=>"file"===t.type,c$=t=>"function"==typeof t,l$=t=>{if(!DB)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},u$=t=>"select-multiple"===t.type,d$=t=>"radio"===t.type,h$=t=>l$(t)&&t.isConnected;function f$(t,e){const n=Array.isArray(e)?e:UB(e)?[e]:FB(e),r=1===n.length?t:function(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=RB(t)?r++:t[e[r++]];return t}(t,n),i=n.length-1,s=n[i];return r&&delete r[s],0!==i&&(OB(r)&&o$(r)||Array.isArray(r)&&function(t){for(const e in t)if(t.hasOwnProperty(e)&&!RB(t[e]))return!1;return!0}(r))&&f$(t,n.slice(0,-1)),t}var m$=t=>{for(const e in t)if(c$(t[e]))return!0;return!1};function p$(t,e={}){const n=Array.isArray(t);if(OB(t)||n)for(const r in t)Array.isArray(t[r])||OB(t[r])&&!m$(t[r])?(e[r]=Array.isArray(t[r])?[]:{},p$(t[r],e[r])):TB(t[r])||(e[r]=!0);return e}function g$(t,e,n){const r=Array.isArray(t);if(OB(t)||r)for(const i in t)Array.isArray(t[i])||OB(t[i])&&!m$(t[i])?RB(e)||i$(n[i])?n[i]=Array.isArray(t[i])?p$(t[i],[]):{...p$(t[i])}:g$(t[i],TB(e)?{}:e[i],n[i]):n[i]=!s$(t[i],e[i]);return n}var w$=(t,e)=>g$(t,e,p$(e));const y$={value:!1,isValid:!1},v$={value:!0,isValid:!0};var b$=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!RB(t[0].attributes.value)?RB(t[0].value)||""===t[0].value?v$:{value:t[0].value,isValid:!0}:v$:y$}return y$},x$=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>RB(t)?t:e?""===t?NaN:t?+t:t:n&&XB(t)?new Date(t):r?r(t):t;const N$={isValid:!1,value:null};var k$=t=>Array.isArray(t)?t.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,N$):N$;function M$(t){const e=t.ref;return a$(e)?e.files:d$(e)?k$(t.refs).value:u$(e)?[...e.selectedOptions].map(({value:t})=>t):SB(e)?b$(t.refs).value:x$(RB(e.value)?t.ref.value:e.value,t)}var A$=t=>t instanceof RegExp,E$=t=>RB(t)?t:A$(t)?t.source:OB(t)?A$(t.value)?t.value.source:t.value:t,S$=t=>({isOnSubmit:!t||t===qB,isOnBlur:"onBlur"===t,isOnChange:t===VB,isOnAll:t===KB,isOnTouch:"onTouched"===t});const C$="AsyncFunction";var T$=t=>!!t&&!!t.validate&&!!(c$(t.validate)&&t.validate.constructor.name===C$||OB(t.validate)&&Object.values(t.validate).find(t=>t.constructor.name===C$)),I$=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(e=>t.startsWith(e)&&/^\.\w+/.test(t.slice(e.length))));const O$=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const n=BB(t,i);if(n){const{Mn:t,...s}=n;if(t){if(t.refs&&t.refs[0]&&e(t.refs[0],i)&&!r)return!0;if(t.ref&&e(t.ref,t.name)&&!r)return!0;if(O$(s,e))break}else if(OB(s)&&O$(s,e))break}}};function P$(t,e,n){const r=BB(t,n);if(r||UB(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=BB(e,r),o=BB(t,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(o&&o.type)return{name:r,error:o};i.pop()}return{name:n}}var j$=(t,e,n)=>{const r=n$(BB(t,n));return LB(r,"root",e[n]),LB(t,n,r),t},D$=t=>XB(t);function z$(t,e,n="validate"){if(D$(t)||Array.isArray(t)&&t.every(D$)||$B(t)&&!t)return{type:n,message:D$(t)?t:"",ref:e}}var _$=t=>OB(t)&&!A$(t)?t:{value:t,message:""},R$=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:c,maxLength:l,minLength:u,min:d,max:h,pattern:f,validate:m,name:p,valueAsNumber:g,mount:w}=t.Mn,y=BB(n,p);if(!w||e.has(p))return{};const v=a?a[0]:o,b=t=>{i&&v.reportValidity&&(v.setCustomValidity($B(t)?"":t||""),v.reportValidity())},x={},N=d$(o),k=SB(o),M=N||k,A=(g||a$(o))&&RB(o.value)&&RB(y)||l$(o)&&""===o.value||""===y||Array.isArray(y)&&!y.length,E=e$.bind(null,p,r,x),S=(t,e,n,r="maxLength",i="minLength")=>{const s=t?e:n;x[p]={type:t?r:i,message:s,ref:o,...E(t?r:i,s)}};if(s?!Array.isArray(y)||!y.length:c&&(!M&&(A||TB(y))||$B(y)&&!y||k&&!b$(a).isValid||N&&!k$(a).isValid)){const{value:t,message:e}=D$(c)?{value:!!c,message:c}:_$(c);if(t&&(x[p]={type:YB,message:e,ref:v,...E(YB,e)},!r))return b(e),x}if(!(A||TB(d)&&TB(h))){let t,e;const n=_$(h),i=_$(d);if(TB(y)||isNaN(y)){const r=o.valueAsDate||new Date(y),s=t=>new Date((new Date).toDateString()+" "+t),a="time"==o.type,c="week"==o.type;XB(n.value)&&y&&(t=a?s(y)>s(n.value):c?y>n.value:r>new Date(n.value)),XB(i.value)&&y&&(e=a?s(y)<s(i.value):c?y<i.value:r<new Date(i.value))}else{const r=o.valueAsNumber||(y?+y:y);TB(n.value)||(t=r>n.value),TB(i.value)||(e=r<i.value)}if((t||e)&&(S(!!t,n.message,i.message,"max","min"),!r))return b(x[p].message),x}if((l||u)&&!A&&(XB(y)||s&&Array.isArray(y))){const t=_$(l),e=_$(u),n=!TB(t.value)&&y.length>+t.value,i=!TB(e.value)&&y.length<+e.value;if((n||i)&&(S(n,t.message,e.message),!r))return b(x[p].message),x}if(f&&!A&&XB(y)){const{value:t,message:e}=_$(f);if(A$(t)&&!y.match(t)&&(x[p]={type:HB,message:e,ref:o,...E(HB,e)},!r))return b(e),x}if(m)if(c$(m)){const t=z$(await m(y,n),v);if(t&&(x[p]={...t,...E("validate",t.message)},!r))return b(t.message),x}else if(OB(m)){let t={};for(const e in m){if(!o$(t)&&!r)break;const i=z$(await m[e](y,n),v,e);i&&(t={...i,...E(e,i.message)},b(i.message),r&&(x[p]=t))}if(!o$(t)&&(x[p]={ref:v,...t},!r))return x}return b(!0),x};const B$={mode:qB,reValidateMode:VB,shouldFocusError:!0};function $$(t={}){let e={...B$,...t},n={submitCount:0,isDirty:!1,isLoading:c$(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let i,s=(OB(e.defaultValues)||OB(e.values))&&zB(e.values||e.defaultValues)||{},o=e.shouldUnregister?{}:zB(s),a={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const h={array:r$(),state:r$()},f=S$(e.mode),m=S$(e.reValidateMode),p=e.criteriaMode===KB,g=async t=>{if(!e.disabled&&(u.isValid||d.isValid||t)){const t=e.resolver?o$((await b()).errors):await x(r,!0);t!==n.isValid&&h.state.next({isValid:t})}},w=(t,r)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((t||Array.from(c.mount)).forEach(t=>{t&&(r?LB(n.validatingFields,t,r):f$(n.validatingFields,t))}),h.state.next({validatingFields:n.validatingFields,isValidating:!o$(n.validatingFields)}))},y=(t,e,n,i)=>{const c=BB(r,t);if(c){const r=BB(o,t,RB(n)?BB(s,t):n);RB(r)||i&&i.defaultChecked||e?LB(o,t,e?r:M$(c.Mn)):M(t,r),a.mount&&g()}},v=(t,r,i,o,a)=>{let c=!1,l=!1;const f={name:t};if(!e.disabled){if(!i||o){(u.isDirty||d.isDirty)&&(l=n.isDirty,n.isDirty=f.isDirty=N(),c=l!==f.isDirty);const e=s$(BB(s,t),r);l=!!BB(n.dirtyFields,t),e?f$(n.dirtyFields,t):LB(n.dirtyFields,t,!0),f.dirtyFields=n.dirtyFields,c=c||(u.dirtyFields||d.dirtyFields)&&l!==!e}if(i){const e=BB(n.touchedFields,t);e||(LB(n.touchedFields,t,i),f.touchedFields=n.touchedFields,c=c||(u.touchedFields||d.touchedFields)&&e!==i)}c&&a&&h.state.next(f)}return c?f:{}},b=async t=>{w(t,!0);const n=await e.resolver(o,e.context,((t,e,n,r)=>{const i={};for(const s of t){const t=BB(e,s);t&&LB(i,s,t.Mn)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}})(t||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(t),n},x=async(t,r,i={valid:!0})=>{for(const s in t){const a=t[s];if(a){const{Mn:t,...l}=a;if(t){const l=c.array.has(t.name),d=a.Mn&&T$(a.Mn);d&&u.validatingFields&&w([s],!0);const h=await R$(a,c.disabled,o,p,e.shouldUseNativeValidation&&!r,l);if(d&&u.validatingFields&&w([s]),h[t.name]&&(i.valid=!1,r))break;!r&&(BB(h,t.name)?l?j$(n.errors,h,t.name):LB(n.errors,t.name,h[t.name]):f$(n.errors,t.name))}!o$(l)&&await x(l,r,i)}}return i.valid},N=(t,n)=>!e.disabled&&(t&&n&&LB(o,t,n),!s$(I(),s)),k=(t,e,n)=>JB(t,c,{...a.mount?o:RB(e)?s:XB(t)?{[t]:e}:e},n,e),M=(t,e,n={})=>{const i=BB(r,t);let s=e;if(i){const n=i.Mn;n&&(!n.disabled&&LB(o,t,x$(e,n)),s=l$(n.ref)&&TB(e)?"":e,u$(n.ref)?[...n.ref.options].forEach(t=>t.selected=s.includes(t.value)):n.refs?SB(n.ref)?n.refs.length>1?n.refs.forEach(t=>(!t.defaultChecked||!t.disabled)&&(t.checked=Array.isArray(s)?!!s.find(e=>e===t.value):s===t.value)):n.refs[0]&&(n.refs[0].checked=!!s):n.refs.forEach(t=>t.checked=t.value===s):a$(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||h.state.next({name:t,values:zB(o)})))}(n.shouldDirty||n.shouldTouch)&&v(t,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&T(t)},A=(t,e,n)=>{for(const i in e){const s=e[i],o=`${t}.${i}`,a=BB(r,o);(c.array.has(t)||OB(s)||a&&!a.Mn)&&!CB(s)?A(o,s,n):M(o,s,n)}},E=(t,e,i={})=>{const l=BB(r,t),f=c.array.has(t),m=zB(e);LB(o,t,m),f?(h.array.next({name:t,values:zB(o)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&i.shouldDirty&&h.state.next({name:t,dirtyFields:w$(s,o),isDirty:N(t,m)})):!l||l.Mn||TB(m)?M(t,m,i):A(t,m,i),I$(t,c)&&h.state.next({...n}),h.state.next({name:a.mount?t:void 0,values:zB(o)})},S=async t=>{a.mount=!0;const s=t.target;let y=s.name,N=!0;const k=BB(r,y),M=t=>{N=Number.isNaN(t)||CB(t)&&isNaN(t.getTime())||s$(t,BB(o,y,t))};if(k){let a,A;const E=s.type?M$(k.Mn):PB(t),S=t.type===WB||"focusout"===t.type,C=!(t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate))(k.Mn)&&!e.resolver&&!BB(n.errors,y)&&!k.Mn.deps||((t,e,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:!(n?r.isOnChange:i.isOnChange)||t))(S,BB(n.touchedFields,y),n.isSubmitted,m,f),I=I$(y,c,S);LB(o,y,E),S?(k.Mn.onBlur&&k.Mn.onBlur(t),i&&i(0)):k.Mn.onChange&&k.Mn.onChange(t);const O=v(y,E,S),P=!o$(O)||I;if(!S&&h.state.next({name:y,type:t.type,values:zB(o)}),C)return(u.isValid||d.isValid)&&("onBlur"===e.mode?S&&g():S||g()),P&&h.state.next({name:y,...I?{}:O});if(!S&&I&&h.state.next({...n}),e.resolver){const{errors:t}=await b([y]);if(M(E),N){const e=P$(n.errors,r,y),i=P$(t,r,e.name||y);a=i.error,y=i.name,A=o$(t)}}else w([y],!0),a=(await R$(k,c.disabled,o,p,e.shouldUseNativeValidation))[y],w([y]),M(E),N&&(a?A=!1:(u.isValid||d.isValid)&&(A=await x(r,!0)));N&&(k.Mn.deps&&T(k.Mn.deps),((t,r,s,o)=>{const a=BB(n.errors,t),c=(u.isValid||d.isValid)&&$B(r)&&n.isValid!==r;var f;if(e.delayError&&s?(f=()=>((t,e)=>{LB(n.errors,t,e),h.state.next({errors:n.errors})})(t,s),i=t=>{clearTimeout(l),l=setTimeout(f,t)},i(e.delayError)):(clearTimeout(l),i=null,s?LB(n.errors,t,s):f$(n.errors,t)),(s?!s$(a,s):a)||!o$(o)||c){const e={...o,...c&&$B(r)?{isValid:r}:{},errors:n.errors,name:t};n={...n,...e},h.state.next(e)}})(y,A,a,O))}},C=(t,e)=>{if(BB(n.errors,e)&&t.focus)return t.focus(),1},T=async(t,i={})=>{let s,o;const a=n$(t);if(e.resolver){const e=await(async t=>{const{errors:e}=await b(t);if(t)for(const r of t){const t=BB(e,r);t?LB(n.errors,r,t):f$(n.errors,r)}else n.errors=e;return e})(RB(t)?t:a);s=o$(e),o=t?!a.some(t=>BB(e,t)):s}else t?(o=(await Promise.all(a.map(async t=>{const e=BB(r,t);return await x(e&&e.Mn?{[t]:e}:e)}))).every(Boolean),(o||n.isValid)&&g()):o=s=await x(r);return h.state.next({...!XB(t)||(u.isValid||d.isValid)&&s!==n.isValid?{}:{name:t},...e.resolver||!t?{isValid:s}:{},errors:n.errors}),i.shouldFocus&&!o&&O$(r,C,t?a:c.mount),o},I=t=>{const e={...a.mount?o:s};return RB(t)?e:XB(t)?BB(e,t):t.map(t=>BB(e,t))},O=(t,e)=>({invalid:!!BB((e||n).errors,t),isDirty:!!BB((e||n).dirtyFields,t),error:BB((e||n).errors,t),isValidating:!!BB(n.validatingFields,t),isTouched:!!BB((e||n).touchedFields,t)}),P=(t,e,i)=>{const s=(BB(r,t,{Mn:{}}).Mn||{}).ref,o=BB(n.errors,t)||{},{ref:a,message:c,type:l,...u}=o;LB(n.errors,t,{...u,...e,ref:s}),h.state.next({name:t,errors:n.errors,isValid:!1}),i&&i.shouldFocus&&s&&s.focus&&s.focus()},j=t=>h.state.subscribe({next:e=>{var r,i,s;r=t.name,i=e.name,s=t.exact,r&&i&&r!==i&&!n$(r).some(t=>t&&(s?t===i:t.startsWith(i)||i.startsWith(t)))||!((t,e,n,r)=>{n(t);const{name:i,...s}=t;return o$(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(t=>e[t]===(!r||KB))})(e,t.formState||u,F,t.reRenderRoot)||t.callback({values:{...o},...n,...e})}}).unsubscribe,D=(t,i={})=>{for(const a of t?n$(t):c.mount)c.mount.delete(a),c.array.delete(a),i.keepValue||(f$(r,a),f$(o,a)),!i.keepError&&f$(n.errors,a),!i.keepDirty&&f$(n.dirtyFields,a),!i.keepTouched&&f$(n.touchedFields,a),!i.keepIsValidating&&f$(n.validatingFields,a),!e.shouldUnregister&&!i.keepDefaultValue&&f$(s,a);h.state.next({values:zB(o)}),h.state.next({...n,...i.keepDirty?{isDirty:N()}:{}}),!i.keepIsValid&&g()},z=({disabled:t,name:e})=>{($B(t)&&a.mount||t||c.disabled.has(e))&&(t?c.disabled.add(e):c.disabled.delete(e))},_=(t,n={})=>{let i=BB(r,t);const o=$B(n.disabled)||$B(e.disabled);return LB(r,t,{...i||{},Mn:{...i&&i.Mn?i.Mn:{ref:{name:t}},name:t,mount:!0,...n}}),c.mount.add(t),i?z({disabled:$B(n.disabled)?n.disabled:e.disabled,name:t}):y(t,!0,n.value),{...o?{disabled:n.disabled||e.disabled}:{},...e.progressive?{required:!!n.required,min:E$(n.min),max:E$(n.max),minLength:E$(n.minLength),maxLength:E$(n.maxLength),pattern:E$(n.pattern)}:{},name:t,onChange:S,onBlur:S,ref:o=>{if(o){_(t,n),i=BB(r,t);const e=RB(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=(t=>d$(t)||SB(t))(e),c=i.Mn.refs||[];if(a?c.find(t=>t===e):e===i.Mn.ref)return;LB(r,t,{Mn:{...i.Mn,...a?{refs:[...c.filter(h$),e,...Array.isArray(BB(s,t))?[{}]:[]],ref:{type:e.type,name:t}}:{ref:e}}}),y(t,!1,void 0,e)}else i=BB(r,t,{}),i.Mn&&(i.Mn.mount=!1),(e.shouldUnregister||n.shouldUnregister)&&(!jB(c.array,t)||!a.action)&&c.unMount.add(t)}}},R=()=>e.shouldFocusError&&O$(r,C,c.mount),B=(t,i)=>async s=>{let a;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let l=zB(o);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:t,values:e}=await b();n.errors=t,l=e}else await x(r);if(c.disabled.size)for(const t of c.disabled)LB(l,t,void 0);if(f$(n.errors,"root"),o$(n.errors)){h.state.next({errors:{}});try{await t(l,s)}catch(u){a=u}}else i&&await i({...n.errors},s),R(),setTimeout(R);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:o$(n.errors)&&!a,submitCount:n.submitCount+1,errors:n.errors}),a)throw a},$=(t,i={})=>{const l=t?zB(t):s,d=zB(l),f=o$(t),m=f?s:d;if(i.keepDefaultValues||(s=l),!i.keepValues){if(i.keepDirtyValues){const t=new Set([...c.mount,...Object.keys(w$(s,o))]);for(const e of Array.from(t))BB(n.dirtyFields,e)?LB(m,e,BB(o,e)):E(e,BB(m,e))}else{if(DB&&RB(t))for(const t of c.mount){const e=BB(r,t);if(e&&e.Mn){const t=Array.isArray(e.Mn.refs)?e.Mn.refs[0]:e.Mn.ref;if(l$(t)){const e=t.closest("form");if(e){e.reset();break}}}}for(const t of c.mount)E(t,BB(m,t))}o=zB(m),h.array.next({values:{...m}}),h.state.next({values:{...m}})}c={mount:i.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!u.isValid||!!i.keepIsValid||!!i.keepDirtyValues,a.watch=!!e.shouldUnregister,h.state.next({submitCount:i.keepSubmitCount?n.submitCount:0,isDirty:!f&&(i.keepDirty?n.isDirty:!(!i.keepDefaultValues||s$(t,s))),isSubmitted:!!i.keepIsSubmitted&&n.isSubmitted,dirtyFields:f?{}:i.keepDirtyValues?i.keepDefaultValues&&o?w$(s,o):n.dirtyFields:i.keepDefaultValues&&t?w$(s,t):i.keepDirty?n.dirtyFields:{},touchedFields:i.keepTouched?n.touchedFields:{},errors:i.keepErrors?n.errors:{},isSubmitSuccessful:!!i.keepIsSubmitSuccessful&&n.isSubmitSuccessful,isSubmitting:!1})},U=(t,e)=>$(c$(t)?t(o):t,e),F=t=>{n={...n,...t}},L={control:{register:_,unregister:D,getFieldState:O,handleSubmit:B,setError:P,wn:j,Sn:b,vn:k,Cn:N,Nn:g,Tn:(t,i=[],c,l,f=!0,m=!0)=>{if(l&&c&&!e.disabled){if(a.action=!0,m&&Array.isArray(BB(r,t))){const e=c(BB(r,t),l.argA,l.argB);f&&LB(r,t,e)}if(m&&Array.isArray(BB(n.errors,t))){const e=c(BB(n.errors,t),l.argA,l.argB);f&&LB(n.errors,t,e),((t,e)=>{!_B(BB(t,e)).length&&f$(t,e)})(n.errors,t)}if((u.touchedFields||d.touchedFields)&&m&&Array.isArray(BB(n.touchedFields,t))){const e=c(BB(n.touchedFields,t),l.argA,l.argB);f&&LB(n.touchedFields,t,e)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=w$(s,o)),h.state.next({name:t,isDirty:N(t,i),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else LB(o,t,i)},En:z,In:t=>{n.errors=t,h.state.next({errors:n.errors,isValid:!1})},On:t=>_B(BB(a.mount?o:s,t,e.shouldUnregister?BB(s,t,[]):[])),Pn:$,jn:()=>c$(e.defaultValues)&&e.defaultValues().then(t=>{U(t,e.resetOptions),h.state.next({isLoading:!1})}),bn:()=>{for(const t of c.unMount){const e=BB(r,t);e&&(e.Mn.refs?e.Mn.refs.every(t=>!h$(t)):!h$(e.Mn.ref))&&D(t)}c.unMount=new Set},Dn:t=>{$B(t)&&(h.state.next({disabled:t}),O$(r,(e,n)=>{const i=BB(r,n);i&&(e.disabled=i.Mn.disabled||t,Array.isArray(i.Mn.refs)&&i.Mn.refs.forEach(e=>{e.disabled=i.Mn.disabled||t}))},0,!1))},zn:h,pn:u,get kn(){return r},get yn(){return o},get An(){return a},set An(t){a=t},get mn(){return s},get gn(){return c},set gn(t){c=t},get xn(){return n},get zt(){return e},set zt(t){e={...e,...t}}},subscribe:t=>(a.mount=!0,d={...d,...t.formState},j({...t,formState:d})),trigger:T,register:_,handleSubmit:B,watch:(t,e)=>c$(t)?h.state.subscribe({next:n=>t(k(void 0,e),n)}):k(t,e,!0),setValue:E,getValues:I,reset:U,resetField:(t,e={})=>{BB(r,t)&&(RB(e.defaultValue)?E(t,zB(BB(s,t))):(E(t,e.defaultValue),LB(s,t,zB(e.defaultValue))),e.keepTouched||f$(n.touchedFields,t),e.keepDirty||(f$(n.dirtyFields,t),n.isDirty=e.defaultValue?N(t,zB(BB(s,t))):N()),e.keepError||(f$(n.errors,t),u.isValid&&g()),h.state.next({...n}))},clearErrors:t=>{t&&n$(t).forEach(t=>f$(n.errors,t)),h.state.next({errors:t?n.errors:{}})},unregister:D,setError:P,setFocus:(t,e={})=>{const n=BB(r,t),i=n&&n.Mn;if(i){const t=i.refs?i.refs[0]:i.ref;t.focus&&(t.focus(),e.shouldSelect&&c$(t.select)&&t.select())}},getFieldState:O};return{...L,formControl:L}}function U$(t={}){const e=Ot.useRef(void 0),n=Ot.useRef(void 0),[r,i]=Ot.useState({isDirty:!1,isValidating:!1,isLoading:c$(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:c$(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:$$(t),formState:r},t.formControl&&t.defaultValues&&!c$(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const s=e.current.control;return s.zt=t,Ot.useLayoutEffect(()=>s.wn({formState:s.pn,callback:()=>i({...s.xn}),reRenderRoot:!0}),[s]),Ot.useEffect(()=>s.Dn(t.disabled),[s,t.disabled]),Ot.useEffect(()=>{if(s.pn.isDirty){const t=s.Cn();t!==r.isDirty&&s.zn.state.next({isDirty:t})}},[s,r.isDirty]),Ot.useEffect(()=>{t.values&&!s$(t.values,n.current)?(s.Pn(t.values,s.zt.resetOptions),n.current=t.values,i(t=>({...t}))):s.jn()},[t.values,s]),Ot.useEffect(()=>{t.errors&&!o$(t.errors)&&s.In(t.errors)},[t.errors,s]),Ot.useEffect(()=>{s.An.mount||(s.Nn(),s.An.mount=!0),s.An.watch&&(s.An.watch=!1,s.zn.state.next({...s.xn})),s.bn()}),Ot.useEffect(()=>{t.shouldUnregister&&s.zn.state.next({values:s.vn()})},[t.shouldUnregister,s]),e.current.formState=QB(r,s),e.current}const F$=(t,e,n)=>{if(t&&"reportValidity"in t){const r=BB(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},L$=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?F$(r.ref,n,t):r.refs&&r.refs.forEach(e=>F$(e,n,t))}},W$=(t,e)=>{e.shouldUseNativeValidation&&L$(t,e);const n={};for(const r in t){const i=BB(e.fields,r),s=Object.assign(t[r]||{},{ref:i&&i.ref});if(V$(e.names||Object.keys(t),r)){const t=Object.assign({},BB(n,r));LB(t,"root",s),LB(n,r,t)}else LB(n,r,s)}return n},V$=(t,e)=>t.some(t=>t.startsWith(e+"."));var q$,K$,H$,Y$=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,s=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var a=r.unionErrors[0].errors[0];n[o]={message:a.message,type:a.code}}else n[o]={message:s,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(e){return e.errors.forEach(function(e){return t.push(e)})}),e){var c=n[o].types,l=c&&c[r.code];n[o]=e$(o,e,n,i,l?[].concat(l,r.message):r.message)}t.shift()}return n},Z$=function(t,e,n){return void 0===n&&(n={}),function(r,i,s){try{return Promise.resolve(function(i,o){try{var a=Promise.resolve(t["sync"===n.mode?"parse":"parseAsync"](r,e)).then(function(t){return s.shouldUseNativeValidation&&L$({},s),{errors:{},values:n.raw?r:t}})}catch(c){return o(c)}return a&&a.then?a.then(void 0,o):a}(0,function(t){if(e=t,Array.isArray(null==e?void 0:e.errors))return{values:{},errors:W$(Y$(t.errors,!s.shouldUseNativeValidation&&"all"===s.criteriaMode),s)};var e;throw t}))}catch(o){return Promise.reject(o)}}};(K$=q$||(q$={})).assertEqual=t=>{},K$.assertIs=function(t){},K$.assertNever=function(t){throw new Error},K$.arrayToEnum=t=>{const e={};for(const n of t)e[n]=n;return e},K$.getValidEnumValues=t=>{const e=K$.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(const r of e)n[r]=t[r];return K$.objectValues(n)},K$.objectValues=t=>K$.objectKeys(t).map(function(e){return t[e]}),K$.objectKeys="function"==typeof Object.keys?t=>Object.keys(t):t=>{const e=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e},K$.find=(t,e)=>{for(const n of t)if(e(n))return n},K$.isInteger="function"==typeof Number.isInteger?t=>Number.isInteger(t):t=>"number"==typeof t&&Number.isFinite(t)&&Math.floor(t)===t,K$.joinValues=function(t,e=" | "){return t.map(t=>"string"==typeof t?`'${t}'`:t).join(e)},K$.jsonStringifyReplacer=(t,e)=>"bigint"==typeof e?e.toString():e,(H$||(H$={})).mergeShapes=(t,e)=>({...t,...e});const G$=q$.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Q$=t=>{switch(typeof t){case"undefined":return G$.undefined;case"string":return G$.string;case"number":return Number.isNaN(t)?G$.nan:G$.number;case"boolean":return G$.boolean;case"function":return G$.function;case"bigint":return G$.bigint;case"symbol":return G$.symbol;case"object":return Array.isArray(t)?G$.array:null===t?G$.null:t.then&&"function"==typeof t.then&&t.catch&&"function"==typeof t.catch?G$.promise:"undefined"!=typeof Map&&t instanceof Map?G$.map:"undefined"!=typeof Set&&t instanceof Set?G$.set:"undefined"!=typeof Date&&t instanceof Date?G$.date:G$.object;default:return G$.unknown}},X$=q$.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class J$ extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=t=>{this.issues=[...this.issues,t]},this.addIssues=(t=[])=>{this.issues=[...this.issues,...t]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}format(t){const e=t||function(t){return t.message},n={_n:[]},r=t=>{for(const i of t.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._n.push(e(i));else{let t=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(t[n]=t[n]||{_n:[]},t[n]._n.push(e(i))):t[n]=t[n]||{_n:[]},t=t[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof J$))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,q$.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(t=t=>t.message){const e={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];e[n]=e[n]||[],e[n].push(t(r))}else n.push(t(r));return{formErrors:n,fieldErrors:e}}get formErrors(){return this.flatten()}}J$.create=t=>new J$(t);const tU=(t,e)=>{let n;switch(t.code){case X$.invalid_type:n=t.received===G$.undefined?"Required":`Expected ${t.expected}, received ${t.received}`;break;case X$.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,q$.jsonStringifyReplacer)}`;break;case X$.unrecognized_keys:n=`Unrecognized key(s) in object: ${q$.joinValues(t.keys,", ")}`;break;case X$.invalid_union:n="Invalid input";break;case X$.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${q$.joinValues(t.options)}`;break;case X$.invalid_enum_value:n=`Invalid enum value. Expected ${q$.joinValues(t.options)}, received '${t.received}'`;break;case X$.invalid_arguments:n="Invalid function arguments";break;case X$.invalid_return_type:n="Invalid function return type";break;case X$.invalid_date:n="Invalid date";break;case X$.invalid_string:"object"==typeof t.validation?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,"number"==typeof t.validation.position&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:q$.assertNever(t.validation):n="regex"!==t.validation?`Invalid ${t.validation}`:"Invalid";break;case X$.too_small:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:"number"===t.type||"bigint"===t.type?`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:"date"===t.type?`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:"Invalid input";break;case X$.too_big:n="array"===t.type?`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:"string"===t.type?`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:"number"===t.type?`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"bigint"===t.type?`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:"date"===t.type?`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:"Invalid input";break;case X$.custom:n="Invalid input";break;case X$.invalid_intersection_types:n="Intersection results could not be merged";break;case X$.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case X$.not_finite:n="Number must be finite";break;default:n=e.defaultError,q$.assertNever(t)}return{message:n}};let eU=tU;function nU(t,e){const n=eU,r=(t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let a="";const c=r.filter(t=>!!t).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...i,path:s,message:a}})({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===tU?void 0:tU].filter(t=>!!t)});t.common.issues.push(r)}class rU{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(t,e){const n=[];for(const r of e){if("aborted"===r.status)return iU;"dirty"===r.status&&t.dirty(),n.push(r.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,e){const n=[];for(const r of e){const t=await r.key,e=await r.value;n.push({key:t,value:e})}return rU.mergeObjectSync(t,n)}static mergeObjectSync(t,e){const n={};for(const r of e){const{key:e,value:i}=r;if("aborted"===e.status)return iU;if("aborted"===i.status)return iU;"dirty"===e.status&&t.dirty(),"dirty"===i.status&&t.dirty(),"__proto__"===e.value||void 0===i.value&&!r.alwaysSet||(n[e.value]=i.value)}return{status:t.value,value:n}}}const iU=Object.freeze({status:"aborted"}),sU=t=>({status:"dirty",value:t}),oU=t=>({status:"valid",value:t}),aU=t=>"aborted"===t.status,cU=t=>"dirty"===t.status,lU=t=>"valid"===t.status,uU=t=>"undefined"!=typeof Promise&&t instanceof Promise;var dU,hU;(hU=dU||(dU={})).errToObj=t=>"string"==typeof t?{message:t}:t||{},hU.toString=t=>"string"==typeof t?t:null==t?void 0:t.message;class fU{constructor(t,e,n,r){this.Rn=[],this.parent=t,this.data=e,this.Bn=n,this.$n=r}get path(){return this.Rn.length||(Array.isArray(this.$n)?this.Rn.push(...this.Bn,...this.$n):this.Rn.push(...this.Bn,this.$n)),this.Rn}}const mU=(t,e)=>{if(lU(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this.Un)return this.Un;const e=new J$(t.common.issues);return this.Un=e,this.Un}}};function pU(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:i}:{errorMap:(e,i)=>{const{message:s}=t;return"invalid_enum_value"===e.code?{message:s??i.defaultError}:void 0===i.data?{message:s??r??i.defaultError}:"invalid_type"!==e.code?{message:i.defaultError}:{message:s??n??i.defaultError}},description:i}}class gU{get description(){return this.Ln.description}Wn(t){return Q$(t.data)}Vn(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Q$(t.data),schemaErrorMap:this.Ln.errorMap,path:t.path,parent:t.parent}}qn(t){return{status:new rU,ctx:{common:t.parent.common,data:t.data,parsedType:Q$(t.data),schemaErrorMap:this.Ln.errorMap,path:t.path,parent:t.parent}}}Kn(t){const e=this.Hn(t);if(uU(e))throw new Error("Synchronous parse encountered promise.");return e}Yn(t){const e=this.Hn(t);return Promise.resolve(e)}parse(t,e){const n=this.safeParse(t,e);if(n.success)return n.data;throw n.error}safeParse(t,e){const n={common:{issues:[],async:(null==e?void 0:e.async)??!1,contextualErrorMap:null==e?void 0:e.errorMap},path:(null==e?void 0:e.path)||[],schemaErrorMap:this.Ln.errorMap,parent:null,data:t,parsedType:Q$(t)},r=this.Kn({data:t,path:n.path,parent:n});return mU(n,r)}"~validate"(t){var e,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this.Ln.errorMap,parent:null,data:t,parsedType:Q$(t)};if(!this["~standard"].async)try{const e=this.Kn({data:t,path:[],parent:r});return lU(e)?{value:e.value}:{issues:r.common.issues}}catch(KL){(null==(n=null==(e=null==KL?void 0:KL.message)?void 0:e.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this.Yn({data:t,path:[],parent:r}).then(t=>lU(t)?{value:t.value}:{issues:r.common.issues})}async parseAsync(t,e){const n=await this.safeParseAsync(t,e);if(n.success)return n.data;throw n.error}async safeParseAsync(t,e){const n={common:{issues:[],contextualErrorMap:null==e?void 0:e.errorMap,async:!0},path:(null==e?void 0:e.path)||[],schemaErrorMap:this.Ln.errorMap,parent:null,data:t,parsedType:Q$(t)},r=this.Hn({data:t,path:n.path,parent:n}),i=await(uU(r)?r:Promise.resolve(r));return mU(n,i)}refine(t,e){const n=t=>"string"==typeof e||void 0===e?{message:e}:"function"==typeof e?e(t):e;return this.Zn((e,r)=>{const i=t(e),s=()=>r.addIssue({code:X$.custom,...n(e)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(t=>!!t||(s(),!1)):!!i||(s(),!1)})}refinement(t,e){return this.Zn((n,r)=>!!t(n)||(r.addIssue("function"==typeof e?e(n,r):e),!1))}Zn(t){return new mF({schema:this,typeName:kF.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this.Zn(t)}constructor(t){this.spa=this.safeParseAsync,this.Ln=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return pF.create(this,this.Ln)}nullable(){return gF.create(this,this.Ln)}nullish(){return this.nullable().optional()}array(){return JU.create(this)}promise(){return fF.create(this,this.Ln)}or(t){return nF.create([this,t],this.Ln)}and(t){return iF.create(this,t,this.Ln)}transform(t){return new mF({...pU(this.Ln),schema:this,typeName:kF.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e="function"==typeof t?t:()=>t;return new wF({...pU(this.Ln),innerType:this,defaultValue:e,typeName:kF.ZodDefault})}brand(){return new bF({typeName:kF.ZodBranded,type:this,...pU(this.Ln)})}catch(t){const e="function"==typeof t?t:()=>t;return new yF({...pU(this.Ln),innerType:this,catchValue:e,typeName:kF.ZodCatch})}describe(t){return new(0,this.constructor)({...this.Ln,description:t})}pipe(t){return xF.create(this,t)}readonly(){return NF.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const wU=/^c[^\s-]{8,}$/i,yU=/^[0-9a-z]+$/,vU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,bU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xU=/^[a-z0-9_-]{21}$/i,NU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,kU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let AU;const EU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,TU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,IU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,OU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,PU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jU=new RegExp(`^${PU}$`);function DU(t){let e="[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:null==t.precision&&(e=`${e}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t.precision?"+":"?"}`}function zU(t){return new RegExp(`^${DU(t)}$`)}function _U(t){let e=`${PU}T${DU(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function RU(t,e){return!("v4"!==e&&e||!EU.test(t))||!("v6"!==e&&e||!CU.test(t))}function BU(t,e){if(!NU.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!("object"!=typeof i||null===i||"typ"in i&&"JWT"!==(null==i?void 0:i.typ)||!i.alg||e&&i.alg!==e)}catch{return!1}}function $U(t,e){return!("v4"!==e&&e||!SU.test(t))||!("v6"!==e&&e||!TU.test(t))}class UU extends gU{Hn(t){if(this.Ln.coerce&&(t.data=String(t.data)),this.Wn(t)!==G$.string){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.string,received:e.parsedType}),iU}const e=new rU;let n;for(const r of this.Ln.checks)if("min"===r.kind)t.data.length<r.value&&(n=this.Vn(t,n),nU(n,{code:X$.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),e.dirty());else if("max"===r.kind)t.data.length>r.value&&(n=this.Vn(t,n),nU(n,{code:X$.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),e.dirty());else if("length"===r.kind){const i=t.data.length>r.value,s=t.data.length<r.value;(i||s)&&(n=this.Vn(t,n),i?nU(n,{code:X$.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):s&&nU(n,{code:X$.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),e.dirty())}else if("email"===r.kind)MU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"email",code:X$.invalid_string,message:r.message}),e.dirty());else if("emoji"===r.kind)AU||(AU=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),AU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"emoji",code:X$.invalid_string,message:r.message}),e.dirty());else if("uuid"===r.kind)bU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"uuid",code:X$.invalid_string,message:r.message}),e.dirty());else if("nanoid"===r.kind)xU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"nanoid",code:X$.invalid_string,message:r.message}),e.dirty());else if("cuid"===r.kind)wU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"cuid",code:X$.invalid_string,message:r.message}),e.dirty());else if("cuid2"===r.kind)yU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"cuid2",code:X$.invalid_string,message:r.message}),e.dirty());else if("ulid"===r.kind)vU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"ulid",code:X$.invalid_string,message:r.message}),e.dirty());else if("url"===r.kind)try{new URL(t.data)}catch{n=this.Vn(t,n),nU(n,{validation:"url",code:X$.invalid_string,message:r.message}),e.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"regex",code:X$.invalid_string,message:r.message}),e.dirty())):"trim"===r.kind?t.data=t.data.trim():"includes"===r.kind?t.data.includes(r.value,r.position)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),e.dirty()):"toLowerCase"===r.kind?t.data=t.data.toLowerCase():"toUpperCase"===r.kind?t.data=t.data.toUpperCase():"startsWith"===r.kind?t.data.startsWith(r.value)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:{startsWith:r.value},message:r.message}),e.dirty()):"endsWith"===r.kind?t.data.endsWith(r.value)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:{endsWith:r.value},message:r.message}),e.dirty()):"datetime"===r.kind?_U(r).test(t.data)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:"datetime",message:r.message}),e.dirty()):"date"===r.kind?jU.test(t.data)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:"date",message:r.message}),e.dirty()):"time"===r.kind?zU(r).test(t.data)||(n=this.Vn(t,n),nU(n,{code:X$.invalid_string,validation:"time",message:r.message}),e.dirty()):"duration"===r.kind?kU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"duration",code:X$.invalid_string,message:r.message}),e.dirty()):"ip"===r.kind?RU(t.data,r.version)||(n=this.Vn(t,n),nU(n,{validation:"ip",code:X$.invalid_string,message:r.message}),e.dirty()):"jwt"===r.kind?BU(t.data,r.alg)||(n=this.Vn(t,n),nU(n,{validation:"jwt",code:X$.invalid_string,message:r.message}),e.dirty()):"cidr"===r.kind?$U(t.data,r.version)||(n=this.Vn(t,n),nU(n,{validation:"cidr",code:X$.invalid_string,message:r.message}),e.dirty()):"base64"===r.kind?IU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"base64",code:X$.invalid_string,message:r.message}),e.dirty()):"base64url"===r.kind?OU.test(t.data)||(n=this.Vn(t,n),nU(n,{validation:"base64url",code:X$.invalid_string,message:r.message}),e.dirty()):q$.assertNever(r);return{status:e.value,value:t.data}}Gn(t,e,n){return this.refinement(e=>t.test(e),{validation:e,code:X$.invalid_string,...dU.errToObj(n)})}Qn(t){return new UU({...this.Ln,checks:[...this.Ln.checks,t]})}email(t){return this.Qn({kind:"email",...dU.errToObj(t)})}url(t){return this.Qn({kind:"url",...dU.errToObj(t)})}emoji(t){return this.Qn({kind:"emoji",...dU.errToObj(t)})}uuid(t){return this.Qn({kind:"uuid",...dU.errToObj(t)})}nanoid(t){return this.Qn({kind:"nanoid",...dU.errToObj(t)})}cuid(t){return this.Qn({kind:"cuid",...dU.errToObj(t)})}cuid2(t){return this.Qn({kind:"cuid2",...dU.errToObj(t)})}ulid(t){return this.Qn({kind:"ulid",...dU.errToObj(t)})}base64(t){return this.Qn({kind:"base64",...dU.errToObj(t)})}base64url(t){return this.Qn({kind:"base64url",...dU.errToObj(t)})}jwt(t){return this.Qn({kind:"jwt",...dU.errToObj(t)})}ip(t){return this.Qn({kind:"ip",...dU.errToObj(t)})}cidr(t){return this.Qn({kind:"cidr",...dU.errToObj(t)})}datetime(t){return"string"==typeof t?this.Qn({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this.Qn({kind:"datetime",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,offset:(null==t?void 0:t.offset)??!1,local:(null==t?void 0:t.local)??!1,...dU.errToObj(null==t?void 0:t.message)})}date(t){return this.Qn({kind:"date",message:t})}time(t){return"string"==typeof t?this.Qn({kind:"time",precision:null,message:t}):this.Qn({kind:"time",precision:void 0===(null==t?void 0:t.precision)?null:null==t?void 0:t.precision,...dU.errToObj(null==t?void 0:t.message)})}duration(t){return this.Qn({kind:"duration",...dU.errToObj(t)})}regex(t,e){return this.Qn({kind:"regex",regex:t,...dU.errToObj(e)})}includes(t,e){return this.Qn({kind:"includes",value:t,position:null==e?void 0:e.position,...dU.errToObj(null==e?void 0:e.message)})}startsWith(t,e){return this.Qn({kind:"startsWith",value:t,...dU.errToObj(e)})}endsWith(t,e){return this.Qn({kind:"endsWith",value:t,...dU.errToObj(e)})}min(t,e){return this.Qn({kind:"min",value:t,...dU.errToObj(e)})}max(t,e){return this.Qn({kind:"max",value:t,...dU.errToObj(e)})}length(t,e){return this.Qn({kind:"length",value:t,...dU.errToObj(e)})}nonempty(t){return this.min(1,dU.errToObj(t))}trim(){return new UU({...this.Ln,checks:[...this.Ln.checks,{kind:"trim"}]})}toLowerCase(){return new UU({...this.Ln,checks:[...this.Ln.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new UU({...this.Ln,checks:[...this.Ln.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this.Ln.checks.find(t=>"datetime"===t.kind)}get isDate(){return!!this.Ln.checks.find(t=>"date"===t.kind)}get isTime(){return!!this.Ln.checks.find(t=>"time"===t.kind)}get isDuration(){return!!this.Ln.checks.find(t=>"duration"===t.kind)}get isEmail(){return!!this.Ln.checks.find(t=>"email"===t.kind)}get isURL(){return!!this.Ln.checks.find(t=>"url"===t.kind)}get isEmoji(){return!!this.Ln.checks.find(t=>"emoji"===t.kind)}get isUUID(){return!!this.Ln.checks.find(t=>"uuid"===t.kind)}get isNANOID(){return!!this.Ln.checks.find(t=>"nanoid"===t.kind)}get isCUID(){return!!this.Ln.checks.find(t=>"cuid"===t.kind)}get isCUID2(){return!!this.Ln.checks.find(t=>"cuid2"===t.kind)}get isULID(){return!!this.Ln.checks.find(t=>"ulid"===t.kind)}get isIP(){return!!this.Ln.checks.find(t=>"ip"===t.kind)}get isCIDR(){return!!this.Ln.checks.find(t=>"cidr"===t.kind)}get isBase64(){return!!this.Ln.checks.find(t=>"base64"===t.kind)}get isBase64url(){return!!this.Ln.checks.find(t=>"base64url"===t.kind)}get minLength(){let t=null;for(const e of this.Ln.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this.Ln.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}function FU(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(t.toFixed(i).replace(".",""))%Number.parseInt(e.toFixed(i).replace(".",""))/10**i}UU.create=t=>new UU({checks:[],typeName:kF.ZodString,coerce:(null==t?void 0:t.coerce)??!1,...pU(t)});class LU extends gU{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}Hn(t){if(this.Ln.coerce&&(t.data=Number(t.data)),this.Wn(t)!==G$.number){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.number,received:e.parsedType}),iU}let e;const n=new rU;for(const r of this.Ln.checks)"int"===r.kind?q$.isInteger(t.data)||(e=this.Vn(t,e),nU(e,{code:X$.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?t.data<r.value:t.data<=r.value)&&(e=this.Vn(t,e),nU(e,{code:X$.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?t.data>r.value:t.data>=r.value)&&(e=this.Vn(t,e),nU(e,{code:X$.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==FU(t.data,r.value)&&(e=this.Vn(t,e),nU(e,{code:X$.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(t.data)||(e=this.Vn(t,e),nU(e,{code:X$.not_finite,message:r.message}),n.dirty()):q$.assertNever(r);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,dU.toString(e))}gt(t,e){return this.setLimit("min",t,!1,dU.toString(e))}lte(t,e){return this.setLimit("max",t,!0,dU.toString(e))}lt(t,e){return this.setLimit("max",t,!1,dU.toString(e))}setLimit(t,e,n,r){return new LU({...this.Ln,checks:[...this.Ln.checks,{kind:t,value:e,inclusive:n,message:dU.toString(r)}]})}Qn(t){return new LU({...this.Ln,checks:[...this.Ln.checks,t]})}int(t){return this.Qn({kind:"int",message:dU.toString(t)})}positive(t){return this.Qn({kind:"min",value:0,inclusive:!1,message:dU.toString(t)})}negative(t){return this.Qn({kind:"max",value:0,inclusive:!1,message:dU.toString(t)})}nonpositive(t){return this.Qn({kind:"max",value:0,inclusive:!0,message:dU.toString(t)})}nonnegative(t){return this.Qn({kind:"min",value:0,inclusive:!0,message:dU.toString(t)})}multipleOf(t,e){return this.Qn({kind:"multipleOf",value:t,message:dU.toString(e)})}finite(t){return this.Qn({kind:"finite",message:dU.toString(t)})}safe(t){return this.Qn({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dU.toString(t)}).Qn({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dU.toString(t)})}get minValue(){let t=null;for(const e of this.Ln.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this.Ln.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}get isInt(){return!!this.Ln.checks.find(t=>"int"===t.kind||"multipleOf"===t.kind&&q$.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const n of this.Ln.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===e||n.value>e)&&(e=n.value):"max"===n.kind&&(null===t||n.value<t)&&(t=n.value)}return Number.isFinite(e)&&Number.isFinite(t)}}LU.create=t=>new LU({checks:[],typeName:kF.ZodNumber,coerce:(null==t?void 0:t.coerce)||!1,...pU(t)});class WU extends gU{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}Hn(t){if(this.Ln.coerce)try{t.data=BigInt(t.data)}catch{return this.Xn(t)}if(this.Wn(t)!==G$.bigint)return this.Xn(t);let e;const n=new rU;for(const r of this.Ln.checks)"min"===r.kind?(r.inclusive?t.data<r.value:t.data<=r.value)&&(e=this.Vn(t,e),nU(e,{code:X$.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?t.data>r.value:t.data>=r.value)&&(e=this.Vn(t,e),nU(e,{code:X$.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?t.data%r.value!==BigInt(0)&&(e=this.Vn(t,e),nU(e,{code:X$.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):q$.assertNever(r);return{status:n.value,value:t.data}}Xn(t){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.bigint,received:e.parsedType}),iU}gte(t,e){return this.setLimit("min",t,!0,dU.toString(e))}gt(t,e){return this.setLimit("min",t,!1,dU.toString(e))}lte(t,e){return this.setLimit("max",t,!0,dU.toString(e))}lt(t,e){return this.setLimit("max",t,!1,dU.toString(e))}setLimit(t,e,n,r){return new WU({...this.Ln,checks:[...this.Ln.checks,{kind:t,value:e,inclusive:n,message:dU.toString(r)}]})}Qn(t){return new WU({...this.Ln,checks:[...this.Ln.checks,t]})}positive(t){return this.Qn({kind:"min",value:BigInt(0),inclusive:!1,message:dU.toString(t)})}negative(t){return this.Qn({kind:"max",value:BigInt(0),inclusive:!1,message:dU.toString(t)})}nonpositive(t){return this.Qn({kind:"max",value:BigInt(0),inclusive:!0,message:dU.toString(t)})}nonnegative(t){return this.Qn({kind:"min",value:BigInt(0),inclusive:!0,message:dU.toString(t)})}multipleOf(t,e){return this.Qn({kind:"multipleOf",value:t,message:dU.toString(e)})}get minValue(){let t=null;for(const e of this.Ln.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this.Ln.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return t}}WU.create=t=>new WU({checks:[],typeName:kF.ZodBigInt,coerce:(null==t?void 0:t.coerce)??!1,...pU(t)});class VU extends gU{Hn(t){if(this.Ln.coerce&&(t.data=Boolean(t.data)),this.Wn(t)!==G$.boolean){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.boolean,received:e.parsedType}),iU}return oU(t.data)}}VU.create=t=>new VU({typeName:kF.ZodBoolean,coerce:(null==t?void 0:t.coerce)||!1,...pU(t)});class qU extends gU{Hn(t){if(this.Ln.coerce&&(t.data=new Date(t.data)),this.Wn(t)!==G$.date){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.date,received:e.parsedType}),iU}if(Number.isNaN(t.data.getTime()))return nU(this.Vn(t),{code:X$.invalid_date}),iU;const e=new rU;let n;for(const r of this.Ln.checks)"min"===r.kind?t.data.getTime()<r.value&&(n=this.Vn(t,n),nU(n,{code:X$.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),e.dirty()):"max"===r.kind?t.data.getTime()>r.value&&(n=this.Vn(t,n),nU(n,{code:X$.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),e.dirty()):q$.assertNever(r);return{status:e.value,value:new Date(t.data.getTime())}}Qn(t){return new qU({...this.Ln,checks:[...this.Ln.checks,t]})}min(t,e){return this.Qn({kind:"min",value:t.getTime(),message:dU.toString(e)})}max(t,e){return this.Qn({kind:"max",value:t.getTime(),message:dU.toString(e)})}get minDate(){let t=null;for(const e of this.Ln.checks)"min"===e.kind&&(null===t||e.value>t)&&(t=e.value);return null!=t?new Date(t):null}get maxDate(){let t=null;for(const e of this.Ln.checks)"max"===e.kind&&(null===t||e.value<t)&&(t=e.value);return null!=t?new Date(t):null}}qU.create=t=>new qU({checks:[],coerce:(null==t?void 0:t.coerce)||!1,typeName:kF.ZodDate,...pU(t)});class KU extends gU{Hn(t){if(this.Wn(t)!==G$.symbol){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.symbol,received:e.parsedType}),iU}return oU(t.data)}}KU.create=t=>new KU({typeName:kF.ZodSymbol,...pU(t)});class HU extends gU{Hn(t){if(this.Wn(t)!==G$.undefined){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.undefined,received:e.parsedType}),iU}return oU(t.data)}}HU.create=t=>new HU({typeName:kF.ZodUndefined,...pU(t)});class YU extends gU{Hn(t){if(this.Wn(t)!==G$.null){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.null,received:e.parsedType}),iU}return oU(t.data)}}YU.create=t=>new YU({typeName:kF.ZodNull,...pU(t)});class ZU extends gU{constructor(){super(...arguments),this.Jn=!0}Hn(t){return oU(t.data)}}ZU.create=t=>new ZU({typeName:kF.ZodAny,...pU(t)});class GU extends gU{constructor(){super(...arguments),this.tr=!0}Hn(t){return oU(t.data)}}GU.create=t=>new GU({typeName:kF.ZodUnknown,...pU(t)});class QU extends gU{Hn(t){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.never,received:e.parsedType}),iU}}QU.create=t=>new QU({typeName:kF.ZodNever,...pU(t)});class XU extends gU{Hn(t){if(this.Wn(t)!==G$.undefined){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.void,received:e.parsedType}),iU}return oU(t.data)}}XU.create=t=>new XU({typeName:kF.ZodVoid,...pU(t)});class JU extends gU{Hn(t){const{ctx:e,status:n}=this.qn(t),r=this.Ln;if(e.parsedType!==G$.array)return nU(e,{code:X$.invalid_type,expected:G$.array,received:e.parsedType}),iU;if(null!==r.exactLength){const t=e.data.length>r.exactLength.value,i=e.data.length<r.exactLength.value;(t||i)&&(nU(e,{code:t?X$.too_big:X$.too_small,minimum:i?r.exactLength.value:void 0,maximum:t?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&e.data.length<r.minLength.value&&(nU(e,{code:X$.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&e.data.length>r.maxLength.value&&(nU(e,{code:X$.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),e.common.async)return Promise.all([...e.data].map((t,n)=>r.type.Yn(new fU(e,t,e.path,n)))).then(t=>rU.mergeArray(n,t));const i=[...e.data].map((t,n)=>r.type.Kn(new fU(e,t,e.path,n)));return rU.mergeArray(n,i)}get element(){return this.Ln.type}min(t,e){return new JU({...this.Ln,minLength:{value:t,message:dU.toString(e)}})}max(t,e){return new JU({...this.Ln,maxLength:{value:t,message:dU.toString(e)}})}length(t,e){return new JU({...this.Ln,exactLength:{value:t,message:dU.toString(e)}})}nonempty(t){return this.min(1,t)}}function tF(t){if(t instanceof eF){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=pF.create(tF(r))}return new eF({...t.Ln,shape:()=>e})}return t instanceof JU?new JU({...t.Ln,type:tF(t.element)}):t instanceof pF?pF.create(tF(t.unwrap())):t instanceof gF?gF.create(tF(t.unwrap())):t instanceof sF?sF.create(t.items.map(t=>tF(t))):t}JU.create=(t,e)=>new JU({type:t,minLength:null,maxLength:null,exactLength:null,typeName:kF.ZodArray,...pU(e)});class eF extends gU{constructor(){super(...arguments),this.er=null,this.nonstrict=this.passthrough,this.augment=this.extend}nr(){if(null!==this.er)return this.er;const t=this.Ln.shape(),e=q$.objectKeys(t);return this.er={shape:t,keys:e},this.er}Hn(t){if(this.Wn(t)!==G$.object){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.object,received:e.parsedType}),iU}const{status:e,ctx:n}=this.qn(t),{shape:r,keys:i}=this.nr(),s=[];if(!(this.Ln.catchall instanceof QU&&"strip"===this.Ln.unknownKeys))for(const a in n.data)i.includes(a)||s.push(a);const o=[];for(const a of i){const t=r[a],e=n.data[a];o.push({key:{status:"valid",value:a},value:t.Hn(new fU(n,e,n.path,a)),alwaysSet:a in n.data})}if(this.Ln.catchall instanceof QU){const t=this.Ln.unknownKeys;if("passthrough"===t)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===t)s.length>0&&(nU(n,{code:X$.unrecognized_keys,keys:s}),e.dirty());else if("strip"!==t)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const t=this.Ln.catchall;for(const e of s){const r=n.data[e];o.push({key:{status:"valid",value:e},value:t.Hn(new fU(n,r,n.path,e)),alwaysSet:e in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const t=[];for(const e of o){const n=await e.key,r=await e.value;t.push({key:n,value:r,alwaysSet:e.alwaysSet})}return t}).then(t=>rU.mergeObjectSync(e,t)):rU.mergeObjectSync(e,o)}get shape(){return this.Ln.shape()}strict(t){return dU.errToObj,new eF({...this.Ln,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,i;const s=(null==(i=(r=this.Ln).errorMap)?void 0:i.call(r,e,n).message)??n.defaultError;return"unrecognized_keys"===e.code?{message:dU.errToObj(t).message??s}:{message:s}}}:{}})}strip(){return new eF({...this.Ln,unknownKeys:"strip"})}passthrough(){return new eF({...this.Ln,unknownKeys:"passthrough"})}extend(t){return new eF({...this.Ln,shape:()=>({...this.Ln.shape(),...t})})}merge(t){return new eF({unknownKeys:t.Ln.unknownKeys,catchall:t.Ln.catchall,shape:()=>({...this.Ln.shape(),...t.Ln.shape()}),typeName:kF.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new eF({...this.Ln,catchall:t})}pick(t){const e={};for(const n of q$.objectKeys(t))t[n]&&this.shape[n]&&(e[n]=this.shape[n]);return new eF({...this.Ln,shape:()=>e})}omit(t){const e={};for(const n of q$.objectKeys(this.shape))t[n]||(e[n]=this.shape[n]);return new eF({...this.Ln,shape:()=>e})}deepPartial(){return tF(this)}partial(t){const e={};for(const n of q$.objectKeys(this.shape)){const r=this.shape[n];t&&!t[n]?e[n]=r:e[n]=r.optional()}return new eF({...this.Ln,shape:()=>e})}required(t){const e={};for(const n of q$.objectKeys(this.shape))if(t&&!t[n])e[n]=this.shape[n];else{let t=this.shape[n];for(;t instanceof pF;)t=t.Ln.innerType;e[n]=t}return new eF({...this.Ln,shape:()=>e})}keyof(){return uF(q$.objectKeys(this.shape))}}eF.create=(t,e)=>new eF({shape:()=>t,unknownKeys:"strip",catchall:QU.create(),typeName:kF.ZodObject,...pU(e)}),eF.strictCreate=(t,e)=>new eF({shape:()=>t,unknownKeys:"strict",catchall:QU.create(),typeName:kF.ZodObject,...pU(e)}),eF.lazycreate=(t,e)=>new eF({shape:t,unknownKeys:"strip",catchall:QU.create(),typeName:kF.ZodObject,...pU(e)});class nF extends gU{Hn(t){const{ctx:e}=this.qn(t),n=this.Ln.options;if(e.common.async)return Promise.all(n.map(async t=>{const n={...e,common:{...e.common,issues:[]},parent:null};return{result:await t.Yn({data:e.data,path:e.path,parent:n}),ctx:n}})).then(function(t){for(const e of t)if("valid"===e.result.status)return e.result;for(const r of t)if("dirty"===r.result.status)return e.common.issues.push(...r.ctx.common.issues),r.result;const n=t.map(t=>new J$(t.ctx.common.issues));return nU(e,{code:X$.invalid_union,unionErrors:n}),iU});{let t;const r=[];for(const s of n){const n={...e,common:{...e.common,issues:[]},parent:null},i=s.Kn({data:e.data,path:e.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||t||(t={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(t)return e.common.issues.push(...t.ctx.common.issues),t.result;const i=r.map(t=>new J$(t));return nU(e,{code:X$.invalid_union,unionErrors:i}),iU}}get options(){return this.Ln.options}}function rF(t,e){const n=Q$(t),r=Q$(e);if(t===e)return{valid:!0,data:t};if(n===G$.object&&r===G$.object){const n=q$.objectKeys(e),r=q$.objectKeys(t).filter(t=>-1!==n.indexOf(t)),i={...t,...e};for(const s of r){const n=rF(t[s],e[s]);if(!n.valid)return{valid:!1};i[s]=n.data}return{valid:!0,data:i}}if(n===G$.array&&r===G$.array){if(t.length!==e.length)return{valid:!1};const n=[];for(let r=0;r<t.length;r++){const i=rF(t[r],e[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===G$.date&&r===G$.date&&+t===+e?{valid:!0,data:t}:{valid:!1}}nF.create=(t,e)=>new nF({options:t,typeName:kF.ZodUnion,...pU(e)});class iF extends gU{Hn(t){const{status:e,ctx:n}=this.qn(t),r=(t,r)=>{if(aU(t)||aU(r))return iU;const i=rF(t.value,r.value);return i.valid?((cU(t)||cU(r))&&e.dirty(),{status:e.value,value:i.data}):(nU(n,{code:X$.invalid_intersection_types}),iU)};return n.common.async?Promise.all([this.Ln.left.Yn({data:n.data,path:n.path,parent:n}),this.Ln.right.Yn({data:n.data,path:n.path,parent:n})]).then(([t,e])=>r(t,e)):r(this.Ln.left.Kn({data:n.data,path:n.path,parent:n}),this.Ln.right.Kn({data:n.data,path:n.path,parent:n}))}}iF.create=(t,e,n)=>new iF({left:t,right:e,typeName:kF.ZodIntersection,...pU(n)});class sF extends gU{Hn(t){const{status:e,ctx:n}=this.qn(t);if(n.parsedType!==G$.array)return nU(n,{code:X$.invalid_type,expected:G$.array,received:n.parsedType}),iU;if(n.data.length<this.Ln.items.length)return nU(n,{code:X$.too_small,minimum:this.Ln.items.length,inclusive:!0,exact:!1,type:"array"}),iU;!this.Ln.rest&&n.data.length>this.Ln.items.length&&(nU(n,{code:X$.too_big,maximum:this.Ln.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...n.data].map((t,e)=>{const r=this.Ln.items[e]||this.Ln.rest;return r?r.Hn(new fU(n,t,n.path,e)):null}).filter(t=>!!t);return n.common.async?Promise.all(r).then(t=>rU.mergeArray(e,t)):rU.mergeArray(e,r)}get items(){return this.Ln.items}rest(t){return new sF({...this.Ln,rest:t})}}sF.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sF({items:t,typeName:kF.ZodTuple,rest:null,...pU(e)})};class oF extends gU{get keySchema(){return this.Ln.keyType}get valueSchema(){return this.Ln.valueType}Hn(t){const{status:e,ctx:n}=this.qn(t);if(n.parsedType!==G$.map)return nU(n,{code:X$.invalid_type,expected:G$.map,received:n.parsedType}),iU;const r=this.Ln.keyType,i=this.Ln.valueType,s=[...n.data.entries()].map(([t,e],s)=>({key:r.Hn(new fU(n,t,n.path,[s,"key"])),value:i.Hn(new fU(n,e,n.path,[s,"value"]))}));if(n.common.async){const t=new Map;return Promise.resolve().then(async()=>{for(const n of s){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return iU;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}})}{const t=new Map;for(const n of s){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return iU;"dirty"!==r.status&&"dirty"!==i.status||e.dirty(),t.set(r.value,i.value)}return{status:e.value,value:t}}}}oF.create=(t,e,n)=>new oF({valueType:e,keyType:t,typeName:kF.ZodMap,...pU(n)});class aF extends gU{Hn(t){const{status:e,ctx:n}=this.qn(t);if(n.parsedType!==G$.set)return nU(n,{code:X$.invalid_type,expected:G$.set,received:n.parsedType}),iU;const r=this.Ln;null!==r.minSize&&n.data.size<r.minSize.value&&(nU(n,{code:X$.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),e.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(nU(n,{code:X$.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),e.dirty());const i=this.Ln.valueType;function s(t){const n=new Set;for(const r of t){if("aborted"===r.status)return iU;"dirty"===r.status&&e.dirty(),n.add(r.value)}return{status:e.value,value:n}}const o=[...n.data.values()].map((t,e)=>i.Hn(new fU(n,t,n.path,e)));return n.common.async?Promise.all(o).then(t=>s(t)):s(o)}min(t,e){return new aF({...this.Ln,minSize:{value:t,message:dU.toString(e)}})}max(t,e){return new aF({...this.Ln,maxSize:{value:t,message:dU.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}aF.create=(t,e)=>new aF({valueType:t,minSize:null,maxSize:null,typeName:kF.ZodSet,...pU(e)});class cF extends gU{get schema(){return this.Ln.getter()}Hn(t){const{ctx:e}=this.qn(t);return this.Ln.getter().Hn({data:e.data,path:e.path,parent:e})}}cF.create=(t,e)=>new cF({getter:t,typeName:kF.ZodLazy,...pU(e)});class lF extends gU{Hn(t){if(t.data!==this.Ln.value){const e=this.Vn(t);return nU(e,{received:e.data,code:X$.invalid_literal,expected:this.Ln.value}),iU}return{status:"valid",value:t.data}}get value(){return this.Ln.value}}function uF(t,e){return new dF({values:t,typeName:kF.ZodEnum,...pU(e)})}lF.create=(t,e)=>new lF({value:t,typeName:kF.ZodLiteral,...pU(e)});class dF extends gU{Hn(t){if("string"!=typeof t.data){const e=this.Vn(t),n=this.Ln.values;return nU(e,{expected:q$.joinValues(n),received:e.parsedType,code:X$.invalid_type}),iU}if(this.rr||(this.rr=new Set(this.Ln.values)),!this.rr.has(t.data)){const e=this.Vn(t),n=this.Ln.values;return nU(e,{received:e.data,code:X$.invalid_enum_value,options:n}),iU}return oU(t.data)}get options(){return this.Ln.values}get enum(){const t={};for(const e of this.Ln.values)t[e]=e;return t}get Values(){const t={};for(const e of this.Ln.values)t[e]=e;return t}get Enum(){const t={};for(const e of this.Ln.values)t[e]=e;return t}extract(t,e=this.Ln){return dF.create(t,{...this.Ln,...e})}exclude(t,e=this.Ln){return dF.create(this.options.filter(e=>!t.includes(e)),{...this.Ln,...e})}}dF.create=uF;class hF extends gU{Hn(t){const e=q$.getValidEnumValues(this.Ln.values),n=this.Vn(t);if(n.parsedType!==G$.string&&n.parsedType!==G$.number){const t=q$.objectValues(e);return nU(n,{expected:q$.joinValues(t),received:n.parsedType,code:X$.invalid_type}),iU}if(this.rr||(this.rr=new Set(q$.getValidEnumValues(this.Ln.values))),!this.rr.has(t.data)){const t=q$.objectValues(e);return nU(n,{received:n.data,code:X$.invalid_enum_value,options:t}),iU}return oU(t.data)}get enum(){return this.Ln.values}}hF.create=(t,e)=>new hF({values:t,typeName:kF.ZodNativeEnum,...pU(e)});class fF extends gU{unwrap(){return this.Ln.type}Hn(t){const{ctx:e}=this.qn(t);if(e.parsedType!==G$.promise&&!1===e.common.async)return nU(e,{code:X$.invalid_type,expected:G$.promise,received:e.parsedType}),iU;const n=e.parsedType===G$.promise?e.data:Promise.resolve(e.data);return oU(n.then(t=>this.Ln.type.parseAsync(t,{path:e.path,errorMap:e.common.contextualErrorMap})))}}fF.create=(t,e)=>new fF({type:t,typeName:kF.ZodPromise,...pU(e)});class mF extends gU{innerType(){return this.Ln.schema}sourceType(){return this.Ln.schema.Ln.typeName===kF.ZodEffects?this.Ln.schema.sourceType():this.Ln.schema}Hn(t){const{status:e,ctx:n}=this.qn(t),r=this.Ln.effect||null,i={addIssue:t=>{nU(n,t),t.fatal?e.abort():e.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const t=r.transform(n.data,i);if(n.common.async)return Promise.resolve(t).then(async t=>{if("aborted"===e.value)return iU;const r=await this.Ln.schema.Yn({data:t,path:n.path,parent:n});return"aborted"===r.status?iU:"dirty"===r.status||"dirty"===e.value?sU(r.value):r});{if("aborted"===e.value)return iU;const r=this.Ln.schema.Kn({data:t,path:n.path,parent:n});return"aborted"===r.status?iU:"dirty"===r.status||"dirty"===e.value?sU(r.value):r}}if("refinement"===r.type){const t=t=>{const e=r.refinement(t,i);if(n.common.async)return Promise.resolve(e);if(e instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return t};if(!1===n.common.async){const r=this.Ln.schema.Kn({data:n.data,path:n.path,parent:n});return"aborted"===r.status?iU:("dirty"===r.status&&e.dirty(),t(r.value),{status:e.value,value:r.value})}return this.Ln.schema.Yn({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?iU:("dirty"===n.status&&e.dirty(),t(n.value).then(()=>({status:e.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const t=this.Ln.schema.Kn({data:n.data,path:n.path,parent:n});if(!lU(t))return iU;const s=r.transform(t.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:s}}return this.Ln.schema.Yn({data:n.data,path:n.path,parent:n}).then(t=>lU(t)?Promise.resolve(r.transform(t.value,i)).then(t=>({status:e.value,value:t})):iU)}q$.assertNever(r)}}mF.create=(t,e,n)=>new mF({schema:t,typeName:kF.ZodEffects,effect:e,...pU(n)}),mF.createWithPreprocess=(t,e,n)=>new mF({schema:e,effect:{type:"preprocess",transform:t},typeName:kF.ZodEffects,...pU(n)});class pF extends gU{Hn(t){return this.Wn(t)===G$.undefined?oU(void 0):this.Ln.innerType.Hn(t)}unwrap(){return this.Ln.innerType}}pF.create=(t,e)=>new pF({innerType:t,typeName:kF.ZodOptional,...pU(e)});class gF extends gU{Hn(t){return this.Wn(t)===G$.null?oU(null):this.Ln.innerType.Hn(t)}unwrap(){return this.Ln.innerType}}gF.create=(t,e)=>new gF({innerType:t,typeName:kF.ZodNullable,...pU(e)});class wF extends gU{Hn(t){const{ctx:e}=this.qn(t);let n=e.data;return e.parsedType===G$.undefined&&(n=this.Ln.defaultValue()),this.Ln.innerType.Hn({data:n,path:e.path,parent:e})}removeDefault(){return this.Ln.innerType}}wF.create=(t,e)=>new wF({innerType:t,typeName:kF.ZodDefault,defaultValue:"function"==typeof e.default?e.default:()=>e.default,...pU(e)});class yF extends gU{Hn(t){const{ctx:e}=this.qn(t),n={...e,common:{...e.common,issues:[]}},r=this.Ln.innerType.Hn({data:n.data,path:n.path,parent:{...n}});return uU(r)?r.then(t=>({status:"valid",value:"valid"===t.status?t.value:this.Ln.catchValue({get error(){return new J$(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this.Ln.catchValue({get error(){return new J$(n.common.issues)},input:n.data})}}removeCatch(){return this.Ln.innerType}}yF.create=(t,e)=>new yF({innerType:t,typeName:kF.ZodCatch,catchValue:"function"==typeof e.catch?e.catch:()=>e.catch,...pU(e)});class vF extends gU{Hn(t){if(this.Wn(t)!==G$.nan){const e=this.Vn(t);return nU(e,{code:X$.invalid_type,expected:G$.nan,received:e.parsedType}),iU}return{status:"valid",value:t.data}}}vF.create=t=>new vF({typeName:kF.ZodNaN,...pU(t)});class bF extends gU{Hn(t){const{ctx:e}=this.qn(t),n=e.data;return this.Ln.type.Hn({data:n,path:e.path,parent:e})}unwrap(){return this.Ln.type}}class xF extends gU{Hn(t){const{status:e,ctx:n}=this.qn(t);if(n.common.async)return(async()=>{const t=await this.Ln.in.Yn({data:n.data,path:n.path,parent:n});return"aborted"===t.status?iU:"dirty"===t.status?(e.dirty(),sU(t.value)):this.Ln.out.Yn({data:t.value,path:n.path,parent:n})})();{const t=this.Ln.in.Kn({data:n.data,path:n.path,parent:n});return"aborted"===t.status?iU:"dirty"===t.status?(e.dirty(),{status:"dirty",value:t.value}):this.Ln.out.Kn({data:t.value,path:n.path,parent:n})}}static create(t,e){return new xF({in:t,out:e,typeName:kF.ZodPipeline})}}class NF extends gU{Hn(t){const e=this.Ln.innerType.Hn(t),n=t=>(lU(t)&&(t.value=Object.freeze(t.value)),t);return uU(e)?e.then(t=>n(t)):n(e)}unwrap(){return this.Ln.innerType}}var kF,MF;NF.create=(t,e)=>new NF({innerType:t,typeName:kF.ZodReadonly,...pU(e)}),eF.lazycreate,(MF=kF||(kF={})).ZodString="ZodString",MF.ZodNumber="ZodNumber",MF.ZodNaN="ZodNaN",MF.ZodBigInt="ZodBigInt",MF.ZodBoolean="ZodBoolean",MF.ZodDate="ZodDate",MF.ZodSymbol="ZodSymbol",MF.ZodUndefined="ZodUndefined",MF.ZodNull="ZodNull",MF.ZodAny="ZodAny",MF.ZodUnknown="ZodUnknown",MF.ZodNever="ZodNever",MF.ZodVoid="ZodVoid",MF.ZodArray="ZodArray",MF.ZodObject="ZodObject",MF.ZodUnion="ZodUnion",MF.ZodDiscriminatedUnion="ZodDiscriminatedUnion",MF.ZodIntersection="ZodIntersection",MF.ZodTuple="ZodTuple",MF.ZodRecord="ZodRecord",MF.ZodMap="ZodMap",MF.ZodSet="ZodSet",MF.ZodFunction="ZodFunction",MF.ZodLazy="ZodLazy",MF.ZodLiteral="ZodLiteral",MF.ZodEnum="ZodEnum",MF.ZodEffects="ZodEffects",MF.ZodNativeEnum="ZodNativeEnum",MF.ZodOptional="ZodOptional",MF.ZodNullable="ZodNullable",MF.ZodDefault="ZodDefault",MF.ZodCatch="ZodCatch",MF.ZodPromise="ZodPromise",MF.ZodBranded="ZodBranded",MF.ZodPipeline="ZodPipeline",MF.ZodReadonly="ZodReadonly";const AF=UU.create;QU.create,JU.create;const EF=eF.create;eF.strictCreate,nF.create,iF.create,sF.create;const SF=lF.create;dF.create,fF.create,pF.create,gF.create;const CF=t=>{const{children:e,...n}=t;return Ot.createElement(ZB.Provider,{value:n},e)},TF=Ct.createContext({}),IF=({...t})=>Gt.jsx(TF.Provider,{value:{name:t.name},children:Gt.jsx(t$,{...t})}),OF=()=>{const t=Ct.useContext(TF),e=Ct.useContext(PF),{getFieldState:n,formState:r}=GB(),i=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:s}=e;return{id:s,name:t.name,formItemId:`${s}-form-item`,formDescriptionId:`${s}-form-item-description`,formMessageId:`${s}-form-item-message`,...i}},PF=Ct.createContext({}),jF=Ct.forwardRef(({className:t,...e},n)=>{const r=Ct.useId();return Gt.jsx(PF.Provider,{value:{id:r},children:Gt.jsx("div",{ref:n,className:na("space-y-2",t),...e})})});jF.displayName="FormItem";const DF=Ct.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:i}=OF();return Gt.jsx(JI,{ref:n,className:na(r&&"text-destructive",t),htmlFor:i,...e})});DF.displayName="FormLabel";const zF=Ct.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:s}=OF();return Gt.jsx(dr,{ref:e,id:r,"aria-describedby":n?`${i} ${s}`:`${i}`,"aria-invalid":!!n,...t})});zF.displayName="FormControl",Ct.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=OF();return Gt.jsx("p",{ref:n,id:r,className:na("text-sm text-muted-foreground",t),...e})}).displayName="FormDescription";const _F=Ct.forwardRef(({className:t,children:e,...n},r)=>{const{error:i,formMessageId:s}=OF(),o=i?String((null==i?void 0:i.message)??""):e;return o?Gt.jsx("p",{ref:r,id:s,className:na("text-sm font-medium text-destructive",t),...n,children:o}):null});_F.displayName="FormMessage";const RF=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx("textarea",{className:na("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));RF.displayName="Textarea";const BF=EF({name:AF().min(1,"Organization name is required").max(255,"Name must be less than 255 characters"),description:AF().optional(),website:AF().url("Must be a valid URL").optional().or(SF("")),logoUrl:AF().url("Must be a valid URL").optional().or(SF(""))});function $F({trigger:t}){const[e,n]=Ct.useState(!1),{toast:r}=rr(),i=U$({resolver:Z$(BF),defaultValues:{name:"",description:"",website:"",logoUrl:""}}),s=qn({mutationFn:async t=>(await Hn("POST","/api/organizations",t)).json(),onSuccess:()=>{r({title:"Success!",description:"Organization created successfully"}),Yn.invalidateQueries({queryKey:["/api/organizations"]}),n(!1),i.reset()},onError:t=>{r({title:"Error",description:t.message||"Failed to create organization",variant:"destructive"})}}),o=Gt.jsxs(kk,{className:"bg-professional-blue hover:bg-professional-blue/90 text-white",children:[Gt.jsx(Es,{className:"h-4 w-4 mr-2"}),"Add Organization"]});return Gt.jsxs(FP,{open:e,onOpenChange:n,children:[Gt.jsx(LP,{asChild:!0,children:t||o}),Gt.jsxs(qP,{className:"sm:max-w-md",children:[Gt.jsxs(KP,{children:[Gt.jsx(YP,{children:"Add New Organization"}),Gt.jsx(ZP,{children:"Create a new organization that can be reviewed by the community."})]}),Gt.jsx(CF,{...i,children:Gt.jsxs("form",{onSubmit:i.handleSubmit(t=>{const e={...t,website:t.website||void 0,logoUrl:t.logoUrl||void 0,description:t.description||void 0};s.mutate(e)}),className:"space-y-4",children:[Gt.jsx(IF,{control:i.control,name:"name",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(DF,{children:"Organization Name *"}),Gt.jsx(zF,{children:Gt.jsx(ZI,{placeholder:"e.g. Google, Microsoft",...t})}),Gt.jsx(_F,{})]})}),Gt.jsx(IF,{control:i.control,name:"description",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(DF,{children:"Description"}),Gt.jsx(zF,{children:Gt.jsx(RF,{placeholder:"Brief description of the organization...",rows:3,...t})}),Gt.jsx(_F,{})]})}),Gt.jsx(IF,{control:i.control,name:"website",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(DF,{children:"Website"}),Gt.jsx(zF,{children:Gt.jsx(ZI,{placeholder:"https://example.com",...t})}),Gt.jsx(_F,{})]})}),Gt.jsx(IF,{control:i.control,name:"logoUrl",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(DF,{children:"Logo URL"}),Gt.jsx(zF,{children:Gt.jsx(ZI,{placeholder:"https://example.com/logo.png",...t})}),Gt.jsx(_F,{})]})}),Gt.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[Gt.jsx(kk,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),Gt.jsx(kk,{type:"submit",disabled:s.isPending,className:"bg-professional-blue hover:bg-professional-blue/90",children:s.isPending?"Creating...":"Create Organization"})]})]})})]})]})}function UF(){const{toast:t}=rr(),e=Rn(),{isAuthenticated:n}=pk(),[r,i]=Ct.useState(""),[s,o]=Ct.useState("verified");Ct.useEffect(()=>{document.title="Companies & Organizations"},[]);const{data:a=[],isLoading:c}=Vn({queryKey:["/api/organizations"],queryFn:async()=>{const t=await fetch("/api/organizations",{credentials:"include"});if(!t.ok)throw new Error(`${t.status}: ${t.statusText}`);return t.json()},retry:(t,e)=>cD(e)?(window.location.href="/auth",!1):t<3}),l=qn({mutationFn:async({organizationId:t,trustVote:e})=>Hn("POST",`/api/organizations/${t}/trust-vote`,{trustVote:e}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/organizations"]}),t({title:"Vote recorded",description:"Your trust vote has been recorded."})},onError:()=>{t({title:"Error",description:"Failed to record your vote.",variant:"destructive"})}}),u=Ct.useCallback(e=>{t({title:"Authentication Required",description:`Please connect your wallet to ${e}.`,variant:"default",action:Gt.jsx(kk,{variant:"outline",size:"sm",onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},children:"Connect Wallet"})})},[t]),d=Ct.useCallback((t,e)=>n?(null==e||e(),!0):(u(t),!1),[n,u]),h=Ct.useCallback((t,e,n)=>{n.preventDefault(),n.stopPropagation(),d("vote on organizations")&&l.mutate({organizationId:t,trustVote:e})},[d,l]),f=Ct.useMemo(()=>{let t=a;switch(r.trim()&&(t=t.filter(t=>{var e;return t.name.toLowerCase().includes(r.toLowerCase())||(null==(e=t.description)?void 0:e.toLowerCase().includes(r.toLowerCase()))})),s){case"verified":return t.filter(t=>t.isFeatured);case"recent":return t.sort((t,e)=>new Date(e.createdAt||0).getTime()-new Date(t.createdAt||0).getTime());case"popular":return t.sort((t,e)=>(e.reviewCount||0)-(t.reviewCount||0));default:return t}},[a,r,s]);return c?Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[Gt.jsx("div",{className:"h-10 w-32 bg-gray-800 rounded animate-pulse"}),Gt.jsx("div",{className:"h-10 w-32 bg-gray-800 rounded animate-pulse"}),Gt.jsx("div",{className:"h-10 w-32 bg-gray-800 rounded animate-pulse"})]}),Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsx("div",{className:"h-32 bg-gray-800 rounded animate-pulse"},t))})]})}):Gt.jsx("div",{className:"w-full min-h-screen px-4 pt-6 pb-6",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsxs("div",{className:"flex items-center text-[#525252] gap-3 mb-6",children:[Gt.jsx("button",{onClick:()=>o("verified"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("verified"===s?"bg-[#E8EAE9]":"bg-[#1B1C20] hover:bg-[#E8EAE9]"),children:"VERIFIED"}),Gt.jsx("button",{onClick:()=>o("recent"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("recent"===s?"bg-[#E8EAE9]":"bg-[#1B1C20] hover:bg-[#E8EAE9]"),children:"RECENTLY ADDED"}),Gt.jsx("button",{onClick:()=>o("popular"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("popular"===s?"bg-[#E8EAE9] ":"bg-[#1B1C20] hover:bg-[#E8EAE9]"),children:"POPULAR"})]}),Gt.jsx(eB,{onSearch:t=>{i(t)},placeholder:"search for companies..."}),Gt.jsx("div",{className:"space-y-0",children:f.length>0?f.map(t=>{const e=(t=>{var e;return void 0!==(null==(e=t.trustData)?void 0:e.trustPercentage)?{trust:t.trustData.trustPercentage,distrust:100-t.trustData.trustPercentage}:{trust:80,distrust:20}})(t),n=(t=>t.reviewCount?`${(24*t.reviewCount).toLocaleString()}`:"30K")(t),r=(t=>t.reviewCount?`${(32*t.reviewCount).toLocaleString()}`:"40K")(t),i=(t=>t.averageRating?Math.round(5*t.averageRating):25)(t),s=t.reviewCount?3*t.reviewCount:25;return Gt.jsxs("div",{onClick:e=>{d("view organization details")&&(window.location.href=`/organizations/${encodeURIComponent(t.name)}`)},className:"bg-[#1a1a1a] hover:bg-[#222222] transition-all duration-200 p-8 mb-4 cursor-pointer border border-gray-800 rounded-lg",children:[Gt.jsxs("div",{className:"flex items-start justify-between mb-6",children:[Gt.jsxs("div",{className:"flex items-start gap-6 flex-1",children:[Gt.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-green-500 rounded-lg flex items-center justify-center flex-shrink-0",children:Gt.jsx(Wi,{className:"w-12 h-12 text-white"})}),Gt.jsxs("div",{className:"flex-1 min-w-0",children:[Gt.jsx("h3",{className:"text-white text-2xl font-normal mb-3",children:t.name}),Gt.jsx("p",{className:"text-gray-400 text-base leading-relaxed line-clamp-2 max-w-2xl",children:t.description||"Welcome to the Web3 Privacy Collective, a community focused on privacy in the decentralized web. We unite enthusiasts and developers who believe privacy is a funda..."})]})]}),Gt.jsxs("div",{className:"flex items-start gap-6 flex-shrink-0",children:[Gt.jsxs("div",{className:"flex items-center -space-x-3",children:[[1,2,3].map(t=>Gt.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-gray-600 to-gray-700 border-2 border-[#1a1a1a] flex items-center justify-center overflow-hidden",children:Gt.jsx(Vs,{className:"w-6 h-6 text-gray-300"})},t)),Gt.jsx("div",{className:"w-12 h-12 rounded-full bg-white border-2 border-[#1a1a1a] flex items-center justify-center",children:Gt.jsxs("span",{className:"text-gray-800 text-base font-semibold",children:["+",s]})})]}),Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("button",{onClick:e=>h(t.id,!0,e),disabled:l.isPending,className:"bg-green-500 hover:bg-green-600 transition-colors px-6 py-2 rounded text-white font-bold text-xl disabled:opacity-50 min-w-[70px] text-center",children:e.trust}),Gt.jsx("button",{onClick:e=>h(t.id,!1,e),disabled:l.isPending,className:"bg-red-500 hover:bg-red-600 transition-colors px-6 py-2 rounded text-white font-bold text-xl disabled:opacity-50 min-w-[70px] text-center",children:e.distrust})]})]})]}),Gt.jsxs("div",{className:"flex items-center gap-8 text-gray-500 text-base pl-[120px]",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(Vs,{className:"w-5 h-5"}),Gt.jsx("span",{className:"font-medium",children:n})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(Bs,{className:"w-5 h-5"}),Gt.jsx("span",{className:"font-medium",children:r})]}),Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx($i,{className:"w-5 h-5"}),Gt.jsxs("span",{className:"font-medium",children:[i,"K"]})]})]})]},t.id)}):Gt.jsxs("div",{className:"text-center py-12",children:[Gt.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:Gt.jsx(Wi,{className:"w-8 h-8 text-gray-600"})}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No organizations found"}),Gt.jsx("p",{className:"text-gray-500 mb-6",children:"Try adjusting your search or filters"}),Gt.jsxs("div",{className:"flex items-center justify-center gap-3",children:[Gt.jsx(kk,{variant:"outline",onClick:()=>i(""),className:"border-gray-700 text-gray-400 hover:bg-gray-800 hover:text-white",children:"Clear Search"}),Gt.jsx($F,{trigger:Gt.jsx(kk,{className:"bg-green-500 hover:bg-green-600 text-white",children:"Add Organization"})})]})]})})]})})}function FF({onCreatePost:t,bowls:e,organizations:n}){const[r,i]=je(),s=Rn(),{toast:o}=rr(),{isAuthenticated:a,isLoading:c,user:l}=pk(),[u,d]=Ct.useState(""),[h,f]=Ct.useState(new Set),[m,p]=Ct.useState("general"),[g,w]=Ct.useState("popular"),{data:y=[],isLoading:v}=Vn({queryKey:["/api/bowls"],retry:!1,refetchInterval:15e3,refetchIntervalInBackground:!0}),{data:b=[],refetch:x,isLoading:N}=Vn({queryKey:["/api/user/bowls"],retry:!1,refetchInterval:2e4,refetchIntervalInBackground:!0});Ct.useEffect(()=>{f(new Set(b.map(t=>t.bowl.id)))},[b]);const k=[...(e||y).filter(t=>{var e,n;const r=(null==(e=t.name)?void 0:e.toLowerCase().includes(u.toLowerCase()))||(null==(n=t.description)?void 0:n.toLowerCase().includes(u.toLowerCase())),i="all"===m||(t.category||"general").toLowerCase()===m.toLowerCase();return r&&i})].sort((t,e)=>"popular"===g?e.memberCount-t.memberCount:"newest"===g?new Date(e.createdAt||0).getTime()-new Date(t.createdAt||0).getTime():0),M=qn({mutationFn:async t=>(await Hn("POST",`/api/bowls/${t}/follow`,{})).json(),onSuccess:(t,e)=>{f(t=>new Set([...Array.from(t),e])),s.invalidateQueries({queryKey:["/api/user/bowls"]}),s.invalidateQueries({queryKey:["/api/bowls"]}),x(),o({title:"Success",description:"Channel followed successfully!"})},onError:t=>{o({title:"Error",description:"Failed to follow channel",variant:"destructive"})}}),A=qn({mutationFn:async t=>(await Hn("DELETE",`/api/bowls/${t}/follow`,void 0)).json(),onSuccess:(t,e)=>{f(t=>{const n=new Set(t);return n.delete(e),n}),s.invalidateQueries({queryKey:["/api/user/bowls"]}),s.invalidateQueries({queryKey:["/api/bowls"]}),x(),o({title:"Success",description:"Channel unfollowed successfully!"})},onError:t=>{o({title:"Error",description:"Failed to unfollow channel",variant:"destructive"})}}),E=Ct.useCallback(t=>{o({title:"Authentication Required",description:`Please connect your wallet to ${t}.`,variant:"default",action:Gt.jsx(kk,{variant:"outline",size:"sm",onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},children:"Connect Wallet"})})},[o]),S=Ct.useCallback((t,e)=>a?(null==e||e(),!0):(E(t),!1),[a,E]),C=Ct.useCallback(t=>{S("follow channels")&&M.mutate(t)},[S,M]),T=Ct.useCallback(t=>{S("unfollow channels")&&A.mutate(t)},[S,A]),I=({bowl:t})=>{const e=h.has(t.id);return Gt.jsxs("div",{className:"bg-[#0e0e0e] border border-gray-700 rounded-md overflow-hidden hover:border-gray-600 transition-colors cursor-pointer",onClick:()=>{S("view channel details")&&i(`/bowls/${encodeURIComponent(t.name)}`)},children:[Gt.jsxs("div",{className:"p-6 border-b border-gray-700",children:[Gt.jsx("h3",{className:"text-white text-xl font-mono mb-3",children:t.name||"Unknown Channel"}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed line-clamp-3",children:t.description||"Welcome to this community. Join us to connect with others who share your interests."})]}),Gt.jsxs("div",{className:"flex border-b border-gray-700 text-gray-400 text-sm",children:[Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3 border-r border-gray-700",children:[Gt.jsx(Vs,{className:"w-4 h-4"}),Gt.jsx("span",{children:t.memberCount?`${t.memberCount}K`:"0K"})]}),Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3 border-r border-gray-700",children:[Gt.jsx(ls,{className:"w-4 h-4"}),Gt.jsx("span",{children:t.postCount?`${t.postCount}K`:"0K"})]}),Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3",children:[Gt.jsx(Hi,{className:"w-4 h-4"}),Gt.jsx("span",{children:"25K"})]})]}),Gt.jsx("button",{onClick:n=>{n.stopPropagation(),e?T(t.id):C(t.id)},disabled:M.isPending||A.isPending,className:"w-full py-3 flex items-center justify-center gap-2 text-sm font-medium transition-colors\n          "+(e?"bg-[#e5e5e5] text-black hover:bg-[#d4d4d4]":"bg-white text-black hover:bg-gray-200"),children:e?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ms,{className:"w-4 h-4"}),Gt.jsx("span",{className:"tracking-wide",children:"LEAVE"})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Es,{className:"w-4 h-4"}),Gt.jsx("span",{className:"tracking-wide",children:"JOIN"})]})})]})};return v?Gt.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 pt-6 pb-8 bg-black min-h-screen",children:Gt.jsx("div",{className:"max-w-7xl mx-auto",children:Gt.jsx("div",{className:"space-y-8",children:[...Array(3)].map((t,e)=>Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsx(vR,{className:"h-8 w-48 bg-gray-800"}),Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[...Array(4)].map((t,e)=>Gt.jsx(vR,{className:"h-64 bg-gray-800"},e))})]},e))})})}):Gt.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 pt-6 pb-8 bg-black min-h-screen",children:Gt.jsxs("div",{className:"max-w-7xl mx-auto",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Gt.jsxs("div",{className:"flex items-center gap-4",children:[Gt.jsx("button",{onClick:()=>p("general"),className:"px-6 py-2 rounded-full font-medium text-sm uppercase tracking-wide transition-all "+("general"===m?"bg-white text-black":"text-gray-500 hover:text-gray-300"),children:"GENERAL"}),Gt.jsx("button",{onClick:()=>p("industries"),className:"px-6 py-2 rounded-full font-medium text-sm uppercase tracking-wide transition-all "+("industries"===m?"bg-white text-black":"text-gray-500 hover:text-gray-300"),children:"INDUSTRIES"}),Gt.jsx("button",{onClick:()=>p("job-groups"),className:"px-6 py-2 rounded-full font-medium text-sm uppercase tracking-wide transition-all "+("job-groups"===m?"bg-white text-black":"text-gray-500 hover:text-gray-300"),children:"JOB GROUPS"})]}),Gt.jsxs("select",{value:g,onChange:t=>w(t.target.value),className:"px-4 py-2 bg-transparent text-gray-500 text-sm font-medium uppercase tracking-wide border-none focus:outline-none appearance-none cursor-pointer",children:[Gt.jsx("option",{value:"popular",className:"bg-[#1a1a1a]",children:"MOST POPULAR"}),Gt.jsx("option",{value:"newest",className:"bg-[#1a1a1a]",children:"NEWEST"}),Gt.jsx("option",{value:"active",className:"bg-[#1a1a1a]",children:"MOST ACTIVE"})]})]}),Gt.jsx(eB,{placeholder:"search different bowls.",onSearch:t=>d(t)}),Gt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:k.map(t=>Gt.jsx(I,{bowl:t},t.id))}),0===k.length&&Gt.jsx("div",{className:"text-center py-16",children:Gt.jsx("p",{className:"text-gray-500 text-lg",children:"No channels found matching your criteria"})})]})})}function LF({onCreatePost:t,onExploreCommunities:e,isAuthenticated:n}){const{user:r,isAuthenticated:i,getAccessToken:s,refreshProfile:o}=pk();rr();const[a,c]=Ct.useState("posts"),[l,u]=Ct.useState(!1),[d,h]=Ct.useState([]),[f,m]=Ct.useState([]),[p,g]=Ct.useState([]),[w,y]=Ct.useState([]),[v,b]=Ct.useState(!1);Ct.useState([]),Ct.useState(!1),Ct.useState(null),Ct.useState(!0);const x=Ct.useCallback(async()=>{b(!0);try{const t=await s();if(!t)return void h([]);const e=await fetch("/api/post/own",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(e.ok){const t=await e.json(),n=t.filter(t=>"poll"===t.type);m(n),h(t)}else await e.json().catch(()=>({})),h([])}catch(t){h([])}finally{b(!1)}},[i,null==r?void 0:r.id,s]),N=Ct.useCallback(async()=>{b(!0);try{const t=await s();if(!t)return;const e=await fetch("/api/comments/own",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(e.ok){const t=await e.json();g(t)}else g([])}catch(t){g([])}finally{b(!1)}},[i,null==r?void 0:r.id,s]),k=Ct.useCallback(async()=>{b(!0);try{const t=await s();if(!t)return;const e=await fetch("/api/user/bowls",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(e.ok){const n=(await e.json()).map(async e=>{const n=await fetch(`/api/bowls/${e.bowlId}`,{headers:{Authorization:`Bearer ${t}`}});return n.ok?n.json():null}),r=(await Promise.all(n)).filter(Boolean);y(r)}else y([])}catch(t){y([])}finally{b(!1)}},[i,null==r?void 0:r.id,s]);Ct.useEffect(()=>{i&&(null==r?void 0:r.id)&&(async()=>{switch(a){case"posts":case"polls":await x();break;case"comments":await N();break;case"community":await k()}})()},[a,i,null==r?void 0:r.id,x,N,k]);const M=({tab:t,children:e,icon:n})=>Gt.jsxs("button",{onClick:()=>{c(t),u(!1)},className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 rounded-full text-sm font-medium transition-all w-full sm:w-auto justify-center "+(a===t?"bg-white text-black":"bg-transparent text-gray-400 hover:text-white"),children:[Gt.jsx(n,{className:"w-4 h-4"}),e]});return Gt.jsx("div",{className:"min-h-screen px-2 lg:px-4 bg-[#0a0a0a]",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsxs("div",{className:"sm:hidden px-4 py-4 border-b border-gray-700 flex justify-between items-center",children:[Gt.jsx("h2",{className:"text-white text-lg font-medium",children:"Profile"}),Gt.jsx("button",{onClick:()=>u(!l),className:"text-gray-400 hover:text-white p-2",children:l?Gt.jsx(Ks,{className:"w-6 h-6"}):Gt.jsx(xs,{className:"w-6 h-6"})})]}),Gt.jsxs("nav",{className:"hidden scrollbar-hide  sm:flex items-center gap-2 sm:gap-4 px-4 sm:px-6 py-4 sm:py-6 border-b border-gray-700 overflow-x-auto",children:[Gt.jsxs("button",{onClick:()=>c("whistle"),className:"flex items-center gap-2 px-4 sm:px-6 py-2.5 rounded-full text-sm font-medium transition-all flex-shrink-0 "+("whistle"===a?"bg-blue-400 text-black":"bg-transparent text-gray-400 hover:text-white"),children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),"WHISTLE"]}),Gt.jsx(M,{tab:"posts",icon:ks,children:"POSTS"}),Gt.jsx(M,{tab:"polls",icon:Hi,children:"POLLS"}),Gt.jsx(M,{tab:"community",icon:Vs,children:"COMMUNITY"}),Gt.jsx(M,{tab:"comments",icon:ks,children:"COMMENTS"})]}),l&&Gt.jsxs("div",{className:"sm:hidden bg-[#1a1a1a] border-b border-gray-700 p-4 space-y-2",children:[Gt.jsxs("button",{onClick:()=>{c("whistle"),u(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all w-full "+("whistle"===a?"bg-blue-400 text-black":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-800"),children:[Gt.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),"WHISTLE"]}),Gt.jsxs("button",{onClick:()=>{c("posts"),u(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all w-full "+("posts"===a?"bg-white text-black":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-800"),children:[Gt.jsx(ks,{className:"w-5 h-5"}),"POSTS"]}),Gt.jsxs("button",{onClick:()=>{c("polls"),u(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all w-full "+("polls"===a?"bg-white text-black":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-800"),children:[Gt.jsx(Hi,{className:"w-5 h-5"}),"POLLS"]}),Gt.jsxs("button",{onClick:()=>{c("community"),u(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all w-full "+("community"===a?"bg-white text-black":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-800"),children:[Gt.jsx(Vs,{className:"w-5 h-5"}),"COMMUNITY"]}),Gt.jsxs("button",{onClick:()=>{c("comments"),u(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all w-full "+("comments"===a?"bg-white text-black":"bg-transparent text-gray-400 hover:text-white hover:bg-gray-800"),children:[Gt.jsx(ks,{className:"w-5 h-5"}),"COMMENTS"]})]}),Gt.jsx("div",{className:"bg-[#0a0a0a]",children:"whistle"===a?Gt.jsxs("div",{className:"px-4 py-6 space-y-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Gt.jsxs("button",{className:"px-6 py-2 bg-transparent text-gray-600 text-sm font-medium tracking-wide cursor-not-allowed flex items-center gap-2",children:[Gt.jsx(Hi,{className:"w-4 h-4"}),"LEADERBOARD"]}),Gt.jsxs("button",{className:"px-6 py-2 bg-[#f5f5f5] text-[#525252] text-sm font-medium tracking-wide hover:bg-gray-200 transition-colors flex items-center gap-2",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Gt.jsx("path",{d:"M12 2L12 22M12 2L5 9M12 2L19 9"})}),"HOW IT WORKS"]})]}),Gt.jsx("div",{className:"bg-[#1e3a5f] border-l-4 border-blue-400 p-4 mb-6",children:Gt.jsxs("p",{className:"text-blue-100 text-sm leading-relaxed",children:["Everything that you do at anonn generates you points thats everything from a comment to upvote to invite and posting. This translates directly to the ",Gt.jsx("span",{className:"font-semibold",children:"airdrop"})," you will receive"]})}),Gt.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-700 rounded-lg overflow-hidden",children:[Gt.jsxs("div",{className:"grid grid-cols-2 bg-[#0e0e0e] border-b border-gray-700",children:[Gt.jsx("div",{className:"px-6 py-3 text-gray-400 text-sm font-medium tracking-wide",children:"Activity"}),Gt.jsx("div",{className:"px-6 py-3 text-gray-400 text-sm font-medium tracking-wide text-right",children:"Points"})]}),Gt.jsxs("div",{className:"divide-y divide-gray-700",children:[Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Ls,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"invite others"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"100"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(ls,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"create post"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"20"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Hi,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"create poll"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"20"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx($s,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"rate company"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"50"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(ks,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"comment received / given"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"10"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Ri,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"upvote received / given"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"5"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Di,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"downvote received / given"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"5"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Ps,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"share post/poll"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"10"})]})]}),Gt.jsxs("div",{className:"grid grid-cols-2 px-6 py-4 hover:bg-[#222222] transition-colors",children:[Gt.jsxs("div",{className:"flex items-center gap-3 text-white text-sm",children:[Gt.jsx(Li,{className:"w-5 h-5 text-gray-400"}),Gt.jsx("span",{children:"bookmark received / given"})]}),Gt.jsxs("div",{className:"flex items-center justify-end gap-2 text-blue-400 text-base font-semibold",children:[Gt.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:Gt.jsx("path",{d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"})}),Gt.jsx("span",{children:"5"})]})]})]})]})]}):"posts"===a?v?Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):Gt.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[Gt.jsx("div",{className:"flex items-center justify-center py-4 border-b border-gray-600 px-4",children:Gt.jsxs("p",{className:"text-gray-400 text-sm",children:["[ ",d.length," TOTAL ]"]})}),d.map((t,e)=>Gt.jsx(fR,{post:t,onUpdate:x,compact:!1,showCommunity:!0,index:e},t.id))]}):"polls"===a?v?Gt.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):Gt.jsxs("div",{className:"space-y-2 lg:space-y-4",children:[Gt.jsx("div",{className:"flex items-center justify-center py-4 border-b border-gray-600 px-4",children:Gt.jsxs("p",{className:"text-gray-400 text-sm",children:["[ ",f.length," TOTAL ]"]})}),f.map((t,e)=>Gt.jsx(fR,{post:t,onUpdate:x,compact:!1,showCommunity:!0,index:e},t.id))]}):"community"===a?v?Gt.jsx("div",{className:"space-y-4",children:Gt.jsx(NR,{count:5})}):Gt.jsxs("div",{className:"space-y-0",children:[Gt.jsx("div",{className:"flex items-center justify-center py-4 border-b border-gray-700 px-4",children:Gt.jsxs("p",{className:"text-gray-400 text-sm",children:["[ ",w.length," TOTAL ]"]})}),Gt.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 px-4 py-6",children:w.map(t=>Gt.jsxs("div",{className:"bg-[#0e0e0e] border border-gray-700 rounded-md flex flex-col overflow-hidden",children:[Gt.jsxs("div",{className:"p-6 border-b border-gray-700",children:[Gt.jsx("h3",{className:"text-white text-xl font-mono mb-3",children:t.name}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed line-clamp-3",children:t.description})]}),Gt.jsxs("div",{className:"flex justify-between text-gray-400 text-sm border-b border-gray-700",children:[Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3 border-r border-gray-700",children:[Gt.jsx(Vs,{className:"w-4 h-4"}),Gt.jsxs("span",{children:[(t.memberCount/1e3).toFixed(0),"K"]})]}),Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3 border-r border-gray-700",children:[Gt.jsx(ks,{className:"w-4 h-4"}),Gt.jsxs("span",{children:[Math.floor(1.33*t.memberCount/1e3),"K"]})]}),Gt.jsxs("div",{className:"flex items-center justify-center w-1/3 gap-2 py-3",children:[Gt.jsx(Hi,{className:"w-4 h-4"}),Gt.jsxs("span",{children:[Math.floor(.83*t.memberCount/1e3),"K"]})]})]}),Gt.jsxs("button",{className:"bg-white text-black py-3 text-sm font-medium flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors",children:[Gt.jsx(ts,{className:"w-4 h-4"}),Gt.jsx("span",{children:"LEAVE"})]})]},t.id))})]}):"comments"===a?v?Gt.jsx("div",{className:"space-y-4",children:Gt.jsx(NR,{count:5})}):Gt.jsxs("div",{className:"space-y-0",children:[Gt.jsx("div",{className:"flex items-center justify-center py-4 border-b border-gray-600 px-4",children:Gt.jsxs("p",{className:"text-gray-400 text-sm",children:["[ ",p.length," TOTAL ]"]})}),p.length>0?Gt.jsx("div",{className:"space-y-4 p-4",children:p.map(t=>Gt.jsx("div",{className:"bg-[#1a1a1a] border border-gray-700 rounded-lg p-4",children:Gt.jsx("div",{className:"flex items-start space-x-3",children:Gt.jsxs("div",{className:"flex-1",children:[Gt.jsx("p",{className:"text-white text-sm mb-2",children:t.content}),Gt.jsxs("div",{className:"flex items-center space-x-4 text-gray-400 text-xs",children:[Gt.jsxs("span",{children:["Posted ",t.createdAt?new Date(t.createdAt).toLocaleDateString():"Unknown"]}),t.postId&&Gt.jsx("button",{onClick:()=>window.location.href=`/post?id=${t.postId}`,className:"text-orange-400 hover:text-orange-300 transition-colors",children:"View Post"})]})]})})},t.id))}):Gt.jsxs("div",{className:"text-center py-12",children:[Gt.jsx(ks,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-400",children:"No comments yet"})]})]}):null})]})})}function WF({targetId:t,targetType:e,upvotes:n,downvotes:r,userVote:i,onUpdate:s,size:o="default",layout:a="vertical",showCount:c=!0}){const{toast:l}=rr(),u=Rn(),[d,h]=Ct.useState(null),[f,m]=Ct.useState({upvotes:n,downvotes:r,userVote:i});Ct.useEffect(()=>{m({upvotes:n,downvotes:r,userVote:i})},[n,r,i,t]);const p=qn({mutationFn:async n=>await oD({targetId:t,targetType:e,voteType:n}),onMutate:async n=>{await aD(u,t,e);const r={...f},i=rD(f,n,t,e);return m(i),iD(u,t,0,t=>({...t,upvotes:i.upvotes,downvotes:i.downvotes,userVote:i.userVote})),{previousState:r}},onError:(e,n,r)=>{(null==r?void 0:r.previousState)&&(m(r.previousState),iD(u,t,0,t=>({...t,upvotes:r.previousState.upvotes,downvotes:r.previousState.downvotes,userVote:r.previousState.userVote}))),h(null),cD(e)?l({title:"Authentication Required",description:"Please connect your wallet to vote.",variant:"destructive"}):l({title:"Error",description:"Failed to vote. Please try again.",variant:"destructive"})},onSuccess:e=>{if(null==e?void 0:e.updatedCounts){const n={upvotes:e.updatedCounts.upvotes,downvotes:e.updatedCounts.downvotes,userVote:e.userVote||void 0};m(n),iD(u,t,0,t=>({...t,upvotes:n.upvotes,downvotes:n.downvotes,userVote:n.userVote}))}},onSettled:()=>{sD(u,t,e),setTimeout(()=>h(null),300),s()}}),g=t=>{p.isPending||(h(t),p.mutate(t))},w=f.upvotes,y=f.downvotes,v=f.userVote,b="sm"===o?"h-4 w-4":"h-5 w-5",x="sm"===o?"text-sm":"text-base",N=`\n    ${"sm"===o?"h-8":"h-10"} ${"sm"===o?"w-16":"w-20"} flex items-center justify-center gap-2 \n    border-r border-gray-600 transition-colors\n     text-gray-400 hover:text-white\n    ${p.isPending?"opacity-75 cursor-not-allowed":"cursor-pointer"}\n  `,k="up"===(null==v?void 0:v.voteType)?"text-blue-500 bg-blue-500/10":"text-white",M="down"===(null==v?void 0:v.voteType)?"text-orange-500 bg-orange-500/10":"text-white";return"horizontal"===a?Gt.jsxs("div",{className:"flex items-center divide-x divide-gray-700",children:[Gt.jsxs("button",{disabled:p.isPending,onClick:()=>g("up"),className:`${N} ${k}`,title:"Upvote",children:[p.isPending&&"up"===d?Gt.jsx(ws,{className:`${b} animate-spin`}):Gt.jsx($s,{fill:(null==v||v.voteType,"currentColor"),className:b,strokeWidth:2.5}),c&&Gt.jsx("span",{className:`${x} font-normal`,children:w})]}),Gt.jsxs("button",{disabled:p.isPending,onClick:()=>g("down"),className:`${N} ${M}`,title:"Downvote",children:[p.isPending&&"down"===d?Gt.jsx(ws,{className:`${b} animate-spin`}):Gt.jsx($s,{fill:"down"===(null==v?void 0:v.voteType)?"currentColor":"white",className:`${b} rotate-180`,strokeWidth:2.5}),c&&Gt.jsx("span",{className:`${x} font-normal`,children:y})]})]}):Gt.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[Gt.jsx("button",{disabled:p.isPending,onClick:()=>g("up"),className:`${N} ${k} border-r-0`,title:"Upvote",children:p.isPending&&"up"===d?Gt.jsx(ws,{className:`${b} animate-spin`}):Gt.jsx($s,{fill:"up"===(null==v?void 0:v.voteType)?"currentColor":"white",className:b,strokeWidth:2.5})}),c&&Gt.jsx("div",{className:"flex flex-col items-center",children:Gt.jsx("span",{className:`${x} font-bold text-white`,children:w-y})}),Gt.jsx("button",{disabled:p.isPending,onClick:()=>g("down"),className:`${N} ${M} border-r-0`,title:"Downvote",children:p.isPending&&"down"===d?Gt.jsx(ws,{className:`${b} animate-spin`}):Gt.jsx($s,{fill:"down"===(null==v?void 0:v.voteType)?"currentColor":"white",className:`${b} rotate-180`,strokeWidth:2.5})})]})}const VF=EF({content:AF().min(1,"Reply cannot be empty").max(1e3,"Reply must be less than 1000 characters")});function qF({comment:t,pollId:e,onSuccess:n,depth:r=0}){const{toast:i}=rr(),{user:s}=pk(),[o,a]=Ct.useState(!1),[c,l]=Ct.useState(!1),u=U$({resolver:Z$(VF),defaultValues:{content:""}}),d=qn({mutationFn:async n=>{const r={content:n.content,parentId:t.id};return(await Hn("POST",`/api/polls/${e}/comments`,r)).json()},onSuccess:()=>{i({title:"Reply posted!",description:"Your reply has been added successfully"}),u.reset(),a(!1),Yn.invalidateQueries({queryKey:["poll-comments",e]}),null==n||n()},onError:t=>{i({title:"Error",description:t.message||"Failed to post reply",variant:"destructive"})}}),h=qn({mutationFn:async t=>{var e;const n=await fetch(`/api/comments/${t}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(e=window.__getDynamicToken)?void 0:e.call(window))}`}});if(!n.ok)throw new Error("Failed to delete comment");return n.json()},onSuccess:()=>{i({title:"Comment deleted",description:"Your comment has been deleted successfully"}),Yn.invalidateQueries({queryKey:["poll-comments",e]}),null==n||n()},onError:t=>{i({title:"Error",description:t.message||"Failed to delete comment",variant:"destructive"})}}),f=r<3;return Gt.jsxs("div",{className:"border border-[#3d3d3d] bg-[#EAEAEA05] transition-colors",children:[Gt.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[Gt.jsx("div",{className:"flex items-center gap-4",children:Gt.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[Gt.jsx("span",{className:"text-gray-300 font-semibold underline cursor-pointer hover:text-white text-base",children:(()=>{const e=t.author,n=e.username||"User";return e.isCompanyVerified&&e.companyName?`${n} from ${e.companyName}`:n})()}),Gt.jsx("span",{className:"text-gray-500 text-sm",children:ra(t.createdAt||"")})]})}),Gt.jsx("div",{className:"flex items-center gap-2",children:(null==s?void 0:s.id)&&t.authorId&&((null==s?void 0:s.id)===t.authorId||(null==s?void 0:s.id)===t.authorId.toString())&&Gt.jsx("div",{className:"flex justify-end",children:Gt.jsxs(kk,{variant:"ghost",size:"sm",onClick:()=>l(!0),className:"text-red-500 hover:text-red-700 hover:bg-red-500/10",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-1"})," Delete"]})})})]}),Gt.jsx("div",{className:"px-6 pb-4",children:Gt.jsx("div",{className:"text-gray-300 text-lg leading-relaxed",children:Gt.jsx(eD,{content:t.content,className:"text-gray-300 text-lg"})})}),Gt.jsxs("div",{className:"flex items-stretch border-t border-gray-700",children:[Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsx(WF,{targetId:t.id,targetType:"comment",upvotes:t.upvotes,downvotes:t.downvotes,userVote:t.userVote,onUpdate:()=>{Yn.invalidateQueries({queryKey:["poll-comments",e]}),null==n||n()},layout:"horizontal",showCount:!0})}),Gt.jsx("div",{className:"flex-1"}),Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx("button",{className:"flex items-center justify-center border-r border-gray-600 px-6 text-gray-400 hover:text-white transition-colors",children:Gt.jsx(Li,{className:"h-5 w-5"})}),f&&Gt.jsxs("button",{onClick:()=>a(!o),className:"flex items-center gap-2 px-6 text-gray-400 hover:text-white transition-colors",children:[Gt.jsx(ks,{className:"h-5 w-5"}),Gt.jsx("span",{className:"text-sm",children:"Reply"})]})]})})]}),o&&f&&Gt.jsx("div",{className:"border-t border-gray-700 p-6",children:Gt.jsx(CF,{...u,children:Gt.jsxs("form",{onSubmit:u.handleSubmit(t=>{d.mutate(t)}),className:"space-y-4",children:[Gt.jsx(IF,{control:u.control,name:"content",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(zF,{children:Gt.jsx(RF,{placeholder:"Write your reply...",rows:3,className:"resize-none text-base border border-gray-600 bg-[#1a1a1a] text-white placeholder-gray-400 focus:border-gray-300 rounded-sm transition-all duration-300",...t})}),Gt.jsx(_F,{className:"text-red-400"})]})}),Gt.jsxs("div",{className:"flex justify-end space-x-3",children:[Gt.jsx(kk,{type:"button",variant:"outline",size:"sm",onClick:()=>{a(!1),u.reset()},className:"px-6 py-2 border border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white transition-all duration-300",children:"Cancel"}),Gt.jsx(kk,{type:"submit",size:"sm",disabled:d.isPending||!u.watch("content").trim(),className:"px-6 py-2 bg-gray-700 text-white hover:bg-gray-600 transition-all duration-300",children:d.isPending?Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),Gt.jsx("span",{children:"Posting..."})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Is,{className:"h-4 w-4 mr-2"}),"Post Reply"]})})]})]})})}),t.replies&&t.replies.length>0&&Gt.jsx("div",{className:"border-t border-gray-700",children:Gt.jsx("div",{className:"ml-8 pl-4 border-l-2 border-gray-600",children:t.replies.map(t=>Gt.jsx("div",{className:"first:pt-4 last:pb-0",children:Gt.jsx(qF,{comment:t,pollId:e,onSuccess:n,depth:r+1})},t.id))})}),Gt.jsx(rR,{open:c,onOpenChange:l,children:Gt.jsxs(oR,{className:"bg-[#1a1a1a] border border-gray-600",children:[Gt.jsxs(aR,{children:[Gt.jsx(lR,{className:"text-white",children:"Delete this comment?"}),Gt.jsx(uR,{className:"text-gray-400",children:"This action cannot be undone. This will permanently delete your comment."})]}),Gt.jsxs(cR,{children:[Gt.jsx(hR,{className:"bg-gray-700 text-white border-gray-600 hover:bg-gray-600",children:"Cancel"}),Gt.jsx(dR,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>{h.mutate(t.id),l(!1)},disabled:h.isPending,children:h.isPending?"Deleting...":"Delete"})]})]})})]})}function KF({url:t,title:e="Check out this post",description:n="Interesting post on Anonn",className:r="",variant:i="ghost",size:s="lg"}){const{toast:o}=rr(),[a,c]=Ct.useState(!1),l=t||window.location.href,u=`${e} - ${n}`,d=async()=>{try{await navigator.clipboard.writeText(l),o({title:"Link copied!",description:"The link has been copied to your clipboard."})}catch(t){o({title:"Failed to copy",description:"Please copy the link manually.",variant:"destructive"})}},h=t=>{let r="";switch(t){case"twitter":r=`https://twitter.com/intent/tweet?text=${encodeURIComponent(u)}&url=${encodeURIComponent(l)}`;break;case"facebook":r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(l)}`;break;case"linkedin":r=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(l)}`;break;case"email":r=`mailto:?subject=${encodeURIComponent(e)}&body=${encodeURIComponent(`${n}\n\n${l}`)}`;break;default:return}window.open(r,"_blank","width=600,height=400")};return Gt.jsxs(E_,{children:[Gt.jsx(S_,{asChild:!0,children:Gt.jsx(kk,{variant:i,size:s,disabled:a,className:`flex items-center text-white space-x-2  hover:bg-gray-800/50  hover:text-gray-100 transition-all duration-300 ${r}`,children:Gt.jsx(Ps,{className:"h-7 w-7"})})}),Gt.jsxs(C_,{align:"end",className:"w-56 bg-white border border-gray-200 shadow-lg",children:[Gt.jsxs(T_,{onClick:async()=>{if(navigator.share)try{c(!0),await navigator.share({title:e,text:n,url:l})}catch(t){t instanceof Error&&"AbortError"!==t.name&&o({title:"Share failed",description:"Please try sharing manually.",variant:"destructive"})}finally{c(!1)}else d()},className:"flex items-center space-x-2",children:[Gt.jsx(Ps,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Share via..."})]}),Gt.jsxs(T_,{onClick:d,className:"flex items-center space-x-2",children:[Gt.jsx(ss,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Copy link"})]}),Gt.jsx(I_,{}),Gt.jsxs(T_,{onClick:()=>h("twitter"),className:"flex items-center space-x-2",children:[Gt.jsx(Us,{className:"h-4 w-4 text-blue-400"}),Gt.jsx("span",{children:"Share on Twitter"})]}),Gt.jsxs(T_,{onClick:()=>h("facebook"),className:"flex items-center space-x-2",children:[Gt.jsx(cs,{className:"h-4 w-4 text-blue-600"}),Gt.jsx("span",{children:"Share on Facebook"})]}),Gt.jsxs(T_,{onClick:()=>h("linkedin"),className:"flex items-center space-x-2",children:[Gt.jsx(ps,{className:"h-4 w-4 text-blue-700"}),Gt.jsx("span",{children:"Share on LinkedIn"})]}),Gt.jsxs(T_,{onClick:()=>h("email"),className:"flex items-center space-x-2",children:[Gt.jsx(bs,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Share via Email"})]})]})]})}function HF({onCreatePost:t}){const[e,n]=je(),{user:r,isAuthenticated:i,isLoading:s}=pk(),{toast:o}=rr(),[a,c]=Ct.useState([]),[l,u]=Ct.useState(!1),d=new URLSearchParams(window.location.search).get("id"),h=Rn(),{data:f,isLoading:m,error:p,refetch:g}=Vn({queryKey:["poll",d],queryFn:async()=>{if(!d)throw new Error("No poll ID provided");let t=await fetch(`/api/polls/${d}`,{credentials:"include"});if(t.ok)return await t.json();if(t=await fetch(`/api/posts/${d}`,{credentials:"include"}),!t.ok)throw new Error(`Poll not found: ${t.status}: ${t.statusText}`);if("poll"===(await t.json()).type){const t=await fetch("/api/polls",{credentials:"include"});if(t.ok){const e=(await t.json()).find(t=>t.postId===parseInt(d));if(e){const t=`/poll?id=${e.id}`;return window.location.pathname+window.location.search!==t&&window.history.replaceState({},"",t),e}}throw new Error("POLL_POST_NOT_FOUND")}throw new Error("This is not a poll")},enabled:!!d&&i}),{data:w,isLoading:y,refetch:v}=Vn({queryKey:["poll-comments",(null==f?void 0:f.id)||d],queryFn:async()=>{const t=(null==f?void 0:f.id)||d;if(!t)throw new Error("No poll ID provided");const e=await fetch(`/api/polls/${t}/comments`,{credentials:"include"});if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return e.json()},enabled:!(!(null==f?void 0:f.id)&&!d)&&i}),b=qn({mutationFn:async t=>{var e;const n=(null==f?void 0:f.id)||d;if(!n)throw new Error("No poll ID available");const r=await fetch(`/api/polls/${n}/vote`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${await(null==(e=window.__getDynamicToken)?void 0:e.call(window))}`},credentials:"include",body:JSON.stringify({optionIds:t})});if(!r.ok){const t=await r.json().catch(()=>({})),e=new Error("Failed to vote");throw e.response={data:t},e}return r.json()},onSuccess:()=>{g(),h.invalidateQueries({queryKey:["polls"]}),o({title:"Vote submitted",description:"Your vote has been recorded successfully."})}});return Ct.useEffect(()=>{s||i||(window.location.href="/auth")},[i,s]),s?Gt.jsx("div",{children:"Loading..."}):i?Gt.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-4 pb-6 w-full max-w-[1200px] mx-auto",children:[Gt.jsx("div",{className:"mb-6",children:Gt.jsxs(kk,{variant:"ghost",onClick:()=>n("/polls"),className:"flex items-center space-x-2 text-gray-400 hover:text-gray-300 hover:bg-gray-800",children:[Gt.jsx(zi,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Back to Polls"})]})}),m?Gt.jsx(bk,{className:"border border-gray-600 shadow-lg rounded-lg",children:Gt.jsx(xk,{className:"p-6",children:Gt.jsxs("div",{className:"animate-pulse space-y-4",children:[Gt.jsxs("div",{className:"flex items-center space-x-3",children:[Gt.jsx(vR,{className:"h-8 w-8 rounded-full"}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(vR,{className:"h-4 w-32"}),Gt.jsx(vR,{className:"h-3 w-24"})]})]}),Gt.jsx(vR,{className:"h-6 w-full mb-3"}),Gt.jsx(vR,{className:"h-20 w-full mb-4"}),Gt.jsxs("div",{className:"flex items-center space-x-4",children:[Gt.jsx(vR,{className:"h-8 w-16"}),Gt.jsx(vR,{className:"h-8 w-16"}),Gt.jsx(vR,{className:"h-8 w-16"})]})]})})}):p?Gt.jsx(bk,{className:"border border-gray-600",children:Gt.jsxs(xk,{className:"p-12 text-center",children:[Gt.jsx("div",{className:"mb-6",children:Gt.jsx(Hi,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"})}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Poll not found"}),Gt.jsx("p",{className:"text-gray-400 mb-6",children:"The poll you're looking for doesn't exist or has been removed."}),Gt.jsx(kk,{onClick:()=>n("/polls"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"Back to Polls"})]})}):f?Gt.jsxs(Gt.Fragment,{children:[Gt.jsxs("article",{className:"bg-[#EAEAEA05] border border-[#525252] overflow-hidden",children:[Gt.jsxs("div",{className:"px-8 py-4 flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[Gt.jsx("span",{className:"text-white text-sm font-normal underline cursor-pointer hover:text-gray-200 transition-colors truncate",onClick:t=>{t.stopPropagation(),window.location.href=`/u/${f.author.username}`},children:(()=>{if(!f)return"User";const t=f.author,e=t.username||"User";return t.isCompanyVerified&&t.companyName?`${e} from ${t.companyName}`:e})()}),Gt.jsx("span",{className:"text-[#525252] text-sm",children:ra(f.createdAt||"")})]}),Gt.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Gt.jsx("div",{className:"p-1 flex items-center justify-center flex-shrink-0",children:Gt.jsx(_s,{className:"w-7 h-7 fill-green-500 text-green-500"})}),Gt.jsx("div",{className:"bg-green-400 p-1.5 flex items-center justify-center flex-shrink-0",children:Gt.jsx("svg",{className:"w-7 h-7 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:Gt.jsx("path",{d:"M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4z"})})}),(null==r?void 0:r.id)&&f.author.id&&(r.id===f.author.id||r.id===f.author.id.toString())&&Gt.jsxs(E_,{children:[Gt.jsx(S_,{asChild:!0,children:Gt.jsx(kk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-300 hover:text-white",onClick:t=>t.stopPropagation(),children:Gt.jsx(os,{className:"h-3 w-3 rotate-90"})})}),Gt.jsxs(C_,{align:"end",className:"w-48",onClick:t=>t.stopPropagation(),children:[Gt.jsxs(T_,{onClick:()=>u(!0),className:"text-red-600",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-2"})," Delete"]}),Gt.jsx(I_,{})]})]})]})]}),Gt.jsxs("div",{className:"px-6 cursor-default",children:[Gt.jsx("h1",{className:"text-2xl font-normal text-white my-6 leading-normal",children:f.title}),f.description&&Gt.jsx("div",{className:"text-[#8E8E93] text-base leading-relaxed mb-4",children:Gt.jsx("div",{className:"prose prose-base max-w-none",children:Gt.jsx(eD,{content:f.description,className:"text-gray-300"})})}),Gt.jsx("div",{className:"space-y-4 mb-6",children:f.options&&f.options.length>0?f.options.map((t,e)=>{var n;const r=(i=t.voteCount,f&&0!==f.totalVotes?Math.round(i/f.totalVotes*100):0);var i;const s=a.includes(t.id),o=f.hasVoted&&(null==(n=f.selectedOptions)?void 0:n.includes(t.id));return Gt.jsxs("div",{className:`bg-[#1a1a1a] border border-gray-600 rounded-lg p-4 transition-all duration-200 ${(null==f?void 0:f.hasVoted)?"cursor-default":"cursor-pointer hover:border-gray-500"} ${s?"border-blue-500 bg-blue-500/10":o?"border-green-500 bg-green-500/10":""}`,onClick:()=>{return e=t.id,void((null==f?void 0:f.hasVoted)||((null==f?void 0:f.allowMultipleChoices)?c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]):c([e])));var e},children:[Gt.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Gt.jsxs("div",{className:"flex items-center space-x-3",children:[Gt.jsx("div",{className:"w-4 h-4 rounded-full border-2 flex items-center justify-center transition-all duration-200 flex-shrink-0 "+((null==f?void 0:f.hasVoted)?o?"border-green-500 bg-green-500":"border-gray-400":s?"border-blue-500 bg-blue-500":o?"border-green-500 bg-green-500":"border-gray-400"),children:(s||o)&&Gt.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})}),Gt.jsx("span",{className:"text-base text-white",children:t.text})]}),Gt.jsxs("div",{className:"text-sm text-gray-400 flex-shrink-0",children:[r,"%"]})]}),Gt.jsx("div",{className:"mt-2",children:Gt.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:Gt.jsx("div",{className:"h-full rounded-full transition-all duration-500 "+(s?"bg-blue-500":o?"bg-green-500":"bg-gray-500"),style:{width:`${r}%`}})})}),Gt.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[t.voteCount," votes"]})]},t.id)}):Gt.jsx("div",{className:"text-center py-8 text-gray-400",children:"No poll options available"})}),!(null==f?void 0:f.hasVoted)&&a.length>0&&Gt.jsx("div",{className:"pt-6 border-t border-gray-600 mt-8",children:Gt.jsx(kk,{onClick:async()=>{var t,e,n,r;if(0!==a.length)try{await b.mutateAsync(a),c([])}catch(i){const s=(null==(e=null==(t=null==i?void 0:i.response)?void 0:t.data)?void 0:e.error)||(null==(r=null==(n=null==i?void 0:i.response)?void 0:n.data)?void 0:r.message)||(null==i?void 0:i.message)||"";s.includes("ALREADY_VOTED")||s.toLowerCase().includes("already voted")?(o({title:"Already voted",description:"You have already voted on this poll.",variant:"destructive"}),g(),c([])):o({title:"Error",description:"Failed to submit vote. Please try again.",variant:"destructive"})}},disabled:b.isPending,className:"w-full bg-gray-700 hover:bg-gray-600 text-white py-3 font-normal text-base transition-all duration-300",children:b.isPending?"Voting...":`Vote (${a.length} selected)`})}),Gt.jsxs("div",{className:"flex items-center justify-between my-8 text-gray-400 text-sm mb-4",children:[Gt.jsxs("div",{className:"flex items-center gap-1",children:[Gt.jsx(as,{className:"w-4 h-4"}),Gt.jsxs("span",{children:[f.viewCount||0," VIEWS"]})]}),Gt.jsxs("div",{className:"flex items-center gap-1",children:[Gt.jsx(ns,{className:"w-4 h-4"}),Gt.jsx("span",{children:(x=f.createdAt,x?("string"==typeof x?new Date(x):x).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).toUpperCase().replace(",",""):"")})]})]})]}),Gt.jsxs("div",{className:"flex items-stretch bg-[#EAEAEA05]  border-t border-gray-600",children:[Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsx(WF,{targetId:f.id,targetType:"poll",upvotes:f.upvotes,downvotes:f.downvotes,userVote:f.userVote,onUpdate:g,layout:"horizontal",showCount:!0})}),Gt.jsx("div",{className:"flex-1"}),Gt.jsxs("div",{className:"flex items-stretch ",onClick:t=>t.stopPropagation(),children:[Gt.jsx("button",{"aria-label":"Bookmark",className:"flex items-center justify-center border-r border-gray-400 px-6 py-3 text-white hover:bg-gray-800/50 transition-colors",children:Gt.jsx(Li,{className:"w-4 h-4",strokeWidth:2})}),Gt.jsx(KF,{size:"lg",url:window.location.href,title:f.title,description:f.description})]})]})]}),Gt.jsxs("div",{className:"border border-gray-700 overflow-hidden ",children:[Gt.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#525252]",children:[Gt.jsxs("div",{className:"flex items-center space-x-8",children:[Gt.jsx("h3",{className:"text-gray-300 text-lg",children:"Express your view about the poll"}),Gt.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-500",children:Gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:Gt.jsx("path",{d:"M10 2a8 8 0 11-8 8 8 8 0 018-8m0 2a6 6 0 106 6 6 6 0 00-6-6z"})})}),Gt.jsx("span",{className:"text-gray-300 underline cursor-pointer text-lg",children:"Abstract"})]}),Gt.jsxs("div",{className:"flex",children:[Gt.jsx("div",{className:"flex items-center justify-center bg-green-400 hover:bg-green-300 transition w-12 h-10",children:Gt.jsx(_s,{className:"h-5 w-5 text-green-700",fill:"currentColor"})}),Gt.jsx("div",{className:"flex items-center justify-center bg-red-400 hover:bg-red-300 transition w-12 h-10",children:Gt.jsx(zs,{className:"h-5 w-5 text-red-800",fill:"currentColor"})})]})]}),Gt.jsx("div",{className:"border-t border-gray-700 bg-[#0c0c0c]",children:Gt.jsx("div",{className:"w-full bg-[#EAEAEA05] border-t border-gray-700",children:Gt.jsxs("form",{onSubmit:async t=>{t.preventDefault();const e=t.currentTarget,n=new FormData(e).get("content");if(n.trim())try{await Hn("POST",`/api/polls/${f.id}/comments`,{content:n}),e.reset(),o({title:"Comment posted",description:"Your comment has been successfully added."}),v()}catch(r){o({title:"Error",description:"Failed to post comment. Please try again.",variant:"destructive"})}else o({title:"Empty comment",description:"Please enter a comment before posting.",variant:"destructive"})},className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center px-6 py-6 space-x-4 flex-1",children:[Gt.jsx("div",{className:"w-12 h-12 bg-yellow-500 flex-shrink-0"}),Gt.jsx("input",{type:"text",name:"content",placeholder:"post your reply",className:"w-full bg-transparent text-gray-300 text-xl font-mono placeholder-gray-500 focus:outline-none"})]}),Gt.jsxs(kk,{type:"submit",className:"flex items-center justify-center px-8 py-12 text-black font-semibold bg-gradient-to-r from-[#bfe2ff] to-[#e0f0ff] hover:opacity-90 transition border-l border-gray-700 rounded-none",children:[Gt.jsx(zi,{className:"h-6 w-6 mr-2 rotate-180"}),"POST"]})]})})}),Gt.jsx("div",{className:"py-6 border-t border-gray-700 bg-[#0c0c0c] text-center",children:Gt.jsxs("h3",{className:"text-gray-400 tracking-wide text-sm font-medium",children:["[ ",(null==w?void 0:w.length)||0," COMMENTS ]"]})}),Gt.jsx("div",{className:"divide-y divide-gray-700 bg-[#EAEAEA05]",children:y?Gt.jsxs("div",{className:"p-8 text-center",children:[Gt.jsx(ks,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-400",children:"Loading comments..."})]}):w&&w.length>0?w.map(t=>Gt.jsx("div",{className:"transition-colors mb-4 border-y border-gray-700",children:Gt.jsx(qF,{comment:t,pollId:f.id,onSuccess:v,depth:0})},t.id)):Gt.jsxs("div",{className:"p-8 text-center",children:[Gt.jsx(ks,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-400",children:"No comments yet. Be the first to comment!"})]})})]}),Gt.jsx(rR,{open:l,onOpenChange:u,children:Gt.jsxs(oR,{onClick:t=>t.stopPropagation(),children:[Gt.jsxs(aR,{children:[Gt.jsx(lR,{children:"Delete this poll?"}),Gt.jsx(uR,{children:"This action cannot be undone. This will permanently delete your poll and remove its data."})]}),Gt.jsxs(cR,{children:[Gt.jsx(hR,{children:"Cancel"}),Gt.jsx(dR,{className:"bg-red-600 hover:bg-red-700",onClick:async()=>{var t;if(f&&f.author.id===(null==r?void 0:r.id))try{if(!(await fetch(`/api/polls/${f.id}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(t=window.__getDynamicToken)?void 0:t.call(window))}`}})).ok)return void o({title:"Error",description:"Failed to delete poll. Please try again.",variant:"destructive"});await h.invalidateQueries({predicate:t=>{const e=t.queryKey;return!!Array.isArray(e)&&("polls"===e[0]||"/api/polls"===e[0]||"posts"===e[0]||"/api/posts"===e[0]||"poll"===e[0]&&e[1]===f.id.toString())}}),o({title:"Poll deleted",description:"Your poll has been permanently deleted."}),window.history.length>1?window.history.back():n("/polls")}catch(e){o({title:"Error",description:"Failed to delete poll. Please try again.",variant:"destructive"}),n("/polls")}},children:"Delete"})]})]})})]}):null]}):Gt.jsx("div",{children:"Please log in to view polls."});var x}function YF({poll:t,onUpdate:e}){var n,r;const{toast:i}=rr(),{isAuthenticated:s}=pk(),[o,a]=Ct.useState(t),[c,l]=Ct.useState([]),[u,d]=Ct.useState(null),h=qn({mutationFn:async({voteType:t})=>{var e;const n=await(null==(e=window.__getDynamicToken)?void 0:e.call(window)),r=await fetch(`/api/polls/${o.id}/votes`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},credentials:"include",body:JSON.stringify({voteType:t})});if(!r.ok){const t=await r.text();throw new Error(t||"Failed to vote")}return await r.json()},onError:t=>{var e,n;if(d(null),(null==(e=t.message)?void 0:e.includes("401"))||(null==(n=t.message)?void 0:n.includes("Unauthorized")))return i({title:"Unauthorized",description:"You are logged out.",variant:"destructive"}),void setTimeout(()=>{window.location.href="/auth"},500);i({title:"Error",description:"Failed to vote. Please try again.",variant:"destructive"})},onSuccess:t=>{a(e=>({...e,upvotes:t.upvotes,downvotes:t.downvotes,userVote:t.userVote})),e&&e()},onSettled:()=>{setTimeout(()=>d(null),300)}}),f=qn({mutationFn:async({optionIds:t})=>{var e;const n=await(null==(e=window.__getDynamicToken)?void 0:e.call(window)),r=await fetch(`/api/polls/${o.id}/vote`,{method:"POST",headers:{"Content-Type":"application/json",...n?{Authorization:`Bearer ${n}`}:{}},credentials:"include",body:JSON.stringify({optionIds:t})});if(!r.ok){const t=await r.text();throw new Error(t||"Failed to submit vote")}return await r.json()},onError:t=>{i({title:"Error",description:"Failed to submit vote. Please try again.",variant:"destructive"})},onSuccess:t=>{a(e=>({...e,hasVoted:!0,options:t.options||e.options,totalVotes:t.totalVotes||e.totalVotes})),l([]),i({title:"Vote submitted!",description:"Your vote has been recorded."}),e&&e()}}),m=(t,e)=>!!s||((t=>{i({title:"Authentication Required",description:`Please connect your wallet to ${t}.`,variant:"default",action:Gt.jsx(kk,{variant:"outline",size:"sm",onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},children:"Connect Wallet"})})})(t),!1),p=t=>{m("vote on polls")&&(h.isPending||(d(t),h.mutate({voteType:t})))},g=!o.hasVoted&&c.length>0;return Gt.jsxs("article",{className:"bg-[#EAEAEA05] border border-[#525252] overflow-hidden",children:[Gt.jsxs("div",{className:"px-4 py-3 text-[#8E8E93] bg-[#525252] flex items-center justify-between",children:[Gt.jsx("div",{className:"flex items-center gap-3",children:Gt.jsx("span",{className:" text-base font-normal underline cursor-pointer hover:text-gray-200 transition-colors",onClick:t=>{t.stopPropagation(),m("view user profiles")&&(window.location.href=`/u/${o.author.username}`)},children:o.author.username||"user1234"})}),Gt.jsx("div",{className:"flex items-center gap-2",children:Gt.jsx("span",{className:" text-sm",children:ra(o.createdAt)})})]}),Gt.jsxs("div",{className:"px-6 py-6 cursor-pointer",onClick:()=>{m("view poll details")&&(window.location.href=`/poll?id=${o.id}`)},children:[Gt.jsx("h3",{className:"text-xl font-normal text-[#E8EAE9] mb-4 leading-normal",children:o.title}),o.description&&Gt.jsx("div",{className:"text-gray-400 mb-4 text-sm",children:((t,e=200)=>t.length<=e?t:t.substring(0,e).trim()+"...")(o.description,100)}),Gt.jsx("div",{className:"space-y-3 mb-4",children:o.options&&o.options.map(t=>{const e=o.hasVoted||o.totalVotes>0,n=o.totalVotes>0?Math.round(t.voteCount/o.totalVotes*100):0,r=c.includes(t.id);return Gt.jsx("div",{className:"relative cursor-pointer",onClick:e=>{var n,r;e.stopPropagation(),n=t.id,r=o.allowMultipleChoices,m("select poll options")&&(o.hasVoted||l(t=>r?t.includes(n)?t.filter(t=>t!==n):[...t,n]:[n]))},children:Gt.jsxs("div",{className:"relative rounded h-12 flex items-center px-4 overflow-hidden border "+(r?"border-blue-500":"border-gray-600"),children:[e&&Gt.jsx("div",{className:"absolute inset-0 bg-[#5a5a5a] transition-all duration-300",style:{width:`${n}%`}}),Gt.jsx("div",{className:"relative z-10 flex items-center justify-center w-full",children:Gt.jsxs("span",{className:"text-white text-base",children:[t.text," ",e&&Gt.jsxs("span",{className:"text-gray-400",children:["[",n,"%]"]})]})})]})},t.id)})}),g&&Gt.jsx("div",{className:"flex gap-2",onClick:t=>t.stopPropagation(),children:Gt.jsx(kk,{onClick:()=>{m("submit poll votes")&&(0===c.length||f.isPending||f.mutate({optionIds:c}))},disabled:f.isPending,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:f.isPending?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(ws,{className:"w-4 h-4 mr-2 animate-spin"}),"Voting..."]}):"Vote"})})]}),Gt.jsxs("div",{className:"flex items-stretch border-t border-gray-600",children:[Gt.jsxs("div",{className:"flex items-stretch",onClick:t=>t.stopPropagation(),children:[Gt.jsxs("button",{"aria-label":"Upvote",onClick:t=>{t.stopPropagation(),p("up")},disabled:h.isPending,className:`flex items-center gap-2 md:gap-3 px-4 md:px-8 py-3 md:py-4 border-r border-gray-600 transition-colors ${"up"===(null==(n=o.userVote)?void 0:n.voteType)?"text-blue-500 bg-blue-500/5":"text-white hover:bg-gray-800/50"} ${h.isPending?"opacity-50 cursor-not-allowed":""}`,children:[h.isPending&&"up"===u?Gt.jsx(ws,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):Gt.jsx($s,{fill:"white",className:"w-4 h-4 md:w-5 md:h-5",strokeWidth:2.5}),Gt.jsx("span",{className:"text-base md:text-lg font-normal",children:o.upvotes})]}),Gt.jsxs("button",{"aria-label":"Downvote",onClick:t=>{t.stopPropagation(),p("down")},disabled:h.isPending,className:`flex items-center gap-2 md:gap-3 px-4 md:px-8 py-3 md:py-4 border-r border-gray-600 transition-colors ${"down"===(null==(r=o.userVote)?void 0:r.voteType)?"text-orange-500 bg-orange-500/5":"text-white hover:bg-gray-800/50"} ${h.isPending?"opacity-50 cursor-not-allowed":""}`,children:[h.isPending&&"down"===u?Gt.jsx(ws,{className:"w-4 h-4 md:w-5 md:h-5 animate-spin"}):Gt.jsx($s,{fill:"white",className:"rotate-180 h-4 w-4 md:h-5 md:w-5"}),Gt.jsx("span",{className:"text-base md:text-lg font-normal hidden sm:inline",children:o.downvotes})]})]}),Gt.jsx("div",{className:"flex-1"}),Gt.jsxs("div",{className:"flex items-stretch",onClick:t=>t.stopPropagation(),children:[Gt.jsx("button",{onClick:t=>{t.stopPropagation(),m("view comments")&&(window.location.href=`/poll?id=${o.id}`)},className:"flex items-center gap-3 px-8 py-4 text-white hover:bg-gray-800/50 transition-colors",children:Gt.jsx(ks,{className:"w-5 h-5",strokeWidth:2})}),Gt.jsx("button",{"aria-label":"Bookmark",onClick:t=>{t.stopPropagation(),m("bookmark polls")},className:"flex items-center justify-center px-8 py-4 text-white hover:bg-gray-800/50 transition-colors",children:Gt.jsx(Li,{className:"w-5 h-5",strokeWidth:2})})]})]})]})}function ZF({onCreatePost:t,bowls:e,organizations:n}){const{isAuthenticated:r}=pk(),{toast:i}=rr(),[s,o]=Ct.useState({}),[a,c]=Ct.useState("all"),[l,u]=Ct.useState("hot"),[d,h]=Ct.useState(null),[f,m]=Ct.useState(""),{data:p=[],isLoading:g,refetch:w}=Vn({queryKey:["polls",l,a],queryFn:async()=>{const t=new URLSearchParams;t.set("sortBy",l),"all"!==a&&t.set("time",a);const e=await fetch(`/api/polls?${t.toString()}`,{credentials:"include"});if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return e.json()}});qn({mutationFn:async({pollId:t,voteType:e})=>{var n;const r=await(null==(n=window.__getDynamicToken)?void 0:n.call(window)),i=await fetch(`/api/polls/${t}/votes`,{method:"POST",headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}},credentials:"include",body:JSON.stringify({voteType:e})});if(!i.ok){const t=await i.text();throw new Error(t||"Failed to vote")}return await i.json()},onError:t=>{var e,n;if(h(null),(null==(e=t.message)?void 0:e.includes("401"))||(null==(n=t.message)?void 0:n.includes("Unauthorized")))return i({title:"Unauthorized",description:"You are logged out.",variant:"destructive"}),void setTimeout(()=>{window.location.href="/auth"},500);i({title:"Error",description:"Failed to vote. Please try again.",variant:"destructive"})},onSuccess:()=>{w()},onSettled:()=>{setTimeout(()=>h(null),300)}});const y=Ct.useMemo(()=>{if(!f)return p;const t=f.toLowerCase();return p.filter(e=>{var n,r,i;const s=e.title.toLowerCase().includes(t),o=(null==(n=e.description)?void 0:n.toLowerCase().includes(t))||!1,a=(null==(i=null==(r=e.author)?void 0:r.username)?void 0:i.toLowerCase().includes(t))||!1;return s||o||a})},[p,f]);return Gt.jsx("div",{className:"flex gap-6 max-w-[1600px] mx-auto px-4 py-6",children:Gt.jsxs("div",{className:"flex-1 min-w-0",children:[Gt.jsx(eB,{placeholder:"Blow the whistle .....",onSearch:t=>m(t)}),Gt.jsx(nB,{sortBy:l,timeFilter:a,onSortChange:u,onTimeFilterChange:c}),Gt.jsx("div",{className:"space-y-4",children:g?Gt.jsx(Gt.Fragment,{children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):0===y.length?Gt.jsx("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden",children:Gt.jsxs("div",{className:"text-center py-16 px-4",children:[Gt.jsx(Hi,{className:"h-12 w-12 text-gray-600 mx-auto mb-4"}),f?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-3",children:"No results found"}),Gt.jsx("p",{className:"text-gray-500 text-lg mb-6 max-w-md mx-auto",children:"Try adjusting your search terms."})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("h3",{className:"text-2xl font-bold text-gray-300 mb-3",children:"No polls yet"}),Gt.jsx("p",{className:"text-gray-500 text-lg mb-6 max-w-md mx-auto",children:"Be the first to create a poll and see what the community thinks!"}),Gt.jsxs(kk,{onClick:()=>{(r||((t=>{i({title:"Authentication Required",description:`Please connect your wallet to ${t}.`,variant:"default",action:Gt.jsx(kk,{variant:"outline",size:"sm",onClick:()=>{const t=new CustomEvent("triggerWalletConnect");window.dispatchEvent(t)},children:"Connect Wallet"})})})("create a poll"),0))&&(window.location.href="/create-post?type=poll")},className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg",children:[Gt.jsx(Es,{className:"h-5 w-5 mr-2"}),"Create Poll"]})]})]})}):y.map(t=>(s[t.id],Gt.jsx(YF,{poll:t},t.id)))})]})})}const GF=Ei("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function QF({className:t,variant:e,...n}){return Gt.jsx("div",{className:na(GF({variant:e}),t),...n})}const XF=EF({content:AF().min(1,"Comment cannot be empty").max(1e3,"Comment must be less than 1000 characters")});function JF({postId:t,onSuccess:e}){const{toast:n}=rr(),r=U$({resolver:Z$(XF),defaultValues:{content:""}}),i=qn({mutationFn:async e=>(await Hn("POST",`/api/posts/${t}/comments`,e)).json(),onSuccess:()=>{n({title:"Comment posted!",description:"Your comment has been added successfully"}),r.reset(),Yn.invalidateQueries({queryKey:["/api/posts",t,"comments"]}),null==e||e()},onError:t=>{n({title:"Error",description:t.message||"Failed to post comment",variant:"destructive"})}});return Gt.jsx("div",{className:"w-full bg-[#EAEAEA05] border-t border-gray-700",children:Gt.jsxs("form",{onSubmit:r.handleSubmit(t=>{i.mutate(t)}),className:"flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center px-6 py-6 space-x-4 flex-1",children:[Gt.jsx("div",{className:"w-12 h-12 bg-yellow-500 flex-shrink-0"}),Gt.jsx("input",{type:"text",placeholder:"post your reply",...r.register("content"),className:"w-full bg-transparent text-gray-300 text-xl font-mono placeholder-gray-500 focus:outline-none"})]}),Gt.jsx(kk,{type:"submit",disabled:i.isPending||!r.watch("content").trim(),className:"flex items-center justify-center px-8 py-12 text-black font-semibold bg-gradient-to-r from-[#bfe2ff] to-[#e0f0ff] hover:opacity-90 transition border-l border-gray-700 rounded-none",children:i.isPending?"Posting...":Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(zi,{className:"h-6 w-6 mr-2 rotate-180"}),"POST"]})})]})})}const tL=EF({content:AF().min(1,"Reply cannot be empty").max(1e3,"Reply must be less than 1000 characters")});function eL({comment:t,postId:e,onSuccess:n,depth:r=0}){const{toast:i}=rr(),{user:s}=pk(),o=Rn(),[a,c]=Ct.useState(!1),[l,u]=Ct.useState(!1),d=U$({resolver:Z$(tL),defaultValues:{content:""}}),h=qn({mutationFn:async n=>{const r={content:n.content,parentId:t.id};return(await Hn("POST",`/api/posts/${e}/comments`,r)).json()},onSuccess:()=>{i({title:"Reply posted!",description:"Your reply has been added successfully"}),d.reset(),c(!1),o.invalidateQueries({queryKey:["/api/posts",e,"comments"]}),o.invalidateQueries({queryKey:["comments"]}),null==n||n()},onError:t=>{i({title:"Error",description:t.message||"Failed to post reply",variant:"destructive"})}}),f=qn({mutationFn:async t=>{var e;const n=await fetch(`/api/comments/${t}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(e=window.__getDynamicToken)?void 0:e.call(window))}`}});if(!n.ok)throw new Error("Failed to delete comment");return n.json()},onSuccess:()=>{i({title:"Comment deleted",description:"Your comment has been deleted successfully"}),o.invalidateQueries({queryKey:["/api/posts",e,"comments"]}),o.invalidateQueries({queryKey:["comments"]}),null==n||n()},onError:t=>{i({title:"Error",description:t.message||"Failed to delete comment",variant:"destructive"})}}),m=r<3;return Gt.jsxs("div",{className:"border border-[#3d3d3d] bg-[#EAEAEA05] transition-colors",children:[Gt.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[Gt.jsx("div",{className:"flex items-center gap-4",children:Gt.jsxs("div",{className:"flex flex-row gap-4 items-center",children:[Gt.jsx("span",{className:"text-gray-300 font-semibold underline cursor-pointer hover:text-white text-base",children:(()=>{const e=t.author,n=e.username||"User";return e.isCompanyVerified&&e.companyName?`${n} from ${e.companyName}`:n})()}),Gt.jsx("span",{className:"text-gray-500 text-sm",children:ra(t.createdAt||"")})]})}),Gt.jsx("div",{className:"flex items-center gap-2",children:(null==s?void 0:s.id)&&t.authorId&&((null==s?void 0:s.id)===t.authorId||(null==s?void 0:s.id)===t.authorId.toString())&&Gt.jsx("div",{className:"flex justify-end",children:Gt.jsxs(kk,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"text-red-500 hover:text-red-700 hover:bg-red-500/10",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-1"})," Delete"]})})})]}),Gt.jsx("div",{className:"px-6 pb-4",children:Gt.jsx("div",{className:"text-gray-300 text-lg leading-relaxed",children:Gt.jsx(eD,{content:t.content,className:"text-gray-300 text-lg"})})}),Gt.jsxs("div",{className:"flex items-stretch border-t border-gray-700",children:[Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsx(WF,{targetId:t.id,targetType:"comment",upvotes:t.upvotes,downvotes:t.downvotes,userVote:t.userVote,onUpdate:()=>{o.invalidateQueries({queryKey:["/api/posts",e,"comments"]}),null==n||n()},layout:"horizontal",showCount:!0})}),Gt.jsx("div",{className:"flex-1"}),Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsxs("div",{className:"flex items-center",children:[Gt.jsx("button",{className:"flex items-center justify-center border-r border-gray-600  px-6 text-gray-400 hover:text-white transition-colors",children:Gt.jsx(Li,{className:"h-5 w-5"})}),m&&Gt.jsxs("button",{onClick:()=>c(!a),className:"flex items-center gap-2 px-6 text-gray-400 hover:text-white transition-colors ",children:[Gt.jsx(ks,{className:"h-5 w-5"}),Gt.jsx("span",{className:"text-sm",children:"Reply"})]})]})})]}),a&&m&&Gt.jsx("div",{className:"border-t border-gray-700 p-6",children:Gt.jsx(CF,{...d,children:Gt.jsxs("form",{onSubmit:d.handleSubmit(t=>{h.mutate(t)}),className:"space-y-4",children:[Gt.jsx(IF,{control:d.control,name:"content",render:({field:t})=>Gt.jsxs(jF,{children:[Gt.jsx(zF,{children:Gt.jsx(RF,{placeholder:"Write your reply...",rows:3,className:"resize-none text-base border border-gray-600 bg-[#1a1a1a] text-white placeholder-gray-400 focus:border-gray-300 rounded-sm transition-all duration-300",...t})}),Gt.jsx(_F,{className:"text-red-400"})]})}),Gt.jsxs("div",{className:"flex justify-end space-x-3",children:[Gt.jsx(kk,{type:"button",variant:"outline",size:"sm",onClick:()=>{c(!1),d.reset()},className:"px-6 py-2 border border-gray-600 text-gray-300 hover:bg-gray-800 hover:text-white transition-all duration-300",children:"Cancel"}),Gt.jsx(kk,{type:"submit",size:"sm",disabled:h.isPending||!d.watch("content").trim(),className:"px-6 py-2 bg-gray-700 text-white hover:bg-gray-600 transition-all duration-300",children:h.isPending?Gt.jsxs("div",{className:"flex items-center space-x-2",children:[Gt.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),Gt.jsx("span",{children:"Posting..."})]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Is,{className:"h-4 w-4 mr-2"}),"Post Reply"]})})]})]})})}),t.replies&&t.replies.length>0&&Gt.jsx("div",{className:"border-t border-gray-700",children:Gt.jsx("div",{className:"ml-8 pl-4 border-l-2 border-gray-600",children:t.replies.map(t=>Gt.jsx("div",{className:"first:pt-4 last:pb-0",children:Gt.jsx(eL,{comment:t,postId:e,onSuccess:n,depth:r+1})},t.id))})}),Gt.jsx(rR,{open:l,onOpenChange:u,children:Gt.jsxs(oR,{className:"bg-[#1a1a1a] border border-gray-600",children:[Gt.jsxs(aR,{children:[Gt.jsx(lR,{className:"text-white",children:"Delete this comment?"}),Gt.jsx(uR,{className:"text-gray-400",children:"This action cannot be undone. This will permanently delete your comment."})]}),Gt.jsxs(cR,{children:[Gt.jsx(hR,{className:"bg-gray-700 text-white border-gray-600 hover:bg-gray-600",children:"Cancel"}),Gt.jsx(dR,{className:"bg-red-600 hover:bg-red-700 text-white",onClick:()=>{f.mutate(t.id),u(!1)},disabled:f.isPending,children:f.isPending?"Deleting...":"Delete"})]})]})})]})}function nL(){const[t,e]=je(),{user:n,isAuthenticated:r,isLoading:i}=pk(),{toast:s}=rr(),[o,a]=Ct.useState(!0),[c,l]=Ct.useState(!1),u=new URLSearchParams(window.location.search).get("id"),{data:d,isLoading:h,refetch:f}=Vn({queryKey:["post",u],queryFn:async()=>{if(!u)throw new Error("No post ID provided");const t=await fetch(`/api/posts/${u}`,{credentials:"include"});if(!t.ok)throw new Error(`${t.status}: ${t.statusText}`);return t.json()},enabled:!!u&&r,refetchInterval:5e3,refetchIntervalInBackground:!0}),{items:m,isLoading:p,hasMore:g,error:w,loadMore:y,refresh:v,setItems:b}=function(t,e=20,n){return bR(t,e,n)}(async(t,e)=>{if(!u)throw new Error("No post ID provided");const n=await fetch(`/api/posts/${u}/comments?page=${t}&limit=${e}`,{credentials:"include"});if(!n.ok)throw new Error(`${n.status}: ${n.statusText}`);const r=await n.json();return{items:r,hasMore:r.length===e,total:r.length}},20,{enabled:!!u&&r,threshold:.1,rootMargin:"100px"}),x=Rn();return i?Gt.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6 w-full",children:[1,2,3].map(t=>Gt.jsx(vR,{className:"h-48 w-full mb-4"},t))}):Gt.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 pt-4 pb-6 w-full max-w-[1200px] mx-auto",children:[Gt.jsx("div",{className:"mb-6",children:Gt.jsxs(kk,{variant:"ghost",onClick:()=>e("/"),className:"flex items-center space-x-2 text-gray-400 hover:text-gray-300 hover:bg-gray-800",children:[Gt.jsx(zi,{className:"h-4 w-4"}),Gt.jsx("span",{children:"Back to Feed"})]})}),h?Gt.jsx(bk,{className:" border border-gray-600 shadow-lg rounded-lg",children:Gt.jsx(xk,{className:"p-6",children:Gt.jsxs("div",{className:"animate-pulse space-y-4",children:[Gt.jsxs("div",{className:"flex items-center space-x-3",children:[Gt.jsx(vR,{className:"h-8 w-8 rounded-full"}),Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx(vR,{className:"h-4 w-32"}),Gt.jsx(vR,{className:"h-3 w-24"})]})]}),Gt.jsx(vR,{className:"h-6 w-full mb-3"}),Gt.jsx(vR,{className:"h-20 w-full mb-4"}),Gt.jsxs("div",{className:"flex items-center space-x-4",children:[Gt.jsx(vR,{className:"h-8 w-16"}),Gt.jsx(vR,{className:"h-8 w-16"}),Gt.jsx(vR,{className:"h-8 w-16"})]})]})})}):d?Gt.jsxs(Gt.Fragment,{children:[Gt.jsxs("article",{className:"bg-[#EAEAEA05] border border-[#525252] overflow-hidden",children:[Gt.jsxs("div",{className:" px-8 py-4 flex items-center justify-between",children:[Gt.jsxs("div",{className:"flex items-center gap-4 min-w-0 flex-1",children:[Gt.jsx("span",{className:"text-white text-sm font-normal underline cursor-pointer hover:text-gray-200 transition-colors truncate",onClick:t=>{t.stopPropagation(),d.isAnonymous||(window.location.href=`/u/${d.author.username}`)},children:(()=>{if(!d)return"";if(d.isAnonymous)return"anonymous";const t=d.author,e=t.username||"User";return t.isCompanyVerified&&t.companyName?`${e} from ${t.companyName}`:e})()}),Gt.jsx("span",{className:"text-[#525252] text-sm ",children:ra(d.createdAt||"")})]}),Gt.jsxs("div",{className:"flex items-center gap-2  flex-shrink-0",children:[Gt.jsx("div",{className:" p-1 flex items-center justify-center flex-shrink-0 ",children:Gt.jsx(_s,{className:"w-7 h-7 fill-green-500 text-green-500"})}),Gt.jsx("div",{className:"bg-green-400 p-1.5 flex items-center justify-center flex-shrink-0",children:Gt.jsx("svg",{className:"w-7 h-7 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:Gt.jsx("path",{d:"M12 2L4 6v6c0 5.5 3.8 10.7 8 12 4.2-1.3 8-6.5 8-12V6l-8-4z"})})}),(null==n?void 0:n.id)&&(null==(k=d.author)?void 0:k.id)&&(n.id===d.author.id||(null==n?void 0:n.id)===(null==d?void 0:d.author.id.toString()))&&Gt.jsxs(E_,{children:[Gt.jsx(S_,{asChild:!0,children:Gt.jsx(kk,{variant:"ghost",size:"icon",className:"h-7 w-7 text-gray-300 hover:text-white",onClick:t=>t.stopPropagation(),children:Gt.jsx(os,{className:"h-3 w-3 rotate-90"})})}),Gt.jsxs(C_,{align:"end",className:"w-48",onClick:t=>t.stopPropagation(),children:[Gt.jsxs(T_,{onClick:()=>l(!0),className:"text-red-600",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-2"})," Delete"]}),Gt.jsx(I_,{})]})]})]})]}),Gt.jsxs("div",{className:"px-6 cursor-default",children:[Gt.jsx("h1",{className:"text-2xl font-normal text-white my-6 leading-normal",children:d.title}),Gt.jsx("div",{className:"text-[#8E8E93] text-base leading-relaxed mb-4",children:Gt.jsx("div",{className:"prose prose-base max-w-none",children:Gt.jsx(eD,{content:d.content,className:"text-gray-300"})})}),Gt.jsxs("div",{className:"flex items-center justify-between my-8 text-gray-400 text-sm mb-4",children:[Gt.jsxs("div",{className:"flex items-center gap-1",children:[Gt.jsx(as,{className:"w-4 h-4"}),Gt.jsxs("span",{children:[d.viewCount," VIEWS"]})]}),Gt.jsxs("div",{className:"flex items-center gap-1",children:[Gt.jsx(ns,{className:"w-4 h-4"}),Gt.jsx("span",{children:(N=null==d?void 0:d.createdAt,N?("string"==typeof N?new Date(N):N).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}).toUpperCase().replace(",",""):"")})]})]}),d.organization&&Gt.jsx("div",{className:"mb-4",children:Gt.jsx(QF,{className:"bg-gray-700 text-gray-300 border-none px-3 py-1 text-sm",children:d.organization.name})}),d.imageUrl&&Gt.jsx("div",{className:"mb-4 rounded-lg overflow-hidden",children:Gt.jsx("img",{src:d.imageUrl,alt:"Post attachment",className:"w-full max-h-96 object-cover"})})]}),Gt.jsxs("div",{className:"flex items-stretch bg-[#EAEAEA05]  border-t border-gray-600",children:[Gt.jsx("div",{className:"flex items-stretch",children:Gt.jsx(WF,{targetId:d.id,targetType:"post",upvotes:d.upvotes,downvotes:d.downvotes,userVote:d.userVote,onUpdate:f,layout:"horizontal",showCount:!0})}),Gt.jsx("div",{className:"flex-1"}),Gt.jsxs("div",{className:"flex items-stretch ",onClick:t=>t.stopPropagation(),children:[Gt.jsx("button",{"aria-label":"Bookmark",className:"flex items-center justify-center border-r border-gray-400 px-6 py-3 text-white hover:bg-gray-800/50 transition-colors",children:Gt.jsx(Li,{className:"w-4 h-4",strokeWidth:2})}),Gt.jsx(KF,{size:"lg",url:window.location.href,title:d.title,description:d.content})]})]})]}),o&&Gt.jsxs("div",{className:"border bg-[#EAEAEA05] border-gray-700  overflow-hidden rounded-md",children:[Gt.jsxs("div",{className:" bg-[#EAEAEA05] flex items-center justify-between px-6 py-4 ",children:[Gt.jsxs("div",{className:"flex items-center space-x-8",children:[Gt.jsx("h3",{className:"text-gray-300 text-lg",children:"Express your view about the company"}),Gt.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-green-500",children:Gt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-black",viewBox:"0 0 20 20",fill:"currentColor",children:Gt.jsx("path",{d:"M10 2a8 8 0 11-8 8 8 8 0 018-8m0 2a6 6 0 106 6 6 6 0 00-6-6z"})})}),Gt.jsx("span",{className:"text-gray-300 underline cursor-pointer text-lg",children:"Abstract"})]}),Gt.jsxs("div",{className:"flex",children:[Gt.jsx("div",{className:"flex items-center justify-center bg-green-400 hover:bg-green-300 transition w-12 h-10",children:Gt.jsx(_s,{className:"h-5 w-5 text-green-700",fill:"currentColor"})}),Gt.jsx("div",{className:"flex items-center justify-center bg-red-400 hover:bg-red-300 transition w-12 h-10",children:Gt.jsx(zs,{className:"h-5 w-5 text-red-800",fill:"currentColor"})})]})]}),Gt.jsx("div",{className:"hidden",children:Gt.jsx("form",{className:"comment-form",children:Gt.jsx(JF,{postId:d.id,onSuccess:v})})}),Gt.jsx("div",{className:" border-t border-gray-700 bg-[#0c0c0c]",children:Gt.jsx(JF,{postId:d.id,onSuccess:v})}),Gt.jsx("div",{className:"py-6 border-t border-gray-700 bg-[#0c0c0c] text-center",children:Gt.jsxs("h3",{className:"text-gray-400 tracking-wide text-sm font-medium",children:["[ ",(null==m?void 0:m.length)||0," COMMENTS ]"]})}),Gt.jsxs("div",{className:"divide-y divide-gray-700 bg-[#EAEAEA05]",children:[p&&0===m.length?Gt.jsx(NR,{count:3}):m&&m.length>0?m.map(t=>Gt.jsxs("div",{className:"transition-colors mb-4 border-y border-gray-700",children:[(null==n?void 0:n.id)&&t.authorId&&(n.id===t.authorId||n.id===t.authorId.toString())&&Gt.jsx("div",{className:"flex justify-end mb-2",children:Gt.jsxs(kk,{variant:"ghost",size:"sm",onClick:()=>(async t=>{var e;await fetch(`/api/comments/${t}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(e=window.__getDynamicToken)?void 0:e.call(window))}`}}),v()})(t.id),className:"text-red-500 hover:text-red-700",children:[Gt.jsx(Rs,{className:"h-4 w-4 mr-1"})," Delete"]})}),Gt.jsx(eL,{comment:t,postId:d.id,onSuccess:v,depth:0},t.id)]},t.id)):Gt.jsxs("div",{className:"p-8 text-center",children:[Gt.jsx(ks,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),Gt.jsx("p",{className:"text-gray-400",children:"No comments yet. Be the first to comment!"})]}),Gt.jsx(xR,{isLoading:p,hasMore:g,error:w,onRetry:v,onLoadMore:y,loadingText:"Loading more comments...",endText:"You've reached the end of the comments! ",errorText:"Failed to load more comments"})]})]}),Gt.jsx(rR,{open:c,onOpenChange:l,children:Gt.jsxs(oR,{onClick:t=>t.stopPropagation(),children:[Gt.jsxs(aR,{children:[Gt.jsx(lR,{children:"Delete this post?"}),Gt.jsx(uR,{children:"This action cannot be undone. This will permanently delete your post and remove its data."})]}),Gt.jsxs(cR,{children:[Gt.jsx(hR,{children:"Cancel"}),Gt.jsx(dR,{className:"bg-red-600 hover:bg-red-700",onClick:async()=>{var t;if(d&&d.authorId===(null==n?void 0:n.id))try{if(!(await fetch(`/api/posts/${d.id}`,{method:"DELETE",credentials:"include",headers:{Authorization:`Bearer ${await(null==(t=window.__getDynamicToken)?void 0:t.call(window))}`}})).ok)return void s({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"});await x.invalidateQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),x.removeQueries({predicate:t=>{const e=t.queryKey;return Array.isArray(e)&&("posts"===e[0]||"/api/posts"===e[0]||"bowl-posts"===e[0]||"organization-posts"===e[0])}}),s({title:"Post deleted",description:"Your post has been permanently deleted."}),window.history.length>1?window.history.back():e("/")}catch(r){s({title:"Error",description:"Failed to delete post. Please try again.",variant:"destructive"}),e("/")}},children:"Delete"})]})]})})]}):Gt.jsx(bk,{className:" border border-gray-600",children:Gt.jsxs(xk,{className:"p-12 text-center",children:[Gt.jsx("div",{className:"mb-6",children:Gt.jsx(ks,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"})}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Post not found"}),Gt.jsx("p",{className:"text-gray-400 mb-6",children:"The post you're looking for doesn't exist or has been removed."}),Gt.jsx(kk,{onClick:()=>e("/"),className:"bg-gray-700 hover:bg-gray-600 text-white",children:"Back to Feed"})]})})]});var N,k}function rL(){const t=Oe().id||"",{toast:e}=rr(),{isAuthenticated:n,user:r,getAccessToken:i}=pk(),[,s]=je(),o=Rn(),[a,c]=Ct.useState("about"),[l,u]=Ct.useState([]),[d,h]=Ct.useState([]),{data:f,isLoading:m,error:p}=Vn({queryKey:["/api/bowls",t],queryFn:async()=>{const e=await i(),n=await fetch(`/api/bowls/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!n.ok)throw new Error(`Failed to fetch bowl: ${n.status}`);return n.json()},enabled:!!t,retry:!1}),{data:g,isLoading:w}=Vn({queryKey:["/api/posts",{bowlId:null==f?void 0:f.id,type:"discussion"}],queryFn:async()=>{if(!(null==f?void 0:f.id))throw new Error("Bowl not loaded");const t=await i(),e=await fetch(`/api/posts?bowlId=${f.id}&sortBy=hot`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return e.json()},enabled:!!(null==f?void 0:f.id)});Ct.useEffect(()=>{if(g){const t=g.filter(t=>"poll"===t.type),e=g.filter(t=>"poll"!==t.type);u(t),h(e)}},[g]);const{data:y,isLoading:v}=Vn({queryKey:["/api/bowls",null==f?void 0:f.id,"following"],queryFn:async()=>{const t=await i();if(!(null==f?void 0:f.id)||!n)throw new Error("Not authenticated or bowl not found");const e=await fetch(`/api/bowls/${f.id}/following`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},credentials:"include"});if(!e.ok){if(404===e.status)return{isFollowing:!1};throw new Error(`Failed to check follow status: ${e.status}`)}return e.json()},enabled:!!(null==f?void 0:f.id)&&n}),b=(null==y?void 0:y.isFollowing)||!1,x=qn({mutationFn:async()=>{if(!(null==f?void 0:f.id))throw new Error("Bowl not loaded");b?await Hn("DELETE",`/api/bowls/${f.id}/follow`,{}):await Hn("POST",`/api/bowls/${f.id}/follow`,{})},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/bowls",null==f?void 0:f.id,"following"]}),e({title:b?"Left channel":"Joined!",description:b?"You've left this channel.":"You're now following this channel."})},onError:t=>{e({title:"Error",description:t.message||"Failed to update follow status",variant:"destructive"})}}),N=t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e3?`${Math.floor(t/1e3)}k`:t.toString(),k={members:(null==f?void 0:f.memberCount)||3e4,posts:(null==g?void 0:g.length)||4e4,online:25e3};return p&&!m?Gt.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Bowl Not Found"}),Gt.jsx("p",{className:"text-gray-400 mb-6",children:"The channel you're looking for doesn't exist."}),Gt.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2 bg-white text-black rounded hover:bg-gray-200 transition-colors",children:"Go Home"})]})}):m?Gt.jsxs("div",{className:"min-h-screen bg-black text-white",children:[Gt.jsx("div",{className:"px-6 pt-6 pb-4",children:Gt.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Gt.jsx(vR,{className:"h-10 w-32 bg-gray-800 rounded-full"}),Gt.jsx(vR,{className:"h-10 w-32 bg-gray-800 rounded-full"}),Gt.jsx(vR,{className:"h-10 w-32 bg-gray-800 rounded-full"})]})}),Gt.jsx("div",{className:"px-6",children:Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsx(vR,{className:"h-8 w-48 bg-gray-800"}),Gt.jsx(vR,{className:"h-10 w-24 bg-gray-800"})]}),Gt.jsxs("div",{className:"flex gap-16",children:[Gt.jsx(vR,{className:"h-6 w-16 bg-gray-800"}),Gt.jsx(vR,{className:"h-6 w-16 bg-gray-800"}),Gt.jsx(vR,{className:"h-6 w-16 bg-gray-800"})]}),Gt.jsx(vR,{className:"h-20 w-full bg-gray-800"}),Gt.jsx(vR,{className:"h-40 w-full bg-gray-800"})]})})]}):Gt.jsxs("div",{className:"min-h-screen bg-black text-white",children:[Gt.jsx("div",{className:"px-6 pt-6 pb-4",children:Gt.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Gt.jsx("button",{onClick:()=>c("about"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("about"===a?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"ABOUT"}),Gt.jsx("button",{onClick:()=>c("posts"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("posts"===a?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POSTS"}),Gt.jsx("button",{onClick:()=>c("polls"),className:"px-6 py-2 rounded-full font-medium text-sm transition-all "+("polls"===a?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POLLS"})]})}),Gt.jsxs("div",{className:"px-6",children:["about"===a&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsxs("div",{className:"flex items-center justify-between",children:[Gt.jsxs("h1",{className:"text-2xl font-normal text-white",children:["/",(null==f?void 0:f.name)||"PRIVACY"]}),n&&Gt.jsx("button",{onClick:()=>x.mutate(),disabled:x.isPending||v,className:"px-4 py-2 bg-white text-black font-medium rounded flex items-center gap-2 hover:bg-gray-200 transition-colors disabled:opacity-50",children:b?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Ms,{className:"h-4 w-4"}),"LEAVE"]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(Es,{className:"h-4 w-4"}),"JOIN"]})})]}),Gt.jsxs("div",{className:"flex justify-between gap-16 text-gray-500 border-[0.2px] border-gray-700",children:[Gt.jsxs("div",{className:"flex items-center px-8 py-4 gap-2",children:[Gt.jsx(Vs,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-sm",children:N(k.members)})]}),Gt.jsxs("div",{className:"flex items-center px-12 py-4 gap-2 border-y-0 border-[0.2px] border-gray-700",children:[Gt.jsx(ks,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-sm",children:N(k.posts)})]}),Gt.jsxs("div",{className:"flex items-center px-8 py-4 gap-2",children:[Gt.jsx(Hi,{className:"h-4 w-4"}),Gt.jsx("span",{className:"text-sm",children:N(k.online)})]})]}),Gt.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:(null==f?void 0:f.description)||"Welcome to the Web3 Privacy Collective, a community focused on privacy in the decentralized web. We unite enthusiasts and developers who believe privacy is a fundamental right. Join us for discussions, workshops, and events that empower individuals to secure their online presence."}),Gt.jsxs("div",{children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold mb-4 uppercase",children:"ADMIN"}),Gt.jsxs("div",{className:"flex flex-col items-start gap-2",children:[Gt.jsx("div",{className:"w-16 h-16 bg-[#fb923c] rounded"}),Gt.jsx("span",{className:"text-gray-400 text-xs",children:(null==f?void 0:f.createdBy)?f.createdBy:"tery_jang"})]})]}),Gt.jsxs("div",{children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold mb-4 uppercase",children:"TOP CONTENT"}),w?Gt.jsx(Gt.Fragment,{children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden mb-4",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):g&&g.length>0?Gt.jsx("div",{className:"space-y-4",children:g.slice(0,3).map(t=>Gt.jsx(fR,{post:t,onUpdate:()=>{}},t.id))}):Gt.jsxs("div",{className:"bg-[#3a3a3a] p-12 text-center rounded",children:[Gt.jsx(ks,{className:"h-12 w-12 mx-auto mb-4 text-gray-600"}),Gt.jsx("p",{className:"text-gray-400",children:"No posts yet in this channel"})]})]})]}),"posts"===a&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold uppercase",children:"POSTS"}),w?Gt.jsx(Gt.Fragment,{children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden mb-4",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):g&&g.length>0?Gt.jsx("div",{className:"space-y-4",children:d.map(t=>Gt.jsx(fR,{post:t,onUpdate:()=>{}},t.id))}):Gt.jsxs("div",{className:"bg-[#3a3a3a] p-12 text-center rounded",children:[Gt.jsx(ks,{className:"h-12 w-12 mx-auto mb-4 text-gray-600"}),Gt.jsx("p",{className:"text-gray-400",children:"No posts yet in this channel"})]})]}),"polls"===a&&Gt.jsxs("div",{className:"space-y-6",children:[Gt.jsx("h3",{className:"text-white text-sm font-semibold uppercase",children:"POLLS"}),w?Gt.jsx(Gt.Fragment,{children:[1,2,3].map(t=>Gt.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg overflow-hidden mb-4",children:[Gt.jsx("div",{className:"bg-[#3a3a3a] p-4",children:Gt.jsx(vR,{className:"h-6 w-1/4 bg-gray-700"})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsx(vR,{className:"h-6 w-3/4 mb-4 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-full mb-2 bg-gray-700"}),Gt.jsx(vR,{className:"h-4 w-2/3 bg-gray-700"})]}),Gt.jsx("div",{className:"border-t border-gray-700 p-4",children:Gt.jsx(vR,{className:"h-8 w-32 bg-gray-700"})})]},t))}):l&&l.length>0?Gt.jsx("div",{className:"space-y-4",children:l.map(t=>Gt.jsx(fR,{post:t,onUpdate:()=>{}},t.id))}):Gt.jsx("div",{className:"text-center py-12 bg-[#3a3a3a] rounded",children:Gt.jsx("p",{className:"text-gray-400",children:"No polls available"})})]})]})]})}function iL(){const[t,e]=Ct.useState("posts");rr();const{user:n,isAuthenticated:r,getAccessToken:i}=pk(),[s,o]=Ct.useState([]),[a,c]=Ct.useState([]),l=Ct.useCallback(()=>{},[]),{data:u=[],isLoading:d}=Vn({queryKey:["/api/user/saved-posts"],queryFn:async()=>{const t=await i(),e=await fetch("/api/user/saved-posts",{headers:{Authorization:`Bearer ${t}`},credentials:"include"});if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return(await e.json()).map(t=>t.post)},enabled:r,retry:(t,e)=>cD(e)?(window.location.href="/",!1):t<3});if(Ct.useEffect(()=>{if(u){const t=u.filter(t=>"poll"===t.type),e=u.filter(t=>"poll"!==t.type);o(t),c(e)}},[u]),!r)return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white flex items-center justify-center",children:Gt.jsxs("div",{className:"text-center",children:[Gt.jsx(Li,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),Gt.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Sign in to view bookmarks"}),Gt.jsx("p",{className:"text-gray-400",children:"Please sign in to see your saved posts and polls."})]})});const h="posts"===t&&d||"polls"===t&&d;return Gt.jsx("div",{className:"w-full min-h-screen bg-black text-white px-4 pt-6 pb-6",children:Gt.jsxs("div",{className:"max-w-4xl mx-auto",children:[Gt.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[Gt.jsx("button",{onClick:()=>e("posts"),className:"px-8 py-2 rounded-full font-medium text-sm transition-all "+("posts"===t?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POSTS"}),Gt.jsx("button",{onClick:()=>e("polls"),className:"px-8 py-2 rounded-full font-medium text-sm transition-all "+("polls"===t?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"POLLS"}),Gt.jsx("button",{onClick:()=>e("users"),className:"px-8 py-2 rounded-full font-medium text-sm transition-all "+("users"===t?"bg-white text-black":"bg-transparent text-gray-500 hover:text-gray-300"),children:"USERS"})]}),Gt.jsxs("div",{className:"text-center text-gray-600 text-sm mb-8",children:["[ ",(()=>{switch(t){case"posts":return a.length;case"polls":return s.length;default:return 0}})()," TOTAL ]"]}),h?Gt.jsx("div",{className:"flex items-center justify-center py-12",children:Gt.jsx(ws,{className:"w-8 h-8 animate-spin text-gray-600"})}):Gt.jsxs("div",{className:"space-y-4",children:["posts"===t&&Gt.jsx(Gt.Fragment,{children:a.length>0?a.map(t=>Gt.jsx(fR,{post:t,onUpdate:l},t.id)):Gt.jsxs("div",{className:"text-center py-12",children:[Gt.jsx(Li,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No bookmarked posts"}),Gt.jsx("p",{className:"text-gray-500",children:"Posts you bookmark will appear here"})]})}),"polls"===t&&Gt.jsx(Gt.Fragment,{children:s.length>0?s.map(t=>Gt.jsx(fR,{post:t,onUpdate:()=>{}},t.id)):Gt.jsxs("div",{className:"text-center py-12",children:[Gt.jsx(Li,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No bookmarked polls"}),Gt.jsx("p",{className:"text-gray-500",children:"Polls you bookmark will appear here"})]})}),"users"===t&&Gt.jsxs("div",{className:"text-center py-12",children:[Gt.jsx(Li,{className:"w-12 h-12 mx-auto mb-4 text-gray-600"}),Gt.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"User bookmarks coming soon"}),Gt.jsx("p",{className:"text-gray-500",children:"This feature is under development"})]})]})]})})}function sL(){return Gt.jsx("div",{children:Gt.jsx("h1",{children:"Settings"})})}function oL({onCreatePost:t,onCreateReview:e}){const{isAuthenticated:n,user:r}=pk(),[i,s]=je();Rn();const[o,a]=Ct.useState(new Set),[c,l]=Ct.useState(!1),[u,d]=Ct.useState(!0),[h,f]=Ct.useState(()=>window.innerWidth<1024),m=Ct.useRef(null);Ct.useEffect(()=>{const t=()=>{const t=window.innerWidth<1024;f(t),d(e=>(!t||!e)&&(!t&&!e||e))};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const{data:p}=Vn({queryKey:["/api/user/favorites"],retry:!1,enabled:!0});Ct.useEffect(()=>{const t=localStorage.getItem("bowl-favorites");if(t)try{const e=JSON.parse(t);a(new Set(e))}catch(e){}},[]),Ct.useEffect(()=>{if(p){const t=new Set(p.map(t=>t.bowlId));a(t),localStorage.setItem("bowl-favorites",JSON.stringify(Array.from(t)))}},[p]);const{data:g}=Vn({queryKey:["/api/notifications"],retry:!1}),w=(null==g?void 0:g.filter(t=>!t.read).length)||0;Ct.useEffect(()=>{const t=t=>{m.current&&!m.current.contains(t.target)&&l(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[]);const y=[{href:"/",label:"HOME",icon:ds,isActive:"/"===i},{href:"/polls",label:"POLLS",icon:Yi,isActive:"/polls"===i},{href:"/notifications",label:"NOTIFICATIONS",icon:Ui,isActive:"/notifications"===i,badge:w>0?w:0},{href:"/organizations",label:"COMPANIES",icon:$s,isActive:i.startsWith("/organizations")},{href:"/bowls",label:"BOWLS",icon:es,isActive:i.startsWith("/bowls")&&!c}],[v,b]=Ct.useState(!h),x=(t,e)=>{t.stopPropagation(),s(e)};return Ct.useEffect(()=>{l("/profile"===i||"/settings"===i)},[i]),Ct.useEffect(()=>{u&&h&&b(!0)},[u,h]),Gt.jsxs("div",{className:` bg-black border-r border-gray-800 pt-4 flex flex-col h-full transition-all duration-300 ${u?"w-64":"w-20"} relative z-10`,children:[h&&u&&Gt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-5",onClick:()=>d(!1)}),h&&Gt.jsxs("div",{className:"flex justify-between items-center px-4 mb-4",children:[u&&Gt.jsx("h2",{className:"text-sm font-medium text-gray-300 uppercase tracking-wide",children:"Navigation"}),Gt.jsx("button",{onClick:()=>{d(!u),!u&&h&&b(!0)},className:"p-2 rounded-md hover:bg-[#252525] transition-colors duration-200 "+(u?"":"mx-auto"),title:u?"Collapse sidebar":"Expand sidebar",children:u?Gt.jsx(Gi,{className:"w-4 h-4 text-gray-400 transform rotate-90"}):Gt.jsx(Gi,{className:"w-4 h-4 text-gray-400 transform -rotate-90"})})]}),Gt.jsxs("div",{className:"flex-1 flex flex-col scrollbar-hide  overflow-y-auto relative z-10",children:[Gt.jsx(YI,{id:"side-nav",children:Gt.jsxs("nav",{className:"space-y-1 px-3",children:[y.map(t=>{const e=t.icon;return Gt.jsxs(Be,{href:t.href,className:`relative flex items-center px-3 py-3 text-sm font-normal rounded-lg transition-all duration-200 group ${t.isActive?"text-white bg-[#2a2a2a]":"text-gray-200 hover:text-gray-300 hover:bg-[#252525]"} ${u?"":"justify-center"}`,title:u?void 0:t.label,children:[Gt.jsx(_I.div,{className:"relative z-10 "+(u?"mr-3":""),animate:{scale:1,y:0},transition:{type:"spring",stiffness:500,damping:25},children:Gt.jsx(e,{fill:t.isActive?"currentColor":"none",className:"h-5 w-5 flex-shrink-0 transition-all duration-200 "+(t.isActive?"text-white":"text-gray-400")})}),u&&Gt.jsxs("div",{className:"flex justify-between flex-1 items-center",children:[Gt.jsx("span",{className:"relative z-10 truncate font-normal text-sm uppercase",children:t.label}),u&&t.badge&&Gt.jsx("span",{className:" text-xs text-center font-bold p-1 bg-gray-700 text-white rounded-full",children:t.badge>99?"99+":t.badge})]})]},t.href)}),n&&Gt.jsxs("div",{className:"relative",ref:m,children:[Gt.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),l(!c),c||s("/profile")},className:`relative flex items-center w-full px-3 py-3 text-sm font-normal rounded-lg transition-all duration-200 group ${"/profile"===i||"/settings"===i||c?"text-white bg-[#2a2a2a]":"text-gray-400 hover:text-gray-300 hover:bg-[#252525]"} ${u?"":"justify-center"}`,children:[Gt.jsx(_I.div,{className:"relative z-10 "+(u?"mr-3":""),animate:{scale:1,y:0},transition:{type:"spring",stiffness:500,damping:25},children:Gt.jsx(Ws,{className:"h-5 w-5 flex-shrink-0 transition-all duration-200 "+("/profile"===i||"/settings"===i||c?"text-white":"text-gray-400")})}),u&&Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("span",{className:"relative z-10 truncate font-normal text-sm uppercase flex-1 text-left",children:"PROFILE"}),Gt.jsx(Gi,{className:"h-4 w-4 transition-transform duration-200 "+(c?"rotate-180":"")})]})]}),n&&c&&u&&Gt.jsxs("div",{className:"mt-1 ml-3 space-y-1 border-l border-gray-700 pl-3",children:[h&&Gt.jsxs("button",{onClick:t=>x(t,"/create-post"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-400 hover:text-gray-300 hover:bg-[#252525] rounded-lg transition-all duration-200",children:[Gt.jsx(As,{className:"h-4 w-4 mr-3"}),Gt.jsx("span",{className:"text-sm",children:"CREATE"})]}),Gt.jsxs("button",{onClick:t=>x(t,"/bookmarks"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-400 hover:text-gray-300 hover:bg-[#252525] rounded-lg transition-all duration-200",children:[Gt.jsx(Li,{className:"h-4 w-4 mr-3"}),Gt.jsx("span",{className:"text-sm",children:"BOOKMARKS"})]}),Gt.jsxs("button",{onClick:t=>x(t,"/settings"),className:"flex items-center w-full px-3 py-2 text-sm text-gray-400 hover:text-gray-300 hover:bg-[#252525] rounded-lg transition-all duration-200",children:[Gt.jsx(Os,{className:"h-4 w-4 mr-3"}),Gt.jsx("span",{className:"text-sm",children:"SETTINGS"})]}),Gt.jsxs("button",{onClick:async t=>{t.stopPropagation();try{await Hn("POST","/api/auth/logout",{}),localStorage.removeItem("phantom_auth_token"),localStorage.removeItem("bowl-favorites"),localStorage.removeItem("dynamic_store"),localStorage.removeItem("dynamic_device_fingerprint"),localStorage.removeItem("walletName"),localStorage.removeItem("wallet-uicluster"),sessionStorage.clear(),window.location.href="/"}catch(e){localStorage.clear(),sessionStorage.clear(),window.location.href="/"}},className:"flex items-center w-full px-3 py-2 text-sm text-red-400 hover:text-red-300 hover:bg-[#252525] rounded-lg transition-all duration-200",children:[Gt.jsx(vs,{className:"h-4 w-4 mr-3"}),Gt.jsx("span",{className:"text-sm",children:"LOGOUT"})]})]})]})]})}),u&&Gt.jsx("div",{className:"my-6 mx-4 h-px bg-gray-700"}),Gt.jsxs("div",{className:"px-3 mb-6",children:[u&&Gt.jsxs("button",{onClick:()=>b(t=>!t),className:"group w-full px-3 py-2 text-xs font-semibold text-white uppercase tracking-wider mb-2 flex items-center justify-between hover:text-gray-300 transition-all duration-200 hover:bg-[#252525] rounded-md",children:[Gt.jsxs("div",{className:"flex items-center gap-2",children:[Gt.jsx(Bs,{className:"w-4 h-4"}),Gt.jsx("span",{children:"HOT"})]}),Gt.jsx(Gi,{className:"w-4 h-4 transition-transform duration-200 "+(v?"":"rotate-180")})]}),Gt.jsx("div",{className:"space-y-1 overflow-hidden transition-[max-height,opacity] duration-300 "+(v&&u?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:["When will the Government shutdown end?","MegaETH public sale total commitments?","Will Sam Altman get OpenAI equity in 2025?","Active Web3 Contributor","Consistently Supportive and Dedicated"].map((t,e)=>Gt.jsx("div",{className:"px-3 py-2 text-xs underline text-gray-400 hover:text-gray-300 hover:bg-[#252525] rounded transition-all duration-200 cursor-pointer",children:t},e))})]})]}),Gt.jsx("div",{className:"mt-auto px-3 pb-4",children:Gt.jsxs("div",{className:"flex "+(u?"justify-center space-x-3":"flex-col justify-center space-y-3"),children:[Gt.jsx("a",{href:"https://discord.gg/2M4DxRUkXR",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center justify-center p-2 text-sm font-medium text-gray-400 rounded-lg hover:bg-[#252525] hover:text-gray-300 transition-all duration-200",title:"Discord",children:Gt.jsx(Ns,{className:"w-5 h-5 flex-shrink-0"})}),Gt.jsx("a",{href:"https://x.com/Anonn_xyz",target:"_blank",rel:"noopener noreferrer",className:"group flex items-center justify-center p-2 text-sm font-medium text-gray-400 rounded-lg hover:bg-[#252525] hover:text-gray-300 transition-all duration-200",title:"X (Twitter)",children:Gt.jsx(Us,{className:"w-5 h-5 flex-shrink-0"})})]})})]})}var aL="Avatar",[cL,lL]=cr(aL),[uL,dL]=cL(aL),hL=Ct.forwardRef((t,e)=>{const{ir:n,...r}=t,[i,s]=Ct.useState("idle");return Gt.jsx(uL,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:Gt.jsx(wr.span,{...r,ref:e})})});hL.displayName=aL;var fL="AvatarImage",mL=Ct.forwardRef((t,e)=>{const{ir:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=dL(fL,n),a=function(t,{referrerPolicy:e,crossOrigin:n}){const r=Ct.useSyncExternalStore(yL,()=>!0,()=>!1),i=Ct.useRef(null),s=r?(i.current||(i.current=new window.Image),i.current):null,[o,a]=Ct.useState(()=>wL(s,t));return Tr(()=>{a(wL(s,t))},[s,t]),Tr(()=>{const t=t=>()=>{a(t)};if(!s)return;const r=t("loaded"),i=t("error");return s.addEventListener("load",r),s.addEventListener("error",i),e&&(s.referrerPolicy=e),"string"==typeof n&&(s.crossOrigin=n),()=>{s.removeEventListener("load",r),s.removeEventListener("error",i)}},[s,n,e]),o}(r,s),c=vr(t=>{i(t),o.onImageLoadingStatusChange(t)});return Tr(()=>{"idle"!==a&&c(a)},[a,c]),"loaded"===a?Gt.jsx(wr.img,{...s,ref:e,src:r}):null});mL.displayName=fL;var pL="AvatarFallback",gL=Ct.forwardRef((t,e)=>{const{ir:n,delayMs:r,...i}=t,s=dL(pL,n),[o,a]=Ct.useState(void 0===r);return Ct.useEffect(()=>{if(void 0!==r){const t=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(t)}},[r]),o&&"loaded"!==s.imageLoadingStatus?Gt.jsx(wr.span,{...i,ref:e}):null});function wL(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function yL(){return()=>{}}gL.displayName=pL;var vL=hL,bL=mL,xL=gL;const NL=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(vL,{ref:n,className:na("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));NL.displayName=vL.displayName;const kL=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(bL,{ref:n,className:na("aspect-square h-full w-full",t),...e}));kL.displayName=bL.displayName;const ML=Ct.forwardRef(({className:t,...e},n)=>Gt.jsx(xL,{ref:n,className:na("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ML.displayName=xL.displayName;const AL=EF({username:AF().min(3,"Username must be at least 3 characters").max(50,"Username must be less than 50 characters").optional(),bio:AF().max(500,"Bio must be less than 500 characters").optional()});function EL({bowls:t,organizations:e,onCreatePost:n}){var r;const{isAuthenticated:i,user:s,login:o,getAccessToken:a,setDbProfile:c,isLoading:l}=pk(),{setVisible:u}=SR(),{connected:d,publicKey:h,connecting:f}=$y(),{toast:m}=rr(),[p]=je(),[g,w]=Ct.useState(!1),[y,v]=Ct.useState(!1),[b,x]=Ct.useState(!1),[N,k]=Ct.useState(""),[M,A]=Ct.useState(!1),[E,S]=Ct.useState(!1),[C,T]=Ct.useState(""),[I,O]=Ct.useState(""),P="/profile"===p||"/settings"===p,j="/bowls"===p,D="/organizations"===p,z=U$({resolver:Z$(AL),defaultValues:{username:(null==s?void 0:s.username)||"",bio:(null==s?void 0:s.bio)||""}});Ct.useEffect(()=>{s&&z.reset({username:s.username||"",bio:s.bio||""})},[s,z]);const _=async t=>{if(!M){A(!0);try{const e=await a();if(!e)throw new Error("Authentication token not available. Please log in again.");const n=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},credentials:"include",body:JSON.stringify(t)});if(!n.ok){const t=await n.text();throw new Error(t||`Failed to update profile: ${n.status}`)}const r=await n.json();c(r),m({title:"Profile updated!",description:"Your profile has been updated successfully."}),v(!1),x(!1)}catch(e){m({title:"Profile update failed",description:e instanceof Error?e.message:"Unable to update profile. Please try again.",variant:"destructive"})}finally{A(!1)}}};Ct.useEffect(()=>{var t;d&&h&&!i&&!l&&R(),i&&s&&(Boolean(null==(t=s.bio)?void 0:t.trim())||(k(s.bio||""),w(!0)))},[d,h,i,s,l]),Ct.useEffect(()=>{S(f)},[f]);const R=async()=>{try{if(!h)throw new Error("No public key available");await o(),m({title:"Wallet connected!",description:"Successfully authenticated with Anonn."})}catch(t){m({title:"Authentication failed",description:"Failed to authenticate with the server. Please try again.",variant:"destructive"})}};return Gt.jsxs("aside",{className:"hidden md:block w-80 flex-shrink-0",children:[i?Gt.jsxs("div",{className:"my-4 border border-gray-700 bg-black overflow-hidden",children:[Gt.jsx("div",{onClick:n,className:"bg-gradient-to-br cursor-pointer from-[#a8d5e2] to-[#b3d9e6] p-8 h-32 flex items-center justify-center",children:Gt.jsxs("button",{onClick:n,className:"flex items-center gap-2 text-gray-900 hover:text-gray-700 hover:scale-105 font-medium text-base",children:[Gt.jsx(As,{className:"w-5 h-5"}),"CREATE"]})}),Gt.jsxs("div",{className:"grid grid-cols-2 border-t border-gray-700",children:[Gt.jsxs("button",{onClick:n,className:"flex items-center text-white justify-center gap-2 py-3 bg-black hover:bg-gray-900 text-sm font-medium transition-colors border-r border-gray-700",children:[Gt.jsx(Hi,{className:"w-4 h-4"}),"POLL"]}),Gt.jsxs("button",{onClick:n,className:"flex items-center text-white justify-center gap-2 py-3 bg-black hover:bg-gray-900 text-sm font-medium transition-colors",children:[Gt.jsx(ls,{className:"w-4 h-4"}),"POST"]})]})]}):Gt.jsx("div",{className:"mb-4 border border-gray-700 bg-black overflow-hidden",children:Gt.jsx("div",{className:"bg-gradient-to-br from-[#a8d5e2] to-[#b3d9e6] p-8 h-32 flex items-center justify-center",children:Gt.jsx("div",{className:"text-center",children:Gt.jsx(kk,{onClick:()=>{u(!0)},disabled:E,className:"flex items-center gap-2 text-gray-700 text-xl hover:text-gray-900 hover:scale-105 font-medium px-4 py-2 rounded-md transition-colors disabled:opacity-50",children:E?Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(ws,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):Gt.jsxs(Gt.Fragment,{children:[Gt.jsx(ys,{className:"w-4 h-4"}),"Connect Wallet"]})})})})}),!P&&!j&&i&&Gt.jsxs("div",{className:"bg-black border border-gray-700 p-4 mb-4",children:[Gt.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Gt.jsx(es,{className:"h-3 w-3 text-white fill-white"}),Gt.jsx("h3",{className:"font-semibold text-white uppercase text-xs tracking-wide",children:"COMMUNITIES"})]}),Gt.jsx("div",{className:"space-y-2",children:null==t?void 0:t.slice(0,4).map(t=>{var e;return Gt.jsx("div",{children:Gt.jsx("a",{href:`/bowls/${encodeURIComponent(t.name)}`,className:"text-gray-400 hover:text-white transition-colors text-sm block",children:null==(e=t.name)?void 0:e.toLowerCase().replace(/\s+/g,"")})},t.id)})})]}),i&&!P&&!D&&Gt.jsxs("div",{className:"bg-black border border-gray-700 p-4",children:[Gt.jsxs("h3",{className:"text-xs text-white font-semibold mb-4 flex items-center gap-2 uppercase tracking-wide",children:[Gt.jsx($s,{className:"w-3 h-3 fill-white text-white"}),"COMPANIES"]}),Gt.jsx("div",{className:"space-y-3",children:null==e?void 0:e.slice(0,5).map((t,e)=>{var n;const r=(t=>{const e=[{bg:"bg-emerald-400",text:"text-white"},{bg:"bg-purple-600",text:"text-white"},{bg:"bg-blue-600",text:"text-white"},{bg:"bg-gradient-to-br from-purple-500 to-pink-500",text:"text-white"},{bg:"bg-yellow-400",text:"text-gray-900"}];return e[t%e.length]})(e);return Gt.jsxs("div",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:`w-9 h-9 ${r.bg} rounded flex items-center justify-center flex-shrink-0`,children:Gt.jsx("span",{className:`text-lg font-bold ${r.text}`,children:null==(n=t.name)?void 0:n.charAt(0).toUpperCase()})}),Gt.jsx("span",{className:"flex-1 text-sm text-gray-300 truncate",children:t.name}),Gt.jsxs("div",{className:"flex items-center flex-shrink-0",children:[Gt.jsx("div",{className:"px-2 py-2 bg-emerald-300 text-gray-900  text-xs font-bold min-w-[32px] text-center",children:Math.floor(40*Math.random())+60}),Gt.jsx("div",{className:"px-2 py-2 bg-red-300 text-red-900  text-xs font-bold min-w-[32px] text-center",children:Math.floor(40*Math.random())+30})]})]},t.id)})})]}),i&&P&&Gt.jsxs("div",{className:"mt-4 bg-black border border-gray-700 overflow-hidden",children:[Gt.jsx("div",{className:"relative p-4",children:Gt.jsxs("div",{className:"relative w-56 h-60 mx-auto",children:[Gt.jsxs(NL,{className:"w-full h-full rounded-none",children:[Gt.jsx(kL,{src:(null==s?void 0:s.profileImageUrl)||"https://res.cloudinary.com/backend969/image/upload/v1762989309/c3c53349d65202c7653c4f4e2bdfae8ef9a43aa0_bzwk87.png",className:"object-cover"}),Gt.jsx(ML,{className:"bg-gray-800 text-white font-bold text-4xl rounded-none",children:(null==(r=null==s?void 0:s.username)?void 0:r.charAt(0).toUpperCase())||"U"})]}),Gt.jsx("button",{onClick:()=>{O((null==s?void 0:s.profileImageUrl)||""),x(!0)},className:"absolute bottom-4 right-4 w-10 h-10 bg-black/80 hover:bg-black flex items-center justify-center transition-colors",children:Gt.jsx(Vi,{className:"w-4 h-4 text-white"})})]})}),Gt.jsxs("div",{className:"p-4",children:[Gt.jsxs("div",{className:"relative border px-5 border-gray-700 p",children:[Gt.jsx("div",{className:"absolute -top-4 px-2 py-1 bg-black text-xs inline-block text-gray-500 border border-gray-700 uppercase tracking-wider",children:"USERNAME"}),Gt.jsxs("div",{className:"flex items-center justify-between pt-8 py-4",children:[Gt.jsx("span",{className:"text-gray-300 underline text-lg font-medium",children:(null==s?void 0:s.username)||"user1234"}),Gt.jsx("button",{onClick:()=>{T((null==s?void 0:s.username)||""),v(!0)},className:"w-8 h-8 flex items-center justify-center hover:bg-gray-800 transition-colors",children:Gt.jsx(As,{className:"w-4 h-4 text-gray-400"})})]})]}),Gt.jsxs("div",{className:"grid grid-cols-3 border border-gray-700",children:[Gt.jsx("div",{className:"flex items-center bg-gray-100 justify-center",children:Gt.jsx(Ps,{className:"w-6 h-6 "})}),Gt.jsxs("div",{className:"p-3 flex border items-center justify-center text-gray-400 gap-2 border-gray-700",children:[Gt.jsx(qi,{className:"w-4 h-4"}),Gt.jsx("div",{className:"text-md",children:(null==s?void 0:s.karma)||40})]}),Gt.jsxs("div",{className:"p-3 flex items-center justify-center gap-2 text-center text-gray-400",children:[Gt.jsx(Ki,{className:"w-4 h-4 "}),Gt.jsx("div",{className:"text-md",children:"25"})]})]})]})]}),Gt.jsx(FP,{open:y,onOpenChange:v,children:Gt.jsxs(qP,{className:"sm:max-w-md border-0 shadow-2xl bg-black border-gray-700",children:[Gt.jsxs(KP,{className:"text-center pb-4",children:[Gt.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#a8d5e2] to-[#b3d9e6] rounded-2xl mb-4",children:Gt.jsx(As,{className:"h-8 w-8 text-gray-900"})}),Gt.jsx(YP,{className:"text-2xl font-bold text-white",children:"Edit Username"}),Gt.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Choose a new username for your profile"})]}),Gt.jsx("div",{className:"space-y-4",children:Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Username"}),Gt.jsx(ZI,{placeholder:"Enter new username...",value:C,onChange:t=>T(t.target.value),className:"rounded-xl border-gray-600 bg-gray-900 text-white focus:border-[#a8d5e2] focus:ring-[#a8d5e2]/20 h-12"})]})}),Gt.jsx(HP,{className:"pt-6",children:Gt.jsx(kk,{disabled:M||!C.trim(),onClick:async()=>{C.trim()&&await _({username:C.trim()})},className:"w-full h-12 bg-gradient-to-r from-[#a8d5e2] to-[#b3d9e6] text-gray-900 font-bold rounded-xl disabled:opacity-50 shadow-lg hover:from-[#9bc8d5] hover:to-[#a6ccd9]",children:M?Gt.jsxs("span",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"w-5 h-5 border-2 border-gray-900/30 border-t-gray-900 rounded-full animate-spin"}),"Updating..."]}):Gt.jsxs("span",{className:"flex items-center gap-2",children:["Update Username",Gt.jsx(_i,{className:"h-4 w-4"})]})})})]})}),Gt.jsx(FP,{open:b,onOpenChange:x,children:Gt.jsxs(qP,{className:"sm:max-w-md border-0 shadow-2xl bg-black border-gray-700",children:[Gt.jsxs(KP,{className:"text-center pb-4",children:[Gt.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#a8d5e2] to-[#b3d9e6] rounded-2xl mb-4",children:Gt.jsx(Vi,{className:"h-8 w-8 text-gray-900"})}),Gt.jsx(YP,{className:"text-2xl font-bold text-white",children:"Update Profile Image"}),Gt.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Enter a URL for your new profile image"})]}),Gt.jsxs("div",{className:"space-y-4",children:[Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Image URL"}),Gt.jsx(ZI,{placeholder:"https://example.com/image.jpg",value:I,onChange:t=>O(t.target.value),className:"rounded-xl border-gray-600 bg-gray-900 text-white focus:border-[#a8d5e2] focus:ring-[#a8d5e2]/20 h-12"}),Gt.jsx("p",{className:"text-xs text-gray-500",children:"Enter a direct link to your profile image"})]}),I&&Gt.jsx("div",{className:"flex justify-center",children:Gt.jsx("div",{className:"w-20 h-20 border border-gray-600 rounded overflow-hidden",children:Gt.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none"}})})})]}),Gt.jsx(HP,{className:"pt-6",children:Gt.jsx(kk,{disabled:M||!I.trim(),onClick:async()=>{if(I.trim()){try{new URL(I)}catch(t){return void m({title:"Invalid URL",description:"Please enter a valid image URL",variant:"destructive"})}await _({...z.getValues()})}else m({title:"Image URL required",description:"Please enter a valid image URL",variant:"destructive"})},className:"w-full h-12 bg-gradient-to-r from-[#a8d5e2] to-[#b3d9e6] text-gray-900 font-bold rounded-xl disabled:opacity-50 shadow-lg hover:from-[#9bc8d5] hover:to-[#a6ccd9]",children:M?Gt.jsxs("span",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"w-5 h-5 border-2 border-gray-900/30 border-t-gray-900 rounded-full animate-spin"}),"Updating Image..."]}):Gt.jsxs("span",{className:"flex items-center gap-2",children:["Update Image",Gt.jsx(_i,{className:"h-4 w-4"})]})})})]})}),Gt.jsx(FP,{open:g,onOpenChange:w,children:Gt.jsxs(qP,{className:"sm:max-w-md border-0 shadow-2xl bg-black border-gray-700",children:[Gt.jsxs(KP,{className:"text-center pb-4",children:[Gt.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-[#a8d5e2] to-[#b3d9e6] rounded-2xl mb-4",children:Gt.jsx(As,{className:"h-8 w-8 text-gray-900"})}),Gt.jsx(YP,{className:"text-2xl font-bold text-white",children:"Complete your profile"}),Gt.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Help us personalize your experience"})]}),Gt.jsx("div",{className:"space-y-4",children:Gt.jsxs("div",{className:"space-y-2",children:[Gt.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Bio (Optional)"}),Gt.jsx(ZI,{placeholder:"Tell us about yourself...",value:N,onChange:t=>k(t.target.value),className:"rounded-xl border-gray-600 bg-gray-900 text-white focus:border-[#a8d5e2] focus:ring-[#a8d5e2]/20 h-12"})]})}),Gt.jsx(HP,{className:"pt-6",children:Gt.jsx(kk,{disabled:M,onClick:async function(){if(!M){A(!0);try{const t=await a();if(!t)throw new Error("Authentication token not available. Please try logging in again.");const e={bio:N.trim()||void 0},n=await fetch("/api/users/me",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},credentials:"include",body:JSON.stringify(e)});if(!n.ok){const t=await n.text();throw new Error(t||`Failed to update profile: ${n.status}`)}const r=await n.json();c(r),m({title:"Profile completed!",description:"Your profile has been set up successfully."}),w(!1)}catch(t){m({title:"Profile update failed",description:t instanceof Error?t.message:"Unable to complete your profile. Please try again.",variant:"destructive"})}finally{A(!1)}}},className:"w-full h-12 bg-gradient-to-r from-[#a8d5e2] to-[#b3d9e6] text-gray-900 font-bold rounded-xl disabled:opacity-50 shadow-lg hover:from-[#9bc8d5] hover:to-[#a6ccd9]",children:M?Gt.jsxs("span",{className:"flex items-center gap-3",children:[Gt.jsx("div",{className:"w-5 h-5 border-2 border-gray-900/30 border-t-gray-900 rounded-full animate-spin"}),"Completing Profile..."]}):Gt.jsxs("span",{className:"flex items-center gap-2",children:["Complete Profile",Gt.jsx(_i,{className:"h-4 w-4"})]})})})]})})]})}function SL({onCreatePost:t,bowls:e,organizations:n,children:r}){const{isAuthenticated:i,isLoading:s}=pk();return s?Gt.jsxs("div",{className:"min-h-screen bg-[#0a0a0a]",children:[Gt.jsx(ej,{}),Gt.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:Gt.jsx("div",{className:"flex justify-center items-center h-64",children:Gt.jsxs("div",{className:"text-center animate-pulse",children:[Gt.jsx(vR,{className:"h-12 w-48 mx-auto mb-4"}),Gt.jsx(vR,{className:"h-6 w-64 mx-auto"})]})})})]}):Gt.jsxs("div",{className:"min-h-screen bg-[#0a0a0a]",children:[Gt.jsx(ej,{}),Gt.jsxs("div",{className:"flex w-full pt-14",children:[Gt.jsx("aside",{className:"fixed top-14 left-0 h-[calc(100vh-3.5rem)] bg-[#0a0a0a] border-r border-gray-800 overflow-y-auto z-10",children:Gt.jsx(oL,{onCreatePost:t,onCreateReview:t})}),Gt.jsx("main",{className:"flex-1 min-w-0 bg-[#0a0a0a] overflow-y-auto transition-all duration-300 ml-20 lg:ml-64 lg:mr-80",children:r}),Gt.jsx("aside",{className:"hidden lg:block fixed top-14 right-0 w-80 h-[calc(100vh-3.5rem)] overflow-y-auto",children:Gt.jsx(EL,{bowls:e,organizations:n,onCreatePost:t})})]})]})}function CL(){const t=Ct.useMemo(()=>function(t){const e="https",n=yy[e][t];if(!n)throw new Error(`Unknown ${e} cluster: ${t}`);return n}("devnet"),[]),e=Ct.useMemo(()=>[new tB],[]);return Gt.jsx(xy,{endpoint:t,children:Gt.jsx(uk,{wallets:e,autoConnect:!0,children:Gt.jsx(zR,{children:Gt.jsx(Bn,{client:Yn,children:Gt.jsx(mk,{children:Gt.jsxs(zl,{children:[Gt.jsx(da,{}),Gt.jsx(vk,{}),Gt.jsx(TL,{})]})})})})})})}function TL(){const{isAuthenticated:t,isLoading:e}=pk();(()=>{var t;const e=Ct.useRef(null),{toast:n}=rr(),r=Rn(),i=Ct.useRef(),s=Ct.useRef(0),o=Ct.useCallback(()=>{var t;if((null==(t=e.current)?void 0:t.readyState)===WebSocket.OPEN)return;const a=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.hostname}:3000/ws`,c=new WebSocket(a);e.current=c,c.onopen=()=>{s.current=0},c.onmessage=t=>{try{const e=JSON.parse(t.data);switch(e.type){case"connected":case"pong":break;case"notification":e.notification&&(n({title:"New notification",description:e.notification.content}),r.invalidateQueries({queryKey:["notifications"]}));break;case"feed_update":"comment"===e.action&&(r.invalidateQueries({queryKey:["posts"]}),r.invalidateQueries({queryKey:["/api/posts"]}))}}catch(e){}},c.onclose=t=>{if(1e3!==t.code&&s.current<5){const t=Math.min(1e3*Math.pow(2,s.current),3e4);i.current=setTimeout(()=>{s.current++,o()},t)}},c.onerror=t=>{}},[r,n]),a=Ct.useCallback(()=>{i.current&&clearTimeout(i.current),e.current&&(e.current.close(1e3,"User disconnect"),e.current=null)},[]),c=Ct.useCallback(t=>{var n;(null==(n=e.current)?void 0:n.readyState)===WebSocket.OPEN&&e.current.send(JSON.stringify(t))},[]);Ct.useEffect(()=>{const t=setInterval(()=>{var t;(null==(t=e.current)?void 0:t.readyState)===WebSocket.OPEN&&c({type:"ping"})},3e4);return()=>clearInterval(t)},[c]),Ct.useEffect(()=>(o(),()=>{a()}),[o,a]),null==(t=e.current)||t.readyState,WebSocket.OPEN})(),function(){const[t]=je();Ct.useEffect(()=>{window.scrollTo(0,0)},[t])}();const[,n]=je(),{data:r}=Vn({queryKey:["/api/bowls"],retry:!1,refetchInterval:3e4,refetchIntervalInBackground:!0}),{data:i}=Vn({queryKey:["/api/organizations"],retry:!1,refetchInterval:3e4,refetchIntervalInBackground:!0}),s=()=>{n(t?"/create-post":"/auth")};return e?Gt.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#0e0e0e] text-gray-300",children:[Gt.jsxs("div",{className:"relative flex items-center justify-center mb-6",children:[Gt.jsx("div",{className:"h-14 w-14 border-2 border-gray-700 border-t-gray-200 rounded-full animate-spin"}),Gt.jsx("div",{className:"absolute h-14 w-14 border-2 border-gray-700 rounded-full animate-ping opacity-10"})]}),Gt.jsxs("h2",{className:"text-lg font-mono tracking-wide text-gray-300 mb-3",children:["Loading ",Gt.jsx("span",{className:"text-gray-100",children:"Anonn"}),"..."]}),Gt.jsxs("div",{className:"flex justify-center space-x-2",children:[Gt.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),Gt.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),Gt.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}):Gt.jsxs(Ue,{children:[Gt.jsx(Re,{path:"/",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(rB,{onCreatePost:s,onExploreCommunities:()=>n("/bowls"),isAuthenticated:t})})}),Gt.jsx(Re,{path:"/polls",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(ZF,{})})}),Gt.jsx(Re,{path:"/organizations",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(UF,{})})}),Gt.jsx(Re,{path:"/notifications",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(AB,{})})}),Gt.jsx(Re,{path:"/bowls",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(FF,{})})}),Gt.jsx(Re,{path:"/bookmarks",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(iL,{})})}),Gt.jsx(Re,{path:"/profile",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(LF,{onCreatePost:function(){throw new Error("Function not implemented.")},onExploreCommunities:function(){throw new Error("Function not implemented.")},isAuthenticated:!1})})}),Gt.jsx(Re,{path:"/organizations/:id",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(EB,{})})}),Gt.jsx(Re,{path:"/poll",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(HF,{})})}),Gt.jsx(Re,{path:"/post",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(nL,{})})}),Gt.jsx(Re,{path:"/bowls/:id",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(rL,{})})}),Gt.jsx(Re,{path:"/settings",children:Gt.jsx(SL,{onCreatePost:s,bowls:r,organizations:i,children:Gt.jsx(sL,{})})}),Gt.jsx(Re,{path:"/auth",component:Ak}),Gt.jsx(Re,{path:"/create-post",component:tj}),Gt.jsx(Re,{path:"/search",component:MR}),Gt.jsx(Re,{path:"/*",component:Mk})]})}let IL=!1,OL=!1;async function PL(){await Promise.all([jL(),DL(),zL(),_L(),RL(),BL()])}async function jL(){let t={open:!1,orientation:null};setInterval(()=>{window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160?t.open||(t.open=!0,$L("DevTools detected via window size")):t.open=!1},1e3),setInterval(()=>{const t=performance.now();performance.now()-t>100&&$L("DevTools detected via debugger timing")},2e3);let e=new Image;Object.defineProperty(e,"id",{get:function(){$L("DevTools detected via console access")}}),setTimeout(()=>{},1e3)}async function DL(){const t={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug};Object.keys(t).forEach(t=>{console[t]=function(...t){OL||(OL=!0,$L("Console usage detected"))}});const e=console.clear;console.clear=function(){return $L("Console clear detected"),e.apply(console)}}async function zL(){const t=window.fetch;window.fetch=function(...e){const n=e[0];return"string"==typeof n&&(n.includes("localhost")||n.includes("127.0.0.1"))&&(n.includes(window.location.origin)||$L(`Suspicious fetch to: ${n}`)),t.apply(this,e)};const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...t){const n=t[1];return"string"==typeof n&&(n.includes("localhost")||n.includes("127.0.0.1"))&&(n.includes(window.location.origin)||$L(`Suspicious XHR to: ${n}`)),e.apply(this,t)}}async function _L(){document.addEventListener("contextmenu",t=>{t.preventDefault(),$L("Right-click attempted")}),document.addEventListener("keydown",t=>{("F12"===t.key||t.ctrlKey&&t.shiftKey&&"I"===t.key||t.ctrlKey&&t.shiftKey&&"J"===t.key||t.ctrlKey&&"U"===t.key||t.ctrlKey&&t.shiftKey&&"C"===t.key)&&(t.preventDefault(),$L(`Debugging shortcut attempted: ${t.key}`))}),new MutationObserver(t=>{t.forEach(t=>{"childList"===t.type&&t.addedNodes.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const e=t;if("SCRIPT"===e.tagName){const t=e.getAttribute("src");t&&!t.startsWith(window.location.origin)&&$L(`Suspicious script injection: ${t}`)}}})})}).observe(document.body,{childList:!0,subtree:!0})}async function RL(){const t=window.setTimeout,e=window.setInterval;window.setTimeout=function(e,n,...r){const i=n+10*Math.random();return t(e,i,...r)},window.setInterval=function(t,n,...r){const i=n+10*Math.random();return e(t,i,...r)}}async function BL(){const t=["fetch","XMLHttpRequest","eval","Function","setTimeout","setInterval"],e=new Map;t.forEach(t=>{const n=window[t];n&&e.set(t,n.toString())}),setInterval(()=>{t.forEach(t=>{const n=window[t];if(n){const r=n.toString(),i=e.get(t);i&&r!==i&&$L(`Function tampering detected: ${t}`)}})},5e3)}function $L(t){IL||(IL=!0,fetch("/api/security/violation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href})}).catch(()=>{}),(t.includes("DevTools")||t.includes("Console"))&&(localStorage.clear(),sessionStorage.clear(),setTimeout(()=>{window.location.href="/"},1e3)))}let UL=null,FL=null;async function LL(){await WL(),FL=setInterval(WL,9e5)}async function WL(){try{const t=await fetch("/api/security/key-exchange",{method:"POST",headers:{"Content-Type":"application/json","X-Key-Request":"rotation"}});if(t.ok){const e=await t.json();UL=e.key}else UL=VL()}catch(t){UL=VL()}}function VL(){const t=new Uint8Array(32);return crypto.getRandomValues(t),Array.from(t,t=>t.toString(16).padStart(2,"0")).join("")}window.addEventListener("beforeunload",()=>{FL&&clearInterval(FL)}),"undefined"!=typeof window&&(window.Buffer=_l.Buffer,window.global=window),"undefined"!=typeof globalThis&&(globalThis.Buffer=_l.Buffer),async function(){try{await Promise.all([PL(),LL()])}catch(t){}}(),Zt(document.getElementById("root")).render(Gt.jsx(CL,{}));
